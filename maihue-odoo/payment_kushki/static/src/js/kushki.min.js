/*! For license information please see kushki.min.js.LICENSE.txt */
var Kushki=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=336)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__extends",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,"__assign",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,"__rest",(function(){return __rest})),__webpack_require__.d(__webpack_exports__,"__decorate",(function(){return __decorate})),__webpack_require__.d(__webpack_exports__,"__param",(function(){return __param})),__webpack_require__.d(__webpack_exports__,"__metadata",(function(){return __metadata})),__webpack_require__.d(__webpack_exports__,"__awaiter",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,"__generator",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,"__exportStar",(function(){return __exportStar})),__webpack_require__.d(__webpack_exports__,"__values",(function(){return __values})),__webpack_require__.d(__webpack_exports__,"__read",(function(){return __read})),__webpack_require__.d(__webpack_exports__,"__spread",(function(){return __spread})),__webpack_require__.d(__webpack_exports__,"__await",(function(){return __await})),__webpack_require__.d(__webpack_exports__,"__asyncGenerator",(function(){return __asyncGenerator})),__webpack_require__.d(__webpack_exports__,"__asyncDelegator",(function(){return __asyncDelegator})),__webpack_require__.d(__webpack_exports__,"__asyncValues",(function(){return __asyncValues})),__webpack_require__.d(__webpack_exports__,"__makeTemplateObject",(function(){return __makeTemplateObject})),__webpack_require__.d(__webpack_exports__,"__importStar",(function(){return __importStar})),__webpack_require__.d(__webpack_exports__,"__importDefault",(function(){return __importDefault}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __exportStar(m,exports){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var m="function"==typeof Symbol&&o[Symbol.iterator],i=0;return m?m.call(o):{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}}}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),constructStack=function(){var absoluteEntries=[],relativeEntries=[],entriesNameSet=new Set,cloneTo=function(toStack){return absoluteEntries.forEach((function(entry){toStack.add(entry.middleware,Object(tslib_es6.__assign)({},entry))})),relativeEntries.forEach((function(entry){toStack.addRelativeTo(entry.middleware,Object(tslib_es6.__assign)({},entry))})),toStack},expandRelativeMiddlewareList=function(from){var expandedMiddlewareList=[];return from.before.forEach((function(entry){0===entry.before.length&&0===entry.after.length?expandedMiddlewareList.push(entry):expandedMiddlewareList.push.apply(expandedMiddlewareList,Object(tslib_es6.__spread)(expandRelativeMiddlewareList(entry)))})),expandedMiddlewareList.push(from),from.after.reverse().forEach((function(entry){0===entry.before.length&&0===entry.after.length?expandedMiddlewareList.push(entry):expandedMiddlewareList.push.apply(expandedMiddlewareList,Object(tslib_es6.__spread)(expandRelativeMiddlewareList(entry)))})),expandedMiddlewareList},getMiddlewareList=function(){var entries,normalizedAbsoluteEntries=[],normalizedRelativeEntries=[],normalizedEntriesNameMap={};return absoluteEntries.forEach((function(entry){var normalizedEntry=Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},entry),{before:[],after:[]});normalizedEntry.name&&(normalizedEntriesNameMap[normalizedEntry.name]=normalizedEntry),normalizedAbsoluteEntries.push(normalizedEntry)})),relativeEntries.forEach((function(entry){var normalizedEntry=Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},entry),{before:[],after:[]});normalizedEntry.name&&(normalizedEntriesNameMap[normalizedEntry.name]=normalizedEntry),normalizedRelativeEntries.push(normalizedEntry)})),normalizedRelativeEntries.forEach((function(entry){if(entry.toMiddleware){var toMiddleware=normalizedEntriesNameMap[entry.toMiddleware];if(void 0===toMiddleware)throw new Error(entry.toMiddleware+" is not found when adding "+(entry.name||"anonymous")+" middleware "+entry.relation+" "+entry.toMiddleware);"after"===entry.relation&&toMiddleware.after.push(entry),"before"===entry.relation&&toMiddleware.before.push(entry)}})),(entries=normalizedAbsoluteEntries,entries.sort((function(a,b){return stepWeights[b.step]-stepWeights[a.step]||priorityWeights[b.priority||"normal"]-priorityWeights[a.priority||"normal"]}))).map(expandRelativeMiddlewareList).reduce((function(wholeList,expendedMiddlewareList){return wholeList.push.apply(wholeList,Object(tslib_es6.__spread)(expendedMiddlewareList)),wholeList}),[]).map((function(entry){return entry.middleware}))},stack={add:function(middleware,options){void 0===options&&(options={});var name=options.name,override=options.override,entry=Object(tslib_es6.__assign)({step:"initialize",priority:"normal",middleware:middleware},options);if(name){if(entriesNameSet.has(name)){if(!override)throw new Error("Duplicate middleware name '"+name+"'");var toOverrideIndex=absoluteEntries.findIndex((function(entry){return entry.name===name})),toOverride=absoluteEntries[toOverrideIndex];if(toOverride.step!==entry.step||toOverride.priority!==entry.priority)throw new Error('"'+name+'" middleware with '+toOverride.priority+" priority in "+toOverride.step+" step cannot be overridden by same-name middleware with "+entry.priority+" priority in "+entry.step+" step.");absoluteEntries.splice(toOverrideIndex,1)}entriesNameSet.add(name)}absoluteEntries.push(entry)},addRelativeTo:function(middleware,options){var name=options.name,override=options.override,entry=Object(tslib_es6.__assign)({middleware:middleware},options);if(name){if(entriesNameSet.has(name)){if(!override)throw new Error("Duplicate middleware name '"+name+"'");var toOverrideIndex=relativeEntries.findIndex((function(entry){return entry.name===name})),toOverride=relativeEntries[toOverrideIndex];if(toOverride.toMiddleware!==entry.toMiddleware||toOverride.relation!==entry.relation)throw new Error('"'+name+'" middleware '+toOverride.relation+' "'+toOverride.toMiddleware+'" middleware cannot be overridden by same-name middleware '+entry.relation+' "'+entry.toMiddleware+'" middleware.');relativeEntries.splice(toOverrideIndex,1)}entriesNameSet.add(name)}relativeEntries.push(entry)},clone:function(){return cloneTo(constructStack())},use:function(plugin){plugin.applyToStack(stack)},remove:function(toRemove){return"string"==typeof toRemove?function(toRemove){var isRemoved=!1,filterCb=function(entry){return!entry.name||entry.name!==toRemove||(isRemoved=!0,entriesNameSet.delete(toRemove),!1)};return absoluteEntries=absoluteEntries.filter(filterCb),relativeEntries=relativeEntries.filter(filterCb),isRemoved}(toRemove):function(toRemove){var isRemoved=!1,filterCb=function(entry){return entry.middleware!==toRemove||(isRemoved=!0,entry.name&&entriesNameSet.delete(entry.name),!1)};return absoluteEntries=absoluteEntries.filter(filterCb),relativeEntries=relativeEntries.filter(filterCb),isRemoved}(toRemove)},removeByTag:function(toRemove){var isRemoved=!1,filterCb=function(entry){var tags=entry.tags,name=entry.name;return!tags||!tags.includes(toRemove)||(name&&entriesNameSet.delete(name),isRemoved=!0,!1)};return absoluteEntries=absoluteEntries.filter(filterCb),relativeEntries=relativeEntries.filter(filterCb),isRemoved},concat:function(from){var cloned=cloneTo(constructStack());return cloned.use(from),cloned},applyToStack:cloneTo,resolve:function(handler,context){var e_1,_a;try{for(var _b=Object(tslib_es6.__values)(getMiddlewareList().reverse()),_c=_b.next();!_c.done;_c=_b.next()){handler=(0,_c.value)(handler,context)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return handler}};return stack},stepWeights={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},priorityWeights={high:3,normal:2,low:1},client_Client=function(){function Client(config){this.middlewareStack=constructStack(),this.config=config}return Client.prototype.send=function(command,optionsOrCb,cb){var options="function"!=typeof optionsOrCb?optionsOrCb:void 0,callback="function"==typeof optionsOrCb?optionsOrCb:cb,handler=command.resolveMiddleware(this.middlewareStack,this.config,options);if(!callback)return handler(command).then((function(result){return result.output}));handler(command).then((function(result){return callback(null,result.output)}),(function(err){return callback(err)})).catch((function(){}))},Client.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},Client}(),command_Command=function(){this.middlewareStack=constructStack()};function extendedEncodeURIComponent(str){return encodeURIComponent(str).replace(/[!'()*]/g,(function(c){return"%"+c.charCodeAt(0).toString(16)}))}var getArrayIfSingleItem=function(mayBeArray){return Array.isArray(mayBeArray)?mayBeArray:[mayBeArray]},getValueFromTextNode=function(obj){for(var key in obj)obj.hasOwnProperty(key)&&void 0!==obj[key]["#text"]?obj[key]=obj[key]["#text"]:"object"==typeof obj[key]&&null!==obj[key]&&(obj[key]=getValueFromTextNode(obj[key]));return obj},StringWrapper=function(){var Class=Object.getPrototypeOf(this).constructor,Constructor=Function.bind.apply(String,Object(tslib_es6.__spread)([null],arguments)),instance=new Constructor;return Object.setPrototypeOf(instance,Class.prototype),instance};StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:StringWrapper,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(StringWrapper,String);var lazy_json_LazyJsonString=function(_super){function LazyJsonString(){return null!==_super&&_super.apply(this,arguments)||this}return Object(tslib_es6.__extends)(LazyJsonString,_super),LazyJsonString.prototype.deserializeJSON=function(){return JSON.parse(_super.prototype.toString.call(this))},LazyJsonString.prototype.toJSON=function(){return _super.prototype.toString.call(this)},LazyJsonString.fromObject=function(object){return object instanceof LazyJsonString?object:new LazyJsonString(object instanceof String||"string"==typeof object?object:JSON.stringify(object))},LazyJsonString}(StringWrapper),days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function dateToUtcString(date){var year=date.getUTCFullYear(),month=date.getUTCMonth(),dayOfWeek=date.getUTCDay(),dayOfMonthInt=date.getUTCDate(),hoursInt=date.getUTCHours(),minutesInt=date.getUTCMinutes(),secondsInt=date.getUTCSeconds();return days[dayOfWeek]+", "+(dayOfMonthInt<10?"0"+dayOfMonthInt:""+dayOfMonthInt)+" "+months[month]+" "+year+" "+(hoursInt<10?"0"+hoursInt:""+hoursInt)+":"+(minutesInt<10?"0"+minutesInt:""+minutesInt)+":"+(secondsInt<10?"0"+secondsInt:""+secondsInt)+" GMT"}__webpack_require__.d(__webpack_exports__,"a",(function(){return client_Client})),__webpack_require__.d(__webpack_exports__,"b",(function(){return command_Command})),__webpack_require__.d(__webpack_exports__,"f",(function(){return extendedEncodeURIComponent})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getArrayIfSingleItem})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getValueFromTextNode})),__webpack_require__.d(__webpack_exports__,"c",(function(){return lazy_json_LazyJsonString})),__webpack_require__.d(__webpack_exports__,"e",(function(){return dateToUtcString})),__webpack_require__.d(__webpack_exports__,"d",(function(){return"***SensitiveInformation***"}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,"a",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,"b",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,"d",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,"e",(function(){return __read}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.create;function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}Object.create},function(module,__webpack_exports__,__webpack_require__){"use strict";var HttpResponse=function(){function HttpResponse(options){this.statusCode=options.statusCode,this.headers=options.headers||{},this.body=options.body}return HttpResponse.isInstance=function(response){if(!response)return!1;var resp=response;return"number"==typeof resp.statusCode&&"object"==typeof resp.headers},HttpResponse}(),tslib_es6=__webpack_require__(0),httpRequest_HttpRequest=function(){function HttpRequest(options){this.method=options.method||"GET",this.hostname=options.hostname||"localhost",this.port=options.port,this.query=options.query||{},this.headers=options.headers||{},this.body=options.body,this.protocol=options.protocol?":"!==options.protocol.substr(-1)?options.protocol+":":options.protocol:"https:",this.path=options.path?"/"!==options.path.charAt(0)?"/"+options.path:options.path:"/"}return HttpRequest.isInstance=function(request){if(!request)return!1;var req=request;return"method"in req&&"protocol"in req&&"hostname"in req&&"path"in req&&"object"==typeof req.query&&"object"==typeof req.headers},HttpRequest.prototype.clone=function(){var query,cloned=new HttpRequest(Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},this),{headers:Object(tslib_es6.__assign)({},this.headers)}));return cloned.query&&(cloned.query=(query=cloned.query,Object.keys(query).reduce((function(carry,paramName){var _a,param=query[paramName];return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},carry),((_a={})[paramName]=Array.isArray(param)?Object(tslib_es6.__spread)(param):param,_a))}),{}))),cloned},HttpRequest}();__webpack_require__.d(__webpack_exports__,"b",(function(){return HttpResponse})),__webpack_require__.d(__webpack_exports__,"a",(function(){return httpRequest_HttpRequest}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Subscriber}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_util_isFunction__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81),_Observer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(128),_Subscription__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(99),_config__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(49),_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(98),Subscriber=function(_super){function Subscriber(destinationOrNext,error,complete){var _this=_super.call(this)||this;switch(_this.syncErrorValue=null,_this.syncErrorThrown=!1,_this.syncErrorThrowable=!1,_this.isStopped=!1,arguments.length){case 0:_this.destination=_Observer__WEBPACK_IMPORTED_MODULE_2__.a;break;case 1:if(!destinationOrNext){_this.destination=_Observer__WEBPACK_IMPORTED_MODULE_2__.a;break}if("object"==typeof destinationOrNext){if(isTrustedSubscriber(destinationOrNext)){var trustedSubscriber=destinationOrNext[_internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_4__.a]();_this.syncErrorThrowable=trustedSubscriber.syncErrorThrowable,_this.destination=trustedSubscriber,trustedSubscriber.add(_this)}else _this.syncErrorThrowable=!0,_this.destination=new SafeSubscriber(_this,destinationOrNext);break}default:_this.syncErrorThrowable=!0,_this.destination=new SafeSubscriber(_this,destinationOrNext,error,complete)}return _this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(Subscriber,_super),Subscriber.prototype[_internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_4__.a]=function(){return this},Subscriber.create=function(next,error,complete){var subscriber=new Subscriber(next,error,complete);return subscriber.syncErrorThrowable=!1,subscriber},Subscriber.prototype.next=function(value){this.isStopped||this._next(value)},Subscriber.prototype.error=function(err){this.isStopped||(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){this.destination.error(err),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber.prototype._unsubscribeAndRecycle=function(){var _parent=this._parent,_parents=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=_parent,this._parents=_parents,this},Subscriber}(_Subscription__WEBPACK_IMPORTED_MODULE_3__.a),SafeSubscriber=function(_super){function SafeSubscriber(_parentSubscriber,observerOrNext,error,complete){var next,_this=_super.call(this)||this;_this._parentSubscriber=_parentSubscriber;var context=_this;return Object(_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.a)(observerOrNext)?next=observerOrNext:observerOrNext&&(next=observerOrNext.next,error=observerOrNext.error,complete=observerOrNext.complete,observerOrNext!==_Observer__WEBPACK_IMPORTED_MODULE_2__.a&&(context=Object.create(observerOrNext),Object(_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.a)(context.unsubscribe)&&_this.add(context.unsubscribe.bind(context)),context.unsubscribe=_this.unsubscribe.bind(_this))),_this._context=context,_this._next=next,_this._error=error,_this._complete=complete,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(SafeSubscriber,_super),SafeSubscriber.prototype.next=function(value){if(!this.isStopped&&this._next){var _parentSubscriber=this._parentSubscriber;_config__WEBPACK_IMPORTED_MODULE_5__.a.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?this.__tryOrSetError(_parentSubscriber,this._next,value)&&this.unsubscribe():this.__tryOrUnsub(this._next,value)}},SafeSubscriber.prototype.error=function(err){if(!this.isStopped){var _parentSubscriber=this._parentSubscriber,useDeprecatedSynchronousErrorHandling=_config__WEBPACK_IMPORTED_MODULE_5__.a.useDeprecatedSynchronousErrorHandling;if(this._error)useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,this._error,err),this.unsubscribe()):(this.__tryOrUnsub(this._error,err),this.unsubscribe());else if(_parentSubscriber.syncErrorThrowable)useDeprecatedSynchronousErrorHandling?(_parentSubscriber.syncErrorValue=err,_parentSubscriber.syncErrorThrown=!0):Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__.a)(err),this.unsubscribe();else{if(this.unsubscribe(),useDeprecatedSynchronousErrorHandling)throw err;Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__.a)(err)}}},SafeSubscriber.prototype.complete=function(){var _this=this;if(!this.isStopped){var _parentSubscriber=this._parentSubscriber;if(this._complete){var wrappedComplete=function(){return _this._complete.call(_this._context)};_config__WEBPACK_IMPORTED_MODULE_5__.a.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,wrappedComplete),this.unsubscribe()):(this.__tryOrUnsub(wrappedComplete),this.unsubscribe())}else this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(fn,value){try{fn.call(this._context,value)}catch(err){if(this.unsubscribe(),_config__WEBPACK_IMPORTED_MODULE_5__.a.useDeprecatedSynchronousErrorHandling)throw err;Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__.a)(err)}},SafeSubscriber.prototype.__tryOrSetError=function(parent,fn,value){if(!_config__WEBPACK_IMPORTED_MODULE_5__.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{fn.call(this._context,value)}catch(err){return _config__WEBPACK_IMPORTED_MODULE_5__.a.useDeprecatedSynchronousErrorHandling?(parent.syncErrorValue=err,parent.syncErrorThrown=!0,!0):(Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_6__.a)(err),!0)}return!1},SafeSubscriber.prototype._unsubscribe=function(){var _parentSubscriber=this._parentSubscriber;this._context=null,this._parentSubscriber=null,_parentSubscriber.unsubscribe()},SafeSubscriber}(Subscriber);function isTrustedSubscriber(obj){return obj instanceof Subscriber||"syncErrorThrowable"in obj&&obj[_internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_4__.a]}},function(module,__webpack_exports__,__webpack_require__){"use strict";var buffer=__webpack_require__(11),core=__webpack_require__(48),core_default=__webpack_require__.n(core);function createError(message){var err=new Error(message);return err.source="ulid",err}var ENCODING="0123456789ABCDEFGHJKMNPQRSTVWXYZ",ENCODING_LEN=ENCODING.length,TIME_MAX=Math.pow(2,48)-1;function replaceCharAt(str,index,char){return index>str.length-1?str:str.substr(0,index)+char+str.substr(index+1)}function randomChar(prng){var rand=Math.floor(prng()*ENCODING_LEN);return rand===ENCODING_LEN&&(rand=ENCODING_LEN-1),ENCODING.charAt(rand)}function encodeTime(now,len){if(isNaN(now))throw new Error(now+" must be a number");if(now>TIME_MAX)throw createError("cannot encode time greater than "+TIME_MAX);if(now<0)throw createError("time must be positive");if(!1===Number.isInteger(now))throw createError("time must be an integer");for(var mod=void 0,str="";len>0;len--)str=ENCODING.charAt(mod=now%ENCODING_LEN)+str,now=(now-mod)/ENCODING_LEN;return str}function encodeRandom(len,prng){for(var str="";len>0;len--)str=randomChar(prng)+str;return str}function detectPrng(){var allowInsecure=arguments.length>0&&void 0!==arguments[0]&&arguments[0],root=arguments[1];root||(root="undefined"!=typeof window?window:null);var browserCrypto=root&&(root.crypto||root.msCrypto);if(browserCrypto)return function(){var buffer=new Uint8Array(1);return browserCrypto.getRandomValues(buffer),buffer[0]/255};try{var nodeCrypto=__webpack_require__(577);return function(){return nodeCrypto.randomBytes(1).readUInt8()/255}}catch(e){}if(allowInsecure){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(e){}return function(){return Math.random()}}throw createError("secure crypto unusable, insecure Math.random not allowed")}function monotonicFactory(currPrng){currPrng||(currPrng=detectPrng());var lastTime=0,lastRandom=void 0;return function(seedTime){if(isNaN(seedTime)&&(seedTime=Date.now()),seedTime<=lastTime){var incrementedRandom=lastRandom=function(str){for(var done=void 0,index=str.length,char=void 0,charIndex=void 0,maxCharIndex=ENCODING_LEN-1;!done&&index-- >=0;){if(char=str[index],-1===(charIndex=ENCODING.indexOf(char)))throw createError("incorrectly encoded string");charIndex!==maxCharIndex?done=replaceCharAt(str,index,ENCODING[charIndex+1]):str=replaceCharAt(str,index,ENCODING[0])}if("string"==typeof done)return done;throw createError("cannot increment this string")}(lastRandom);return encodeTime(lastTime,10)+incrementedRandom}lastTime=seedTime;var newRandom=lastRandom=encodeRandom(16,currPrng);return encodeTime(seedTime,10)+newRandom}}currPrng||(currPrng=detectPrng());var currPrng,uuid=__webpack_require__(30),types=__webpack_require__(8);__webpack_require__.d(__webpack_exports__,"f",(function(){return exhaustiveCheck})),__webpack_require__.d(__webpack_exports__,"t",(function(){return isNullOrUndefined})),__webpack_require__.d(__webpack_exports__,"y",(function(){return validatePredicate})),__webpack_require__.d(__webpack_exports__,"s",(function(){return isModelConstructor})),__webpack_require__.d(__webpack_exports__,"e",(function(){return establishRelation})),__webpack_require__.d(__webpack_exports__,"x",(function(){return traverseModel})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getIndex})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getIndexFromAssociation})),__webpack_require__.d(__webpack_exports__,"d",(function(){return USER})),__webpack_require__.d(__webpack_exports__,"c",(function(){return SYNC})),__webpack_require__.d(__webpack_exports__,"b",(function(){return STORAGE})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DATASTORE})),__webpack_require__.d(__webpack_exports__,"u",(function(){return isPrivateMode})),__webpack_require__.d(__webpack_exports__,"v",(function(){return monotonicUlidFactory})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getNow})),__webpack_require__.d(__webpack_exports__,"w",(function(){return sortCompareFunction})),__webpack_require__.d(__webpack_exports__,"j",(function(){return isAWSDate})),__webpack_require__.d(__webpack_exports__,"p",(function(){return isAWSTime})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isAWSDateTime})),__webpack_require__.d(__webpack_exports__,"q",(function(){return isAWSTimestamp})),__webpack_require__.d(__webpack_exports__,"l",(function(){return isAWSEmail})),__webpack_require__.d(__webpack_exports__,"n",(function(){return isAWSJSON})),__webpack_require__.d(__webpack_exports__,"r",(function(){return isAWSURL})),__webpack_require__.d(__webpack_exports__,"o",(function(){return isAWSPhone})),__webpack_require__.d(__webpack_exports__,"m",(function(){return isAWSIPAddress}));var NAMESPACES,__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},exhaustiveCheck=function(obj,throwOnError){if(void 0===throwOnError&&(throwOnError=!0),throwOnError)throw new Error("Invalid "+obj)},isNullOrUndefined=function(val){return void 0===val||null==val},validatePredicate=function(model,groupType,predicatesOrGroups){var filterType,isNegation=!1;if(0===predicatesOrGroups.length)return!0;switch(groupType){case"not":filterType="every",isNegation=!0;break;case"and":filterType="every";break;case"or":filterType="some";break;default:exhaustiveCheck(groupType)}var result=predicatesOrGroups[filterType]((function(predicateOrGroup){if(Object(types.k)(predicateOrGroup)){var field=predicateOrGroup.field,operator=predicateOrGroup.operator,operand=predicateOrGroup.operand,value=model[field];return validatePredicateField(value,operator,operand)}if(Object(types.j)(predicateOrGroup)){var type=predicateOrGroup.type,predicates=predicateOrGroup.predicates;return validatePredicate(model,type,predicates)}throw new Error("Not a predicate or group")}));return isNegation?!result:result},validatePredicateField=function(value,operator,operand){switch(operator){case"ne":return value!==operand;case"eq":return value===operand;case"le":return value<=operand;case"lt":return value<operand;case"ge":return value>=operand;case"gt":return value>operand;case"between":var _a=__read(operand,2),min=_a[0],max=_a[1];return value>=min&&value<=max;case"beginsWith":return value.startsWith(operand);case"contains":return value.indexOf(operand)>-1;case"notContains":return-1===value.indexOf(operand);default:return exhaustiveCheck(operator,!1),!1}},isModelConstructor=function(obj){return obj&&"function"==typeof obj.copyOf},establishRelation=function(namespace){var relationship={};return Object.keys(namespace.models).forEach((function(mKey){relationship[mKey]={indexes:[],relationTypes:[]};var model=namespace.models[mKey];Object.keys(model.fields).forEach((function(attr){var fieldAttribute=model.fields[attr];if("object"==typeof fieldAttribute.type&&"model"in fieldAttribute.type){var connectionType=fieldAttribute.association.connectionType;relationship[mKey].relationTypes.push({fieldName:fieldAttribute.name,modelName:fieldAttribute.type.model,relationType:connectionType,targetName:fieldAttribute.association.targetName,associatedWith:fieldAttribute.association.associatedWith}),"BELONGS_TO"===connectionType&&relationship[mKey].indexes.push(fieldAttribute.association.targetName)}})),model.attributes&&model.attributes.forEach((function(attribute){if("key"===attribute.type){var fields=attribute.properties.fields;fields&&fields.forEach((function(field){relationship[mKey].indexes.includes(field)||relationship[mKey].indexes.push(field)}))}}))})),relationship},topologicallySortedModels=new WeakMap,traverseModel=function(srcModelName,instance,namespace,modelInstanceCreator,getModelConstructorByModelName){var relationships=namespace.relationships,modelConstructor=getModelConstructorByModelName(namespace.name,srcModelName),relation=relationships[srcModelName],result=[],newInstance=modelConstructor.copyOf(instance,(function(draftInstance){relation.relationTypes.forEach((function(rItem){var modelConstructor=getModelConstructorByModelName(namespace.name,rItem.modelName);switch(rItem.relationType){case"HAS_ONE":if(instance[rItem.fieldName]){var modelInstance=void 0;try{modelInstance=modelInstanceCreator(modelConstructor,instance[rItem.fieldName])}catch(error){}result.push({modelName:rItem.modelName,item:instance[rItem.fieldName],instance:modelInstance}),draftInstance[rItem.fieldName]=draftInstance[rItem.fieldName].id}break;case"BELONGS_TO":if(instance[rItem.fieldName]){modelInstance=void 0;try{modelInstance=modelInstanceCreator(modelConstructor,instance[rItem.fieldName])}catch(error){}draftInstance[rItem.fieldName]._deleted||result.push({modelName:rItem.modelName,item:instance[rItem.fieldName],instance:modelInstance})}draftInstance[rItem.targetName]=draftInstance[rItem.fieldName]?draftInstance[rItem.fieldName].id:null,delete draftInstance[rItem.fieldName];break;case"HAS_MANY":break;default:exhaustiveCheck(rItem.relationType)}}))}));result.unshift({modelName:srcModelName,item:newInstance,instance:newInstance}),topologicallySortedModels.has(namespace)||topologicallySortedModels.set(namespace,Array.from(namespace.modelTopologicalOrdering.keys()));var sortedModels=topologicallySortedModels.get(namespace);return result.sort((function(a,b){return sortedModels.indexOf(a.modelName)-sortedModels.indexOf(b.modelName)})),result},getIndex=function(rel,src){var index="";return rel.some((function(relItem){relItem.modelName===src&&(index=relItem.targetName)})),index},getIndexFromAssociation=function(indexes,src){return indexes.find((function(idx){return idx===src}))};!function(NAMESPACES){NAMESPACES.DATASTORE="datastore",NAMESPACES.USER="user",NAMESPACES.SYNC="sync",NAMESPACES.STORAGE="storage"}(NAMESPACES||(NAMESPACES={}));var privateModeCheckResult,DATASTORE=NAMESPACES.DATASTORE,USER=NAMESPACES.USER,SYNC=NAMESPACES.SYNC,STORAGE=NAMESPACES.STORAGE,isPrivateMode=function(){return new Promise((function(resolve){var db,dbname=Object(uuid.v4)(),isPrivate=function(){privateModeCheckResult=!1,resolve(!0)},isNotPrivate=function(){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return db&&db.result&&"function"==typeof db.result.close?[4,db.result.close()]:[3,2];case 1:_a.sent(),_a.label=2;case 2:return[4,indexedDB.deleteDatabase(dbname)];case 3:return _a.sent(),privateModeCheckResult=!0,[2,resolve(!1)]}}))}))};return!0===privateModeCheckResult?isNotPrivate():!1===privateModeCheckResult||null===indexedDB?isPrivate():((db=indexedDB.open(dbname)).onerror=isPrivate,void(db.onsuccess=isNotPrivate))}))},prng=function(){return(nBytes=1,buffer.Buffer.from(core_default.a.lib.WordArray.random(nBytes).toString(),"hex")).readUInt8(0)/255;var nBytes};function monotonicUlidFactory(seed){var ulid=monotonicFactory(prng);return function(){return ulid(seed)}}function getNow(){return"undefined"!=typeof performance&&performance&&"function"==typeof performance.now?0|performance.now():Date.now()}function sortCompareFunction(sortPredicates){return function(a,b){var e_1,_a;try{for(var sortPredicates_1=__values(sortPredicates),sortPredicates_1_1=sortPredicates_1.next();!sortPredicates_1_1.done;sortPredicates_1_1=sortPredicates_1.next()){var predicate=sortPredicates_1_1.value,field=predicate.field,sortMultiplier=predicate.sortDirection===types.e.ASCENDING?1:-1;if(a[field]<b[field])return-1*sortMultiplier;if(a[field]>b[field])return 1*sortMultiplier}}catch(e_1_1){e_1={error:e_1_1}}finally{try{sortPredicates_1_1&&!sortPredicates_1_1.done&&(_a=sortPredicates_1.return)&&_a.call(sortPredicates_1)}finally{if(e_1)throw e_1.error}}return 0}}var isAWSDate=function(val){return!!/^\d{4}-\d{2}-\d{2}(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(val)},isAWSTime=function(val){return!!/^\d{2}:\d{2}(:\d{2}(.\d+)?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(val)},isAWSDateTime=function(val){return!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(:\d{2}(.\d+)?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(val)},isAWSTimestamp=function(val){return!!/^\d+$/.exec(String(val))},isAWSEmail=function(val){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.exec(val)},isAWSJSON=function(val){try{return JSON.parse(val),!0}catch(_a){return!1}},isAWSURL=function(val){try{return!!new URL(val)}catch(_a){return!1}},isAWSPhone=function(val){return!!/^\+?\d[\d\s-]+$/.exec(val)},isAWSIPAddress=function(val){return!!/((^((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))$)|(^((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?$))$/.exec(val)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var Subscriber=__webpack_require__(4),rxSubscriber=__webpack_require__(99),Observer=__webpack_require__(128);var observable=__webpack_require__(73),pipe=__webpack_require__(107),config=__webpack_require__(49);__webpack_require__.d(__webpack_exports__,"a",(function(){return Observable_Observable}));var Observable_Observable=function(){function Observable(subscribe){this._isScalar=!1,subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var operator=this.operator,sink=function(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber.a)return nextOrObserver;if(nextOrObserver[rxSubscriber.a])return nextOrObserver[rxSubscriber.a]()}return nextOrObserver||error||complete?new Subscriber.a(nextOrObserver,error,complete):new Subscriber.a(Observer.a)}(observerOrNext,error,complete);if(operator?operator.call(sink,this.source):sink.add(this.source||config.a.useDeprecatedSynchronousErrorHandling&&!sink.syncErrorThrowable?this._subscribe(sink):this._trySubscribe(sink)),config.a.useDeprecatedSynchronousErrorHandling&&sink.syncErrorThrowable&&(sink.syncErrorThrowable=!1,sink.syncErrorThrown))throw sink.syncErrorValue;return sink},Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){config.a.useDeprecatedSynchronousErrorHandling&&(sink.syncErrorThrown=!0,sink.syncErrorValue=err),sink.error(err)}},Observable.prototype.forEach=function(next,promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))((function(resolve,reject){var subscription;subscription=_this.subscribe((function(value){try{next(value)}catch(err){reject(err),subscription&&subscription.unsubscribe()}}),reject,resolve)}))},Observable.prototype._subscribe=function(subscriber){var source=this.source;return source&&source.subscribe(subscriber)},Observable.prototype[observable.a]=function(){return this},Observable.prototype.pipe=function(){for(var operations=[],_i=0;_i<arguments.length;_i++)operations[_i]=arguments[_i];return 0===operations.length?this:Object(pipe.b)(operations)(this)},Observable.prototype.toPromise=function(promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))((function(resolve,reject){var value;_this.subscribe((function(x){return value=x}),(function(err){return reject(err)}),(function(){return resolve(value)}))}))},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();function getPromiseCtor(promiseCtor){if(promiseCtor||(promiseCtor=config.a.Promise||Promise),!promiseCtor)throw new Error("no Promise impl found");return promiseCtor}},function(module,__webpack_exports__,__webpack_require__){"use strict";var Amplify=__webpack_require__(40),Platform=__webpack_require__(96),ClientDevice=__webpack_require__(309),Logger=__webpack_require__(56),Hub=__webpack_require__(186),ConsoleLogger=__webpack_require__(84),logger=new ConsoleLogger.a("I18n"),I18n_I18n=function(){function I18n(options){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},options),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),logger.debug(this._lang)}return I18n.prototype.setLanguage=function(lang){this._lang=lang},I18n.prototype.get=function(key,defVal){if(void 0===defVal&&(defVal=void 0),!this._lang)return void 0!==defVal?defVal:key;var lang=this._lang,val=this.getByLanguage(key,lang);return val||(lang.indexOf("-")>0&&(val=this.getByLanguage(key,lang.split("-")[0])),val||(void 0!==defVal?defVal:key))},I18n.prototype.getByLanguage=function(key,language,defVal){if(void 0===defVal&&(defVal=null),!language)return defVal;var lang_dict=this._dict[language];return lang_dict?lang_dict[key]:defVal},I18n.prototype.putVocabulariesForLanguage=function(language,vocabularies){var lang_dict=this._dict[language];lang_dict||(lang_dict=this._dict[language]={}),Object.assign(lang_dict,vocabularies)},I18n.prototype.putVocabularies=function(vocabularies){var _this=this;Object.keys(vocabularies).map((function(key){_this.putVocabulariesForLanguage(key,vocabularies[key])}))},I18n}(),I18n_logger=new ConsoleLogger.a("I18n"),_config=null,_i18n=null,lib_esm_I18n_I18n=function(){function I18n(){}return I18n.configure=function(config){return I18n_logger.debug("configure I18n"),config?(_config=Object.assign({},_config,config.I18n||config),I18n.createInstance(),_config):_config},I18n.getModuleName=function(){return"I18n"},I18n.createInstance=function(){I18n_logger.debug("create I18n instance"),_i18n||(_i18n=new I18n_I18n(_config))},I18n.setLanguage=function(lang){return I18n.checkConfig(),_i18n.setLanguage(lang)},I18n.get=function(key,defVal){return I18n.checkConfig()?_i18n.get(key,defVal):void 0===defVal?key:defVal},I18n.putVocabulariesForLanguage=function(language,vocabularies){return I18n.checkConfig(),_i18n.putVocabulariesForLanguage(language,vocabularies)},I18n.putVocabularies=function(vocabularies){return I18n.checkConfig(),_i18n.putVocabularies(vocabularies)},I18n.checkConfig=function(){return _i18n||(_i18n=new I18n_I18n(_config)),!0},I18n}();Amplify.a.register(lib_esm_I18n_I18n);var JS=__webpack_require__(57),Signer=__webpack_require__(286),ServiceWorker=(__webpack_require__(175),__webpack_require__(217));__webpack_require__.d(__webpack_exports__,"d",(function(){return Constants})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ClientDevice.a})),__webpack_require__.d(__webpack_exports__,"c",(function(){return Logger.a})),__webpack_require__.d(__webpack_exports__,"e",(function(){return Hub.a})),__webpack_require__.d(__webpack_exports__,"f",(function(){return lib_esm_I18n_I18n})),__webpack_require__.d(__webpack_exports__,"g",(function(){return JS.a})),__webpack_require__.d(__webpack_exports__,"i",(function(){return Signer.a})),__webpack_require__.d(__webpack_exports__,"h",(function(){return ServiceWorker.a})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Amplify.a}));var Constants={userAgent:Platform.a.userAgent};Amplify.a},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",(function(){return isSchemaModel})),__webpack_require__.d(__webpack_exports__,"m",(function(){return isTargetNameAssociation})),__webpack_require__.d(__webpack_exports__,"b",(function(){return GraphQLScalarType})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isGraphQLScalarType})),__webpack_require__.d(__webpack_exports__,"h",(function(){return isModelFieldType})),__webpack_require__.d(__webpack_exports__,"i",(function(){return isNonModelFieldType})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isEnumFieldType})),__webpack_require__.d(__webpack_exports__,"c",(function(){return OpType})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isPredicateObj})),__webpack_require__.d(__webpack_exports__,"j",(function(){return isPredicateGroup})),__webpack_require__.d(__webpack_exports__,"d",(function(){return QueryOne})),__webpack_require__.d(__webpack_exports__,"e",(function(){return SortDirection})),__webpack_require__.d(__webpack_exports__,"n",(function(){return syncExpression})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DISCARD}));var GraphQLScalarType,OpType,QueryOne,SortDirection,_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};function isSchemaModel(obj){return obj&&void 0!==obj.pluralName}function isTargetNameAssociation(obj){return obj&&obj.targetName}function isGraphQLScalarType(obj){return obj&&void 0!==GraphQLScalarType[obj]}function isModelFieldType(obj){return!(!obj||!obj.model)}function isNonModelFieldType(obj){return!(!obj||!obj.nonModel)}function isEnumFieldType(obj){return!(!obj||!obj.enum)}function isPredicateObj(obj){return obj&&void 0!==obj.field}function isPredicateGroup(obj){return obj&&void 0!==obj.type}function syncExpression(modelConstructor,conditionProducer){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,{modelConstructor:modelConstructor,conditionProducer:conditionProducer}]}))}))}!function(GraphQLScalarType){GraphQLScalarType[GraphQLScalarType.ID=0]="ID",GraphQLScalarType[GraphQLScalarType.String=1]="String",GraphQLScalarType[GraphQLScalarType.Int=2]="Int",GraphQLScalarType[GraphQLScalarType.Float=3]="Float",GraphQLScalarType[GraphQLScalarType.Boolean=4]="Boolean",GraphQLScalarType[GraphQLScalarType.AWSDate=5]="AWSDate",GraphQLScalarType[GraphQLScalarType.AWSTime=6]="AWSTime",GraphQLScalarType[GraphQLScalarType.AWSDateTime=7]="AWSDateTime",GraphQLScalarType[GraphQLScalarType.AWSTimestamp=8]="AWSTimestamp",GraphQLScalarType[GraphQLScalarType.AWSEmail=9]="AWSEmail",GraphQLScalarType[GraphQLScalarType.AWSJSON=10]="AWSJSON",GraphQLScalarType[GraphQLScalarType.AWSURL=11]="AWSURL",GraphQLScalarType[GraphQLScalarType.AWSPhone=12]="AWSPhone",GraphQLScalarType[GraphQLScalarType.AWSIPAddress=13]="AWSIPAddress"}(GraphQLScalarType||(GraphQLScalarType={})),function(GraphQLScalarType){GraphQLScalarType.getJSType=function(scalar){switch(scalar){case"Boolean":return"boolean";case"ID":case"String":case"AWSDate":case"AWSTime":case"AWSDateTime":case"AWSEmail":case"AWSJSON":case"AWSURL":case"AWSPhone":case"AWSIPAddress":return"string";case"Int":case"Float":case"AWSTimestamp":return"number";default:Object(_util__WEBPACK_IMPORTED_MODULE_0__.f)(scalar)}},GraphQLScalarType.getValidationFunction=function(scalar){switch(scalar){case"AWSDate":return _util__WEBPACK_IMPORTED_MODULE_0__.j;case"AWSTime":return _util__WEBPACK_IMPORTED_MODULE_0__.p;case"AWSDateTime":return _util__WEBPACK_IMPORTED_MODULE_0__.k;case"AWSTimestamp":return _util__WEBPACK_IMPORTED_MODULE_0__.q;case"AWSEmail":return _util__WEBPACK_IMPORTED_MODULE_0__.l;case"AWSJSON":return _util__WEBPACK_IMPORTED_MODULE_0__.n;case"AWSURL":return _util__WEBPACK_IMPORTED_MODULE_0__.r;case"AWSPhone":return _util__WEBPACK_IMPORTED_MODULE_0__.o;case"AWSIPAddress":return _util__WEBPACK_IMPORTED_MODULE_0__.m;default:return}}}(GraphQLScalarType||(GraphQLScalarType={})),function(OpType){OpType.INSERT="INSERT",OpType.UPDATE="UPDATE",OpType.DELETE="DELETE"}(OpType||(OpType={})),function(QueryOne){QueryOne[QueryOne.FIRST=0]="FIRST",QueryOne[QueryOne.LAST=1]="LAST"}(QueryOne||(QueryOne={})),function(SortDirection){SortDirection.ASCENDING="ASCENDING",SortDirection.DESCENDING="DESCENDING"}(SortDirection||(SortDirection={}));var DISCARD=Symbol("DISCARD")},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),InnerSubscriber_InnerSubscriber=function(_super){function InnerSubscriber(parent,outerValue,outerIndex){var _this=_super.call(this)||this;return _this.parent=parent,_this.outerValue=outerValue,_this.outerIndex=outerIndex,_this.index=0,_this}return tslib_es6.__extends(InnerSubscriber,_super),InnerSubscriber.prototype._next=function(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(error){this.parent.notifyError(error,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(__webpack_require__(4).a),subscribeTo=__webpack_require__(180);function subscribeToResult(outerSubscriber,result,outerValue,outerIndex){var destination=new InnerSubscriber_InnerSubscriber(outerSubscriber,outerValue,outerIndex);return Object(subscribeTo.a)(result)(destination)}__webpack_require__.d(__webpack_exports__,"a",(function(){return subscribeToResult}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return OuterSubscriber}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),OuterSubscriber=function(_super){function OuterSubscriber(){return null!==_super&&_super.apply(this,arguments)||this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(OuterSubscriber,_super),OuterSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},OuterSubscriber.prototype.notifyError=function(error,innerSub){this.destination.error(error)},OuterSubscriber.prototype.notifyComplete=function(innerSub){this.destination.complete()},OuterSubscriber}(__webpack_require__(4).a)},function(module,exports,__webpack_require__){"use strict";(function(global){var base64=__webpack_require__(389),ieee754=__webpack_require__(390),isArray=__webpack_require__(242);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),actual=(that=createBuffer(that,length)).write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length||obj.copy(that,0,0,len),that}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||(val=obj.length)!=val?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}var val;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)hi=(c=str.charCodeAt(i))>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function(codePoints){var len=codePoints.length;if(len<=4096)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=4096));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return function(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function(str){if((str=function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}).call(this,__webpack_require__(54))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Subscription}));var _util_isArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25),_util_isObject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(177),_util_isFunction__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(81),_util_tryCatch__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(29),_util_errorObject__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(13),_util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(108),Subscription=function(){function Subscription(unsubscribe){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,unsubscribe&&(this._unsubscribe=unsubscribe)}var empty;return Subscription.prototype.unsubscribe=function(){var errors,hasErrors=!1;if(!this.closed){var _parent=this._parent,_parents=this._parents,_unsubscribe=this._unsubscribe,_subscriptions=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var index=-1,len=_parents?_parents.length:0;_parent;)_parent.remove(this),_parent=++index<len&&_parents[index]||null;if(Object(_util_isFunction__WEBPACK_IMPORTED_MODULE_2__.a)(_unsubscribe))Object(_util_tryCatch__WEBPACK_IMPORTED_MODULE_3__.a)(_unsubscribe).call(this)===_util_errorObject__WEBPACK_IMPORTED_MODULE_4__.a&&(hasErrors=!0,errors=errors||(_util_errorObject__WEBPACK_IMPORTED_MODULE_4__.a.e instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_5__.a?flattenUnsubscriptionErrors(_util_errorObject__WEBPACK_IMPORTED_MODULE_4__.a.e.errors):[_util_errorObject__WEBPACK_IMPORTED_MODULE_4__.a.e]));if(Object(_util_isArray__WEBPACK_IMPORTED_MODULE_0__.a)(_subscriptions))for(index=-1,len=_subscriptions.length;++index<len;){var sub=_subscriptions[index];if(Object(_util_isObject__WEBPACK_IMPORTED_MODULE_1__.a)(sub))if(Object(_util_tryCatch__WEBPACK_IMPORTED_MODULE_3__.a)(sub.unsubscribe).call(sub)===_util_errorObject__WEBPACK_IMPORTED_MODULE_4__.a){hasErrors=!0,errors=errors||[];var err=_util_errorObject__WEBPACK_IMPORTED_MODULE_4__.a.e;err instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_5__.a?errors=errors.concat(flattenUnsubscriptionErrors(err.errors)):errors.push(err)}}if(hasErrors)throw new _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_5__.a(errors)}},Subscription.prototype.add=function(teardown){if(!teardown||teardown===Subscription.EMPTY)return Subscription.EMPTY;if(teardown===this)return this;var subscription=teardown;switch(typeof teardown){case"function":subscription=new Subscription(teardown);case"object":if(subscription.closed||"function"!=typeof subscription.unsubscribe)return subscription;if(this.closed)return subscription.unsubscribe(),subscription;if("function"!=typeof subscription._addParent){var tmp=subscription;(subscription=new Subscription)._subscriptions=[tmp]}break;default:throw new Error("unrecognized teardown "+teardown+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(subscription),subscription._addParent(this),subscription},Subscription.prototype.remove=function(subscription){var subscriptions=this._subscriptions;if(subscriptions){var subscriptionIndex=subscriptions.indexOf(subscription);-1!==subscriptionIndex&&subscriptions.splice(subscriptionIndex,1)}},Subscription.prototype._addParent=function(parent){var _parent=this._parent,_parents=this._parents;_parent&&_parent!==parent?_parents?-1===_parents.indexOf(parent)&&_parents.push(parent):this._parents=[parent]:this._parent=parent},Subscription.EMPTY=((empty=new Subscription).closed=!0,empty),Subscription}();function flattenUnsubscriptionErrors(errors){return errors.reduce((function(errs,err){return errs.concat(err instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_5__.a?err.errors:err)}),[])}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return errorObject}));var errorObject={e:{}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return isPredicatesAll})),__webpack_require__.d(__webpack_exports__,"b",(function(){return Predicates})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ModelPredicateCreator}));var _util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),predicatesAllSet=new WeakSet;function isPredicatesAll(predicate){return predicatesAllSet.has(predicate)}Symbol("A predicate that matches all records");var Predicates=function(){function Predicates(){}return Object.defineProperty(Predicates,"ALL",{get:function(){var predicate=function(c){return c};return predicatesAllSet.add(predicate),predicate},enumerable:!0,configurable:!0}),Predicates}(),ModelPredicateCreator=function(){function ModelPredicateCreator(){}return ModelPredicateCreator.createPredicateBuilder=function(modelDefinition){var handler,modelName=modelDefinition.name,fieldNames=new Set(Object.keys(modelDefinition.fields)),predicate=new Proxy({},handler={get:function(_target,propertyKey,receiver){var groupType=propertyKey;switch(groupType){case"and":case"or":case"not":return function(newPredicate){var group={type:groupType,predicates:[]},tmpPredicateRecorder=new Proxy({},handler);return ModelPredicateCreator.predicateGroupsMap.set(tmpPredicateRecorder,group),newPredicate(tmpPredicateRecorder),ModelPredicateCreator.predicateGroupsMap.get(receiver).predicates.push(group),receiver};default:Object(_util__WEBPACK_IMPORTED_MODULE_0__.f)(groupType,!1)}var field=propertyKey;if(!fieldNames.has(field))throw new Error("Invalid field for model. field: "+field+", model: "+modelName);return function(operator,operand){return ModelPredicateCreator.predicateGroupsMap.get(receiver).predicates.push({field:field,operator:operator,operand:operand}),receiver}}});return ModelPredicateCreator.predicateGroupsMap.set(predicate,{type:"and",predicates:[]}),predicate},ModelPredicateCreator.isValidPredicate=function(predicate){return ModelPredicateCreator.predicateGroupsMap.has(predicate)},ModelPredicateCreator.getPredicates=function(predicate,throwOnInvalid){if(void 0===throwOnInvalid&&(throwOnInvalid=!0),throwOnInvalid&&!ModelPredicateCreator.isValidPredicate(predicate))throw new Error("The predicate is not valid");return ModelPredicateCreator.predicateGroupsMap.get(predicate)},ModelPredicateCreator.createFromExisting=function(modelDefinition,existing){if(existing&&modelDefinition)return existing(ModelPredicateCreator.createPredicateBuilder(modelDefinition))},ModelPredicateCreator.createForId=function(modelDefinition,id){return ModelPredicateCreator.createPredicateBuilder(modelDefinition).id("eq",id)},ModelPredicateCreator.predicateGroupsMap=new WeakMap,ModelPredicateCreator}()},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports,__webpack_require__){var buffer=__webpack_require__(11),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function getSerdePlugin(config,serializer,deserializer){return{applyToStack:function(commandStack){commandStack.add(function(options,deserializer){return function(next,context){return function(args){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var response,parsed;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,next(args)];case 1:return response=_a.sent().response,[4,deserializer(response,options)];case 2:return parsed=_a.sent(),[2,{response:response,output:parsed}]}}))}))}}}(config,deserializer),deserializerMiddlewareOption),commandStack.add(function(options,serializer){return function(next,context){return function(args){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var request;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,serializer(args.input,options)];case 1:return request=_a.sent(),[2,next(Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},args),{request:request}))]}}))}))}}}(config,serializer),serializerMiddlewareOption)}}}__webpack_require__.d(__webpack_exports__,"a",(function(){return getSerdePlugin}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},getRetryPlugin=function(options){return{applyToStack:function(clientStack){clientStack.add(function(options){return function(next,context){return function(args){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var _a;return Object(tslib_es6.__generator)(this,(function(_b){return(null===(_a=null==options?void 0:options.retryStrategy)||void 0===_a?void 0:_a.mode)&&(context.userAgent=Object(tslib_es6.__spread)(context.userAgent||[],[["cfg/retry-mode",options.retryStrategy.mode]])),[2,options.retryStrategy.retry(next,args)]}))}))}}}(options),retryMiddlewareOptions)}}},es=__webpack_require__(3),CLOCK_SKEW_ERROR_CODES=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],TRANSIENT_ERROR_CODES=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504],isThrottlingError=function(error){var _a,_b;return 429===(null===(_a=error.$metadata)||void 0===_a?void 0:_a.httpStatusCode)||THROTTLING_ERROR_CODES.includes(error.name)||1==(null===(_b=error.$retryable)||void 0===_b?void 0:_b.throttling)},uuid=__webpack_require__(30),defaultDelayDecider=function(delayBase,attempts){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,attempts)*delayBase))},defaultRetryDecider=function(error){return!!error&&(function(error){return void 0!==error.$retryable}(error)||function(error){return CLOCK_SKEW_ERROR_CODES.includes(error.name)}(error)||isThrottlingError(error)||function(error){var _a;return TRANSIENT_ERROR_CODES.includes(error.name)||TRANSIENT_ERROR_STATUS_CODES.includes((null===(_a=error.$metadata)||void 0===_a?void 0:_a.httpStatusCode)||0)}(error))},defaultStrategy_StandardRetryStrategy=function(){function StandardRetryStrategy(maxAttemptsProvider,options){var _a,_b,_c,initialRetryTokens,MAX_CAPACITY,availableCapacity,getCapacityAmount,hasRetryTokens;this.maxAttemptsProvider=maxAttemptsProvider,this.mode="standard",this.retryDecider=null!==(_a=null==options?void 0:options.retryDecider)&&void 0!==_a?_a:defaultRetryDecider,this.delayDecider=null!==(_b=null==options?void 0:options.delayDecider)&&void 0!==_b?_b:defaultDelayDecider,this.retryQuota=null!==(_c=null==options?void 0:options.retryQuota)&&void 0!==_c?_c:(MAX_CAPACITY=initialRetryTokens=500,availableCapacity=initialRetryTokens,getCapacityAmount=function(error){return"TimeoutError"===error.name?10:5},hasRetryTokens=function(error){return getCapacityAmount(error)<=availableCapacity},Object.freeze({hasRetryTokens:hasRetryTokens,retrieveRetryTokens:function(error){if(!hasRetryTokens(error))throw new Error("No retry token available");var capacityAmount=getCapacityAmount(error);return availableCapacity-=capacityAmount,capacityAmount},releaseRetryTokens:function(capacityReleaseAmount){availableCapacity+=null!=capacityReleaseAmount?capacityReleaseAmount:1,availableCapacity=Math.min(availableCapacity,MAX_CAPACITY)}}))}return StandardRetryStrategy.prototype.shouldRetry=function(error,attempts,maxAttempts){return attempts<maxAttempts&&this.retryDecider(error)&&this.retryQuota.hasRetryTokens(error)},StandardRetryStrategy.prototype.getMaxAttempts=function(){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var maxAttempts;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return maxAttempts=_a.sent(),[3,3];case 2:return _a.sent(),maxAttempts=3,[3,3];case 3:return[2,maxAttempts]}}))}))},StandardRetryStrategy.prototype.retry=function(next,args){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var retryTokenAmount,attempts,totalDelay,maxAttempts,request,_loop_1,this_1,state_1;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return attempts=0,totalDelay=0,[4,this.getMaxAttempts()];case 1:maxAttempts=_a.sent(),request=args.request,es.a.isInstance(request)&&(request.headers["amz-sdk-invocation-id"]=Object(uuid.v4)()),_loop_1=function(){var _a,response,output,err_1,delay_1;return Object(tslib_es6.__generator)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,2,,5]),es.a.isInstance(request)&&(request.headers["amz-sdk-request"]="attempt="+(attempts+1)+"; max="+maxAttempts),[4,next(args)];case 1:return _a=_b.sent(),response=_a.response,output=_a.output,this_1.retryQuota.releaseRetryTokens(retryTokenAmount),output.$metadata.attempts=attempts+1,output.$metadata.totalRetryDelay=totalDelay,[2,{value:{response:response,output:output}}];case 2:return err_1=_b.sent(),attempts++,this_1.shouldRetry(err_1,attempts,maxAttempts)?(retryTokenAmount=this_1.retryQuota.retrieveRetryTokens(err_1),delay_1=this_1.delayDecider(isThrottlingError(err_1)?500:100,attempts),totalDelay+=delay_1,[4,new Promise((function(resolve){return setTimeout(resolve,delay_1)}))]):[3,4];case 3:return _b.sent(),[2,"continue"];case 4:throw err_1.$metadata||(err_1.$metadata={}),err_1.$metadata.attempts=attempts,err_1.$metadata.totalRetryDelay=totalDelay,err_1;case 5:return[2]}}))},this_1=this,_a.label=2;case 2:return[5,_loop_1()];case 3:return"object"==typeof(state_1=_a.sent())?[2,state_1.value]:[3,2];case 4:return[2]}}))}))},StandardRetryStrategy}(),resolveRetryConfig=function(input){var maxAttempts=normalizeMaxAttempts(input.maxAttempts);return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},input),{maxAttempts:maxAttempts,retryStrategy:input.retryStrategy||new defaultStrategy_StandardRetryStrategy(maxAttempts)})},normalizeMaxAttempts=function(maxAttempts){if(void 0===maxAttempts&&(maxAttempts=3),"number"==typeof maxAttempts){var promisified_1=Promise.resolve(maxAttempts);return function(){return promisified_1}}return maxAttempts};__webpack_require__.d(__webpack_exports__,"b",(function(){return getRetryPlugin})),__webpack_require__.d(__webpack_exports__,"a",(function(){return 3})),__webpack_require__.d(__webpack_exports__,"c",(function(){return resolveRetryConfig}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return SubjectSubscriber})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Subject}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Observable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_Subscriber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_Subscription__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(74),_SubjectSubscription__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(178),_internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(99),SubjectSubscriber=function(_super){function SubjectSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(SubjectSubscriber,_super),SubjectSubscriber}(_Subscriber__WEBPACK_IMPORTED_MODULE_2__.a),Subject=function(_super){function Subject(){var _this=_super.call(this)||this;return _this.observers=[],_this.closed=!1,_this.isStopped=!1,_this.hasError=!1,_this.thrownError=null,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(Subject,_super),Subject.prototype[_internal_symbol_rxSubscriber__WEBPACK_IMPORTED_MODULE_6__.a]=function(){return new SubjectSubscriber(this)},Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);return subject.operator=operator,subject},Subject.prototype.next=function(value){if(this.closed)throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__.a;if(!this.isStopped)for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].next(value)},Subject.prototype.error=function(err){if(this.closed)throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__.a;this.hasError=!0,this.thrownError=err,this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].error(err);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__.a;this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._trySubscribe=function(subscriber){if(this.closed)throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__.a;return _super.prototype._trySubscribe.call(this,subscriber)},Subject.prototype._subscribe=function(subscriber){if(this.closed)throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_4__.a;return this.hasError?(subscriber.error(this.thrownError),_Subscription__WEBPACK_IMPORTED_MODULE_3__.a.EMPTY):this.isStopped?(subscriber.complete(),_Subscription__WEBPACK_IMPORTED_MODULE_3__.a.EMPTY):(this.observers.push(subscriber),new _SubjectSubscription__WEBPACK_IMPORTED_MODULE_5__.a(this,subscriber))},Subject.prototype.asObservable=function(){var observable=new _Observable__WEBPACK_IMPORTED_MODULE_1__.a;return observable.source=this,observable},Subject.create=function(destination,source){return new AnonymousSubject(destination,source)},Subject}(_Observable__WEBPACK_IMPORTED_MODULE_1__.a),AnonymousSubject=function(_super){function AnonymousSubject(destination,source){var _this=_super.call(this)||this;return _this.destination=destination,_this.source=source,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(AnonymousSubject,_super),AnonymousSubject.prototype.next=function(value){var destination=this.destination;destination&&destination.next&&destination.next(value)},AnonymousSubject.prototype.error=function(err){var destination=this.destination;destination&&destination.error&&this.destination.error(err)},AnonymousSubject.prototype.complete=function(){var destination=this.destination;destination&&destination.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(subscriber){return this.source?this.source.subscribe(subscriber):_Subscription__WEBPACK_IMPORTED_MODULE_3__.a.EMPTY},AnonymousSubject}(Subject)},function(module,__webpack_exports__,__webpack_require__){"use strict";var CognitoHostedUIIdentityProvider,AuthErrorTypes;function isFederatedSignInOptions(obj){return obj&&!!["provider"].find((function(k){return obj.hasOwnProperty(k)}))}function isFederatedSignInOptionsCustom(obj){return obj&&!!["customProvider"].find((function(k){return obj.hasOwnProperty(k)}))}function hasCustomState(obj){return obj&&!!["customState"].find((function(k){return obj.hasOwnProperty(k)}))}function isCognitoHostedOpts(oauth){return void 0!==oauth.redirectSignIn}function isUsernamePasswordOpts(obj){return!!obj.username}__webpack_require__.d(__webpack_exports__,"b",(function(){return CognitoHostedUIIdentityProvider})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isFederatedSignInOptions})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isFederatedSignInOptionsCustom})),__webpack_require__.d(__webpack_exports__,"c",(function(){return hasCustomState})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isCognitoHostedOpts})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AuthErrorTypes})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isUsernamePasswordOpts})),function(CognitoHostedUIIdentityProvider){CognitoHostedUIIdentityProvider.Cognito="COGNITO",CognitoHostedUIIdentityProvider.Google="Google",CognitoHostedUIIdentityProvider.Facebook="Facebook",CognitoHostedUIIdentityProvider.Amazon="LoginWithAmazon",CognitoHostedUIIdentityProvider.Apple="SignInWithApple"}(CognitoHostedUIIdentityProvider||(CognitoHostedUIIdentityProvider={})),function(AuthErrorTypes){AuthErrorTypes.NoConfig="noConfig",AuthErrorTypes.MissingAuthConfig="missingAuthConfig",AuthErrorTypes.EmptyUsername="emptyUsername",AuthErrorTypes.InvalidUsername="invalidUsername",AuthErrorTypes.EmptyPassword="emptyPassword",AuthErrorTypes.EmptyCode="emptyCode",AuthErrorTypes.SignUpError="signUpError",AuthErrorTypes.NoMFA="noMFA",AuthErrorTypes.InvalidMFA="invalidMFA",AuthErrorTypes.EmptyChallengeResponse="emptyChallengeResponse",AuthErrorTypes.NoUserSession="noUserSession",AuthErrorTypes.Default="default"}(AuthErrorTypes||(AuthErrorTypes={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"fromUtf8",(function(){return es_fromUtf8})),__webpack_require__.d(__webpack_exports__,"toUtf8",(function(){return es_toUtf8}));var es_fromUtf8=function(input){return"function"==typeof TextEncoder?function(input){return(new TextEncoder).encode(input)}(input):function(input){for(var bytes=[],i=0,len=input.length;i<len;i++){var value=input.charCodeAt(i);if(value<128)bytes.push(value);else if(value<2048)bytes.push(value>>6|192,63&value|128);else if(i+1<input.length&&55296==(64512&value)&&56320==(64512&input.charCodeAt(i+1))){var surrogatePair=65536+((1023&value)<<10)+(1023&input.charCodeAt(++i));bytes.push(surrogatePair>>18|240,surrogatePair>>12&63|128,surrogatePair>>6&63|128,63&surrogatePair|128)}else bytes.push(value>>12|224,value>>6&63|128,63&value|128)}return Uint8Array.from(bytes)}(input)},es_toUtf8=function(input){return"function"==typeof TextDecoder?function(input){return new TextDecoder("utf-8").decode(input)}(input):function(input){for(var decoded="",i=0,len=input.length;i<len;i++){var byte=input[i];if(byte<128)decoded+=String.fromCharCode(byte);else if(192<=byte&&byte<224){var nextByte=input[++i];decoded+=String.fromCharCode((31&byte)<<6|63&nextByte)}else if(240<=byte&&byte<365){var encoded="%"+[byte,input[++i],input[++i],input[++i]].map((function(byteValue){return byteValue.toString(16)})).join("%");decoded+=decodeURIComponent(encoded)}else decoded+=String.fromCharCode((15&byte)<<12|(63&input[++i])<<6|63&input[++i])}return decoded}(input)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TransformerMutationType})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getAuthorizationRules})),__webpack_require__.d(__webpack_exports__,"c",(function(){return buildSubscriptionGraphQLOperation})),__webpack_require__.d(__webpack_exports__,"b",(function(){return buildGraphQLOperation})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createMutationInstanceFromModelOperation})),__webpack_require__.d(__webpack_exports__,"g",(function(){return predicateToGraphQLCondition})),__webpack_require__.d(__webpack_exports__,"h",(function(){return predicateToGraphQLFilter})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getUserGroupsFromToken}));var GraphQLOperationType,TransformerMutationType,_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};!function(GraphQLOperationType){GraphQLOperationType.LIST="query",GraphQLOperationType.CREATE="mutation",GraphQLOperationType.UPDATE="mutation",GraphQLOperationType.DELETE="mutation",GraphQLOperationType.GET="query"}(GraphQLOperationType||(GraphQLOperationType={})),function(TransformerMutationType){TransformerMutationType.CREATE="Create",TransformerMutationType.UPDATE="Update",TransformerMutationType.DELETE="Delete",TransformerMutationType.GET="Get"}(TransformerMutationType||(TransformerMutationType={}));var dummyMetadata={_version:void 0,_lastChangedAt:void 0,_deleted:void 0},metadataFields=Object.keys(dummyMetadata);function generateSelectionSet(namespace,modelDefinition){var scalarFields=getScalarFields(modelDefinition),nonModelFields=function(namespace,modelDefinition){var result=[];return Object.values(modelDefinition.fields).forEach((function(_a){var name=_a.name,type=_a.type;if(Object(_types__WEBPACK_IMPORTED_MODULE_0__.i)(type)){var typeDefinition=namespace.nonModels[type.nonModel],scalarFields=Object.values(getScalarFields(typeDefinition)).map((function(_a){return _a.name})),nested_1=[];Object.values(typeDefinition.fields).forEach((function(field){var type=field.type,name=field.name;if(Object(_types__WEBPACK_IMPORTED_MODULE_0__.i)(type)){var typeDefinition_1=namespace.nonModels[type.nonModel];nested_1.push(name+" { "+generateSelectionSet(namespace,typeDefinition_1)+" }")}})),result.push(name+" { "+scalarFields.join(" ")+" "+nested_1.join(" ")+" }")}})),result}(namespace,modelDefinition),implicitOwnerField=function(modelDefinition,scalarFields){var ownerFields=function(modelDefinition){var ownerFields=[];Object(_types__WEBPACK_IMPORTED_MODULE_0__.l)(modelDefinition)&&modelDefinition.attributes&&modelDefinition.attributes.forEach((function(attr){if(attr.properties&&attr.properties.rules){var rule=attr.properties.rules.find((function(rule){return"owner"===rule.allow}));rule&&rule.ownerField&&ownerFields.push(rule.ownerField)}}));return ownerFields}(modelDefinition);if(!scalarFields.owner&&ownerFields.includes("owner"))return["owner"];return[]}(modelDefinition,scalarFields),scalarAndMetadataFields=Object.values(scalarFields).map((function(_a){return _a.name})).concat(implicitOwnerField).concat(nonModelFields);return Object(_types__WEBPACK_IMPORTED_MODULE_0__.l)(modelDefinition)&&(scalarAndMetadataFields=scalarAndMetadataFields.concat(metadataFields).concat(function(modelDefinition){var result=[];return Object.values(modelDefinition.fields).filter((function(_a){var association=_a.association;return association&&Object.keys(association).length})).forEach((function(_a){var name=_a.name,association=_a.association,connectionType=association.connectionType;switch(connectionType){case"HAS_ONE":case"HAS_MANY":break;case"BELONGS_TO":Object(_types__WEBPACK_IMPORTED_MODULE_0__.m)(association)&&result.push(name+" { id _deleted }");break;default:Object(_util__WEBPACK_IMPORTED_MODULE_1__.f)(connectionType)}})),result}(modelDefinition))),scalarAndMetadataFields.join("\n")}function getScalarFields(modelDefinition){var fields=modelDefinition.fields;return Object.values(fields).filter((function(field){return!(!Object(_types__WEBPACK_IMPORTED_MODULE_0__.g)(field.type)&&!Object(_types__WEBPACK_IMPORTED_MODULE_0__.f)(field.type))})).reduce((function(acc,field){return acc[field.name]=field,acc}),{})}function getAuthorizationRules(modelDefinition){var _a=([].concat(modelDefinition.attributes).find((function(attr){return attr&&"auth"===attr.type}))||{}).properties,_b=(void 0===_a?{}:_a).rules,resultRules=[];return(void 0===_b?[]:_b).forEach((function(rule){var _a=rule.identityClaim,identityClaim=void 0===_a?"cognito:username":_a,_b=rule.ownerField,ownerField=void 0===_b?"owner":_b,_c=rule.operations,operations=void 0===_c?["create","update","delete","read"]:_c,_d=rule.provider,provider=void 0===_d?"userPools":_d,_e=rule.groupClaim,groupClaim=void 0===_e?"cognito:groups":_e,_f=rule.allow,authStrategy=void 0===_f?"iam":_f,_g=rule.groups,groups=void 0===_g?[]:_g,isOwnerAuth="owner"===authStrategy;if(operations.includes("read")||isOwnerAuth){var authRule={identityClaim:identityClaim,ownerField:ownerField,provider:provider,groupClaim:groupClaim,authStrategy:authStrategy,groups:groups,areSubscriptionsPublic:!1};if(isOwnerAuth){var _h=([].concat(modelDefinition.attributes).find((function(attr){return attr&&"model"===attr.type}))||{}).properties,_j=(void 0===_h?{}:_h).subscriptions,_k=(void 0===_j?{}:_j).level,level=void 0===_k?"on":_k;authRule.areSubscriptionsPublic=!operations.includes("read")||"public"===level}isOwnerAuth?resultRules.push(authRule):resultRules.unshift(authRule)}})),resultRules}function buildSubscriptionGraphQLOperation(namespace,modelDefinition,transformerMutationType,isOwnerAuthorization,ownerField){var selectionSet=generateSelectionSet(namespace,modelDefinition),typeName=modelDefinition.name,opName=(modelDefinition.pluralName,"on"+transformerMutationType+typeName),docArgs="",opArgs="";return isOwnerAuthorization&&(docArgs="($"+ownerField+": String!)",opArgs="("+ownerField+": $"+ownerField+")"),[transformerMutationType,opName,"subscription operation"+docArgs+"{\n\t\t\t"+opName+opArgs+"{\n\t\t\t\t"+selectionSet+"\n\t\t\t}\n\t\t}"]}function buildGraphQLOperation(namespace,modelDefinition,graphQLOpType){var operation,transformerMutationType,selectionSet=generateSelectionSet(namespace,modelDefinition),typeName=modelDefinition.name,pluralTypeName=modelDefinition.pluralName,documentArgs=" ",operationArgs=" ";switch(graphQLOpType){case"LIST":operation="sync"+pluralTypeName,documentArgs="($limit: Int, $nextToken: String, $lastSync: AWSTimestamp, $filter: Model"+typeName+"FilterInput)",operationArgs="(limit: $limit, nextToken: $nextToken, lastSync: $lastSync, filter: $filter)",selectionSet="items {\n\t\t\t\t\t\t\t"+selectionSet+"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextToken\n\t\t\t\t\t\tstartedAt";break;case"CREATE":operation="create"+typeName,documentArgs="($input: Create"+typeName+"Input!)",operationArgs="(input: $input)",transformerMutationType=TransformerMutationType.CREATE;break;case"UPDATE":operation="update"+typeName,documentArgs="($input: Update"+typeName+"Input!, $condition: Model"+typeName+"ConditionInput)",operationArgs="(input: $input, condition: $condition)",transformerMutationType=TransformerMutationType.UPDATE;break;case"DELETE":operation="delete"+typeName,documentArgs="($input: Delete"+typeName+"Input!, $condition: Model"+typeName+"ConditionInput)",operationArgs="(input: $input, condition: $condition)",transformerMutationType=TransformerMutationType.DELETE;break;case"GET":operation="get"+typeName,documentArgs="($id: ID!)",operationArgs="(id: $id)",transformerMutationType=TransformerMutationType.GET;break;default:Object(_util__WEBPACK_IMPORTED_MODULE_1__.f)(graphQLOpType)}return[[transformerMutationType,operation,GraphQLOperationType[graphQLOpType]+" operation"+documentArgs+"{\n\t\t"+operation+operationArgs+"{\n\t\t\t"+selectionSet+"\n\t\t}\n\t}"]]}function createMutationInstanceFromModelOperation(relationships,modelDefinition,opType,model,element,condition,MutationEventConstructor,modelInstanceCreator,id){var operation;switch(opType){case _types__WEBPACK_IMPORTED_MODULE_0__.c.INSERT:operation=TransformerMutationType.CREATE;break;case _types__WEBPACK_IMPORTED_MODULE_0__.c.UPDATE:operation=TransformerMutationType.UPDATE;break;case _types__WEBPACK_IMPORTED_MODULE_0__.c.DELETE:operation=TransformerMutationType.DELETE;break;default:Object(_util__WEBPACK_IMPORTED_MODULE_1__.f)(opType)}return modelInstanceCreator(MutationEventConstructor,__assign(__assign({},id?{id:id}:{}),{data:JSON.stringify(element),modelId:element.id,model:model.name,operation:operation,condition:JSON.stringify(condition)}))}function predicateToGraphQLCondition(predicate){var result={};return predicate&&Array.isArray(predicate.predicates)?(predicate.predicates.forEach((function(p){var _a;if(Object(_types__WEBPACK_IMPORTED_MODULE_0__.k)(p)){var field=p.field,operator=p.operator,operand=p.operand;if("id"===field)return;result[field]=((_a={})[operator]=operand,_a)}else result[p.type]=predicateToGraphQLCondition(p)})),result):result}function predicateToGraphQLFilter(predicatesGroup){var result={};if(!predicatesGroup||!Array.isArray(predicatesGroup.predicates))return result;var type=predicatesGroup.type,predicates=predicatesGroup.predicates,isList="and"===type||"or"===type;result[type]=isList?[]:{};var appendToFilter=function(value){return isList?result[type].push(value):result[type]=value};return predicates.forEach((function(predicate){var _a,_b;if(Object(_types__WEBPACK_IMPORTED_MODULE_0__.k)(predicate)){var field=predicate.field,operator=predicate.operator,operand=predicate.operand,gqlField=((_a={})[field]=((_b={})[operator]=operand,_b),_a);appendToFilter(gqlField)}else appendToFilter(predicateToGraphQLFilter(predicate))})),result}function getUserGroupsFromToken(token,rule){var userGroups=token[rule.groupClaim]||[];if("string"==typeof userGroups){var parsedGroups=void 0;try{parsedGroups=JSON.parse(userGroups)}catch(e){parsedGroups=userGroups}userGroups=[].concat(parsedGroups)}return userGroups}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EMPTY})),__webpack_require__.d(__webpack_exports__,"b",(function(){return empty}));var _Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),EMPTY=new _Observable__WEBPACK_IMPORTED_MODULE_0__.a((function(subscriber){return subscriber.complete()}));function empty(scheduler){return scheduler?function(scheduler){return new _Observable__WEBPACK_IMPORTED_MODULE_0__.a((function(subscriber){return scheduler.schedule((function(){return subscriber.complete()}))}))}(scheduler):EMPTY}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return async}));var _AsyncAction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(90),async=new(__webpack_require__(88).a)(_AsyncAction__WEBPACK_IMPORTED_MODULE_0__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isArray}));var isArray=Array.isArray||function(x){return x&&"number"==typeof x.length}},function(module,__webpack_exports__,__webpack_require__){"use strict";function isScheduler(value){return value&&"function"==typeof value.schedule}__webpack_require__.d(__webpack_exports__,"a",(function(){return isScheduler}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var zen_observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(322),Observable=__webpack_require__.n(zen_observable__WEBPACK_IMPORTED_MODULE_0__).a;__webpack_exports__.a=Observable},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return map}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Subscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4);function map(project,thisArg){return function(source){if("function"!=typeof project)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return source.lift(new MapOperator(project,thisArg))}}var MapOperator=function(){function MapOperator(project,thisArg){this.project=project,this.thisArg=thisArg}return MapOperator.prototype.call=function(subscriber,source){return source.subscribe(new MapSubscriber(subscriber,this.project,this.thisArg))},MapOperator}(),MapSubscriber=function(_super){function MapSubscriber(destination,project,thisArg){var _this=_super.call(this,destination)||this;return _this.project=project,_this.count=0,_this.thisArg=thisArg||_this,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(MapSubscriber,_super),MapSubscriber.prototype._next=function(value){var result;try{result=this.project.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MapSubscriber}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return tryCatch}));var tryCatchTarget,_errorObject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return _errorObject__WEBPACK_IMPORTED_MODULE_0__.a.e=e,_errorObject__WEBPACK_IMPORTED_MODULE_0__.a}}function tryCatch(fn){return tryCatchTarget=fn,tryCatcher}},function(module,exports,__webpack_require__){var v1=__webpack_require__(386),v4=__webpack_require__(387),uuid=v4;uuid.v1=v1,uuid.v4=v4,module.exports=uuid},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return fromBase64})),__webpack_require__.d(__webpack_exports__,"b",(function(){return toBase64}));for(var alphabetByEncoding={},alphabetByValue=new Array(64),i=0,start="A".charCodeAt(0),limit="Z".charCodeAt(0);i+start<=limit;i++){var char=String.fromCharCode(i+start);alphabetByEncoding[char]=i,alphabetByValue[i]=char}for(i=0,start="a".charCodeAt(0),limit="z".charCodeAt(0);i+start<=limit;i++){char=String.fromCharCode(i+start);var index=i+26;alphabetByEncoding[char]=index,alphabetByValue[index]=char}for(i=0;i<10;i++){alphabetByEncoding[i.toString(10)]=i+52;char=i.toString(10),index=i+52;alphabetByEncoding[char]=index,alphabetByValue[index]=char}alphabetByEncoding["+"]=62,alphabetByValue[62]="+",alphabetByEncoding["/"]=63,alphabetByValue[63]="/";function fromBase64(input){var totalByteLength=input.length/4*3;"=="===input.substr(-2)?totalByteLength-=2:"="===input.substr(-1)&&totalByteLength--;for(var out=new ArrayBuffer(totalByteLength),dataView=new DataView(out),i=0;i<input.length;i+=4){for(var bits=0,bitLength=0,j=i,limit=i+3;j<=limit;j++)"="!==input[j]?(bits|=alphabetByEncoding[input[j]]<<6*(limit-j),bitLength+=6):bits>>=6;var chunkOffset=i/4*3;bits>>=bitLength%8;for(var byteLength=Math.floor(bitLength/8),k=0;k<byteLength;k++){var offset=8*(byteLength-k-1);dataView.setUint8(chunkOffset+k,(bits&255<<offset)>>offset)}}return new Uint8Array(out)}function toBase64(input){for(var str="",i=0;i<input.length;i+=3){for(var bits=0,bitLength=0,j=i,limit=Math.min(i+3,input.length);j<limit;j++)bits|=input[j]<<8*(limit-j-1),bitLength+=8;var bitClusterCount=Math.ceil(bitLength/6);bits<<=6*bitClusterCount-bitLength;for(var k=1;k<=bitClusterCount;k++){var offset=6*(bitClusterCount-k);str+=alphabetByValue[(bits&63<<offset)>>offset]}str+="==".slice(0,4-bitClusterCount)}return str}},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),es=__webpack_require__(3),dist_es=__webpack_require__(126);var fetch_http_handler_FetchHttpHandler=function(){function FetchHttpHandler(_a){var requestTimeout=(void 0===_a?{}:_a).requestTimeout;this.requestTimeout=requestTimeout}return FetchHttpHandler.prototype.destroy=function(){},FetchHttpHandler.prototype.handle=function(request,_a){var abortSignal=(void 0===_a?{}:_a).abortSignal,requestTimeoutInMs=this.requestTimeout;if(null==abortSignal?void 0:abortSignal.aborted){var abortError=new Error("Request aborted");return abortError.name="AbortError",Promise.reject(abortError)}var path=request.path;if(request.query){var queryString=Object(dist_es.a)(request.query);queryString&&(path+="?"+queryString)}var port=request.port,method=request.method,url=request.protocol+"//"+request.hostname+(port?":"+port:"")+path,requestOptions={body:"GET"===method||"HEAD"===method?void 0:request.body,headers:new Headers(request.headers),method:method};"undefined"!=typeof AbortController&&(requestOptions.signal=abortSignal);var timeoutInMs,fetchRequest=new Request(url,requestOptions),raceOfPromises=[fetch(fetchRequest).then((function(response){var e_1,_a,fetchHeaders=response.headers,transformedHeaders={};try{for(var _b=Object(tslib_es6.__values)(fetchHeaders.entries()),_c=_b.next();!_c.done;_c=_b.next()){var pair=_c.value;transformedHeaders[pair[0]]=pair[1]}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return void 0!==response.body?{response:new es.b({headers:transformedHeaders,statusCode:response.status,body:response.body})}:response.blob().then((function(body){return{response:new es.b({headers:transformedHeaders,statusCode:response.status,body:body})}}))})),(timeoutInMs=requestTimeoutInMs,void 0===timeoutInMs&&(timeoutInMs=0),new Promise((function(resolve,reject){timeoutInMs&&setTimeout((function(){var timeoutError=new Error("Request did not complete within "+timeoutInMs+" ms");timeoutError.name="TimeoutError",reject(timeoutError)}),timeoutInMs)})))];return abortSignal&&raceOfPromises.push(new Promise((function(resolve,reject){abortSignal.onabort=function(){var abortError=new Error("Request aborted");abortError.name="AbortError",reject(abortError)}}))),Promise.race(raceOfPromises)},FetchHttpHandler}(),util_base64_browser_dist_es=__webpack_require__(31),streamCollector=function(stream){return"function"==typeof Blob&&stream instanceof Blob?function(blob){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var base64,arrayBuffer;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,readToBase64(blob)];case 1:return base64=_a.sent(),arrayBuffer=Object(util_base64_browser_dist_es.a)(base64),[2,new Uint8Array(arrayBuffer)]}}))}))}(stream):function(stream){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var res,reader,isDone,_a,done,value,prior;return Object(tslib_es6.__generator)(this,(function(_b){switch(_b.label){case 0:res=new Uint8Array(0),reader=stream.getReader(),isDone=!1,_b.label=1;case 1:return isDone?[3,3]:[4,reader.read()];case 2:return _a=_b.sent(),done=_a.done,(value=_a.value)&&(prior=res,(res=new Uint8Array(prior.length+value.length)).set(prior),res.set(value,prior.length)),isDone=done,[3,1];case 3:return[2,res]}}))}))}(stream)};function readToBase64(blob){return new Promise((function(resolve,reject){var reader=new FileReader;reader.onloadend=function(){var _a;if(2!==reader.readyState)return reject(new Error("Reader aborted too early"));var result=null!==(_a=reader.result)&&void 0!==_a?_a:"",commaIndex=result.indexOf(","),dataOffset=commaIndex>-1?commaIndex+1:result.length;resolve(result.substring(dataOffset))},reader.onabort=function(){return reject(new Error("Read aborted"))},reader.onerror=function(){return reject(reader.error)},reader.readAsDataURL(blob)}))}__webpack_require__.d(__webpack_exports__,"a",(function(){return fetch_http_handler_FetchHttpHandler})),__webpack_require__.d(__webpack_exports__,"b",(function(){return streamCollector}))},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(477),util=__webpack_require__(478);function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=urlParse,exports.resolve=function(source,relative){return urlParse(source,!1,!0).resolve(relative)},exports.resolveObject=function(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative},exports.format=function(obj){util.isString(obj)&&(obj=urlParse(obj));return obj instanceof Url?obj.format():Url.prototype.format.call(obj)},exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,unwise=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=__webpack_require__(479);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var queryIndex=url.indexOf("?"),splitter=-1!==queryIndex&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter);uSplit[0]=uSplit[0].replace(/\\/g,"/");var rest=url=uSplit.join(splitter);if(rest=rest.trim(),!slashesDenoteHost&&1===url.split("#").length){var simplePath=simplePathPattern.exec(rest);if(simplePath)return this.path=rest,this.href=rest,this.pathname=simplePath[1],simplePath[2]?(this.search=simplePath[2],this.query=parseQueryString?querystring.parse(this.search.substr(1)):this.search.substr(1)):parseQueryString&&(this.search="",this.query={}),this}var proto=protocolPattern.exec(rest);if(proto){var lowerProto=(proto=proto[0]).toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes="//"===rest.substr(0,2);!slashes||proto&&hostlessProtocol[proto]||(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){for(var auth,atSign,hostEnd=-1,i=0;i<hostEndingChars.length;i++){-1!==(hec=rest.indexOf(hostEndingChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec)}-1!==(atSign=-1===hostEnd?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd))&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(i=0;i<nonHostChars.length;i++){var hec;-1!==(hec=rest.indexOf(nonHostChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec)}-1===hostEnd&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";var ipv6Hostname="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),l=(i=0,hostparts.length);i<l;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)part.charCodeAt(j)>127?newpart+="x":newpart+=part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),ipv6Hostname||(this.hostname=punycode.toASCII(this.hostname));var p=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rest[0]&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(-1!==rest.indexOf(ae)){var esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");-1!==hash&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf("?");if(-1!==qm?(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){p=this.pathname||"";var s=this.search||"";this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||"";auth&&(auth=(auth=encodeURIComponent(auth)).replace(/%3A/i,":"),auth+="@");var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query="";this.host?host=auth+this.host:this.hostname&&(host=auth+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(host+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&"?"+query||"";return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&!1!==host?(host="//"+(host||""),pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):host||(host=""),hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),search&&"?"!==search.charAt(0)&&(search="?"+search),protocol+host+(pathname=pathname.replace(/[?#]/g,(function(match){return encodeURIComponent(match)})))+(search=search.replace("#","%23"))+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}for(var result=new Url,tkeys=Object.keys(this),tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}if(result.hash=relative.hash,""===relative.href)return result.href=result.format(),result;if(relative.slashes&&!relative.protocol){for(var rkeys=Object.keys(relative),rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];"protocol"!==rkey&&(result[rkey]=relative[rkey])}return slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),result.href=result.format(),result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){for(var keys=Object.keys(relative),v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}return result.href=result.format(),result}if(result.protocol=relative.protocol,relative.host||hostlessProtocol[relative.protocol])result.pathname=relative.pathname;else{for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}if(result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||"";result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&"/"===result.pathname.charAt(0),isRelAbs=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],psychotic=(relPath=relative.pathname&&relative.pathname.split("/")||[],result.protocol&&!slashedProtocol[result.protocol]);if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(""===relPath[0]||""===srcPath[0])),isRelAbs)result.host=relative.host||""===relative.host?relative.host:result.host,result.hostname=relative.hostname||""===relative.hostname?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!util.isNullOrUndefined(relative.search)){if(psychotic)result.hostname=result.host=srcPath.shift(),(authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift());return result.search=relative.search,result.query=relative.query,util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.search?result.path="/"+result.search:result.path=null,result.href=result.format(),result;for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;i>=0;i--)"."===(last=srcPath[i])?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..");!mustEndAbs||""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)||srcPath.unshift(""),hasTrailingSlash&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("");var authInHost,isAbsolute=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0);psychotic&&(result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"",(authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift()));return(mustEndAbs=mustEndAbs||result.host&&srcPath.length)&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host);port&&(":"!==(port=port[0])&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return resolveHostHeaderConfig})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getHostHeaderPlugin}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_aws_sdk_protocol_http__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);function resolveHostHeaderConfig(input){return input}var hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},getHostHeaderPlugin=function(options){return{applyToStack:function(clientStack){clientStack.add(function(options){return function(next){return function(args){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0,void 0,void 0,(function(){var request,_a;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_b){return _aws_sdk_protocol_http__WEBPACK_IMPORTED_MODULE_1__.a.isInstance(args.request)?(request=args.request,(void 0===(_a=(options.requestHandler.metadata||{}).handlerProtocol)?"":_a).indexOf("h2")>=0&&!request.headers[":authority"]?(delete request.headers.host,request.headers[":authority"]=""):request.headers.host||(request.headers.host=request.hostname),[2,next(args)]):[2,next(args)]}))}))}}}(options),hostHeaderMiddlewareOptions)}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0);function resolveUserAgentConfig(input){return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},input),{customUserAgent:"string"==typeof input.customUserAgent?[[input.customUserAgent]]:input.customUserAgent})}var es=__webpack_require__(3),UA_ESCAPE_REGEX=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,escapeUserAgent=function(_a){var _b=Object(tslib_es6.__read)(_a,2),name=_b[0],version=_b[1],prefixSeparatorIndex=name.indexOf("/"),prefix=name.substring(0,prefixSeparatorIndex),uaName=name.substring(prefixSeparatorIndex+1);return"api"===prefix&&(uaName=uaName.toLowerCase()),[prefix,uaName,version].filter((function(item){return item&&item.length>0})).map((function(item){return null==item?void 0:item.replace(UA_ESCAPE_REGEX,"_")})).join("/")},getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},getUserAgentPlugin=function(config){return{applyToStack:function(clientStack){var options;clientStack.add((options=config,function(next,context){return function(args){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var request,headers,userAgent,defaultUserAgent,customUserAgent,normalUAValue,_a,_b;return Object(tslib_es6.__generator)(this,(function(_c){switch(_c.label){case 0:return request=args.request,es.a.isInstance(request)?(headers=request.headers,userAgent=(null===(_a=null==context?void 0:context.userAgent)||void 0===_a?void 0:_a.map(escapeUserAgent))||[],[4,options.defaultUserAgentProvider()]):[2,next(args)];case 1:return defaultUserAgent=_c.sent().map(escapeUserAgent),customUserAgent=(null===(_b=null==options?void 0:options.customUserAgent)||void 0===_b?void 0:_b.map(escapeUserAgent))||[],headers["x-amz-user-agent"]=Object(tslib_es6.__spread)(defaultUserAgent,userAgent,customUserAgent).join(" "),normalUAValue=Object(tslib_es6.__spread)(defaultUserAgent.filter((function(section){return section.startsWith("aws-sdk-")})),customUserAgent).join(" "),"browser"!==options.runtime&&normalUAValue&&(headers["user-agent"]=headers["user-agent"]?headers["user-agent"]+" "+normalUAValue:normalUAValue),[2,next(Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},args),{request:request}))]}}))}))}}),getUserAgentMiddlewareOptions)}}};__webpack_require__.d(__webpack_exports__,"b",(function(){return resolveUserAgentConfig})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getUserAgentPlugin}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),resolveEndpointsConfig=function(input){var _a;return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},input),{tls:null===(_a=input.tls)||void 0===_a||_a,endpoint:input.endpoint?normalizeEndpoint(input):function(){return getEndPointFromRegion(input)},isCustomEndpoint:!!input.endpoint})},normalizeEndpoint=function(input){var endpoint=input.endpoint,urlParser=input.urlParser;if("string"==typeof endpoint){var promisified_1=Promise.resolve(urlParser(endpoint));return function(){return promisified_1}}if("object"==typeof endpoint){var promisified_2=Promise.resolve(endpoint);return function(){return promisified_2}}return endpoint},getEndPointFromRegion=function(input){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var _a,tls,region,hostname,_b;return Object(tslib_es6.__generator)(this,(function(_c){switch(_c.label){case 0:return _a=input.tls,tls=void 0===_a||_a,[4,input.region()];case 1:if(region=_c.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(region))throw new Error("Invalid region in client config");return[4,input.regionInfoProvider(region)];case 2:if(!(hostname=(null!==(_b=_c.sent())&&void 0!==_b?_b:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,input.urlParser((tls?"https:":"http:")+"//"+hostname)]}}))}))},resolveRegionConfig=function(input){if(!input.region)throw new Error("Region is missing");return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},input),{region:normalizeRegion(input.region)})},normalizeRegion=function(region){if("string"==typeof region){var promisified_1=Promise.resolve(region);return function(){return promisified_1}}return region};__webpack_require__.d(__webpack_exports__,"a",(function(){return resolveEndpointsConfig})),__webpack_require__.d(__webpack_exports__,"b",(function(){return resolveRegionConfig}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return fromHex})),__webpack_require__.d(__webpack_exports__,"b",(function(){return toHex}));for(var SHORT_TO_HEX={},HEX_TO_SHORT={},i=0;i<256;i++){var encodedByte=i.toString(16).toLowerCase();1===encodedByte.length&&(encodedByte="0"+encodedByte),SHORT_TO_HEX[i]=encodedByte,HEX_TO_SHORT[encodedByte]=i}function fromHex(encoded){if(encoded.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var out=new Uint8Array(encoded.length/2),i=0;i<encoded.length;i+=2){var encodedByte=encoded.substr(i,2).toLowerCase();if(!(encodedByte in HEX_TO_SHORT))throw new Error("Cannot decode unrecognized sequence "+encodedByte+" as hexadecimal");out[i/2]=HEX_TO_SHORT[encodedByte]}return out}function toHex(bytes){for(var out="",i=0;i<bytes.byteLength;i++)out+=SHORT_TO_HEX[bytes[i]];return out}},function(module,exports,__webpack_require__){(function(module){!function(module,exports){"use strict";function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}function BN(number,base,endian){if(BN.isBN(number))return number;this.negative=0,this.words=null,this.length=0,this.red=null,null!==number&&("le"!==base&&"be"!==base||(endian=base,base=10),this._init(number||0,base||10,endian||"be"))}var Buffer;"object"==typeof module?module.exports=BN:exports.BN=BN,BN.BN=BN,BN.wordSize=26;try{Buffer=__webpack_require__(429).Buffer}catch(e){}function parseHex(str,start,end){for(var r=0,len=Math.min(str.length,end),i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4,r|=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:15&c}return r}function parseBase(str,start,end,mul){for(var r=0,len=Math.min(str.length,end),i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul,r+=c>=49?c-49+10:c>=17?c-17+10:c}return r}BN.isBN=function(num){return num instanceof BN||null!==num&&"object"==typeof num&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words)},BN.max=function(left,right){return left.cmp(right)>0?left:right},BN.min=function(left,right){return left.cmp(right)<0?left:right},BN.prototype._init=function(number,base,endian){if("number"==typeof number)return this._initNumber(number,base,endian);if("object"==typeof number)return this._initArray(number,base,endian);"hex"===base&&(base=16),assert(base===(0|base)&&base>=2&&base<=36);var start=0;"-"===(number=number.toString().replace(/\s+/g,""))[0]&&start++,16===base?this._parseHex(number,start):this._parseBase(number,base,start),"-"===number[0]&&(this.negative=1),this.strip(),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initNumber=function(number,base,endian){number<0&&(this.negative=1,number=-number),number<67108864?(this.words=[67108863&number],this.length=1):number<4503599627370496?(this.words=[67108863&number,number/67108864&67108863],this.length=2):(assert(number<9007199254740992),this.words=[67108863&number,number/67108864&67108863,1],this.length=3),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initArray=function(number,base,endian){if(assert("number"==typeof number.length),number.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(number.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w,off=0;if("be"===endian)for(i=number.length-1,j=0;i>=0;i-=3)w=number[i]|number[i-1]<<8|number[i-2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,(off+=24)>=26&&(off-=26,j++);else if("le"===endian)for(i=0,j=0;i<number.length;i+=3)w=number[i]|number[i+1]<<8|number[i+2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,(off+=24)>=26&&(off-=26,j++);return this.strip()},BN.prototype._parseHex=function(number,start){this.length=Math.ceil((number.length-start)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w,off=0;for(i=number.length-6,j=0;i>=start;i-=6)w=parseHex(number,i,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303,(off+=24)>=26&&(off-=26,j++);i+6!==start&&(w=parseHex(number,start,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303),this.strip()},BN.prototype._parseBase=function(number,base,start){this.words=[0],this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base)limbLen++;limbLen--,limbPow=limbPow/base|0;for(var total=number.length-start,mod=total%limbLen,end=Math.min(total,total-mod)+start,word=0,i=start;i<end;i+=limbLen)word=parseBase(number,i,i+limbLen,base),this.imuln(limbPow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word);if(0!==mod){var pow=1;for(word=parseBase(number,i,number.length,base),i=0;i<mod;i++)pow*=base;this.imuln(pow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word)}},BN.prototype.copy=function(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++)dest.words[i]=this.words[i];dest.length=this.length,dest.negative=this.negative,dest.red=this.red},BN.prototype.clone=function(){var r=new BN(null);return this.copy(r),r},BN.prototype._expand=function(size){for(;this.length<size;)this.words[this.length++]=0;return this},BN.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len,len=len-1|0;var a=0|self.words[0],b=0|num.words[0],r=a*b,lo=67108863&r,carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){for(var ncarry=carry>>>26,rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;ncarry+=(r=(a=0|self.words[i])*(b=0|num.words[j])+rword)/67108864|0,rword=67108863&r}out.words[k]=0|rword,carry=0|ncarry}return 0!==carry?out.words[k]=0|carry:out.length--,out.strip()}BN.prototype.toString=function(base,padding){var out;if(padding=0|padding||1,16===(base=base||10)||"hex"===base){out="";for(var off=0,carry=0,i=0;i<this.length;i++){var w=this.words[i],word=(16777215&(w<<off|carry)).toString(16);out=0!==(carry=w>>>24-off&16777215)||i!==this.length-1?zeros[6-word.length]+word+out:word+out,(off+=2)>=26&&(off-=26,i--)}for(0!==carry&&(out=carry.toString(16)+out);out.length%padding!=0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}if(base===(0|base)&&base>=2&&base<=36){var groupSize=groupSizes[base],groupBase=groupBases[base];out="";var c=this.clone();for(c.negative=0;!c.isZero();){var r=c.modn(groupBase).toString(base);out=(c=c.idivn(groupBase)).isZero()?r+out:zeros[groupSize-r.length]+r+out}for(this.isZero()&&(out="0"+out);out.length%padding!=0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function(){var ret=this.words[0];return 2===this.length?ret+=67108864*this.words[1]:3===this.length&&1===this.words[2]?ret+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-ret:ret},BN.prototype.toJSON=function(){return this.toString(16)},BN.prototype.toBuffer=function(endian,length){return assert(void 0!==Buffer),this.toArrayLike(Buffer,endian,length)},BN.prototype.toArray=function(endian,length){return this.toArrayLike(Array,endian,length)},BN.prototype.toArrayLike=function(ArrayType,endian,length){var byteLength=this.byteLength(),reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,"byte array longer than desired length"),assert(reqLength>0,"Requested array length <= 0"),this.strip();var b,i,littleEndian="le"===endian,res=new ArrayType(reqLength),q=this.clone();if(littleEndian){for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[i]=b;for(;i<reqLength;i++)res[i]=0}else{for(i=0;i<reqLength-byteLength;i++)res[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[reqLength-i-1]=b}return res},Math.clz32?BN.prototype._countBits=function(w){return 32-Math.clz32(w)}:BN.prototype._countBits=function(w){var t=w,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},BN.prototype._zeroBits=function(w){if(0===w)return 26;var t=w,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},BN.prototype.bitLength=function(){var w=this.words[this.length-1],hi=this._countBits(w);return 26*(this.length-1)+hi},BN.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(r+=b,26!==b)break}return r},BN.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function(width){return 0!==this.negative?this.abs().inotn(width).iaddn(1):this.clone()},BN.prototype.fromTwos=function(width){return this.testn(width-1)?this.notn(width).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function(){return 0!==this.negative},BN.prototype.neg=function(){return this.clone().ineg()},BN.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function(num){for(;this.length<num.length;)this.words[this.length++]=0;for(var i=0;i<num.length;i++)this.words[i]=this.words[i]|num.words[i];return this.strip()},BN.prototype.ior=function(num){return assert(0==(this.negative|num.negative)),this.iuor(num)},BN.prototype.or=function(num){return this.length>num.length?this.clone().ior(num):num.clone().ior(this)},BN.prototype.uor=function(num){return this.length>num.length?this.clone().iuor(num):num.clone().iuor(this)},BN.prototype.iuand=function(num){var b;b=this.length>num.length?num:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&num.words[i];return this.length=b.length,this.strip()},BN.prototype.iand=function(num){return assert(0==(this.negative|num.negative)),this.iuand(num)},BN.prototype.and=function(num){return this.length>num.length?this.clone().iand(num):num.clone().iand(this)},BN.prototype.uand=function(num){return this.length>num.length?this.clone().iuand(num):num.clone().iuand(this)},BN.prototype.iuxor=function(num){var a,b;this.length>num.length?(a=this,b=num):(a=num,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},BN.prototype.ixor=function(num){return assert(0==(this.negative|num.negative)),this.iuxor(num)},BN.prototype.xor=function(num){return this.length>num.length?this.clone().ixor(num):num.clone().ixor(this)},BN.prototype.uxor=function(num){return this.length>num.length?this.clone().iuxor(num):num.clone().iuxor(this)},BN.prototype.inotn=function(width){assert("number"==typeof width&&width>=0);var bytesNeeded=0|Math.ceil(width/26),bitsLeft=width%26;this._expand(bytesNeeded),bitsLeft>0&&bytesNeeded--;for(var i=0;i<bytesNeeded;i++)this.words[i]=67108863&~this.words[i];return bitsLeft>0&&(this.words[i]=~this.words[i]&67108863>>26-bitsLeft),this.strip()},BN.prototype.notn=function(width){return this.clone().inotn(width)},BN.prototype.setn=function(bit,val){assert("number"==typeof bit&&bit>=0);var off=bit/26|0,wbit=bit%26;return this._expand(off+1),this.words[off]=val?this.words[off]|1<<wbit:this.words[off]&~(1<<wbit),this.strip()},BN.prototype.iadd=function(num){var r,a,b;if(0!==this.negative&&0===num.negative)return this.negative=0,r=this.isub(num),this.negative^=1,this._normSign();if(0===this.negative&&0!==num.negative)return num.negative=0,r=this.isub(num),num.negative=1,r._normSign();this.length>num.length?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)r=(0|a.words[i])+(0|b.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;for(;0!==carry&&i<a.length;i++)r=(0|a.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;if(this.length=a.length,0!==carry)this.words[this.length]=carry,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},BN.prototype.add=function(num){var res;return 0!==num.negative&&0===this.negative?(num.negative=0,res=this.sub(num),num.negative^=1,res):0===num.negative&&0!==this.negative?(this.negative=0,res=num.sub(this),this.negative=1,res):this.length>num.length?this.clone().iadd(num):num.clone().iadd(this)},BN.prototype.isub=function(num){if(0!==num.negative){num.negative=0;var r=this.iadd(num);return num.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(num),this.negative=1,this._normSign();var a,b,cmp=this.cmp(num);if(0===cmp)return this.negative=0,this.length=1,this.words[0]=0,this;cmp>0?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)carry=(r=(0|a.words[i])-(0|b.words[i])+carry)>>26,this.words[i]=67108863&r;for(;0!==carry&&i<a.length;i++)carry=(r=(0|a.words[i])+carry)>>26,this.words[i]=67108863&r;if(0===carry&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function(num){return this.clone().isub(num)};var comb10MulTo=function(self,num,out){var lo,mid,hi,a=self.words,b=num.words,o=out.words,c=0,a0=0|a[0],al0=8191&a0,ah0=a0>>>13,a1=0|a[1],al1=8191&a1,ah1=a1>>>13,a2=0|a[2],al2=8191&a2,ah2=a2>>>13,a3=0|a[3],al3=8191&a3,ah3=a3>>>13,a4=0|a[4],al4=8191&a4,ah4=a4>>>13,a5=0|a[5],al5=8191&a5,ah5=a5>>>13,a6=0|a[6],al6=8191&a6,ah6=a6>>>13,a7=0|a[7],al7=8191&a7,ah7=a7>>>13,a8=0|a[8],al8=8191&a8,ah8=a8>>>13,a9=0|a[9],al9=8191&a9,ah9=a9>>>13,b0=0|b[0],bl0=8191&b0,bh0=b0>>>13,b1=0|b[1],bl1=8191&b1,bh1=b1>>>13,b2=0|b[2],bl2=8191&b2,bh2=b2>>>13,b3=0|b[3],bl3=8191&b3,bh3=b3>>>13,b4=0|b[4],bl4=8191&b4,bh4=b4>>>13,b5=0|b[5],bl5=8191&b5,bh5=b5>>>13,b6=0|b[6],bl6=8191&b6,bh6=b6>>>13,b7=0|b[7],bl7=8191&b7,bh7=b7>>>13,b8=0|b[8],bl8=8191&b8,bh8=b8>>>13,b9=0|b[9],bl9=8191&b9,bh9=b9>>>13;out.negative=self.negative^num.negative,out.length=19;var w0=(c+(lo=Math.imul(al0,bl0))|0)+((8191&(mid=(mid=Math.imul(al0,bh0))+Math.imul(ah0,bl0)|0))<<13)|0;c=((hi=Math.imul(ah0,bh0))+(mid>>>13)|0)+(w0>>>26)|0,w0&=67108863,lo=Math.imul(al1,bl0),mid=(mid=Math.imul(al1,bh0))+Math.imul(ah1,bl0)|0,hi=Math.imul(ah1,bh0);var w1=(c+(lo=lo+Math.imul(al0,bl1)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh1)|0)+Math.imul(ah0,bl1)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh1)|0)+(mid>>>13)|0)+(w1>>>26)|0,w1&=67108863,lo=Math.imul(al2,bl0),mid=(mid=Math.imul(al2,bh0))+Math.imul(ah2,bl0)|0,hi=Math.imul(ah2,bh0),lo=lo+Math.imul(al1,bl1)|0,mid=(mid=mid+Math.imul(al1,bh1)|0)+Math.imul(ah1,bl1)|0,hi=hi+Math.imul(ah1,bh1)|0;var w2=(c+(lo=lo+Math.imul(al0,bl2)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh2)|0)+Math.imul(ah0,bl2)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh2)|0)+(mid>>>13)|0)+(w2>>>26)|0,w2&=67108863,lo=Math.imul(al3,bl0),mid=(mid=Math.imul(al3,bh0))+Math.imul(ah3,bl0)|0,hi=Math.imul(ah3,bh0),lo=lo+Math.imul(al2,bl1)|0,mid=(mid=mid+Math.imul(al2,bh1)|0)+Math.imul(ah2,bl1)|0,hi=hi+Math.imul(ah2,bh1)|0,lo=lo+Math.imul(al1,bl2)|0,mid=(mid=mid+Math.imul(al1,bh2)|0)+Math.imul(ah1,bl2)|0,hi=hi+Math.imul(ah1,bh2)|0;var w3=(c+(lo=lo+Math.imul(al0,bl3)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh3)|0)+Math.imul(ah0,bl3)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh3)|0)+(mid>>>13)|0)+(w3>>>26)|0,w3&=67108863,lo=Math.imul(al4,bl0),mid=(mid=Math.imul(al4,bh0))+Math.imul(ah4,bl0)|0,hi=Math.imul(ah4,bh0),lo=lo+Math.imul(al3,bl1)|0,mid=(mid=mid+Math.imul(al3,bh1)|0)+Math.imul(ah3,bl1)|0,hi=hi+Math.imul(ah3,bh1)|0,lo=lo+Math.imul(al2,bl2)|0,mid=(mid=mid+Math.imul(al2,bh2)|0)+Math.imul(ah2,bl2)|0,hi=hi+Math.imul(ah2,bh2)|0,lo=lo+Math.imul(al1,bl3)|0,mid=(mid=mid+Math.imul(al1,bh3)|0)+Math.imul(ah1,bl3)|0,hi=hi+Math.imul(ah1,bh3)|0;var w4=(c+(lo=lo+Math.imul(al0,bl4)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh4)|0)+Math.imul(ah0,bl4)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh4)|0)+(mid>>>13)|0)+(w4>>>26)|0,w4&=67108863,lo=Math.imul(al5,bl0),mid=(mid=Math.imul(al5,bh0))+Math.imul(ah5,bl0)|0,hi=Math.imul(ah5,bh0),lo=lo+Math.imul(al4,bl1)|0,mid=(mid=mid+Math.imul(al4,bh1)|0)+Math.imul(ah4,bl1)|0,hi=hi+Math.imul(ah4,bh1)|0,lo=lo+Math.imul(al3,bl2)|0,mid=(mid=mid+Math.imul(al3,bh2)|0)+Math.imul(ah3,bl2)|0,hi=hi+Math.imul(ah3,bh2)|0,lo=lo+Math.imul(al2,bl3)|0,mid=(mid=mid+Math.imul(al2,bh3)|0)+Math.imul(ah2,bl3)|0,hi=hi+Math.imul(ah2,bh3)|0,lo=lo+Math.imul(al1,bl4)|0,mid=(mid=mid+Math.imul(al1,bh4)|0)+Math.imul(ah1,bl4)|0,hi=hi+Math.imul(ah1,bh4)|0;var w5=(c+(lo=lo+Math.imul(al0,bl5)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh5)|0)+Math.imul(ah0,bl5)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh5)|0)+(mid>>>13)|0)+(w5>>>26)|0,w5&=67108863,lo=Math.imul(al6,bl0),mid=(mid=Math.imul(al6,bh0))+Math.imul(ah6,bl0)|0,hi=Math.imul(ah6,bh0),lo=lo+Math.imul(al5,bl1)|0,mid=(mid=mid+Math.imul(al5,bh1)|0)+Math.imul(ah5,bl1)|0,hi=hi+Math.imul(ah5,bh1)|0,lo=lo+Math.imul(al4,bl2)|0,mid=(mid=mid+Math.imul(al4,bh2)|0)+Math.imul(ah4,bl2)|0,hi=hi+Math.imul(ah4,bh2)|0,lo=lo+Math.imul(al3,bl3)|0,mid=(mid=mid+Math.imul(al3,bh3)|0)+Math.imul(ah3,bl3)|0,hi=hi+Math.imul(ah3,bh3)|0,lo=lo+Math.imul(al2,bl4)|0,mid=(mid=mid+Math.imul(al2,bh4)|0)+Math.imul(ah2,bl4)|0,hi=hi+Math.imul(ah2,bh4)|0,lo=lo+Math.imul(al1,bl5)|0,mid=(mid=mid+Math.imul(al1,bh5)|0)+Math.imul(ah1,bl5)|0,hi=hi+Math.imul(ah1,bh5)|0;var w6=(c+(lo=lo+Math.imul(al0,bl6)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh6)|0)+Math.imul(ah0,bl6)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh6)|0)+(mid>>>13)|0)+(w6>>>26)|0,w6&=67108863,lo=Math.imul(al7,bl0),mid=(mid=Math.imul(al7,bh0))+Math.imul(ah7,bl0)|0,hi=Math.imul(ah7,bh0),lo=lo+Math.imul(al6,bl1)|0,mid=(mid=mid+Math.imul(al6,bh1)|0)+Math.imul(ah6,bl1)|0,hi=hi+Math.imul(ah6,bh1)|0,lo=lo+Math.imul(al5,bl2)|0,mid=(mid=mid+Math.imul(al5,bh2)|0)+Math.imul(ah5,bl2)|0,hi=hi+Math.imul(ah5,bh2)|0,lo=lo+Math.imul(al4,bl3)|0,mid=(mid=mid+Math.imul(al4,bh3)|0)+Math.imul(ah4,bl3)|0,hi=hi+Math.imul(ah4,bh3)|0,lo=lo+Math.imul(al3,bl4)|0,mid=(mid=mid+Math.imul(al3,bh4)|0)+Math.imul(ah3,bl4)|0,hi=hi+Math.imul(ah3,bh4)|0,lo=lo+Math.imul(al2,bl5)|0,mid=(mid=mid+Math.imul(al2,bh5)|0)+Math.imul(ah2,bl5)|0,hi=hi+Math.imul(ah2,bh5)|0,lo=lo+Math.imul(al1,bl6)|0,mid=(mid=mid+Math.imul(al1,bh6)|0)+Math.imul(ah1,bl6)|0,hi=hi+Math.imul(ah1,bh6)|0;var w7=(c+(lo=lo+Math.imul(al0,bl7)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh7)|0)+Math.imul(ah0,bl7)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh7)|0)+(mid>>>13)|0)+(w7>>>26)|0,w7&=67108863,lo=Math.imul(al8,bl0),mid=(mid=Math.imul(al8,bh0))+Math.imul(ah8,bl0)|0,hi=Math.imul(ah8,bh0),lo=lo+Math.imul(al7,bl1)|0,mid=(mid=mid+Math.imul(al7,bh1)|0)+Math.imul(ah7,bl1)|0,hi=hi+Math.imul(ah7,bh1)|0,lo=lo+Math.imul(al6,bl2)|0,mid=(mid=mid+Math.imul(al6,bh2)|0)+Math.imul(ah6,bl2)|0,hi=hi+Math.imul(ah6,bh2)|0,lo=lo+Math.imul(al5,bl3)|0,mid=(mid=mid+Math.imul(al5,bh3)|0)+Math.imul(ah5,bl3)|0,hi=hi+Math.imul(ah5,bh3)|0,lo=lo+Math.imul(al4,bl4)|0,mid=(mid=mid+Math.imul(al4,bh4)|0)+Math.imul(ah4,bl4)|0,hi=hi+Math.imul(ah4,bh4)|0,lo=lo+Math.imul(al3,bl5)|0,mid=(mid=mid+Math.imul(al3,bh5)|0)+Math.imul(ah3,bl5)|0,hi=hi+Math.imul(ah3,bh5)|0,lo=lo+Math.imul(al2,bl6)|0,mid=(mid=mid+Math.imul(al2,bh6)|0)+Math.imul(ah2,bl6)|0,hi=hi+Math.imul(ah2,bh6)|0,lo=lo+Math.imul(al1,bl7)|0,mid=(mid=mid+Math.imul(al1,bh7)|0)+Math.imul(ah1,bl7)|0,hi=hi+Math.imul(ah1,bh7)|0;var w8=(c+(lo=lo+Math.imul(al0,bl8)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh8)|0)+Math.imul(ah0,bl8)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh8)|0)+(mid>>>13)|0)+(w8>>>26)|0,w8&=67108863,lo=Math.imul(al9,bl0),mid=(mid=Math.imul(al9,bh0))+Math.imul(ah9,bl0)|0,hi=Math.imul(ah9,bh0),lo=lo+Math.imul(al8,bl1)|0,mid=(mid=mid+Math.imul(al8,bh1)|0)+Math.imul(ah8,bl1)|0,hi=hi+Math.imul(ah8,bh1)|0,lo=lo+Math.imul(al7,bl2)|0,mid=(mid=mid+Math.imul(al7,bh2)|0)+Math.imul(ah7,bl2)|0,hi=hi+Math.imul(ah7,bh2)|0,lo=lo+Math.imul(al6,bl3)|0,mid=(mid=mid+Math.imul(al6,bh3)|0)+Math.imul(ah6,bl3)|0,hi=hi+Math.imul(ah6,bh3)|0,lo=lo+Math.imul(al5,bl4)|0,mid=(mid=mid+Math.imul(al5,bh4)|0)+Math.imul(ah5,bl4)|0,hi=hi+Math.imul(ah5,bh4)|0,lo=lo+Math.imul(al4,bl5)|0,mid=(mid=mid+Math.imul(al4,bh5)|0)+Math.imul(ah4,bl5)|0,hi=hi+Math.imul(ah4,bh5)|0,lo=lo+Math.imul(al3,bl6)|0,mid=(mid=mid+Math.imul(al3,bh6)|0)+Math.imul(ah3,bl6)|0,hi=hi+Math.imul(ah3,bh6)|0,lo=lo+Math.imul(al2,bl7)|0,mid=(mid=mid+Math.imul(al2,bh7)|0)+Math.imul(ah2,bl7)|0,hi=hi+Math.imul(ah2,bh7)|0,lo=lo+Math.imul(al1,bl8)|0,mid=(mid=mid+Math.imul(al1,bh8)|0)+Math.imul(ah1,bl8)|0,hi=hi+Math.imul(ah1,bh8)|0;var w9=(c+(lo=lo+Math.imul(al0,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh9)|0)+Math.imul(ah0,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh9)|0)+(mid>>>13)|0)+(w9>>>26)|0,w9&=67108863,lo=Math.imul(al9,bl1),mid=(mid=Math.imul(al9,bh1))+Math.imul(ah9,bl1)|0,hi=Math.imul(ah9,bh1),lo=lo+Math.imul(al8,bl2)|0,mid=(mid=mid+Math.imul(al8,bh2)|0)+Math.imul(ah8,bl2)|0,hi=hi+Math.imul(ah8,bh2)|0,lo=lo+Math.imul(al7,bl3)|0,mid=(mid=mid+Math.imul(al7,bh3)|0)+Math.imul(ah7,bl3)|0,hi=hi+Math.imul(ah7,bh3)|0,lo=lo+Math.imul(al6,bl4)|0,mid=(mid=mid+Math.imul(al6,bh4)|0)+Math.imul(ah6,bl4)|0,hi=hi+Math.imul(ah6,bh4)|0,lo=lo+Math.imul(al5,bl5)|0,mid=(mid=mid+Math.imul(al5,bh5)|0)+Math.imul(ah5,bl5)|0,hi=hi+Math.imul(ah5,bh5)|0,lo=lo+Math.imul(al4,bl6)|0,mid=(mid=mid+Math.imul(al4,bh6)|0)+Math.imul(ah4,bl6)|0,hi=hi+Math.imul(ah4,bh6)|0,lo=lo+Math.imul(al3,bl7)|0,mid=(mid=mid+Math.imul(al3,bh7)|0)+Math.imul(ah3,bl7)|0,hi=hi+Math.imul(ah3,bh7)|0,lo=lo+Math.imul(al2,bl8)|0,mid=(mid=mid+Math.imul(al2,bh8)|0)+Math.imul(ah2,bl8)|0,hi=hi+Math.imul(ah2,bh8)|0;var w10=(c+(lo=lo+Math.imul(al1,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al1,bh9)|0)+Math.imul(ah1,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah1,bh9)|0)+(mid>>>13)|0)+(w10>>>26)|0,w10&=67108863,lo=Math.imul(al9,bl2),mid=(mid=Math.imul(al9,bh2))+Math.imul(ah9,bl2)|0,hi=Math.imul(ah9,bh2),lo=lo+Math.imul(al8,bl3)|0,mid=(mid=mid+Math.imul(al8,bh3)|0)+Math.imul(ah8,bl3)|0,hi=hi+Math.imul(ah8,bh3)|0,lo=lo+Math.imul(al7,bl4)|0,mid=(mid=mid+Math.imul(al7,bh4)|0)+Math.imul(ah7,bl4)|0,hi=hi+Math.imul(ah7,bh4)|0,lo=lo+Math.imul(al6,bl5)|0,mid=(mid=mid+Math.imul(al6,bh5)|0)+Math.imul(ah6,bl5)|0,hi=hi+Math.imul(ah6,bh5)|0,lo=lo+Math.imul(al5,bl6)|0,mid=(mid=mid+Math.imul(al5,bh6)|0)+Math.imul(ah5,bl6)|0,hi=hi+Math.imul(ah5,bh6)|0,lo=lo+Math.imul(al4,bl7)|0,mid=(mid=mid+Math.imul(al4,bh7)|0)+Math.imul(ah4,bl7)|0,hi=hi+Math.imul(ah4,bh7)|0,lo=lo+Math.imul(al3,bl8)|0,mid=(mid=mid+Math.imul(al3,bh8)|0)+Math.imul(ah3,bl8)|0,hi=hi+Math.imul(ah3,bh8)|0;var w11=(c+(lo=lo+Math.imul(al2,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al2,bh9)|0)+Math.imul(ah2,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah2,bh9)|0)+(mid>>>13)|0)+(w11>>>26)|0,w11&=67108863,lo=Math.imul(al9,bl3),mid=(mid=Math.imul(al9,bh3))+Math.imul(ah9,bl3)|0,hi=Math.imul(ah9,bh3),lo=lo+Math.imul(al8,bl4)|0,mid=(mid=mid+Math.imul(al8,bh4)|0)+Math.imul(ah8,bl4)|0,hi=hi+Math.imul(ah8,bh4)|0,lo=lo+Math.imul(al7,bl5)|0,mid=(mid=mid+Math.imul(al7,bh5)|0)+Math.imul(ah7,bl5)|0,hi=hi+Math.imul(ah7,bh5)|0,lo=lo+Math.imul(al6,bl6)|0,mid=(mid=mid+Math.imul(al6,bh6)|0)+Math.imul(ah6,bl6)|0,hi=hi+Math.imul(ah6,bh6)|0,lo=lo+Math.imul(al5,bl7)|0,mid=(mid=mid+Math.imul(al5,bh7)|0)+Math.imul(ah5,bl7)|0,hi=hi+Math.imul(ah5,bh7)|0,lo=lo+Math.imul(al4,bl8)|0,mid=(mid=mid+Math.imul(al4,bh8)|0)+Math.imul(ah4,bl8)|0,hi=hi+Math.imul(ah4,bh8)|0;var w12=(c+(lo=lo+Math.imul(al3,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al3,bh9)|0)+Math.imul(ah3,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah3,bh9)|0)+(mid>>>13)|0)+(w12>>>26)|0,w12&=67108863,lo=Math.imul(al9,bl4),mid=(mid=Math.imul(al9,bh4))+Math.imul(ah9,bl4)|0,hi=Math.imul(ah9,bh4),lo=lo+Math.imul(al8,bl5)|0,mid=(mid=mid+Math.imul(al8,bh5)|0)+Math.imul(ah8,bl5)|0,hi=hi+Math.imul(ah8,bh5)|0,lo=lo+Math.imul(al7,bl6)|0,mid=(mid=mid+Math.imul(al7,bh6)|0)+Math.imul(ah7,bl6)|0,hi=hi+Math.imul(ah7,bh6)|0,lo=lo+Math.imul(al6,bl7)|0,mid=(mid=mid+Math.imul(al6,bh7)|0)+Math.imul(ah6,bl7)|0,hi=hi+Math.imul(ah6,bh7)|0,lo=lo+Math.imul(al5,bl8)|0,mid=(mid=mid+Math.imul(al5,bh8)|0)+Math.imul(ah5,bl8)|0,hi=hi+Math.imul(ah5,bh8)|0;var w13=(c+(lo=lo+Math.imul(al4,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al4,bh9)|0)+Math.imul(ah4,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah4,bh9)|0)+(mid>>>13)|0)+(w13>>>26)|0,w13&=67108863,lo=Math.imul(al9,bl5),mid=(mid=Math.imul(al9,bh5))+Math.imul(ah9,bl5)|0,hi=Math.imul(ah9,bh5),lo=lo+Math.imul(al8,bl6)|0,mid=(mid=mid+Math.imul(al8,bh6)|0)+Math.imul(ah8,bl6)|0,hi=hi+Math.imul(ah8,bh6)|0,lo=lo+Math.imul(al7,bl7)|0,mid=(mid=mid+Math.imul(al7,bh7)|0)+Math.imul(ah7,bl7)|0,hi=hi+Math.imul(ah7,bh7)|0,lo=lo+Math.imul(al6,bl8)|0,mid=(mid=mid+Math.imul(al6,bh8)|0)+Math.imul(ah6,bl8)|0,hi=hi+Math.imul(ah6,bh8)|0;var w14=(c+(lo=lo+Math.imul(al5,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al5,bh9)|0)+Math.imul(ah5,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah5,bh9)|0)+(mid>>>13)|0)+(w14>>>26)|0,w14&=67108863,lo=Math.imul(al9,bl6),mid=(mid=Math.imul(al9,bh6))+Math.imul(ah9,bl6)|0,hi=Math.imul(ah9,bh6),lo=lo+Math.imul(al8,bl7)|0,mid=(mid=mid+Math.imul(al8,bh7)|0)+Math.imul(ah8,bl7)|0,hi=hi+Math.imul(ah8,bh7)|0,lo=lo+Math.imul(al7,bl8)|0,mid=(mid=mid+Math.imul(al7,bh8)|0)+Math.imul(ah7,bl8)|0,hi=hi+Math.imul(ah7,bh8)|0;var w15=(c+(lo=lo+Math.imul(al6,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al6,bh9)|0)+Math.imul(ah6,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah6,bh9)|0)+(mid>>>13)|0)+(w15>>>26)|0,w15&=67108863,lo=Math.imul(al9,bl7),mid=(mid=Math.imul(al9,bh7))+Math.imul(ah9,bl7)|0,hi=Math.imul(ah9,bh7),lo=lo+Math.imul(al8,bl8)|0,mid=(mid=mid+Math.imul(al8,bh8)|0)+Math.imul(ah8,bl8)|0,hi=hi+Math.imul(ah8,bh8)|0;var w16=(c+(lo=lo+Math.imul(al7,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al7,bh9)|0)+Math.imul(ah7,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah7,bh9)|0)+(mid>>>13)|0)+(w16>>>26)|0,w16&=67108863,lo=Math.imul(al9,bl8),mid=(mid=Math.imul(al9,bh8))+Math.imul(ah9,bl8)|0,hi=Math.imul(ah9,bh8);var w17=(c+(lo=lo+Math.imul(al8,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al8,bh9)|0)+Math.imul(ah8,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah8,bh9)|0)+(mid>>>13)|0)+(w17>>>26)|0,w17&=67108863;var w18=(c+(lo=Math.imul(al9,bl9))|0)+((8191&(mid=(mid=Math.imul(al9,bh9))+Math.imul(ah9,bl9)|0))<<13)|0;return c=((hi=Math.imul(ah9,bh9))+(mid>>>13)|0)+(w18>>>26)|0,w18&=67108863,o[0]=w0,o[1]=w1,o[2]=w2,o[3]=w3,o[4]=w4,o[5]=w5,o[6]=w6,o[7]=w7,o[8]=w8,o[9]=w9,o[10]=w10,o[11]=w11,o[12]=w12,o[13]=w13,o[14]=w14,o[15]=w15,o[16]=w16,o[17]=w17,o[18]=w18,0!==c&&(o[19]=c,out.length++),out};function jumboMulTo(self,num,out){return(new FFTM).mulp(self,num,out)}function FFTM(x,y){this.x=x,this.y=y}Math.imul||(comb10MulTo=smallMulTo),BN.prototype.mulTo=function(num,out){var len=this.length+num.length;return 10===this.length&&10===num.length?comb10MulTo(this,num,out):len<63?smallMulTo(this,num,out):len<1024?function(self,num,out){out.negative=num.negative^self.negative,out.length=self.length+num.length;for(var carry=0,hncarry=0,k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;for(var rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j,r=(0|self.words[i])*(0|num.words[j]),lo=67108863&r;rword=67108863&(lo=lo+rword|0),hncarry+=(ncarry=(ncarry=ncarry+(r/67108864|0)|0)+(lo>>>26)|0)>>>26,ncarry&=67108863}out.words[k]=rword,carry=ncarry,ncarry=hncarry}return 0!==carry?out.words[k]=carry:out.length--,out.strip()}(this,num,out):jumboMulTo(this,num,out)},FFTM.prototype.makeRBT=function(N){for(var t=new Array(N),l=BN.prototype._countBits(N)-1,i=0;i<N;i++)t[i]=this.revBin(i,l,N);return t},FFTM.prototype.revBin=function(x,l,N){if(0===x||x===N-1)return x;for(var rb=0,i=0;i<l;i++)rb|=(1&x)<<l-i-1,x>>=1;return rb},FFTM.prototype.permute=function(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++)rtws[i]=rws[rbt[i]],itws[i]=iws[rbt[i]]},FFTM.prototype.transform=function(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1)for(var l=s<<1,rtwdf=Math.cos(2*Math.PI/l),itwdf=Math.sin(2*Math.PI/l),p=0;p<N;p+=l)for(var rtwdf_=rtwdf,itwdf_=itwdf,j=0;j<s;j++){var re=rtws[p+j],ie=itws[p+j],ro=rtws[p+j+s],io=itws[p+j+s],rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro,ro=rx,rtws[p+j]=re+ro,itws[p+j]=ie+io,rtws[p+j+s]=re-ro,itws[p+j+s]=ie-io,j!==l&&(rx=rtwdf*rtwdf_-itwdf*itwdf_,itwdf_=rtwdf*itwdf_+itwdf*rtwdf_,rtwdf_=rx)}},FFTM.prototype.guessLen13b=function(n,m){var N=1|Math.max(m,n),odd=1&N,i=0;for(N=N/2|0;N;N>>>=1)i++;return 1<<i+1+odd},FFTM.prototype.conjugate=function(rws,iws,N){if(!(N<=1))for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1],rws[N-i-1]=t,t=iws[i],iws[i]=-iws[N-i-1],iws[N-i-1]=-t}},FFTM.prototype.normalize13b=function(ws,N){for(var carry=0,i=0;i<N/2;i++){var w=8192*Math.round(ws[2*i+1]/N)+Math.round(ws[2*i]/N)+carry;ws[i]=67108863&w,carry=w<67108864?0:w/67108864|0}return ws},FFTM.prototype.convert13b=function(ws,len,rws,N){for(var carry=0,i=0;i<len;i++)carry+=0|ws[i],rws[2*i]=8191&carry,carry>>>=13,rws[2*i+1]=8191&carry,carry>>>=13;for(i=2*len;i<N;++i)rws[i]=0;assert(0===carry),assert(0==(-8192&carry))},FFTM.prototype.stub=function(N){for(var ph=new Array(N),i=0;i<N;i++)ph[i]=0;return ph},FFTM.prototype.mulp=function(x,y,out){var N=2*this.guessLen13b(x.length,y.length),rbt=this.makeRBT(N),_=this.stub(N),rws=new Array(N),rwst=new Array(N),iwst=new Array(N),nrws=new Array(N),nrwst=new Array(N),niwst=new Array(N),rmws=out.words;rmws.length=N,this.convert13b(x.words,x.length,rws,N),this.convert13b(y.words,y.length,nrws,N),this.transform(rws,_,rwst,iwst,N,rbt),this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i],rwst[i]=rx}return this.conjugate(rwst,iwst,N),this.transform(rwst,iwst,rmws,_,N,rbt),this.conjugate(rmws,_,N),this.normalize13b(rmws,N),out.negative=x.negative^y.negative,out.length=x.length+y.length,out.strip()},BN.prototype.mul=function(num){var out=new BN(null);return out.words=new Array(this.length+num.length),this.mulTo(num,out)},BN.prototype.mulf=function(num){var out=new BN(null);return out.words=new Array(this.length+num.length),jumboMulTo(this,num,out)},BN.prototype.imul=function(num){return this.clone().mulTo(num,this)},BN.prototype.imuln=function(num){assert("number"==typeof num),assert(num<67108864);for(var carry=0,i=0;i<this.length;i++){var w=(0|this.words[i])*num,lo=(67108863&w)+(67108863&carry);carry>>=26,carry+=w/67108864|0,carry+=lo>>>26,this.words[i]=67108863&lo}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.muln=function(num){return this.clone().imuln(num)},BN.prototype.sqr=function(){return this.mul(this)},BN.prototype.isqr=function(){return this.imul(this.clone())},BN.prototype.pow=function(num){var w=function(num){for(var w=new Array(num.bitLength()),bit=0;bit<w.length;bit++){var off=bit/26|0,wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit}return w}(num);if(0===w.length)return new BN(1);for(var res=this,i=0;i<w.length&&0===w[i];i++,res=res.sqr());if(++i<w.length)for(var q=res.sqr();i<w.length;i++,q=q.sqr())0!==w[i]&&(res=res.mul(q));return res},BN.prototype.iushln=function(bits){assert("number"==typeof bits&&bits>=0);var i,r=bits%26,s=(bits-r)/26,carryMask=67108863>>>26-r<<26-r;if(0!==r){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask,c=(0|this.words[i])-newCarry<<r;this.words[i]=c|carry,carry=newCarry>>>26-r}carry&&(this.words[i]=carry,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this.strip()},BN.prototype.ishln=function(bits){return assert(0===this.negative),this.iushln(bits)},BN.prototype.iushrn=function(bits,hint,extended){var h;assert("number"==typeof bits&&bits>=0),h=hint?(hint-hint%26)/26:0;var r=bits%26,s=Math.min((bits-r)/26,this.length),mask=67108863^67108863>>>r<<r,maskedWords=extended;if(h-=s,h=Math.max(0,h),maskedWords){for(var i=0;i<s;i++)maskedWords.words[i]=this.words[i];maskedWords.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var carry=0;for(i=this.length-1;i>=0&&(0!==carry||i>=h);i--){var word=0|this.words[i];this.words[i]=carry<<26-r|word>>>r,carry=word&mask}return maskedWords&&0!==carry&&(maskedWords.words[maskedWords.length++]=carry),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function(bits,hint,extended){return assert(0===this.negative),this.iushrn(bits,hint,extended)},BN.prototype.shln=function(bits){return this.clone().ishln(bits)},BN.prototype.ushln=function(bits){return this.clone().iushln(bits)},BN.prototype.shrn=function(bits){return this.clone().ishrn(bits)},BN.prototype.ushrn=function(bits){return this.clone().iushrn(bits)},BN.prototype.testn=function(bit){assert("number"==typeof bit&&bit>=0);var r=bit%26,s=(bit-r)/26,q=1<<r;return!(this.length<=s)&&!!(this.words[s]&q)},BN.prototype.imaskn=function(bits){assert("number"==typeof bits&&bits>=0);var r=bits%26,s=(bits-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==r&&s++,this.length=Math.min(s,this.length),0!==r){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this.strip()},BN.prototype.maskn=function(bits){return this.clone().imaskn(bits)},BN.prototype.iaddn=function(num){return assert("number"==typeof num),assert(num<67108864),num<0?this.isubn(-num):0!==this.negative?1===this.length&&(0|this.words[0])<num?(this.words[0]=num-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(num),this.negative=1,this):this._iaddn(num)},BN.prototype._iaddn=function(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},BN.prototype.isubn=function(num){if(assert("number"==typeof num),assert(num<67108864),num<0)return this.iaddn(-num);if(0!==this.negative)return this.negative=0,this.iaddn(num),this.negative=1,this;if(this.words[0]-=num,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},BN.prototype.addn=function(num){return this.clone().iaddn(num)},BN.prototype.subn=function(num){return this.clone().isubn(num)},BN.prototype.iabs=function(){return this.negative=0,this},BN.prototype.abs=function(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function(num,mul,shift){var i,w,len=num.length+shift;this._expand(len);var carry=0;for(i=0;i<num.length;i++){w=(0|this.words[i+shift])+carry;var right=(0|num.words[i])*mul;carry=((w-=67108863&right)>>26)-(right/67108864|0),this.words[i+shift]=67108863&w}for(;i<this.length-shift;i++)carry=(w=(0|this.words[i+shift])+carry)>>26,this.words[i+shift]=67108863&w;if(0===carry)return this.strip();for(assert(-1===carry),carry=0,i=0;i<this.length;i++)carry=(w=-(0|this.words[i])+carry)>>26,this.words[i]=67108863&w;return this.negative=1,this.strip()},BN.prototype._wordDiv=function(num,mode){var shift=(this.length,num.length),a=this.clone(),b=num,bhi=0|b.words[b.length-1];0!==(shift=26-this._countBits(bhi))&&(b=b.ushln(shift),a.iushln(shift),bhi=0|b.words[b.length-1]);var q,m=a.length-b.length;if("mod"!==mode){(q=new BN(null)).length=m+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var diff=a.clone()._ishlnsubmul(b,1,m);0===diff.negative&&(a=diff,q&&(q.words[m]=1));for(var j=m-1;j>=0;j--){var qj=67108864*(0|a.words[b.length+j])+(0|a.words[b.length+j-1]);for(qj=Math.min(qj/bhi|0,67108863),a._ishlnsubmul(b,qj,j);0!==a.negative;)qj--,a.negative=0,a._ishlnsubmul(b,1,j),a.isZero()||(a.negative^=1);q&&(q.words[j]=qj)}return q&&q.strip(),a.strip(),"div"!==mode&&0!==shift&&a.iushrn(shift),{div:q||null,mod:a}},BN.prototype.divmod=function(num,mode,positive){return assert(!num.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===num.negative?(res=this.neg().divmod(num,mode),"mod"!==mode&&(div=res.div.neg()),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.iadd(num)),{div:div,mod:mod}):0===this.negative&&0!==num.negative?(res=this.divmod(num.neg(),mode),"mod"!==mode&&(div=res.div.neg()),{div:div,mod:res.mod}):0!=(this.negative&num.negative)?(res=this.neg().divmod(num.neg(),mode),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.isub(num)),{div:res.div,mod:mod}):num.length>this.length||this.cmp(num)<0?{div:new BN(0),mod:this}:1===num.length?"div"===mode?{div:this.divn(num.words[0]),mod:null}:"mod"===mode?{div:null,mod:new BN(this.modn(num.words[0]))}:{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))}:this._wordDiv(num,mode);var div,mod,res},BN.prototype.div=function(num){return this.divmod(num,"div",!1).div},BN.prototype.mod=function(num){return this.divmod(num,"mod",!1).mod},BN.prototype.umod=function(num){return this.divmod(num,"mod",!0).mod},BN.prototype.divRound=function(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=0!==dm.div.negative?dm.mod.isub(num):dm.mod,half=num.ushrn(1),r2=num.andln(1),cmp=mod.cmp(half);return cmp<0||1===r2&&0===cmp?dm.div:0!==dm.div.negative?dm.div.isubn(1):dm.div.iaddn(1)},BN.prototype.modn=function(num){assert(num<=67108863);for(var p=(1<<26)%num,acc=0,i=this.length-1;i>=0;i--)acc=(p*acc+(0|this.words[i]))%num;return acc},BN.prototype.idivn=function(num){assert(num<=67108863);for(var carry=0,i=this.length-1;i>=0;i--){var w=(0|this.words[i])+67108864*carry;this.words[i]=w/num|0,carry=w%num}return this.strip()},BN.prototype.divn=function(num){return this.clone().idivn(num)},BN.prototype.egcd=function(p){assert(0===p.negative),assert(!p.isZero());var x=this,y=p.clone();x=0!==x.negative?x.umod(p):x.clone();for(var A=new BN(1),B=new BN(0),C=new BN(0),D=new BN(1),g=0;x.isEven()&&y.isEven();)x.iushrn(1),y.iushrn(1),++g;for(var yp=y.clone(),xp=x.clone();!x.isZero();){for(var i=0,im=1;0==(x.words[0]&im)&&i<26;++i,im<<=1);if(i>0)for(x.iushrn(i);i-- >0;)(A.isOdd()||B.isOdd())&&(A.iadd(yp),B.isub(xp)),A.iushrn(1),B.iushrn(1);for(var j=0,jm=1;0==(y.words[0]&jm)&&j<26;++j,jm<<=1);if(j>0)for(y.iushrn(j);j-- >0;)(C.isOdd()||D.isOdd())&&(C.iadd(yp),D.isub(xp)),C.iushrn(1),D.iushrn(1);x.cmp(y)>=0?(x.isub(y),A.isub(C),B.isub(D)):(y.isub(x),C.isub(A),D.isub(B))}return{a:C,b:D,gcd:y.iushln(g)}},BN.prototype._invmp=function(p){assert(0===p.negative),assert(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var res,x1=new BN(1),x2=new BN(0),delta=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,im=1;0==(a.words[0]&im)&&i<26;++i,im<<=1);if(i>0)for(a.iushrn(i);i-- >0;)x1.isOdd()&&x1.iadd(delta),x1.iushrn(1);for(var j=0,jm=1;0==(b.words[0]&jm)&&j<26;++j,jm<<=1);if(j>0)for(b.iushrn(j);j-- >0;)x2.isOdd()&&x2.iadd(delta),x2.iushrn(1);a.cmp(b)>=0?(a.isub(b),x1.isub(x2)):(b.isub(a),x2.isub(x1))}return(res=0===a.cmpn(1)?x1:x2).cmpn(0)<0&&res.iadd(p),res},BN.prototype.gcd=function(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone(),b=num.clone();a.negative=0,b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(r<0){var t=a;a=b,b=t}else if(0===r||0===b.cmpn(1))break;a.isub(b)}return b.iushln(shift)},BN.prototype.invm=function(num){return this.egcd(num).a.umod(num)},BN.prototype.isEven=function(){return 0==(1&this.words[0])},BN.prototype.isOdd=function(){return 1==(1&this.words[0])},BN.prototype.andln=function(num){return this.words[0]&num},BN.prototype.bincn=function(bit){assert("number"==typeof bit);var r=bit%26,s=(bit-r)/26,q=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var carry=q,i=s;0!==carry&&i<this.length;i++){var w=0|this.words[i];carry=(w+=carry)>>>26,w&=67108863,this.words[i]=w}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function(num){var res,negative=num<0;if(0!==this.negative&&!negative)return-1;if(0===this.negative&&negative)return 1;if(this.strip(),this.length>1)res=1;else{negative&&(num=-num),assert(num<=67108863,"Number is too big");var w=0|this.words[0];res=w===num?0:w<num?-1:1}return 0!==this.negative?0|-res:res},BN.prototype.cmp=function(num){if(0!==this.negative&&0===num.negative)return-1;if(0===this.negative&&0!==num.negative)return 1;var res=this.ucmp(num);return 0!==this.negative?0|-res:res},BN.prototype.ucmp=function(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;for(var res=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|num.words[i];if(a!==b){a<b?res=-1:a>b&&(res=1);break}}return res},BN.prototype.gtn=function(num){return 1===this.cmpn(num)},BN.prototype.gt=function(num){return 1===this.cmp(num)},BN.prototype.gten=function(num){return this.cmpn(num)>=0},BN.prototype.gte=function(num){return this.cmp(num)>=0},BN.prototype.ltn=function(num){return-1===this.cmpn(num)},BN.prototype.lt=function(num){return-1===this.cmp(num)},BN.prototype.lten=function(num){return this.cmpn(num)<=0},BN.prototype.lte=function(num){return this.cmp(num)<=0},BN.prototype.eqn=function(num){return 0===this.cmpn(num)},BN.prototype.eq=function(num){return 0===this.cmp(num)},BN.red=function(num){return new Red(num)},BN.prototype.toRed=function(ctx){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),ctx.convertTo(this)._forceRed(ctx)},BN.prototype.fromRed=function(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function(ctx){return this.red=ctx,this},BN.prototype.forceRed=function(ctx){return assert(!this.red,"Already a number in reduction context"),this._forceRed(ctx)},BN.prototype.redAdd=function(num){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,num)},BN.prototype.redIAdd=function(num){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,num)},BN.prototype.redSub=function(num){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,num)},BN.prototype.redISub=function(num){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,num)},BN.prototype.redShl=function(num){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,num)},BN.prototype.redMul=function(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.mul(this,num)},BN.prototype.redIMul=function(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.imul(this,num)},BN.prototype.redSqr=function(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function(num){return assert(this.red&&!num.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name,this.p=new BN(p,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(m){if("string"==typeof m){var prime=BN._prime(m);this.m=prime.p,this.prime=prime}else assert(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}function Mont(m){Red.call(this,m),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function(){var tmp=new BN(null);return tmp.words=new Array(Math.ceil(this.n/13)),tmp},MPrime.prototype.ireduce=function(num){var rlen,r=num;do{this.split(r,this.tmp),rlen=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);return 0===cmp?(r.words[0]=0,r.length=1):cmp>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function(input,out){input.iushrn(this.n,0,out)},MPrime.prototype.imulK=function(num){return num.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function(input,output){for(var outLen=Math.min(input.length,9),i=0;i<outLen;i++)output.words[i]=input.words[i];if(output.length=outLen,input.length<=9)return input.words[0]=0,void(input.length=1);var prev=input.words[9];for(output.words[output.length++]=4194303&prev,i=10;i<input.length;i++){var next=0|input.words[i];input.words[i-10]=(4194303&next)<<4|prev>>>22,prev=next}prev>>>=22,input.words[i-10]=prev,0===prev&&input.length>10?input.length-=10:input.length-=9},K256.prototype.imulK=function(num){num.words[num.length]=0,num.words[num.length+1]=0,num.length+=2;for(var lo=0,i=0;i<num.length;i++){var w=0|num.words[i];lo+=977*w,num.words[i]=67108863&lo,lo=64*w+(lo/67108864|0)}return 0===num.words[num.length-1]&&(num.length--,0===num.words[num.length-1]&&num.length--),num},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function(num){for(var carry=0,i=0;i<num.length;i++){var hi=19*(0|num.words[i])+carry,lo=67108863&hi;hi>>>=26,num.words[i]=lo,carry=hi}return 0!==carry&&(num.words[num.length++]=carry),num},BN._prime=function(name){if(primes[name])return primes[name];var prime;if("k256"===name)prime=new K256;else if("p224"===name)prime=new P224;else if("p192"===name)prime=new P192;else{if("p25519"!==name)throw new Error("Unknown prime "+name);prime=new P25519}return primes[name]=prime,prime},Red.prototype._verify1=function(a){assert(0===a.negative,"red works only with positives"),assert(a.red,"red works only with red numbers")},Red.prototype._verify2=function(a,b){assert(0==(a.negative|b.negative),"red works only with positives"),assert(a.red&&a.red===b.red,"red works only with red numbers")},Red.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},Red.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Red.prototype.add=function(a,b){this._verify2(a,b);var res=a.add(b);return res.cmp(this.m)>=0&&res.isub(this.m),res._forceRed(this)},Red.prototype.iadd=function(a,b){this._verify2(a,b);var res=a.iadd(b);return res.cmp(this.m)>=0&&res.isub(this.m),res},Red.prototype.sub=function(a,b){this._verify2(a,b);var res=a.sub(b);return res.cmpn(0)<0&&res.iadd(this.m),res._forceRed(this)},Red.prototype.isub=function(a,b){this._verify2(a,b);var res=a.isub(b);return res.cmpn(0)<0&&res.iadd(this.m),res},Red.prototype.shl=function(a,num){return this._verify1(a),this.imod(a.ushln(num))},Red.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},Red.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},Red.prototype.isqr=function(a){return this.imul(a,a.clone())},Red.prototype.sqr=function(a){return this.mul(a,a)},Red.prototype.sqrt=function(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);if(assert(mod3%2==1),3===mod3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);assert(!q.isZero());var one=new BN(1).toRed(this),nOne=one.redNeg(),lpow=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new BN(2*z*z).toRed(this);0!==this.pow(z,lpow).cmp(nOne);)z.redIAdd(nOne);for(var c=this.pow(z,q),r=this.pow(a,q.addn(1).iushrn(1)),t=this.pow(a,q),m=s;0!==t.cmp(one);){for(var tmp=t,i=0;0!==tmp.cmp(one);i++)tmp=tmp.redSqr();assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b),c=b.redSqr(),t=t.redMul(c),m=i}return r},Red.prototype.invm=function(a){var inv=a._invmp(this.m);return 0!==inv.negative?(inv.negative=0,this.imod(inv).redNeg()):this.imod(inv)},Red.prototype.pow=function(a,num){if(num.isZero())return new BN(1).toRed(this);if(0===num.cmpn(1))return a.clone();var wnd=new Array(16);wnd[0]=new BN(1).toRed(this),wnd[1]=a;for(var i=2;i<wnd.length;i++)wnd[i]=this.mul(wnd[i-1],a);var res=wnd[0],current=0,currentLen=0,start=num.bitLength()%26;for(0===start&&(start=26),i=num.length-1;i>=0;i--){for(var word=num.words[i],j=start-1;j>=0;j--){var bit=word>>j&1;res!==wnd[0]&&(res=this.sqr(res)),0!==bit||0!==current?(current<<=1,current|=bit,(4===++currentLen||0===i&&0===j)&&(res=this.mul(res,wnd[current]),currentLen=0,current=0)):currentLen=0}start=26}return res},Red.prototype.convertTo=function(num){var r=num.umod(this.m);return r===num?r.clone():r},Red.prototype.convertFrom=function(num){var res=num.clone();return res.red=null,res},BN.mont=function(num){return new Mont(num)},inherits(Mont,Red),Mont.prototype.convertTo=function(num){return this.imod(num.ushln(this.shift))},Mont.prototype.convertFrom=function(num){var r=this.imod(num.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(module,this)}).call(this,__webpack_require__(139)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";var Observable=__webpack_require__(6),isPromise=__webpack_require__(183),isArrayLike=__webpack_require__(182),symbol_observable=__webpack_require__(73);var symbol_iterator=__webpack_require__(70);var fromArray=__webpack_require__(47),Subscription=__webpack_require__(12),subscribeToPromise=__webpack_require__(184);var subscribeToIterable=__webpack_require__(185);var subscribeToObservable=__webpack_require__(181);var subscribeTo=__webpack_require__(180);function from(input,scheduler){if(!scheduler)return input instanceof Observable.a?input:new Observable.a(Object(subscribeTo.a)(input));if(null!=input){if(function(input){return input&&"function"==typeof input[symbol_observable.a]}(input))return function(input,scheduler){return scheduler?new Observable.a((function(subscriber){var sub=new Subscription.a;return sub.add(scheduler.schedule((function(){var observable=input[symbol_observable.a]();sub.add(observable.subscribe({next:function(value){sub.add(scheduler.schedule((function(){return subscriber.next(value)})))},error:function(err){sub.add(scheduler.schedule((function(){return subscriber.error(err)})))},complete:function(){sub.add(scheduler.schedule((function(){return subscriber.complete()})))}}))}))),sub})):new Observable.a(Object(subscribeToObservable.a)(input))}(input,scheduler);if(Object(isPromise.a)(input))return function(input,scheduler){return scheduler?new Observable.a((function(subscriber){var sub=new Subscription.a;return sub.add(scheduler.schedule((function(){return input.then((function(value){sub.add(scheduler.schedule((function(){subscriber.next(value),sub.add(scheduler.schedule((function(){return subscriber.complete()})))})))}),(function(err){sub.add(scheduler.schedule((function(){return subscriber.error(err)})))}))}))),sub})):new Observable.a(Object(subscribeToPromise.a)(input))}(input,scheduler);if(Object(isArrayLike.a)(input))return Object(fromArray.a)(input,scheduler);if(function(input){return input&&"function"==typeof input[symbol_iterator.a]}(input)||"string"==typeof input)return function(input,scheduler){if(!input)throw new Error("Iterable cannot be null");return scheduler?new Observable.a((function(subscriber){var iterator,sub=new Subscription.a;return sub.add((function(){iterator&&"function"==typeof iterator.return&&iterator.return()})),sub.add(scheduler.schedule((function(){iterator=input[symbol_iterator.a](),sub.add(scheduler.schedule((function(){if(!subscriber.closed){var value,done;try{var result=iterator.next();value=result.value,done=result.done}catch(err){return void subscriber.error(err)}done?subscriber.complete():(subscriber.next(value),this.schedule())}})))}))),sub})):new Observable.a(Object(subscribeToIterable.a)(input))}(input,scheduler)}throw new TypeError((null!==input&&typeof input||input)+" is not observable")}__webpack_require__.d(__webpack_exports__,"a",(function(){return from}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return AmplifyClass})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Amplify}));var _Logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(84),__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},logger=new _Logger__WEBPACK_IMPORTED_MODULE_0__.a("Amplify"),AmplifyClass=function(){function AmplifyClass(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Logger=_Logger__WEBPACK_IMPORTED_MODULE_0__.a,this.ServiceWorker=null}return AmplifyClass.prototype.register=function(comp){logger.debug("component registered in amplify",comp),this._components.push(comp),"function"==typeof comp.getModuleName?(this._modules[comp.getModuleName()]=comp,this[comp.getModuleName()]=comp):logger.debug("no getModuleName method for component",comp),comp.configure(this._config)},AmplifyClass.prototype.configure=function(config){var _this=this;return config?(this._config=Object.assign(this._config,config),logger.debug("amplify config",this._config),Object.entries(this._modules).forEach((function(_a){var _b=__read(_a,2),comp=(_b[0],_b[1]);Object.keys(comp).forEach((function(property){_this._modules[property]&&(comp[property]=_this._modules[property])}))})),this._components.map((function(comp){comp.configure(_this._config)})),this._config):this._config},AmplifyClass.prototype.addPluggable=function(pluggable){pluggable&&pluggable.getCategory&&"function"==typeof pluggable.getCategory&&this._components.map((function(comp){comp.addPluggable&&"function"==typeof comp.addPluggable&&comp.addPluggable(pluggable)}))},AmplifyClass}(),Amplify=new AmplifyClass},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),es=__webpack_require__(190);function resolveAwsAuthConfig(input){var signer,_this=this,normalizedCreds=normalizeProvider(input.credentials||input.credentialDefaultProvider(input)),_a=input.signingEscapePath,signingEscapePath=void 0===_a||_a,_b=input.systemClockOffset,systemClockOffset=void 0===_b?input.systemClockOffset||0:_b,sha256=input.sha256;return signer=input.signer?normalizeProvider(input.signer):function(){return normalizeProvider(input.region)().then((function(region){return Object(tslib_es6.__awaiter)(_this,void 0,void 0,(function(){return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,input.regionInfoProvider(region)];case 1:return[2,[_a.sent()||{},region]]}}))}))})).then((function(_a){var _b=Object(tslib_es6.__read)(_a,2),regionInfo=_b[0],region=_b[1],signingRegion=regionInfo.signingRegion,signingService=regionInfo.signingService;return input.signingRegion=input.signingRegion||signingRegion||region,input.signingName=input.signingName||signingService||input.serviceId,new es.a({credentials:normalizedCreds,region:input.signingRegion,service:input.signingName,sha256:sha256,uriEscapePath:signingEscapePath})}))},Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},input),{systemClockOffset:systemClockOffset,signingEscapePath:signingEscapePath,credentials:normalizedCreds,signer:signer})}function normalizeProvider(input){if("object"==typeof input){var promisified_1=Promise.resolve(input);return function(){return promisified_1}}return input}var dist_es=__webpack_require__(3),getSkewCorrectedDate=function(systemClockOffset){return new Date(Date.now()+systemClockOffset)};function awsAuthMiddleware(options){return function(next,context){return function(args){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var signer,_a,output,_b,_c,headers,dateHeader,serverTime,_d;return Object(tslib_es6.__generator)(this,(function(_e){switch(_e.label){case 0:return dist_es.a.isInstance(args.request)?"function"!=typeof options.signer?[3,2]:[4,options.signer()]:[2,next(args)];case 1:return _a=_e.sent(),[3,3];case 2:_a=options.signer,_e.label=3;case 3:return signer=_a,_b=next,_c=[Object(tslib_es6.__assign)({},args)],_d={},[4,signer.sign(args.request,{signingDate:new Date(Date.now()+options.systemClockOffset),signingRegion:context.signing_region,signingService:context.signing_service})];case 4:return[4,_b.apply(void 0,[tslib_es6.__assign.apply(void 0,_c.concat([(_d.request=_e.sent(),_d)]))])];case 5:return output=_e.sent(),headers=output.response.headers,(dateHeader=headers&&(headers.date||headers.Date))&&(serverTime=Date.parse(dateHeader),newServerTime=serverTime,systemClockOffset=options.systemClockOffset,Math.abs(getSkewCorrectedDate(systemClockOffset).getTime()-newServerTime)>=3e5&&(options.systemClockOffset=serverTime-Date.now())),[2,output]}var newServerTime,systemClockOffset}))}))}}}var awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},getAwsAuthPlugin=function(options){return{applyToStack:function(clientStack){clientStack.addRelativeTo(awsAuthMiddleware(options),awsAuthMiddlewareOptions)}}};__webpack_require__.d(__webpack_exports__,"b",(function(){return resolveAwsAuthConfig})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getAwsAuthPlugin}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var keys=__webpack_require__(45);exports.METADATA_KEY=keys;var container_1=__webpack_require__(358);exports.Container=container_1.Container;var literal_types_1=__webpack_require__(92);exports.BindingScopeEnum=literal_types_1.BindingScopeEnum,exports.BindingTypeEnum=literal_types_1.BindingTypeEnum,exports.TargetTypeEnum=literal_types_1.TargetTypeEnum;var container_module_1=__webpack_require__(374);exports.AsyncContainerModule=container_module_1.AsyncContainerModule,exports.ContainerModule=container_module_1.ContainerModule;var injectable_1=__webpack_require__(375);exports.injectable=injectable_1.injectable;var tagged_1=__webpack_require__(376);exports.tagged=tagged_1.tagged;var named_1=__webpack_require__(377);exports.named=named_1.named;var inject_1=__webpack_require__(235);exports.inject=inject_1.inject,exports.LazyServiceIdentifer=inject_1.LazyServiceIdentifer;var optional_1=__webpack_require__(378);exports.optional=optional_1.optional;var unmanaged_1=__webpack_require__(379);exports.unmanaged=unmanaged_1.unmanaged;var multi_inject_1=__webpack_require__(380);exports.multiInject=multi_inject_1.multiInject;var target_name_1=__webpack_require__(381);exports.targetName=target_name_1.targetName;var post_construct_1=__webpack_require__(382);exports.postConstruct=post_construct_1.postConstruct;var metadata_reader_1=__webpack_require__(233);exports.MetadataReader=metadata_reader_1.MetadataReader;var id_1=__webpack_require__(103);exports.id=id_1.id;var decorator_utils_1=__webpack_require__(101);exports.decorate=decorator_utils_1.decorate;var constraint_helpers_1=__webpack_require__(238);exports.traverseAncerstors=constraint_helpers_1.traverseAncerstors,exports.taggedConstraint=constraint_helpers_1.taggedConstraint,exports.namedConstraint=constraint_helpers_1.namedConstraint,exports.typeConstraint=constraint_helpers_1.typeConstraint;var serialization_1=__webpack_require__(134);exports.getServiceIdentifierAsString=serialization_1.getServiceIdentifierAsString;var binding_utils_1=__webpack_require__(383);exports.multiBindToService=binding_utils_1.multiBindToService},function(module,__webpack_exports__,__webpack_require__){"use strict";var Amplify=__webpack_require__(40),defaultConfig={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new(__webpack_require__(145).a)).getStorage()};function getByteLength(str){var ret=0;ret=str.length;for(var i=str.length;i>=0;i-=1){var charCode=str.charCodeAt(i);charCode>127&&charCode<=2047?ret+=1:charCode>2047&&charCode<=65535&&(ret+=2),charCode>=56320&&charCode<=57343&&(i-=1)}return ret}function getCurrTime(){return(new Date).getTime()}function isInteger(value){return Number.isInteger?Number.isInteger(value):function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value}(value)}var extendStatics,store={},ConsoleLogger=(function(){function CacheObject(){}CacheObject.clear=function(){store={}},CacheObject.getItem=function(key){return store[key]||null},CacheObject.setItem=function(key,value){store[key]=value},CacheObject.removeItem=function(key){delete store[key]}}(),__webpack_require__(84)),logger=new ConsoleLogger.a("StorageCache"),StorageCache_StorageCache=function(){function StorageCache(config){this.config=Object.assign({},config),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return StorageCache.prototype.getModuleName=function(){return"Cache"},StorageCache.prototype.checkConfig=function(){isInteger(this.config.capacityInBytes)||(logger.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=defaultConfig.capacityInBytes),isInteger(this.config.itemMaxSize)||(logger.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=defaultConfig.itemMaxSize),isInteger(this.config.defaultTTL)||(logger.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=defaultConfig.defaultTTL),isInteger(this.config.defaultPriority)||(logger.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=defaultConfig.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(logger.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=defaultConfig.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(logger.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=defaultConfig.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(logger.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=defaultConfig.warningThreshold);this.config.capacityInBytes>5242880&&(logger.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=defaultConfig.capacityInBytes)},StorageCache.prototype.fillCacheItem=function(key,value,options){var ret={key:key,data:value,timestamp:getCurrTime(),visitedTime:getCurrTime(),priority:options.priority,expires:options.expires,type:typeof value,byteSize:0};return ret.byteSize=getByteLength(JSON.stringify(ret)),ret.byteSize=getByteLength(JSON.stringify(ret)),ret},StorageCache.prototype.configure=function(config){return config?(config.keyPrefix&&logger.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,config,config.Cache),this.checkConfig(),this.config):this.config},StorageCache}(),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),BrowserStorageCache_logger=new ConsoleLogger.a("Cache"),BrowserStorageCache=new(function(_super){function BrowserStorageCacheClass(config){var _this=this,cacheConfig=config?Object.assign({},defaultConfig,config):defaultConfig;return(_this=_super.call(this,cacheConfig)||this).config.storage=cacheConfig.storage,_this.getItem=_this.getItem.bind(_this),_this.setItem=_this.setItem.bind(_this),_this.removeItem=_this.removeItem.bind(_this),_this}return __extends(BrowserStorageCacheClass,_super),BrowserStorageCacheClass.prototype._decreaseCurSizeInBytes=function(amount){var curSize=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(curSize-amount).toString())},BrowserStorageCacheClass.prototype._increaseCurSizeInBytes=function(amount){var curSize=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(curSize+amount).toString())},BrowserStorageCacheClass.prototype._refreshItem=function(item,prefixedKey){return item.visitedTime=getCurrTime(),this.config.storage.setItem(prefixedKey,JSON.stringify(item)),item},BrowserStorageCacheClass.prototype._isExpired=function(key){var text=this.config.storage.getItem(key),item=JSON.parse(text);return getCurrTime()>=item.expires},BrowserStorageCacheClass.prototype._removeItem=function(prefixedKey,size){var itemSize=size||JSON.parse(this.config.storage.getItem(prefixedKey)).byteSize;this._decreaseCurSizeInBytes(itemSize),this.config.storage.removeItem(prefixedKey)},BrowserStorageCacheClass.prototype._setItem=function(prefixedKey,item){this._increaseCurSizeInBytes(item.byteSize);try{this.config.storage.setItem(prefixedKey,JSON.stringify(item))}catch(setItemErr){this._decreaseCurSizeInBytes(item.byteSize),BrowserStorageCache_logger.error("Failed to set item "+setItemErr)}},BrowserStorageCacheClass.prototype._sizeToPop=function(itemSize){var spaceItemNeed=this.getCacheCurSize()+itemSize-this.config.capacityInBytes,cacheThresholdSpace=(1-this.config.warningThreshold)*this.config.capacityInBytes;return spaceItemNeed>cacheThresholdSpace?spaceItemNeed:cacheThresholdSpace},BrowserStorageCacheClass.prototype._isCacheFull=function(itemSize){return itemSize+this.getCacheCurSize()>this.config.capacityInBytes},BrowserStorageCacheClass.prototype._findValidKeys=function(){for(var keys=[],keyInCache=[],i=0;i<this.config.storage.length;i+=1)keyInCache.push(this.config.storage.key(i));for(i=0;i<keyInCache.length;i+=1){var key=keyInCache[i];0===key.indexOf(this.config.keyPrefix)&&key!==this.cacheCurSizeKey&&(this._isExpired(key)?this._removeItem(key):keys.push(key))}return keys},BrowserStorageCacheClass.prototype._popOutItems=function(keys,sizeToPop){for(var items=[],remainedSize=sizeToPop,i=0;i<keys.length;i+=1){var val=this.config.storage.getItem(keys[i]);if(null!=val){var item=JSON.parse(val);items.push(item)}}items.sort((function(a,b){return a.priority>b.priority?-1:a.priority<b.priority?1:a.visitedTime<b.visitedTime?-1:1}));for(i=0;i<items.length;i+=1)if(this._removeItem(items[i].key,items[i].byteSize),(remainedSize-=items[i].byteSize)<=0)return},BrowserStorageCacheClass.prototype.setItem=function(key,value,options){BrowserStorageCache_logger.log("Set item: key is "+key+", value is "+value+" with options: "+options);var prefixedKey=this.config.keyPrefix+key;if(prefixedKey!==this.config.keyPrefix&&prefixedKey!==this.cacheCurSizeKey)if(void 0!==value){var cacheItemOptions={priority:options&&void 0!==options.priority?options.priority:this.config.defaultPriority,expires:options&&void 0!==options.expires?options.expires:this.config.defaultTTL+getCurrTime()};if(cacheItemOptions.priority<1||cacheItemOptions.priority>5)BrowserStorageCache_logger.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var item=this.fillCacheItem(prefixedKey,value,cacheItemOptions);if(item.byteSize>this.config.itemMaxSize)BrowserStorageCache_logger.warn("Item with key: "+key+" you are trying to put into is too big!");else try{var val=this.config.storage.getItem(prefixedKey);if(val&&this._removeItem(prefixedKey,JSON.parse(val).byteSize),this._isCacheFull(item.byteSize)){var validKeys=this._findValidKeys();if(this._isCacheFull(item.byteSize)){var sizeToPop=this._sizeToPop(item.byteSize);this._popOutItems(validKeys,sizeToPop)}}this._setItem(prefixedKey,item)}catch(e){BrowserStorageCache_logger.warn("setItem failed! "+e)}}}else BrowserStorageCache_logger.warn("The value of item should not be undefined!");else BrowserStorageCache_logger.warn("Invalid key: should not be empty or 'CurSize'")},BrowserStorageCacheClass.prototype.getItem=function(key,options){BrowserStorageCache_logger.log("Get item: key is "+key+" with options "+options);var ret=null,prefixedKey=this.config.keyPrefix+key;if(prefixedKey===this.config.keyPrefix||prefixedKey===this.cacheCurSizeKey)return BrowserStorageCache_logger.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(ret=this.config.storage.getItem(prefixedKey))){if(!this._isExpired(prefixedKey)){var item=JSON.parse(ret);return(item=this._refreshItem(item,prefixedKey)).data}this._removeItem(prefixedKey,JSON.parse(ret).byteSize),ret=null}if(options&&void 0!==options.callback){var val=options.callback();return null!==val&&this.setItem(key,val,options),val}return null}catch(e){return BrowserStorageCache_logger.warn("getItem failed! "+e),null}},BrowserStorageCacheClass.prototype.removeItem=function(key){BrowserStorageCache_logger.log("Remove item: key is "+key);var prefixedKey=this.config.keyPrefix+key;if(prefixedKey!==this.config.keyPrefix&&prefixedKey!==this.cacheCurSizeKey)try{var val=this.config.storage.getItem(prefixedKey);val&&this._removeItem(prefixedKey,JSON.parse(val).byteSize)}catch(e){BrowserStorageCache_logger.warn("removeItem failed! "+e)}},BrowserStorageCacheClass.prototype.clear=function(){BrowserStorageCache_logger.log("Clear Cache");for(var keysToRemove=[],i=0;i<this.config.storage.length;i+=1){var key=this.config.storage.key(i);0===key.indexOf(this.config.keyPrefix)&&keysToRemove.push(key)}try{for(i=0;i<keysToRemove.length;i+=1)this.config.storage.removeItem(keysToRemove[i])}catch(e){BrowserStorageCache_logger.warn("clear failed! "+e)}},BrowserStorageCacheClass.prototype.getAllKeys=function(){for(var keys=[],i=0;i<this.config.storage.length;i+=1){var key=this.config.storage.key(i);0===key.indexOf(this.config.keyPrefix)&&key!==this.cacheCurSizeKey&&keys.push(key.substring(this.config.keyPrefix.length))}return keys},BrowserStorageCacheClass.prototype.getCacheCurSize=function(){var ret=this.config.storage.getItem(this.cacheCurSizeKey);return ret||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),ret="0"),Number(ret)},BrowserStorageCacheClass.prototype.createInstance=function(config){return config.keyPrefix&&config.keyPrefix!==defaultConfig.keyPrefix||(BrowserStorageCache_logger.error("invalid keyPrefix, setting keyPrefix with timeStamp"),config.keyPrefix=getCurrTime.toString()),new BrowserStorageCacheClass(config)},BrowserStorageCacheClass}(StorageCache_StorageCache));__webpack_exports__.a=BrowserStorageCache;Amplify.a.register(BrowserStorageCache)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.IDENTIFIERS=void 0;var IDENTIFIERS={AntiFraud:Symbol.for("AntiFraud"),AuthService:Symbol.for("AuthService"),CardAsyncService:Symbol.for("CardAsyncService"),CardDynamicService:Symbol.for("CardDynamicService"),CardService:Symbol.for("CardService"),CardSubscriptionDynamicService:Symbol.for("CardSubscriptionDynamicService"),CashService:Symbol.for("CashService"),CommissionService:Symbol.for("CommissionService"),KPayService:Symbol.for("KPayService"),KushkiGateway:Symbol.for("KushkiGateway"),KushkiService:Symbol.for("KushkiService"),MobileProcessorService:Symbol.for("MobileProcessorService"),MultiMerchantService:Symbol.for("MultiMerchantService"),PayoutsCashService:Symbol.for("PayoutsCashService"),PayoutsTransferService:Symbol.for("PayoutsTransferService"),SecureService:Symbol.for("SecureService"),TransferService:Symbol.for("TransferService"),TransferSubscriptionService:Symbol.for("TransferSubscriptionsService")};exports.IDENTIFIERS=IDENTIFIERS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NAMED_TAG="named",exports.NAME_TAG="name",exports.UNMANAGED_TAG="unmanaged",exports.OPTIONAL_TAG="optional",exports.INJECT_TAG="inject",exports.MULTI_INJECT_TAG="multi_inject",exports.TAGGED="inversify:tagged",exports.TAGGED_PROP="inversify:tagged_props",exports.PARAM_TYPES="inversify:paramtypes",exports.DESIGN_PARAM_TYPES="design:paramtypes",exports.POST_CONSTRUCT="post_construct"},function(module,__webpack_exports__,__webpack_require__){"use strict";var AuthenticationDetails=function(){function AuthenticationDetails(data){var _ref=data||{},ValidationData=_ref.ValidationData,Username=_ref.Username,Password=_ref.Password,AuthParameters=_ref.AuthParameters,ClientMetadata=_ref.ClientMetadata;this.validationData=ValidationData||{},this.authParameters=AuthParameters||{},this.clientMetadata=ClientMetadata||{},this.username=Username,this.password=Password}var _proto=AuthenticationDetails.prototype;return _proto.getUsername=function(){return this.username},_proto.getPassword=function(){return this.password},_proto.getValidationData=function(){return this.validationData},_proto.getAuthParameters=function(){return this.authParameters},_proto.getClientMetadata=function(){return this.clientMetadata},AuthenticationDetails}(),buffer=__webpack_require__(11),core=__webpack_require__(48),core_default=__webpack_require__.n(core),sha256=(__webpack_require__(243),__webpack_require__(148)),sha256_default=__webpack_require__.n(sha256),hmac_sha256=__webpack_require__(129),hmac_sha256_default=__webpack_require__.n(hmac_sha256),cryptoSecureRandomInt=__webpack_require__(311);var dbits,WordArray_WordArray=function(){function WordArray(words,sigBytes){words=this.words=words||[],this.sigBytes=null!=sigBytes?sigBytes:4*words.length}var _proto=WordArray.prototype;return _proto.random=function(nBytes){for(var words=[],i=0;i<nBytes;i+=4)words.push(Object(cryptoSecureRandomInt.a)());return new WordArray(words,nBytes)},_proto.toString=function(){return function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,hexChars=[],i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;hexChars.push((bite>>>4).toString(16)),hexChars.push((15&bite).toString(16))}return hexChars.join("")}(this)},WordArray}(),BigInteger=BigInteger_BigInteger;function BigInteger_BigInteger(a,b){null!=a&&this.fromString(a,b)}function nbi(){return new BigInteger_BigInteger(null)}var inBrowser="undefined"!=typeof navigator;inBrowser&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger_BigInteger.prototype.am=function(i,x,w,j,c,n){for(var xl=32767&x,xh=x>>15;--n>=0;){var l=32767&this[i],h=this[i++]>>15,m=xh*l+h*xl;c=((l=xl*l+((32767&m)<<15)+w[j]+(1073741823&c))>>>30)+(m>>>15)+xh*h+(c>>>30),w[j++]=1073741823&l}return c},dbits=30):inBrowser&&"Netscape"!=navigator.appName?(BigInteger_BigInteger.prototype.am=function(i,x,w,j,c,n){for(;--n>=0;){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864),w[j++]=67108863&v}return c},dbits=26):(BigInteger_BigInteger.prototype.am=function(i,x,w,j,c,n){for(var xl=16383&x,xh=x>>14;--n>=0;){var l=16383&this[i],h=this[i++]>>14,m=xh*l+h*xl;c=((l=xl*l+((16383&m)<<14)+w[j]+c)>>28)+(m>>14)+xh*h,w[j++]=268435455&l}return c},dbits=28),BigInteger_BigInteger.prototype.DB=dbits,BigInteger_BigInteger.prototype.DM=(1<<dbits)-1,BigInteger_BigInteger.prototype.DV=1<<dbits;BigInteger_BigInteger.prototype.FV=Math.pow(2,52),BigInteger_BigInteger.prototype.F1=52-dbits,BigInteger_BigInteger.prototype.F2=2*dbits-52;var rr,vv,BI_RC=new Array;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return null==c?-1:c}function nbv(i){var r=nbi();return r.fromInt(i),r}function nbits(x){var t,r=1;return 0!=(t=x>>>16)&&(x=t,r+=16),0!=(t=x>>8)&&(x=t,r+=8),0!=(t=x>>4)&&(x=t,r+=4),0!=(t=x>>2)&&(x=t,r+=2),0!=(t=x>>1)&&(x=t,r+=1),r}function Montgomery(m){this.m=m,this.mp=m.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<m.DB-15)-1,this.mt2=2*m.t}Montgomery.prototype.convert=function(x){var r=nbi();return x.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),x.s<0&&r.compareTo(BigInteger_BigInteger.ZERO)>0&&this.m.subTo(r,r),r},Montgomery.prototype.revert=function(x){var r=nbi();return x.copyTo(r),this.reduce(r),r},Montgomery.prototype.reduce=function(x){for(;x.t<=this.mt2;)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=32767&x[i],u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;for(x[j=i+this.m.t]+=this.m.am(0,u0,x,i,0,this.m.t);x[j]>=x.DV;)x[j]-=x.DV,x[++j]++}x.clamp(),x.drShiftTo(this.m.t,x),x.compareTo(this.m)>=0&&x.subTo(this.m,x)},Montgomery.prototype.mulTo=function(x,y,r){x.multiplyTo(y,r),this.reduce(r)},Montgomery.prototype.sqrTo=function(x,r){x.squareTo(r),this.reduce(r)},BigInteger_BigInteger.prototype.copyTo=function(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t,r.s=this.s},BigInteger_BigInteger.prototype.fromInt=function(x){this.t=1,this.s=x<0?-1:0,x>0?this[0]=x:x<-1?this[0]=x+this.DV:this.t=0},BigInteger_BigInteger.prototype.fromString=function(s,b){var k;if(16==b)k=4;else if(8==b)k=3;else if(2==b)k=1;else if(32==b)k=5;else{if(4!=b)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");k=2}this.t=0,this.s=0;for(var i=s.length,mi=!1,sh=0;--i>=0;){var x=intAt(s,i);x<0?"-"==s.charAt(i)&&(mi=!0):(mi=!1,0==sh?this[this.t++]=x:sh+k>this.DB?(this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh,this[this.t++]=x>>this.DB-sh):this[this.t-1]|=x<<sh,(sh+=k)>=this.DB&&(sh-=this.DB))}this.clamp(),mi&&BigInteger_BigInteger.ZERO.subTo(this,this)},BigInteger_BigInteger.prototype.clamp=function(){for(var c=this.s&this.DM;this.t>0&&this[this.t-1]==c;)--this.t},BigInteger_BigInteger.prototype.dlShiftTo=function(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n,r.s=this.s},BigInteger_BigInteger.prototype.drShiftTo=function(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0),r.s=this.s},BigInteger_BigInteger.prototype.lShiftTo=function(n,r){var i,bs=n%this.DB,cbs=this.DB-bs,bm=(1<<cbs)-1,ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM;for(i=this.t-1;i>=0;--i)r[i+ds+1]=this[i]>>cbs|c,c=(this[i]&bm)<<bs;for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c,r.t=this.t+ds+1,r.s=this.s,r.clamp()},BigInteger_BigInteger.prototype.rShiftTo=function(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t)r.t=0;else{var bs=n%this.DB,cbs=this.DB-bs,bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i)r[i-ds-1]|=(this[i]&bm)<<cbs,r[i-ds]=this[i]>>bs;bs>0&&(r[this.t-ds-1]|=(this.s&bm)<<cbs),r.t=this.t-ds,r.clamp()}},BigInteger_BigInteger.prototype.subTo=function(a,r){for(var i=0,c=0,m=Math.min(a.t,this.t);i<m;)c+=this[i]-a[i],r[i++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c-=a.s;i<this.t;)c+=this[i],r[i++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;i<a.t;)c-=a[i],r[i++]=c&this.DM,c>>=this.DB;c-=a.s}r.s=c<0?-1:0,c<-1?r[i++]=this.DV+c:c>0&&(r[i++]=c),r.t=i,r.clamp()},BigInteger_BigInteger.prototype.multiplyTo=function(a,r){var x=this.abs(),y=a.abs(),i=x.t;for(r.t=i+y.t;--i>=0;)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0,r.clamp(),this.s!=a.s&&BigInteger_BigInteger.ZERO.subTo(r,r)},BigInteger_BigInteger.prototype.squareTo=function(r){for(var x=this.abs(),i=r.t=2*x.t;--i>=0;)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);(r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV&&(r[i+x.t]-=x.DV,r[i+x.t+1]=1)}r.t>0&&(r[r.t-1]+=x.am(i,x[i],r,2*i,0,1)),r.s=0,r.clamp()},BigInteger_BigInteger.prototype.divRemTo=function(m,q,r){var pm=m.abs();if(!(pm.t<=0)){var pt=this.abs();if(pt.t<pm.t)return null!=q&&q.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var y=nbi(),ts=this.s,ms=m.s,nsh=this.DB-nbits(pm[pm.t-1]);nsh>0?(pm.lShiftTo(nsh,y),pt.lShiftTo(nsh,r)):(pm.copyTo(y),pt.copyTo(r));var ys=y.t,y0=y[ys-1];if(0!=y0){var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0),d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2,i=r.t,j=i-ys,t=null==q?nbi():q;for(y.dlShiftTo(j,t),r.compareTo(t)>=0&&(r[r.t++]=1,r.subTo(t,r)),BigInteger_BigInteger.ONE.dlShiftTo(ys,t),t.subTo(y,y);y.t<ys;)y[y.t++]=0;for(;--j>=0;){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd)for(y.dlShiftTo(j,t),r.subTo(t,r);r[i]<--qd;)r.subTo(t,r)}null!=q&&(r.drShiftTo(ys,q),ts!=ms&&BigInteger_BigInteger.ZERO.subTo(q,q)),r.t=ys,r.clamp(),nsh>0&&r.rShiftTo(nsh,r),ts<0&&BigInteger_BigInteger.ZERO.subTo(r,r)}}},BigInteger_BigInteger.prototype.invDigit=function(){if(this.t<1)return 0;var x=this[0];if(0==(1&x))return 0;var y=3&x;return(y=(y=(y=(y=y*(2-(15&x)*y)&15)*(2-(255&x)*y)&255)*(2-((65535&x)*y&65535))&65535)*(2-x*y%this.DV)%this.DV)>0?this.DV-y:-y},BigInteger_BigInteger.prototype.addTo=function(a,r){for(var i=0,c=0,m=Math.min(a.t,this.t);i<m;)c+=this[i]+a[i],r[i++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c+=a.s;i<this.t;)c+=this[i],r[i++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;i<a.t;)c+=a[i],r[i++]=c&this.DM,c>>=this.DB;c+=a.s}r.s=c<0?-1:0,c>0?r[i++]=c:c<-1&&(r[i++]=this.DV+c),r.t=i,r.clamp()},BigInteger_BigInteger.prototype.toString=function(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(16==b)k=4;else if(8==b)k=3;else if(2==b)k=1;else if(32==b)k=5;else{if(4!=b)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");k=2}var d,km=(1<<k)-1,m=!1,r="",i=this.t,p=this.DB-i*this.DB%k;if(i-- >0)for(p<this.DB&&(d=this[i]>>p)>0&&(m=!0,r=int2char(d));i>=0;)p<k?(d=(this[i]&(1<<p)-1)<<k-p,d|=this[--i]>>(p+=this.DB-k)):(d=this[i]>>(p-=k)&km,p<=0&&(p+=this.DB,--i)),d>0&&(m=!0),m&&(r+=int2char(d));return m?r:"0"},BigInteger_BigInteger.prototype.negate=function(){var r=nbi();return BigInteger_BigInteger.ZERO.subTo(this,r),r},BigInteger_BigInteger.prototype.abs=function(){return this.s<0?this.negate():this},BigInteger_BigInteger.prototype.compareTo=function(a){var r=this.s-a.s;if(0!=r)return r;var i=this.t;if(0!=(r=i-a.t))return this.s<0?-r:r;for(;--i>=0;)if(0!=(r=this[i]-a[i]))return r;return 0},BigInteger_BigInteger.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)},BigInteger_BigInteger.prototype.mod=function(a){var r=nbi();return this.abs().divRemTo(a,null,r),this.s<0&&r.compareTo(BigInteger_BigInteger.ZERO)>0&&a.subTo(r,r),r},BigInteger_BigInteger.prototype.equals=function(a){return 0==this.compareTo(a)},BigInteger_BigInteger.prototype.add=function(a){var r=nbi();return this.addTo(a,r),r},BigInteger_BigInteger.prototype.subtract=function(a){var r=nbi();return this.subTo(a,r),r},BigInteger_BigInteger.prototype.multiply=function(a){var r=nbi();return this.multiplyTo(a,r),r},BigInteger_BigInteger.prototype.divide=function(a){var r=nbi();return this.divRemTo(a,r,null),r},BigInteger_BigInteger.prototype.modPow=function(e,m,callback){var k,i=e.bitLength(),r=nbv(1),z=new Montgomery(m);if(i<=0)return r;k=i<18?1:i<48?3:i<144?4:i<768?5:6;var g=new Array,n=3,k1=k-1,km=(1<<k)-1;if(g[1]=z.convert(this),k>1){var g2=nbi();for(z.sqrTo(g[1],g2);n<=km;)g[n]=nbi(),z.mulTo(g2,g[n-2],g[n]),n+=2}var w,t,j=e.t-1,is1=!0,r2=nbi();for(i=nbits(e[j])-1;j>=0;){for(i>=k1?w=e[j]>>i-k1&km:(w=(e[j]&(1<<i+1)-1)<<k1-i,j>0&&(w|=e[j-1]>>this.DB+i-k1)),n=k;0==(1&w);)w>>=1,--n;if((i-=n)<0&&(i+=this.DB,--j),is1)g[w].copyTo(r),is1=!1;else{for(;n>1;)z.sqrTo(r,r2),z.sqrTo(r2,r),n-=2;n>0?z.sqrTo(r,r2):(t=r,r=r2,r2=t),z.mulTo(r2,g[w],r)}for(;j>=0&&0==(e[j]&1<<i);)z.sqrTo(r,r2),t=r,r=r2,r2=t,--i<0&&(i=this.DB-1,--j)}var result=z.revert(r);return callback(null,result),result},BigInteger_BigInteger.ZERO=nbv(0),BigInteger_BigInteger.ONE=nbv(1);var AuthenticationHelper_randomBytes=function(nBytes){return buffer.Buffer.from((new WordArray_WordArray).random(nBytes).toString(),"hex")},AuthenticationHelper_AuthenticationHelper=function(){function AuthenticationHelper(PoolName){this.N=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new BigInteger("2",16),this.k=new BigInteger(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=buffer.Buffer.from("Caldera Derived Key","utf8"),this.poolName=PoolName}var _proto=AuthenticationHelper.prototype;return _proto.getSmallAValue=function(){return this.smallAValue},_proto.getLargeAValue=function(callback){var _this=this;this.largeAValue?callback(null,this.largeAValue):this.calculateA(this.smallAValue,(function(err,largeAValue){err&&callback(err,null),_this.largeAValue=largeAValue,callback(null,_this.largeAValue)}))},_proto.generateRandomSmallA=function(){var hexRandom=AuthenticationHelper_randomBytes(128).toString("hex");return new BigInteger(hexRandom,16).mod(this.N)},_proto.generateRandomString=function(){return AuthenticationHelper_randomBytes(40).toString("base64")},_proto.getRandomPassword=function(){return this.randomPassword},_proto.getSaltDevices=function(){return this.SaltToHashDevices},_proto.getVerifierDevices=function(){return this.verifierDevices},_proto.generateHashDevice=function(deviceGroupKey,username,callback){var _this2=this;this.randomPassword=this.generateRandomString();var combinedString=""+deviceGroupKey+username+":"+this.randomPassword,hashedString=this.hash(combinedString),hexRandom=AuthenticationHelper_randomBytes(16).toString("hex");this.SaltToHashDevices=this.padHex(new BigInteger(hexRandom,16)),this.g.modPow(new BigInteger(this.hexHash(this.SaltToHashDevices+hashedString),16),this.N,(function(err,verifierDevicesNotPadded){err&&callback(err,null),_this2.verifierDevices=_this2.padHex(verifierDevicesNotPadded),callback(null,null)}))},_proto.calculateA=function(a,callback){var _this3=this;this.g.modPow(a,this.N,(function(err,A){err&&callback(err,null),A.mod(_this3.N).equals(BigInteger.ZERO)&&callback(new Error("Illegal paramater. A mod N cannot be 0."),null),callback(null,A)}))},_proto.calculateU=function(A,B){return this.UHexHash=this.hexHash(this.padHex(A)+this.padHex(B)),new BigInteger(this.UHexHash,16)},_proto.hash=function(buf){var str=buf instanceof buffer.Buffer?core_default.a.lib.WordArray.create(buf):buf,hashHex=sha256_default()(str).toString();return new Array(64-hashHex.length).join("0")+hashHex},_proto.hexHash=function(hexStr){return this.hash(buffer.Buffer.from(hexStr,"hex"))},_proto.computehkdf=function(ikm,salt){var infoBitsWordArray=core_default.a.lib.WordArray.create(buffer.Buffer.concat([this.infoBits,buffer.Buffer.from(String.fromCharCode(1),"utf8")])),ikmWordArray=ikm instanceof buffer.Buffer?core_default.a.lib.WordArray.create(ikm):ikm,saltWordArray=salt instanceof buffer.Buffer?core_default.a.lib.WordArray.create(salt):salt,prk=hmac_sha256_default()(ikmWordArray,saltWordArray),hmac=hmac_sha256_default()(infoBitsWordArray,prk);return buffer.Buffer.from(hmac.toString(),"hex").slice(0,16)},_proto.getPasswordAuthenticationKey=function(username,password,serverBValue,salt,callback){var _this4=this;if(serverBValue.mod(this.N).equals(BigInteger.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,serverBValue),this.UValue.equals(BigInteger.ZERO))throw new Error("U cannot be zero.");var usernamePassword=""+this.poolName+username+":"+password,usernamePasswordHash=this.hash(usernamePassword),xValue=new BigInteger(this.hexHash(this.padHex(salt)+usernamePasswordHash),16);this.calculateS(xValue,serverBValue,(function(err,sValue){err&&callback(err,null);var hkdf=_this4.computehkdf(buffer.Buffer.from(_this4.padHex(sValue),"hex"),buffer.Buffer.from(_this4.padHex(_this4.UValue.toString(16)),"hex"));callback(null,hkdf)}))},_proto.calculateS=function(xValue,serverBValue,callback){var _this5=this;this.g.modPow(xValue,this.N,(function(err,gModPowXN){err&&callback(err,null),serverBValue.subtract(_this5.k.multiply(gModPowXN)).modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)),_this5.N,(function(err2,result){err2&&callback(err2,null),callback(null,result.mod(_this5.N))}))}))},_proto.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},_proto.padHex=function(bigInt){var hashStr=bigInt.toString(16);return hashStr.length%2==1?hashStr="0"+hashStr:-1!=="89ABCDEFabcdef".indexOf(hashStr[0])&&(hashStr="00"+hashStr),hashStr},AuthenticationHelper}(),CognitoJwtToken_CognitoJwtToken=function(){function CognitoJwtToken(token){this.jwtToken=token||"",this.payload=this.decodePayload()}var _proto=CognitoJwtToken.prototype;return _proto.getJwtToken=function(){return this.jwtToken},_proto.getExpiration=function(){return this.payload.exp},_proto.getIssuedAt=function(){return this.payload.iat},_proto.decodePayload=function(){var payload=this.jwtToken.split(".")[1];try{return JSON.parse(buffer.Buffer.from(payload,"base64").toString("utf8"))}catch(err){return{}}},CognitoJwtToken}();function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var CognitoAccessToken=function(_CognitoJwtToken){var subClass,superClass;function CognitoAccessToken(_temp){var AccessToken=(void 0===_temp?{}:_temp).AccessToken;return _CognitoJwtToken.call(this,AccessToken||"")||this}return superClass=_CognitoJwtToken,(subClass=CognitoAccessToken).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass),CognitoAccessToken}(CognitoJwtToken_CognitoJwtToken);function CognitoIdToken_setPrototypeOf(o,p){return(CognitoIdToken_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var CognitoIdToken=function(_CognitoJwtToken){var subClass,superClass;function CognitoIdToken(_temp){var IdToken=(void 0===_temp?{}:_temp).IdToken;return _CognitoJwtToken.call(this,IdToken||"")||this}return superClass=_CognitoJwtToken,(subClass=CognitoIdToken).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,CognitoIdToken_setPrototypeOf(subClass,superClass),CognitoIdToken}(CognitoJwtToken_CognitoJwtToken),CognitoRefreshToken=function(){function CognitoRefreshToken(_temp){var RefreshToken=(void 0===_temp?{}:_temp).RefreshToken;this.token=RefreshToken||""}return CognitoRefreshToken.prototype.getToken=function(){return this.token},CognitoRefreshToken}(),enc_base64=__webpack_require__(149),enc_base64_default=__webpack_require__.n(enc_base64),CognitoUserSession=function(){function CognitoUserSession(_temp){var _ref=void 0===_temp?{}:_temp,IdToken=_ref.IdToken,RefreshToken=_ref.RefreshToken,AccessToken=_ref.AccessToken,ClockDrift=_ref.ClockDrift;if(null==AccessToken||null==IdToken)throw new Error("Id token and Access Token must be present.");this.idToken=IdToken,this.refreshToken=RefreshToken,this.accessToken=AccessToken,this.clockDrift=void 0===ClockDrift?this.calculateClockDrift():ClockDrift}var _proto=CognitoUserSession.prototype;return _proto.getIdToken=function(){return this.idToken},_proto.getRefreshToken=function(){return this.refreshToken},_proto.getAccessToken=function(){return this.accessToken},_proto.getClockDrift=function(){return this.clockDrift},_proto.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},_proto.isValid=function(){var adjusted=Math.floor(new Date/1e3)-this.clockDrift;return adjusted<this.accessToken.getExpiration()&&adjusted<this.idToken.getExpiration()},CognitoUserSession}(),monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DateHelper=function(){function DateHelper(){}return DateHelper.prototype.getNowString=function(){var now=new Date,weekDay=weekNames[now.getUTCDay()],month=monthNames[now.getUTCMonth()],day=now.getUTCDate(),hours=now.getUTCHours();hours<10&&(hours="0"+hours);var minutes=now.getUTCMinutes();minutes<10&&(minutes="0"+minutes);var seconds=now.getUTCSeconds();return seconds<10&&(seconds="0"+seconds),weekDay+" "+month+" "+day+" "+hours+":"+minutes+":"+seconds+" UTC "+now.getUTCFullYear()},DateHelper}(),CognitoUserAttribute=function(){function CognitoUserAttribute(_temp){var _ref=void 0===_temp?{}:_temp,Name=_ref.Name,Value=_ref.Value;this.Name=Name||"",this.Value=Value||""}var _proto=CognitoUserAttribute.prototype;return _proto.getValue=function(){return this.Value},_proto.setValue=function(value){return this.Value=value,this},_proto.getName=function(){return this.Name},_proto.setName=function(name){return this.Name=name,this},_proto.toString=function(){return JSON.stringify(this)},_proto.toJSON=function(){return{Name:this.Name,Value:this.Value}},CognitoUserAttribute}(),dataMemory={},MemoryStorage=function(){function MemoryStorage(){}return MemoryStorage.setItem=function(key,value){return dataMemory[key]=value,dataMemory[key]},MemoryStorage.getItem=function(key){return Object.prototype.hasOwnProperty.call(dataMemory,key)?dataMemory[key]:void 0},MemoryStorage.removeItem=function(key){return delete dataMemory[key]},MemoryStorage.clear=function(){return dataMemory={}},MemoryStorage}(),StorageHelper=function(){function StorageHelper(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(exception){this.storageWindow=MemoryStorage}}return StorageHelper.prototype.getStorage=function(){return this.storageWindow},StorageHelper}(),userAgent="undefined"!=typeof navigator?navigator.userAgent:"nodejs",CognitoUser_CognitoUser=function(){function CognitoUser(data){if(null==data||null==data.Username||null==data.Pool)throw new Error("Username and Pool information are required.");this.username=data.Username||"",this.pool=data.Pool,this.Session=null,this.client=data.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=data.Storage||(new StorageHelper).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var _proto=CognitoUser.prototype;return _proto.setSignInUserSession=function(signInUserSession){this.clearCachedUserData(),this.signInUserSession=signInUserSession,this.cacheTokens()},_proto.getSignInUserSession=function(){return this.signInUserSession},_proto.getUsername=function(){return this.username},_proto.getAuthenticationFlowType=function(){return this.authenticationFlowType},_proto.setAuthenticationFlowType=function(authenticationFlowType){this.authenticationFlowType=authenticationFlowType},_proto.initiateAuth=function(authDetails,callback){var _this=this,authParameters=authDetails.getAuthParameters();authParameters.USERNAME=this.username;var clientMetaData=0!==Object.keys(authDetails.getValidationData()).length?authDetails.getValidationData():authDetails.getClientMetadata(),jsonReq={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:authParameters,ClientMetadata:clientMetaData};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",jsonReq,(function(err,data){if(err)return callback.onFailure(err);var challengeName=data.ChallengeName,challengeParameters=data.ChallengeParameters;return"CUSTOM_CHALLENGE"===challengeName?(_this.Session=data.Session,callback.customChallenge(challengeParameters)):(_this.signInUserSession=_this.getCognitoUserSession(data.AuthenticationResult),_this.cacheTokens(),callback.onSuccess(_this.signInUserSession))}))},_proto.authenticateUser=function(authDetails,callback){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(authDetails,callback):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(authDetails,callback):callback.onFailure(new Error("Authentication flow type is invalid."))},_proto.authenticateUserDefaultAuth=function(authDetails,callback){var serverBValue,salt,_this2=this,authenticationHelper=new AuthenticationHelper_AuthenticationHelper(this.pool.getUserPoolId().split("_")[1]),dateHelper=new DateHelper,authParameters={};null!=this.deviceKey&&(authParameters.DEVICE_KEY=this.deviceKey),authParameters.USERNAME=this.username,authenticationHelper.getLargeAValue((function(errOnAValue,aValue){errOnAValue&&callback.onFailure(errOnAValue),authParameters.SRP_A=aValue.toString(16),"CUSTOM_AUTH"===_this2.authenticationFlowType&&(authParameters.CHALLENGE_NAME="SRP_A");var clientMetaData=0!==Object.keys(authDetails.getValidationData()).length?authDetails.getValidationData():authDetails.getClientMetadata(),jsonReq={AuthFlow:_this2.authenticationFlowType,ClientId:_this2.pool.getClientId(),AuthParameters:authParameters,ClientMetadata:clientMetaData};_this2.getUserContextData(_this2.username)&&(jsonReq.UserContextData=_this2.getUserContextData(_this2.username)),_this2.client.request("InitiateAuth",jsonReq,(function(err,data){if(err)return callback.onFailure(err);var challengeParameters=data.ChallengeParameters;_this2.username=challengeParameters.USER_ID_FOR_SRP,serverBValue=new BigInteger(challengeParameters.SRP_B,16),salt=new BigInteger(challengeParameters.SALT,16),_this2.getCachedDeviceKeyAndPassword(),authenticationHelper.getPasswordAuthenticationKey(_this2.username,authDetails.getPassword(),serverBValue,salt,(function(errOnHkdf,hkdf){errOnHkdf&&callback.onFailure(errOnHkdf);var dateNow=dateHelper.getNowString(),message=core_default.a.lib.WordArray.create(buffer.Buffer.concat([buffer.Buffer.from(_this2.pool.getUserPoolId().split("_")[1],"utf8"),buffer.Buffer.from(_this2.username,"utf8"),buffer.Buffer.from(challengeParameters.SECRET_BLOCK,"base64"),buffer.Buffer.from(dateNow,"utf8")])),key=core_default.a.lib.WordArray.create(hkdf),signatureString=enc_base64_default.a.stringify(hmac_sha256_default()(message,key)),challengeResponses={};challengeResponses.USERNAME=_this2.username,challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK=challengeParameters.SECRET_BLOCK,challengeResponses.TIMESTAMP=dateNow,challengeResponses.PASSWORD_CLAIM_SIGNATURE=signatureString,null!=_this2.deviceKey&&(challengeResponses.DEVICE_KEY=_this2.deviceKey);var jsonReqResp={ChallengeName:"PASSWORD_VERIFIER",ClientId:_this2.pool.getClientId(),ChallengeResponses:challengeResponses,Session:data.Session,ClientMetadata:clientMetaData};_this2.getUserContextData()&&(jsonReqResp.UserContextData=_this2.getUserContextData()),function respondToAuthChallenge(challenge,challengeCallback){return _this2.client.request("RespondToAuthChallenge",challenge,(function(errChallenge,dataChallenge){return errChallenge&&"ResourceNotFoundException"===errChallenge.code&&-1!==errChallenge.message.toLowerCase().indexOf("device")?(challengeResponses.DEVICE_KEY=null,_this2.deviceKey=null,_this2.randomPassword=null,_this2.deviceGroupKey=null,_this2.clearCachedDeviceKeyAndPassword(),respondToAuthChallenge(challenge,challengeCallback)):challengeCallback(errChallenge,dataChallenge)}))}(jsonReqResp,(function(errAuthenticate,dataAuthenticate){return errAuthenticate?callback.onFailure(errAuthenticate):_this2.authenticateUserInternal(dataAuthenticate,authenticationHelper,callback)}))}))}))}))},_proto.authenticateUserPlainUsernamePassword=function(authDetails,callback){var _this3=this,authParameters={};if(authParameters.USERNAME=this.username,authParameters.PASSWORD=authDetails.getPassword(),authParameters.PASSWORD){var authenticationHelper=new AuthenticationHelper_AuthenticationHelper(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(authParameters.DEVICE_KEY=this.deviceKey);var clientMetaData=0!==Object.keys(authDetails.getValidationData()).length?authDetails.getValidationData():authDetails.getClientMetadata(),jsonReq={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:authParameters,ClientMetadata:clientMetaData};this.getUserContextData(this.username)&&(jsonReq.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",jsonReq,(function(err,authResult){return err?callback.onFailure(err):_this3.authenticateUserInternal(authResult,authenticationHelper,callback)}))}else callback.onFailure(new Error("PASSWORD parameter is required"))},_proto.authenticateUserInternal=function(dataAuthenticate,authenticationHelper,callback){var _this4=this,challengeName=dataAuthenticate.ChallengeName,challengeParameters=dataAuthenticate.ChallengeParameters;if("SMS_MFA"===challengeName)return this.Session=dataAuthenticate.Session,callback.mfaRequired(challengeName,challengeParameters);if("SELECT_MFA_TYPE"===challengeName)return this.Session=dataAuthenticate.Session,callback.selectMFAType(challengeName,challengeParameters);if("MFA_SETUP"===challengeName)return this.Session=dataAuthenticate.Session,callback.mfaSetup(challengeName,challengeParameters);if("SOFTWARE_TOKEN_MFA"===challengeName)return this.Session=dataAuthenticate.Session,callback.totpRequired(challengeName,challengeParameters);if("CUSTOM_CHALLENGE"===challengeName)return this.Session=dataAuthenticate.Session,callback.customChallenge(challengeParameters);if("NEW_PASSWORD_REQUIRED"===challengeName){this.Session=dataAuthenticate.Session;var userAttributes=null,rawRequiredAttributes=null,requiredAttributes=[],userAttributesPrefix=authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();if(challengeParameters&&(userAttributes=JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes),rawRequiredAttributes=JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes)),rawRequiredAttributes)for(var i=0;i<rawRequiredAttributes.length;i++)requiredAttributes[i]=rawRequiredAttributes[i].substr(userAttributesPrefix.length);return callback.newPasswordRequired(userAttributes,requiredAttributes)}if("DEVICE_SRP_AUTH"!==challengeName){this.signInUserSession=this.getCognitoUserSession(dataAuthenticate.AuthenticationResult),this.challengeName=challengeName,this.cacheTokens();var newDeviceMetadata=dataAuthenticate.AuthenticationResult.NewDeviceMetadata;if(null==newDeviceMetadata)return callback.onSuccess(this.signInUserSession);authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(errGenHash){if(errGenHash)return callback.onFailure(errGenHash);var deviceSecretVerifierConfig={Salt:buffer.Buffer.from(authenticationHelper.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:buffer.Buffer.from(authenticationHelper.getVerifierDevices(),"hex").toString("base64")};_this4.verifierDevices=deviceSecretVerifierConfig.PasswordVerifier,_this4.deviceGroupKey=newDeviceMetadata.DeviceGroupKey,_this4.randomPassword=authenticationHelper.getRandomPassword(),_this4.client.request("ConfirmDevice",{DeviceKey:newDeviceMetadata.DeviceKey,AccessToken:_this4.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:deviceSecretVerifierConfig,DeviceName:userAgent},(function(errConfirm,dataConfirm){return errConfirm?callback.onFailure(errConfirm):(_this4.deviceKey=dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,_this4.cacheDeviceKeyAndPassword(),!0===dataConfirm.UserConfirmationNecessary?callback.onSuccess(_this4.signInUserSession,dataConfirm.UserConfirmationNecessary):callback.onSuccess(_this4.signInUserSession))}))}))}else this.getDeviceResponse(callback)},_proto.completeNewPasswordChallenge=function(newPassword,requiredAttributeData,callback,clientMetadata){var _this5=this;if(!newPassword)return callback.onFailure(new Error("New password is required."));var authenticationHelper=new AuthenticationHelper_AuthenticationHelper(this.pool.getUserPoolId().split("_")[1]),userAttributesPrefix=authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix(),finalUserAttributes={};requiredAttributeData&&Object.keys(requiredAttributeData).forEach((function(key){finalUserAttributes[userAttributesPrefix+key]=requiredAttributeData[key]})),finalUserAttributes.NEW_PASSWORD=newPassword,finalUserAttributes.USERNAME=this.username;var jsonReq={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:finalUserAttributes,Session:this.Session,ClientMetadata:clientMetadata};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",jsonReq,(function(errAuthenticate,dataAuthenticate){return errAuthenticate?callback.onFailure(errAuthenticate):_this5.authenticateUserInternal(dataAuthenticate,authenticationHelper,callback)}))},_proto.getDeviceResponse=function(callback,clientMetadata){var _this6=this,authenticationHelper=new AuthenticationHelper_AuthenticationHelper(this.deviceGroupKey),dateHelper=new DateHelper,authParameters={};authParameters.USERNAME=this.username,authParameters.DEVICE_KEY=this.deviceKey,authenticationHelper.getLargeAValue((function(errAValue,aValue){errAValue&&callback.onFailure(errAValue),authParameters.SRP_A=aValue.toString(16);var jsonReq={ChallengeName:"DEVICE_SRP_AUTH",ClientId:_this6.pool.getClientId(),ChallengeResponses:authParameters,ClientMetadata:clientMetadata};_this6.getUserContextData()&&(jsonReq.UserContextData=_this6.getUserContextData()),_this6.client.request("RespondToAuthChallenge",jsonReq,(function(err,data){if(err)return callback.onFailure(err);var challengeParameters=data.ChallengeParameters,serverBValue=new BigInteger(challengeParameters.SRP_B,16),salt=new BigInteger(challengeParameters.SALT,16);authenticationHelper.getPasswordAuthenticationKey(_this6.deviceKey,_this6.randomPassword,serverBValue,salt,(function(errHkdf,hkdf){if(errHkdf)return callback.onFailure(errHkdf);var dateNow=dateHelper.getNowString(),message=core_default.a.lib.WordArray.create(buffer.Buffer.concat([buffer.Buffer.from(_this6.deviceGroupKey,"utf8"),buffer.Buffer.from(_this6.deviceKey,"utf8"),buffer.Buffer.from(challengeParameters.SECRET_BLOCK,"base64"),buffer.Buffer.from(dateNow,"utf8")])),key=core_default.a.lib.WordArray.create(hkdf),signatureString=enc_base64_default.a.stringify(hmac_sha256_default()(message,key)),challengeResponses={};challengeResponses.USERNAME=_this6.username,challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK=challengeParameters.SECRET_BLOCK,challengeResponses.TIMESTAMP=dateNow,challengeResponses.PASSWORD_CLAIM_SIGNATURE=signatureString,challengeResponses.DEVICE_KEY=_this6.deviceKey;var jsonReqResp={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:_this6.pool.getClientId(),ChallengeResponses:challengeResponses,Session:data.Session};_this6.getUserContextData()&&(jsonReqResp.UserContextData=_this6.getUserContextData()),_this6.client.request("RespondToAuthChallenge",jsonReqResp,(function(errAuthenticate,dataAuthenticate){return errAuthenticate?callback.onFailure(errAuthenticate):(_this6.signInUserSession=_this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult),_this6.cacheTokens(),callback.onSuccess(_this6.signInUserSession))}))}))}))}))},_proto.confirmRegistration=function(confirmationCode,forceAliasCreation,callback,clientMetadata){var jsonReq={ClientId:this.pool.getClientId(),ConfirmationCode:confirmationCode,Username:this.username,ForceAliasCreation:forceAliasCreation,ClientMetadata:clientMetadata};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",jsonReq,(function(err){return err?callback(err,null):callback(null,"SUCCESS")}))},_proto.sendCustomChallengeAnswer=function(answerChallenge,callback,clientMetadata){var _this7=this,challengeResponses={};challengeResponses.USERNAME=this.username,challengeResponses.ANSWER=answerChallenge;var authenticationHelper=new AuthenticationHelper_AuthenticationHelper(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(challengeResponses.DEVICE_KEY=this.deviceKey);var jsonReq={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:challengeResponses,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:clientMetadata};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",jsonReq,(function(err,data){return err?callback.onFailure(err):_this7.authenticateUserInternal(data,authenticationHelper,callback)}))},_proto.sendMFACode=function(confirmationCode,callback,mfaType,clientMetadata){var _this8=this,challengeResponses={};challengeResponses.USERNAME=this.username,challengeResponses.SMS_MFA_CODE=confirmationCode;var mfaTypeSelection=mfaType||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===mfaTypeSelection&&(challengeResponses.SOFTWARE_TOKEN_MFA_CODE=confirmationCode),null!=this.deviceKey&&(challengeResponses.DEVICE_KEY=this.deviceKey);var jsonReq={ChallengeName:mfaTypeSelection,ChallengeResponses:challengeResponses,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:clientMetadata};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",jsonReq,(function(err,dataAuthenticate){if(err)return callback.onFailure(err);if("DEVICE_SRP_AUTH"!==dataAuthenticate.ChallengeName){if(_this8.signInUserSession=_this8.getCognitoUserSession(dataAuthenticate.AuthenticationResult),_this8.cacheTokens(),null==dataAuthenticate.AuthenticationResult.NewDeviceMetadata)return callback.onSuccess(_this8.signInUserSession);var authenticationHelper=new AuthenticationHelper_AuthenticationHelper(_this8.pool.getUserPoolId().split("_")[1]);authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(errGenHash){if(errGenHash)return callback.onFailure(errGenHash);var deviceSecretVerifierConfig={Salt:buffer.Buffer.from(authenticationHelper.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:buffer.Buffer.from(authenticationHelper.getVerifierDevices(),"hex").toString("base64")};_this8.verifierDevices=deviceSecretVerifierConfig.PasswordVerifier,_this8.deviceGroupKey=dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,_this8.randomPassword=authenticationHelper.getRandomPassword(),_this8.client.request("ConfirmDevice",{DeviceKey:dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:_this8.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:deviceSecretVerifierConfig,DeviceName:userAgent},(function(errConfirm,dataConfirm){return errConfirm?callback.onFailure(errConfirm):(_this8.deviceKey=dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,_this8.cacheDeviceKeyAndPassword(),!0===dataConfirm.UserConfirmationNecessary?callback.onSuccess(_this8.signInUserSession,dataConfirm.UserConfirmationNecessary):callback.onSuccess(_this8.signInUserSession))}))}))}else _this8.getDeviceResponse(callback)}))},_proto.changePassword=function(oldUserPassword,newUserPassword,callback,clientMetadata){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:oldUserPassword,ProposedPassword:newUserPassword,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:clientMetadata},(function(err){return err?callback(err,null):callback(null,"SUCCESS")}))},_proto.enableMFA=function(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);var mfaOptions=[];mfaOptions.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:mfaOptions,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err){return err?callback(err,null):callback(null,"SUCCESS")}))},_proto.setUserMfaPreference=function(smsMfaSettings,softwareTokenMfaSettings,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:smsMfaSettings,SoftwareTokenMfaSettings:softwareTokenMfaSettings,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err){return err?callback(err,null):callback(null,"SUCCESS")}))},_proto.disableMFA=function(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err){return err?callback(err,null):callback(null,"SUCCESS")}))},_proto.deleteUser=function(callback,clientMetadata){var _this9=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:clientMetadata},(function(err){return err?callback(err,null):(_this9.clearCachedUser(),callback(null,"SUCCESS"))}))},_proto.updateAttributes=function(attributes,callback,clientMetadata){var _this10=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:attributes,ClientMetadata:clientMetadata},(function(err){return err?callback(err,null):_this10.getUserData((function(){return callback(null,"SUCCESS")}),{bypassCache:!0})}))},_proto.getUserAttributes=function(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err,userData){if(err)return callback(err,null);for(var attributeList=[],i=0;i<userData.UserAttributes.length;i++){var attribute={Name:userData.UserAttributes[i].Name,Value:userData.UserAttributes[i].Value},userAttribute=new CognitoUserAttribute(attribute);attributeList.push(userAttribute)}return callback(null,attributeList)}))},_proto.getMFAOptions=function(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err,userData){return err?callback(err,null):callback(null,userData.MFAOptions)}))},_proto.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},_proto.refreshSessionIfPossible=function(options){var _this11=this;return void 0===options&&(options={}),new Promise((function(resolve){var refresh=_this11.signInUserSession.getRefreshToken();refresh&&refresh.getToken()?_this11.refreshSession(refresh,resolve,options.clientMetadata):resolve()}))},_proto.getUserData=function(callback,params){var _this12=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),callback(new Error("User is not authenticated"),null);var userData=this.getUserDataFromCache();if(userData)if(this.isFetchUserDataAndTokenRequired(params))this.fetchUserData().then((function(data){return _this12.refreshSessionIfPossible(params).then((function(){return data}))})).then((function(data){return callback(null,data)})).catch(callback);else try{return void callback(null,JSON.parse(userData))}catch(err){return this.clearCachedUserData(),void callback(err,null)}else this.fetchUserData().then((function(data){callback(null,data)})).catch(callback)},_proto.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},_proto.isFetchUserDataAndTokenRequired=function(params){var _ref$bypassCache=(params||{}).bypassCache;return void 0!==_ref$bypassCache&&_ref$bypassCache},_proto.fetchUserData=function(){var _this13=this;return this.createGetUserRequest().then((function(data){return _this13.cacheUserData(data),data}))},_proto.deleteAttributes=function(attributeList,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:attributeList,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err){return err?callback(err,null):callback(null,"SUCCESS")}))},_proto.resendConfirmationCode=function(callback,clientMetadata){var jsonReq={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:clientMetadata};this.client.request("ResendConfirmationCode",jsonReq,(function(err,result){return err?callback(err,null):callback(null,result)}))},_proto.getSession=function(callback,options){if(void 0===options&&(options={}),null==this.username)return callback(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return callback(null,this.signInUserSession);var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,idTokenKey=keyPrefix+".idToken",accessTokenKey=keyPrefix+".accessToken",refreshTokenKey=keyPrefix+".refreshToken",clockDriftKey=keyPrefix+".clockDrift";if(this.storage.getItem(idTokenKey)){var idToken=new CognitoIdToken({IdToken:this.storage.getItem(idTokenKey)}),accessToken=new CognitoAccessToken({AccessToken:this.storage.getItem(accessTokenKey)}),refreshToken=new CognitoRefreshToken({RefreshToken:this.storage.getItem(refreshTokenKey)}),clockDrift=parseInt(this.storage.getItem(clockDriftKey),0)||0,cachedSession=new CognitoUserSession({IdToken:idToken,AccessToken:accessToken,RefreshToken:refreshToken,ClockDrift:clockDrift});if(cachedSession.isValid())return this.signInUserSession=cachedSession,callback(null,this.signInUserSession);if(!refreshToken.getToken())return callback(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(refreshToken,callback,options.clientMetadata)}else callback(new Error("Local storage is missing an ID Token, Please authenticate"),null)},_proto.refreshSession=function(refreshToken,callback,clientMetadata){var _this14=this,wrappedCallback=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(callback):callback,authParameters={};authParameters.REFRESH_TOKEN=refreshToken.getToken();var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),lastUserKey=keyPrefix+".LastAuthUser";if(this.storage.getItem(lastUserKey)){this.username=this.storage.getItem(lastUserKey);var deviceKeyKey=keyPrefix+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(deviceKeyKey),authParameters.DEVICE_KEY=this.deviceKey}var jsonReq={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:authParameters,ClientMetadata:clientMetadata};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",jsonReq,(function(err,authResult){if(err)return"NotAuthorizedException"===err.code&&_this14.clearCachedUser(),wrappedCallback(err,null);if(authResult){var authenticationResult=authResult.AuthenticationResult;return Object.prototype.hasOwnProperty.call(authenticationResult,"RefreshToken")||(authenticationResult.RefreshToken=refreshToken.getToken()),_this14.signInUserSession=_this14.getCognitoUserSession(authenticationResult),_this14.cacheTokens(),wrappedCallback(null,_this14.signInUserSession)}}))},_proto.cacheTokens=function(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),idTokenKey=keyPrefix+"."+this.username+".idToken",accessTokenKey=keyPrefix+"."+this.username+".accessToken",refreshTokenKey=keyPrefix+"."+this.username+".refreshToken",clockDriftKey=keyPrefix+"."+this.username+".clockDrift",lastUserKey=keyPrefix+".LastAuthUser";this.storage.setItem(idTokenKey,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(accessTokenKey,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(refreshTokenKey,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(clockDriftKey,""+this.signInUserSession.getClockDrift()),this.storage.setItem(lastUserKey,this.username)},_proto.cacheUserData=function(userData){this.storage.setItem(this.userDataKey,JSON.stringify(userData))},_proto.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},_proto.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},_proto.cacheDeviceKeyAndPassword=function(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,deviceKeyKey=keyPrefix+".deviceKey",randomPasswordKey=keyPrefix+".randomPasswordKey",deviceGroupKeyKey=keyPrefix+".deviceGroupKey";this.storage.setItem(deviceKeyKey,this.deviceKey),this.storage.setItem(randomPasswordKey,this.randomPassword),this.storage.setItem(deviceGroupKeyKey,this.deviceGroupKey)},_proto.getCachedDeviceKeyAndPassword=function(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,deviceKeyKey=keyPrefix+".deviceKey",randomPasswordKey=keyPrefix+".randomPasswordKey",deviceGroupKeyKey=keyPrefix+".deviceGroupKey";this.storage.getItem(deviceKeyKey)&&(this.deviceKey=this.storage.getItem(deviceKeyKey),this.randomPassword=this.storage.getItem(randomPasswordKey),this.deviceGroupKey=this.storage.getItem(deviceGroupKeyKey))},_proto.clearCachedDeviceKeyAndPassword=function(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,deviceKeyKey=keyPrefix+".deviceKey",randomPasswordKey=keyPrefix+".randomPasswordKey",deviceGroupKeyKey=keyPrefix+".deviceGroupKey";this.storage.removeItem(deviceKeyKey),this.storage.removeItem(randomPasswordKey),this.storage.removeItem(deviceGroupKeyKey)},_proto.clearCachedTokens=function(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),idTokenKey=keyPrefix+"."+this.username+".idToken",accessTokenKey=keyPrefix+"."+this.username+".accessToken",refreshTokenKey=keyPrefix+"."+this.username+".refreshToken",lastUserKey=keyPrefix+".LastAuthUser",clockDriftKey=keyPrefix+"."+this.username+".clockDrift";this.storage.removeItem(idTokenKey),this.storage.removeItem(accessTokenKey),this.storage.removeItem(refreshTokenKey),this.storage.removeItem(lastUserKey),this.storage.removeItem(clockDriftKey)},_proto.getCognitoUserSession=function(authResult){var idToken=new CognitoIdToken(authResult),accessToken=new CognitoAccessToken(authResult),refreshToken=new CognitoRefreshToken(authResult);return new CognitoUserSession({IdToken:idToken,AccessToken:accessToken,RefreshToken:refreshToken})},_proto.forgotPassword=function(callback,clientMetadata){var jsonReq={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:clientMetadata};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",jsonReq,(function(err,data){return err?callback.onFailure(err):"function"==typeof callback.inputVerificationCode?callback.inputVerificationCode(data):callback.onSuccess(data)}))},_proto.confirmPassword=function(confirmationCode,newPassword,callback,clientMetadata){var jsonReq={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:confirmationCode,Password:newPassword,ClientMetadata:clientMetadata};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",jsonReq,(function(err){return err?callback.onFailure(err):callback.onSuccess()}))},_proto.getAttributeVerificationCode=function(attributeName,callback,clientMetadata){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:attributeName,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:clientMetadata},(function(err,data){return err?callback.onFailure(err):"function"==typeof callback.inputVerificationCode?callback.inputVerificationCode(data):callback.onSuccess()}))},_proto.verifyAttribute=function(attributeName,confirmationCode,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:attributeName,Code:confirmationCode,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err){return err?callback.onFailure(err):callback.onSuccess("SUCCESS")}))},_proto.getDevice=function(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(err,data){return err?callback.onFailure(err):callback.onSuccess(data)}))},_proto.forgetSpecificDevice=function(deviceKey,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:deviceKey},(function(err){return err?callback.onFailure(err):callback.onSuccess("SUCCESS")}))},_proto.forgetDevice=function(callback){var _this15=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:callback.onFailure,onSuccess:function(result){return _this15.deviceKey=null,_this15.deviceGroupKey=null,_this15.randomPassword=null,_this15.clearCachedDeviceKeyAndPassword(),callback.onSuccess(result)}})},_proto.setDeviceStatusRemembered=function(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(err){return err?callback.onFailure(err):callback.onSuccess("SUCCESS")}))},_proto.setDeviceStatusNotRemembered=function(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(err){return err?callback.onFailure(err):callback.onSuccess("SUCCESS")}))},_proto.listDevices=function(limit,paginationToken,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));var requestParams={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:limit};paginationToken&&(requestParams.PaginationToken=paginationToken),this.client.request("ListDevices",requestParams,(function(err,data){return err?callback.onFailure(err):callback.onSuccess(data)}))},_proto.globalSignOut=function(callback){var _this16=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err){return err?callback.onFailure(err):(_this16.clearCachedUser(),callback.onSuccess("SUCCESS"))}))},_proto.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},_proto.sendMFASelectionAnswer=function(answerChallenge,callback){var _this17=this,challengeResponses={};challengeResponses.USERNAME=this.username,challengeResponses.ANSWER=answerChallenge;var jsonReq={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:challengeResponses,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",jsonReq,(function(err,data){return err?callback.onFailure(err):(_this17.Session=data.Session,"SMS_MFA"===answerChallenge?callback.mfaRequired(data.ChallengeName,data.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===answerChallenge?callback.totpRequired(data.ChallengeName,data.ChallengeParameters):void 0)}))},_proto.getUserContextData=function(){return this.pool.getUserContextData(this.username)},_proto.associateSoftwareToken=function(callback){var _this18=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(err,data){return err?callback.onFailure(err):callback.associateSecretCode(data.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(err,data){return err?callback.onFailure(err):(_this18.Session=data.Session,callback.associateSecretCode(data.SecretCode))}))},_proto.verifySoftwareToken=function(totpCode,friendlyDeviceName,callback){var _this19=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:totpCode,FriendlyDeviceName:friendlyDeviceName},(function(err,data){return err?callback.onFailure(err):callback.onSuccess(data)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:totpCode,FriendlyDeviceName:friendlyDeviceName},(function(err,data){if(err)return callback.onFailure(err);_this19.Session=data.Session;var challengeResponses={};challengeResponses.USERNAME=_this19.username;var jsonReq={ChallengeName:"MFA_SETUP",ClientId:_this19.pool.getClientId(),ChallengeResponses:challengeResponses,Session:_this19.Session};_this19.getUserContextData()&&(jsonReq.UserContextData=_this19.getUserContextData()),_this19.client.request("RespondToAuthChallenge",jsonReq,(function(errRespond,dataRespond){return errRespond?callback.onFailure(errRespond):(_this19.signInUserSession=_this19.getCognitoUserSession(dataRespond.AuthenticationResult),_this19.cacheTokens(),callback.onSuccess(_this19.signInUserSession))}))}))},CognitoUser}();__webpack_require__(476);function UserAgent(){}UserAgent.prototype.userAgent="aws-amplify/0.1.x js";var es_UserAgent=UserAgent;function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(Class){if(null===Class||(fn=Class,-1===Function.toString.call(fn).indexOf("[native code]")))return Class;var fn;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),Client_setPrototypeOf(Wrapper,Class)})(Class)}function _construct(Parent,args,Class){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&Client_setPrototypeOf(instance,Class.prototype),instance}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Client_setPrototypeOf(o,p){return(Client_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var CognitoError=function(_Error){var subClass,superClass;function CognitoError(message,code,name,statusCode){var _this;return(_this=_Error.call(this,message)||this).code=code,_this.name=name,_this.statusCode=statusCode,_this}return superClass=_Error,(subClass=CognitoError).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,Client_setPrototypeOf(subClass,superClass),CognitoError}(_wrapNativeSuper(Error)),Client_Client=function(){function Client(region,endpoint,fetchOptions){this.endpoint=endpoint||"https://cognito-idp."+region+".amazonaws.com/";var credentials=(fetchOptions||{}).credentials;this.fetchOptions=credentials?{credentials:credentials}:{}}var _proto=Client.prototype;return _proto.promisifyRequest=function(operation,params){var _this2=this;return new Promise((function(resolve,reject){_this2.request(operation,params,(function(err,data){err?reject(new CognitoError(err.message,err.code,err.name,err.statusCode)):resolve(data)}))}))},_proto.request=function(operation,params,callback){var response,headers={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+operation,"X-Amz-User-Agent":es_UserAgent.prototype.userAgent},options=Object.assign({},this.fetchOptions,{headers:headers,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(params)});fetch(this.endpoint,options).then((function(resp){return response=resp,resp}),(function(err){if(err instanceof TypeError)throw new Error("Network error");throw err})).then((function(resp){return resp.json().catch((function(){return{}}))})).then((function(data){if(response.ok)return callback(null,data);data;var code=(data.__type||data.code).split("#").pop(),error={code:code,name:code,message:data.message||data.Message||null};return callback(error)})).catch((function(err){if(!(response&&response.headers&&response.headers.get("x-amzn-errortype"))){if(err instanceof Error&&"Network error"===err.message){var _error={code:"NetworkError",name:err.name,message:err.message};return callback(_error)}return callback(err)}try{var code=response.headers.get("x-amzn-errortype").split(":")[0],error={code:code,name:code,statusCode:response.status,message:response.status?response.status.toString():null};return callback(error)}catch(ex){return callback(err)}}))},Client}(),CognitoUserPool_CognitoUserPool=function(){function CognitoUserPool(data,wrapRefreshSessionCallback){var _ref=data||{},UserPoolId=_ref.UserPoolId,ClientId=_ref.ClientId,endpoint=_ref.endpoint,fetchOptions=_ref.fetchOptions,AdvancedSecurityDataCollectionFlag=_ref.AdvancedSecurityDataCollectionFlag;if(!UserPoolId||!ClientId)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(UserPoolId))throw new Error("Invalid UserPoolId format.");var region=UserPoolId.split("_")[0];this.userPoolId=UserPoolId,this.clientId=ClientId,this.client=new Client_Client(region,endpoint,fetchOptions),this.advancedSecurityDataCollectionFlag=!1!==AdvancedSecurityDataCollectionFlag,this.storage=data.Storage||(new StorageHelper).getStorage(),wrapRefreshSessionCallback&&(this.wrapRefreshSessionCallback=wrapRefreshSessionCallback)}var _proto=CognitoUserPool.prototype;return _proto.getUserPoolId=function(){return this.userPoolId},_proto.getClientId=function(){return this.clientId},_proto.signUp=function(username,password,userAttributes,validationData,callback,clientMetadata){var _this=this,jsonReq={ClientId:this.clientId,Username:username,Password:password,UserAttributes:userAttributes,ValidationData:validationData,ClientMetadata:clientMetadata};this.getUserContextData(username)&&(jsonReq.UserContextData=this.getUserContextData(username)),this.client.request("SignUp",jsonReq,(function(err,data){if(err)return callback(err,null);var cognitoUser={Username:username,Pool:_this,Storage:_this.storage},returnData={user:new CognitoUser_CognitoUser(cognitoUser),userConfirmed:data.UserConfirmed,userSub:data.UserSub,codeDeliveryDetails:data.CodeDeliveryDetails};return callback(null,returnData)}))},_proto.getCurrentUser=function(){var lastUserKey="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",lastAuthUser=this.storage.getItem(lastUserKey);if(lastAuthUser){var cognitoUser={Username:lastAuthUser,Pool:this,Storage:this.storage};return new CognitoUser_CognitoUser(cognitoUser)}return null},_proto.getUserContextData=function(username){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var amazonCognitoAdvancedSecurityDataConst=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var advancedSecurityData=amazonCognitoAdvancedSecurityDataConst.getData(username,this.userPoolId,this.clientId);if(advancedSecurityData)return{EncodedData:advancedSecurityData}}return{}}},CognitoUserPool}(),js_cookie=__webpack_require__(109),CookieStorage_CookieStorage=function(){function CookieStorage(data){if(!data.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=data.domain,data.path?this.path=data.path:this.path="/",Object.prototype.hasOwnProperty.call(data,"expires")?this.expires=data.expires:this.expires=365,Object.prototype.hasOwnProperty.call(data,"secure")?this.secure=data.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(data,"sameSite")){if(!["strict","lax","none"].includes(data.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===data.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=data.sameSite}else this.sameSite=null}var _proto=CookieStorage.prototype;return _proto.setItem=function(key,value){var options={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(options.sameSite=this.sameSite),js_cookie.set(key,value,options),js_cookie.get(key)},_proto.getItem=function(key){return js_cookie.get(key)},_proto.removeItem=function(key){var options={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(options.sameSite=this.sameSite),js_cookie.remove(key,options)},_proto.clear=function(){var index,cookies=js_cookie.get();for(index=0;index<cookies.length;++index)js_cookie.remove(cookies[index]);return{}},CookieStorage}();__webpack_require__.d(__webpack_exports__,"a",(function(){return AuthenticationDetails})),__webpack_require__.d(__webpack_exports__,"b",(function(){return CognitoAccessToken})),__webpack_require__.d(__webpack_exports__,"c",(function(){return CognitoIdToken})),__webpack_require__.d(__webpack_exports__,"d",(function(){return CognitoRefreshToken})),__webpack_require__.d(__webpack_exports__,"e",(function(){return CognitoUser_CognitoUser})),__webpack_require__.d(__webpack_exports__,"f",(function(){return CognitoUserAttribute})),__webpack_require__.d(__webpack_exports__,"g",(function(){return CognitoUserPool_CognitoUserPool})),__webpack_require__.d(__webpack_exports__,"h",(function(){return CognitoUserSession})),__webpack_require__.d(__webpack_exports__,"i",(function(){return CookieStorage_CookieStorage}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return fromArray}));var _Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_Subscription__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12),_util_subscribeToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(179);function fromArray(input,scheduler){return scheduler?new _Observable__WEBPACK_IMPORTED_MODULE_0__.a((function(subscriber){var sub=new _Subscription__WEBPACK_IMPORTED_MODULE_1__.a,i=0;return sub.add(scheduler.schedule((function(){i!==input.length?(subscriber.next(input[i++]),subscriber.closed||sub.add(this.schedule())):subscriber.complete()}))),sub})):new _Observable__WEBPACK_IMPORTED_MODULE_0__.a(Object(_util_subscribeToArray__WEBPACK_IMPORTED_MODULE_2__.a)(input))}},function(module,exports,__webpack_require__){var CryptoJS;module.exports=(CryptoJS=CryptoJS||function(Math,undefined){var create=Object.create||function(){function F(){}return function(obj){var subtype;return F.prototype=obj,subtype=new F,F.prototype=null,subtype}}(),C={},C_lib=C.lib={},Base=C_lib.Base={extend:function(overrides){var subtype=create(this);return overrides&&subtype.mixIn(overrides),subtype.hasOwnProperty("init")&&this.init!==subtype.init||(subtype.init=function(){subtype.$super.init.apply(this,arguments)}),subtype.init.prototype=subtype,subtype.$super=this,subtype},create:function(){var instance=this.extend();return instance.init.apply(instance,arguments),instance},init:function(){},mixIn:function(properties){for(var propertyName in properties)properties.hasOwnProperty(propertyName)&&(this[propertyName]=properties[propertyName]);properties.hasOwnProperty("toString")&&(this.toString=properties.toString)},clone:function(){return this.init.prototype.extend(this)}},WordArray=C_lib.WordArray=Base.extend({init:function(words,sigBytes){words=this.words=words||[],this.sigBytes=sigBytes!=undefined?sigBytes:4*words.length},toString:function(encoder){return(encoder||Hex).stringify(this)},concat:function(wordArray){var thisWords=this.words,thatWords=wordArray.words,thisSigBytes=this.sigBytes,thatSigBytes=wordArray.sigBytes;if(this.clamp(),thisSigBytes%4)for(var i=0;i<thatSigBytes;i++){var thatByte=thatWords[i>>>2]>>>24-i%4*8&255;thisWords[thisSigBytes+i>>>2]|=thatByte<<24-(thisSigBytes+i)%4*8}else for(i=0;i<thatSigBytes;i+=4)thisWords[thisSigBytes+i>>>2]=thatWords[i>>>2];return this.sigBytes+=thatSigBytes,this},clamp:function(){var words=this.words,sigBytes=this.sigBytes;words[sigBytes>>>2]&=4294967295<<32-sigBytes%4*8,words.length=Math.ceil(sigBytes/4)},clone:function(){var clone=Base.clone.call(this);return clone.words=this.words.slice(0),clone},random:function(nBytes){for(var rcache,words=[],r=function(m_w){m_w=m_w;var m_z=987654321,mask=4294967295;return function(){var result=((m_z=36969*(65535&m_z)+(m_z>>16)&mask)<<16)+(m_w=18e3*(65535&m_w)+(m_w>>16)&mask)&mask;return result/=4294967296,(result+=.5)*(Math.random()>.5?1:-1)}},i=0;i<nBytes;i+=4){var _r=r(4294967296*(rcache||Math.random()));rcache=987654071*_r(),words.push(4294967296*_r()|0)}return new WordArray.init(words,nBytes)}}),C_enc=C.enc={},Hex=C_enc.Hex={stringify:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,hexChars=[],i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;hexChars.push((bite>>>4).toString(16)),hexChars.push((15&bite).toString(16))}return hexChars.join("")},parse:function(hexStr){for(var hexStrLength=hexStr.length,words=[],i=0;i<hexStrLength;i+=2)words[i>>>3]|=parseInt(hexStr.substr(i,2),16)<<24-i%8*4;return new WordArray.init(words,hexStrLength/2)}},Latin1=C_enc.Latin1={stringify:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,latin1Chars=[],i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;latin1Chars.push(String.fromCharCode(bite))}return latin1Chars.join("")},parse:function(latin1Str){for(var latin1StrLength=latin1Str.length,words=[],i=0;i<latin1StrLength;i++)words[i>>>2]|=(255&latin1Str.charCodeAt(i))<<24-i%4*8;return new WordArray.init(words,latin1StrLength)}},Utf8=C_enc.Utf8={stringify:function(wordArray){try{return decodeURIComponent(escape(Latin1.stringify(wordArray)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(utf8Str){return Latin1.parse(unescape(encodeURIComponent(utf8Str)))}},BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm=Base.extend({reset:function(){this._data=new WordArray.init,this._nDataBytes=0},_append:function(data){"string"==typeof data&&(data=Utf8.parse(data)),this._data.concat(data),this._nDataBytes+=data.sigBytes},_process:function(doFlush){var data=this._data,dataWords=data.words,dataSigBytes=data.sigBytes,blockSize=this.blockSize,nBlocksReady=dataSigBytes/(4*blockSize),nWordsReady=(nBlocksReady=doFlush?Math.ceil(nBlocksReady):Math.max((0|nBlocksReady)-this._minBufferSize,0))*blockSize,nBytesReady=Math.min(4*nWordsReady,dataSigBytes);if(nWordsReady){for(var offset=0;offset<nWordsReady;offset+=blockSize)this._doProcessBlock(dataWords,offset);var processedWords=dataWords.splice(0,nWordsReady);data.sigBytes-=nBytesReady}return new WordArray.init(processedWords,nBytesReady)},clone:function(){var clone=Base.clone.call(this);return clone._data=this._data.clone(),clone},_minBufferSize:0}),C_algo=(C_lib.Hasher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),init:function(cfg){this.cfg=this.cfg.extend(cfg),this.reset()},reset:function(){BufferedBlockAlgorithm.reset.call(this),this._doReset()},update:function(messageUpdate){return this._append(messageUpdate),this._process(),this},finalize:function(messageUpdate){return messageUpdate&&this._append(messageUpdate),this._doFinalize()},blockSize:16,_createHelper:function(hasher){return function(message,cfg){return new hasher.init(cfg).finalize(message)}},_createHmacHelper:function(hasher){return function(message,key){return new C_algo.HMAC.init(hasher,key).finalize(message)}}}),C.algo={});return C}(Math),CryptoJS)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return config}));var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(value){value&&(new Error).stack;_enable_super_gross_mode_that_will_cause_bad_things=value},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _Auth__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(132);__webpack_require__.d(__webpack_exports__,"a",(function(){return _Auth__WEBPACK_IMPORTED_MODULE_0__.a}));__webpack_require__(46);__webpack_exports__.b=_Auth__WEBPACK_IMPORTED_MODULE_0__.a},function(module,__webpack_exports__,__webpack_require__){"use strict";function noop(){}__webpack_require__.d(__webpack_exports__,"a",(function(){return noop}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var AuthErrorStrings;__webpack_require__.d(__webpack_exports__,"a",(function(){return AuthErrorStrings})),function(AuthErrorStrings){AuthErrorStrings.DEFAULT_MSG="Authentication Error",AuthErrorStrings.EMPTY_USERNAME="Username cannot be empty",AuthErrorStrings.INVALID_USERNAME="The username should either be a string or one of the sign in types",AuthErrorStrings.EMPTY_PASSWORD="Password cannot be empty",AuthErrorStrings.EMPTY_CODE="Confirmation code cannot be empty",AuthErrorStrings.SIGN_UP_ERROR="Error creating account",AuthErrorStrings.NO_MFA="No valid MFA method provided",AuthErrorStrings.INVALID_MFA="Invalid MFA type",AuthErrorStrings.EMPTY_CHALLENGE="Challenge response cannot be empty",AuthErrorStrings.NO_USER_SESSION="Failed to get the session because the user is empty"}(AuthErrorStrings||(AuthErrorStrings={}))},function(module,exports,__webpack_require__){var baseKeys=__webpack_require__(293),getTag=__webpack_require__(295),isArguments=__webpack_require__(296),isArray=__webpack_require__(105),isArrayLike=__webpack_require__(297),isBuffer=__webpack_require__(211),isPrototype=__webpack_require__(294),isTypedArray=__webpack_require__(212),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if("[object Map]"==tag||"[object Set]"==tag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";var elliptic=exports;elliptic.version=__webpack_require__(435).version,elliptic.utils=__webpack_require__(436),elliptic.rand=__webpack_require__(265),elliptic.curve=__webpack_require__(158),elliptic.curves=__webpack_require__(441),elliptic.ec=__webpack_require__(449),elliptic.eddsa=__webpack_require__(453)},function(module,__webpack_exports__,__webpack_require__){"use strict";var _ConsoleLogger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(84);__webpack_require__.d(__webpack_exports__,"a",(function(){return _ConsoleLogger__WEBPACK_IMPORTED_MODULE_0__.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"d",(function(){return makeQuerablePromise})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isWebWorker})),__webpack_require__.d(__webpack_exports__,"b",(function(){return browserOrNode})),__webpack_require__.d(__webpack_exports__,"a",(function(){return JS}));var MIME_MAP=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],isEmpty=function(obj){return void 0===obj&&(obj={}),0===Object.keys(obj).length},sortByField=function(list,field,dir){if(!list||!list.sort)return!1;var dirX=dir&&"desc"===dir?-1:1;return list.sort((function(a,b){var a_val=a[field],b_val=b[field];return void 0===b_val?void 0===a_val?0:1*dirX:void 0===a_val||a_val<b_val?-1*dirX:a_val>b_val?1*dirX:0})),!0},objectLessAttributes=function(obj,less){var ret=Object.assign({},obj);return less&&("string"==typeof less?delete ret[less]:less.forEach((function(attr){delete ret[attr]}))),ret},filenameToContentType=function(filename,defVal){void 0===defVal&&(defVal="application/octet-stream");var name=filename.toLowerCase(),filtered=MIME_MAP.filter((function(mime){return name.endsWith("."+mime.ext)}));return filtered.length>0?filtered[0].type:defVal},isTextFile=function(contentType){var type=contentType.toLowerCase();return!!type.startsWith("text/")||("application/json"===type||"application/xml"===type||"application/sh"===type)},generateRandomString=function(){for(var result="",chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=32;i>0;i-=1)result+=chars[Math.floor(Math.random()*chars.length)];return result},makeQuerablePromise=function(promise){if(promise.isResolved)return promise;var isPending=!0,isRejected=!1,isFullfilled=!1,result=promise.then((function(data){return isFullfilled=!0,isPending=!1,data}),(function(e){throw isRejected=!0,isPending=!1,e}));return result.isFullfilled=function(){return isFullfilled},result.isPending=function(){return isPending},result.isRejected=function(){return isRejected},result},isWebWorker=function(){if("undefined"==typeof self)return!1;var selfContext=self;return void 0!==selfContext.WorkerGlobalScope&&self instanceof selfContext.WorkerGlobalScope},browserOrNode=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:void 0!==process&&null!=process.versions&&null!=process.versions.node}},transferKeyToLowerCase=function(obj,whiteListForItself,whiteListForChildren){if(void 0===whiteListForItself&&(whiteListForItself=[]),void 0===whiteListForChildren&&(whiteListForChildren=[]),!isStrictObject(obj))return obj;var ret={};for(var key in obj){if(obj.hasOwnProperty(key))ret[whiteListForItself.includes(key)?key:key[0].toLowerCase()+key.slice(1)]=whiteListForChildren.includes(key)?obj[key]:transferKeyToLowerCase(obj[key],whiteListForItself,whiteListForChildren)}return ret},transferKeyToUpperCase=function(obj,whiteListForItself,whiteListForChildren){if(void 0===whiteListForItself&&(whiteListForItself=[]),void 0===whiteListForChildren&&(whiteListForChildren=[]),!isStrictObject(obj))return obj;var ret={};for(var key in obj){if(obj.hasOwnProperty(key))ret[whiteListForItself.includes(key)?key:key[0].toUpperCase()+key.slice(1)]=whiteListForChildren.includes(key)?obj[key]:transferKeyToUpperCase(obj[key],whiteListForItself,whiteListForChildren)}return ret},isStrictObject=function(obj){return!(!(obj instanceof Object)||obj instanceof Array||obj instanceof Function||obj instanceof Number||obj instanceof String||obj instanceof Boolean)},JS=function(){function JS(){}return JS.isEmpty=isEmpty,JS.sortByField=sortByField,JS.objectLessAttributes=objectLessAttributes,JS.filenameToContentType=filenameToContentType,JS.isTextFile=isTextFile,JS.generateRandomString=generateRandomString,JS.makeQuerablePromise=makeQuerablePromise,JS.isWebWorker=isWebWorker,JS.browserOrNode=browserOrNode,JS.transferKeyToLowerCase=transferKeyToLowerCase,JS.transferKeyToUpperCase=transferKeyToUpperCase,JS.isStrictObject=isStrictObject,JS}()}).call(this,__webpack_require__(76))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getContentLengthPlugin}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_aws_sdk_protocol_http__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);var contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},getContentLengthPlugin=function(options){return{applyToStack:function(clientStack){clientStack.add(function(bodyLengthChecker){var _this=this;return function(next){return function(args){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this,void 0,void 0,(function(){var request,body,headers,length,_a;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_b){return request=args.request,_aws_sdk_protocol_http__WEBPACK_IMPORTED_MODULE_1__.a.isInstance(request)&&(body=request.body,headers=request.headers,body&&-1===Object.keys(headers).map((function(str){return str.toLowerCase()})).indexOf("content-length")&&void 0!==(length=bodyLengthChecker(body))&&(request.headers=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({},request.headers),((_a={})["content-length"]=String(length),_a)))),[2,next(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({},args),{request:request}))]}))}))}}}(options.bodyLengthChecker),contentLengthMiddlewareOptions)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebCryptoSha256=exports.Ie11Sha256=void 0,__webpack_require__(206).__exportStar(__webpack_require__(482),exports);var ie11Sha256_1=__webpack_require__(279);Object.defineProperty(exports,"Ie11Sha256",{enumerable:!0,get:function(){return ie11Sha256_1.Sha256}});var webCryptoSha256_1=__webpack_require__(282);Object.defineProperty(exports,"WebCryptoSha256",{enumerable:!0,get:function(){return webCryptoSha256_1.Sha256}})},function(module,__webpack_exports__,__webpack_require__){"use strict";function calculateBodyLength(body){if("string"==typeof body){for(var len=body.length,i=len-1;i>=0;i--){var code=body.charCodeAt(i);code>127&&code<=2047?len++:code>2047&&code<=65535&&(len+=2)}return len}return"number"==typeof body.byteLength?body.byteLength:"number"==typeof body.size?body.size:void 0}__webpack_require__.d(__webpack_exports__,"a",(function(){return calculateBodyLength}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return defaultUserAgent}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),bowser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(313),defaultUserAgent=function(_a){var serviceId=_a.serviceId,clientVersion=_a.clientVersion;return function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0,void 0,void 0,(function(){var parsedUA,sections,_a,_b,_c,_d,_e,_f,_g;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_h){return parsedUA=(null===(_a=null===window||void 0===window?void 0:window.navigator)||void 0===_a?void 0:_a.userAgent)?Object(bowser__WEBPACK_IMPORTED_MODULE_1__.parse)(window.navigator.userAgent):void 0,sections=[["aws-sdk-js",clientVersion],["os/"+((null===(_b=null==parsedUA?void 0:parsedUA.os)||void 0===_b?void 0:_b.name)||"other"),null===(_c=null==parsedUA?void 0:parsedUA.os)||void 0===_c?void 0:_c.version],["lang/js"],["md/browser",(null!==(_e=null===(_d=null==parsedUA?void 0:parsedUA.browser)||void 0===_d?void 0:_d.name)&&void 0!==_e?_e:"unknown")+"_"+(null!==(_g=null===(_f=null==parsedUA?void 0:parsedUA.browser)||void 0===_f?void 0:_f.version)&&void 0!==_g?_g:"unknown")]],serviceId&&sections.push(["api/"+serviceId,clientVersion]),[2,sections]}))}))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var invalidProvider=function(message){return function(){return Promise.reject(message)}};__webpack_require__.d(__webpack_exports__,"a",(function(){return invalidProvider}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},getLoggerPlugin=function(options){return{applyToStack:function(clientStack){clientStack.add((function(next,context){return function(args){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var clientName,commandName,inputFilterSensitiveLog,logger,outputFilterSensitiveLog,response,_a,$metadata,outputWithoutMetadata;return Object(tslib_es6.__generator)(this,(function(_b){switch(_b.label){case 0:return clientName=context.clientName,commandName=context.commandName,inputFilterSensitiveLog=context.inputFilterSensitiveLog,logger=context.logger,outputFilterSensitiveLog=context.outputFilterSensitiveLog,[4,next(args)];case 1:return response=_b.sent(),logger?("function"==typeof logger.info&&(_a=response.output,$metadata=_a.$metadata,outputWithoutMetadata=Object(tslib_es6.__rest)(_a,["$metadata"]),logger.info({clientName:clientName,commandName:commandName,input:inputFilterSensitiveLog(args.input),output:outputFilterSensitiveLog(outputWithoutMetadata),metadata:$metadata})),[2,response]):[2,response]}}))}))}}),loggerMiddlewareOptions)}}};__webpack_require__.d(__webpack_exports__,"a",(function(){return getLoggerPlugin}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0);__webpack_require__.d(__webpack_exports__,"a",(function(){return parseUrl}));var parseUrl=function(url){var query,_a=new URL(url),hostname=_a.hostname,pathname=_a.pathname,port=_a.port,protocol=_a.protocol,search=_a.search;return search&&(query=function(querystring){var e_1,_a,query={};if(querystring=querystring.replace(/^\?/,""))try{for(var _b=Object(tslib_es6.__values)(querystring.split("&")),_c=_b.next();!_c.done;_c=_b.next()){var pair=_c.value,_d=Object(tslib_es6.__read)(pair.split("="),2),key=_d[0],_e=_d[1],value=void 0===_e?null:_e;key=decodeURIComponent(key),value&&(value=decodeURIComponent(value)),key in query?Array.isArray(query[key])?query[key].push(value):query[key]=[query[key],value]:query[key]=value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return query}(search)),{hostname:hostname,port:port?parseInt(port):void 0,protocol:protocol,path:pathname,query:query}}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(225),toString=Object.prototype.toString;function isArray(val){return"[object Array]"===toString.call(val)}function isUndefined(val){return void 0===val}function isObject(val){return null!==val&&"object"==typeof val}function isPlainObject(val){if("[object Object]"!==toString.call(val))return!1;var prototype=Object.getPrototypeOf(val);return null===prototype||prototype===Object.prototype}function isFunction(val){return"[object Function]"===toString.call(val)}function forEach(obj,fn){if(null!=obj)if("object"!=typeof obj&&(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}module.exports={isArray:isArray,isArrayBuffer:function(val){return"[object ArrayBuffer]"===toString.call(val)},isBuffer:function(val){return null!==val&&!isUndefined(val)&&null!==val.constructor&&!isUndefined(val.constructor)&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)},isFormData:function(val){return"undefined"!=typeof FormData&&val instanceof FormData},isArrayBufferView:function(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer},isString:function(val){return"string"==typeof val},isNumber:function(val){return"number"==typeof val},isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:function(val){return"[object Date]"===toString.call(val)},isFile:function(val){return"[object File]"===toString.call(val)},isBlob:function(val){return"[object Blob]"===toString.call(val)},isFunction:isFunction,isStream:function(val){return isObject(val)&&isFunction(val.pipe)},isURLSearchParams:function(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:forEach,merge:function merge(){var result={};function assignValue(val,key){isPlainObject(result[key])&&isPlainObject(val)?result[key]=merge(result[key],val):isPlainObject(val)?result[key]=merge({},val):isArray(val)?result[key]=val.slice():result[key]=val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},extend:function(a,b,thisArg){return forEach(b,(function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val})),a},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(content){return 65279===content.charCodeAt(0)&&(content=content.slice(1)),content}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",exports.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",exports.NULL_ARGUMENT="NULL argument",exports.KEY_NOT_FOUND="Key Not Found",exports.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",exports.CANNOT_UNBIND="Could not unbind serviceIdentifier:",exports.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",exports.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",exports.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",exports.UNDEFINED_INJECT_ANNOTATION=function(name){return"@inject called with undefined this could mean that the class "+name+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},exports.CIRCULAR_DEPENDENCY="Circular dependency found:",exports.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",exports.INVALID_BINDING_TYPE="Invalid binding type:",exports.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",exports.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",exports.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",exports.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",exports.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",exports.ARGUMENTS_LENGTH_MISMATCH=function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return"The number of constructor arguments in the derived class "+values[0]+" must be >= than the number of constructor arguments of its base class."},exports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",exports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",exports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",exports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",exports.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",exports.POST_CONSTRUCT_ERROR=function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return"@postConstruct error in class "+values[0]+": "+values[1]},exports.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return"It looks like there is a circular dependency in one of the '"+values[0]+"' bindings. Please investigate bindings withservice identifier '"+values[1]+"'."},exports.STACK_OVERFLOW="Maximum call stack size exceeded"},function(module,__webpack_exports__,__webpack_require__){"use strict";var Auth=__webpack_require__(132),lib_esm=__webpack_require__(43),ConsoleLogger=__webpack_require__(84),Credentials=__webpack_require__(175),Platform=__webpack_require__(96),DateUtils=__webpack_require__(326),Signer=__webpack_require__(286),axios=__webpack_require__(97),axios_default=__webpack_require__.n(axios),url_url=__webpack_require__(33),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},logger=new ConsoleLogger.a("RestClient"),RestClient_RestClient=function(){function RestClient(options){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=Credentials.a,this._options=options,logger.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return RestClient.prototype.ajax=function(urlOrApiInfo,method,init){return __awaiter(this,void 0,void 0,(function(){var parsed_url,url,region,service,custom_header,params,libraryHeaders,userAgent,initParams,isAllResponse,custom_header_obj,_a,_b,parsedUrl,_this=this;return __generator(this,(function(_c){switch(_c.label){case 0:return logger.debug(method,urlOrApiInfo),region="us-east-1",service="execute-api",custom_header=void 0,"string"==typeof urlOrApiInfo?(parsed_url=this._parseUrl(urlOrApiInfo),url=urlOrApiInfo):(url=urlOrApiInfo.endpoint,custom_header=urlOrApiInfo.custom_header,region=urlOrApiInfo.region,service=urlOrApiInfo.service,parsed_url=this._parseUrl(urlOrApiInfo.endpoint)),params={method:method,url:url,host:parsed_url.host,path:parsed_url.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},libraryHeaders={},Platform.a.isReactNative&&(userAgent=Platform.a.userAgent||"aws-amplify/0.1.x",libraryHeaders={"User-Agent":userAgent}),initParams=Object.assign({},init),isAllResponse=initParams.response,initParams.body&&("function"==typeof FormData&&initParams.body instanceof FormData?(libraryHeaders["Content-Type"]="multipart/form-data",params.data=initParams.body):(libraryHeaders["Content-Type"]="application/json; charset=UTF-8",params.data=JSON.stringify(initParams.body))),initParams.responseType&&(params.responseType=initParams.responseType),initParams.withCredentials&&(params.withCredentials=initParams.withCredentials),initParams.timeout&&(params.timeout=initParams.timeout),initParams.cancellableToken&&(params.cancelToken=initParams.cancellableToken.token),params.signerServiceInfo=initParams.signerServiceInfo,"function"!=typeof custom_header?[3,2]:[4,custom_header()];case 1:return _a=_c.sent(),[3,3];case 2:_a=void 0,_c.label=3;case 3:return custom_header_obj=_a,params.headers=__assign(__assign(__assign({},libraryHeaders),custom_header_obj),initParams.headers),_b=Object(url_url.parse)(url,!0,!0),_b.search,parsedUrl=__rest(_b,["search"]),params.url=Object(url_url.format)(__assign(__assign({},parsedUrl),{query:__assign(__assign({},parsedUrl.query),initParams.queryStringParameters||{})})),void 0!==params.headers.Authorization?(params.headers=Object.keys(params.headers).reduce((function(acc,k){return params.headers[k]&&(acc[k]=params.headers[k]),acc}),{}),[2,this._request(params,isAllResponse)]):[2,this.Credentials.get().then((function(credentials){return _this._signed(__assign({},params),credentials,isAllResponse,{region:region,service:service}).catch((function(error){if(DateUtils.a.isClockSkewError(error)){var headers=error.response.headers,dateHeader=headers&&(headers.date||headers.Date),responseDate=new Date(dateHeader),requestDate=DateUtils.a.getDateFromHeaderString(params.headers["x-amz-date"]);if(DateUtils.a.isClockSkewed(requestDate,responseDate))return DateUtils.a.setClockOffset(responseDate.getTime()-requestDate.getTime()),_this.ajax(urlOrApiInfo,method,init)}throw error}))}),(function(err){return logger.debug("No credentials available, the request will be unsigned"),_this._request(params,isAllResponse)}))]}}))}))},RestClient.prototype.get=function(urlOrApiInfo,init){return this.ajax(urlOrApiInfo,"GET",init)},RestClient.prototype.put=function(urlOrApiInfo,init){return this.ajax(urlOrApiInfo,"PUT",init)},RestClient.prototype.patch=function(urlOrApiInfo,init){return this.ajax(urlOrApiInfo,"PATCH",init)},RestClient.prototype.post=function(urlOrApiInfo,init){return this.ajax(urlOrApiInfo,"POST",init)},RestClient.prototype.del=function(urlOrApiInfo,init){return this.ajax(urlOrApiInfo,"DELETE",init)},RestClient.prototype.head=function(urlOrApiInfo,init){return this.ajax(urlOrApiInfo,"HEAD",init)},RestClient.prototype.cancel=function(request,message){var source=this._cancelTokenMap.get(request);return source&&source.cancel(message),!0},RestClient.prototype.isCancel=function(error){return axios_default.a.isCancel(error)},RestClient.prototype.getCancellableToken=function(){return axios_default.a.CancelToken.source()},RestClient.prototype.updateRequestToBeCancellable=function(promise,cancelTokenSource){this._cancelTokenMap.set(promise,cancelTokenSource)},RestClient.prototype.endpoint=function(apiName){var _this=this,cloud_logic_array=this._options.endpoints,response="";return Array.isArray(cloud_logic_array)?(cloud_logic_array.forEach((function(v){v.name===apiName&&(response=v.endpoint,"string"==typeof v.region?_this._region=v.region:"string"==typeof _this._options.region&&(_this._region=_this._options.region),"string"==typeof v.service?_this._service=v.service||"execute-api":_this._service="execute-api","function"==typeof v.custom_header?_this._custom_header=v.custom_header:_this._custom_header=void 0)})),response):response},RestClient.prototype._signed=function(params,credentials,isAllResponse,_a){var service=_a.service,region=_a.region,signerServiceInfoParams=params.signerServiceInfo,otherParams=__rest(params,["signerServiceInfo"]),endpoint_region=region||this._region||this._options.region,endpoint_service=service||this._service||this._options.service,creds={secret_key:credentials.secretAccessKey,access_key:credentials.accessKeyId,session_token:credentials.sessionToken},endpointInfo={region:endpoint_region,service:endpoint_service},signerServiceInfo=Object.assign(endpointInfo,signerServiceInfoParams),signed_params=Signer.a.sign(otherParams,creds,signerServiceInfo);return signed_params.data&&(signed_params.body=signed_params.data),logger.debug("Signed Request: ",signed_params),delete signed_params.headers.host,axios_default()(signed_params).then((function(response){return isAllResponse?response:response.data})).catch((function(error){throw logger.debug(error),error}))},RestClient.prototype._request=function(params,isAllResponse){return void 0===isAllResponse&&(isAllResponse=!1),axios_default()(params).then((function(response){return isAllResponse?response:response.data})).catch((function(error){throw logger.debug(error),error}))},RestClient.prototype._parseUrl=function(url){var parts=url.split("/");return{host:parts[2],path:"/"+parts.slice(3).join("/")}},RestClient}(),Amplify=__webpack_require__(40),RestAPI_assign=function(){return(RestAPI_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},RestAPI_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},RestAPI_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},RestAPI_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},RestAPI_logger=new ConsoleLogger.a("RestAPI"),RestAPI_RestAPIClass=function(){function RestAPIClass(options){this._api=null,this.Credentials=Credentials.a,this._options=options,RestAPI_logger.debug("API Options",this._options)}return RestAPIClass.prototype.getModuleName=function(){return"RestAPI"},RestAPIClass.prototype.configure=function(options){var _a=options||{},_b=_a.API,API=void 0===_b?{}:_b,otherOptions=RestAPI_rest(_a,["API"]),opt=RestAPI_assign(RestAPI_assign({},otherOptions),API);if(RestAPI_logger.debug("configure Rest API",{opt:opt}),opt.aws_project_region){if(opt.aws_cloud_logic_custom){var custom=opt.aws_cloud_logic_custom;opt.endpoints="string"==typeof custom?JSON.parse(custom):custom}opt=Object.assign({},opt,{region:opt.aws_project_region,header:{}})}return Array.isArray(opt.endpoints)?opt.endpoints.forEach((function(endpoint){void 0!==endpoint.custom_header&&"function"!=typeof endpoint.custom_header&&(RestAPI_logger.warn("Rest API "+endpoint.name+", custom_header should be a function"),endpoint.custom_header=void 0)})):this._options&&Array.isArray(this._options.endpoints)?opt.endpoints=this._options.endpoints:opt.endpoints=[],this._options=Object.assign({},this._options,opt),this.createInstance(),this._options},RestAPIClass.prototype.createInstance=function(){return RestAPI_logger.debug("create Rest API instance"),this._api=new RestClient_RestClient(this._options),this._api.Credentials=this.Credentials,!0},RestAPIClass.prototype.get=function(apiName,path,init){try{var apiInfo=this.getEndpointInfo(apiName,path),cancellableToken=this._api.getCancellableToken(),initParams=Object.assign({},init);initParams.cancellableToken=cancellableToken;var responsePromise=this._api.get(apiInfo,initParams);return this._api.updateRequestToBeCancellable(responsePromise,cancellableToken),responsePromise}catch(err){return Promise.reject(err.message)}},RestAPIClass.prototype.post=function(apiName,path,init){try{var apiInfo=this.getEndpointInfo(apiName,path),cancellableToken=this._api.getCancellableToken(),initParams=Object.assign({},init);initParams.cancellableToken=cancellableToken;var responsePromise=this._api.post(apiInfo,initParams);return this._api.updateRequestToBeCancellable(responsePromise,cancellableToken),responsePromise}catch(err){return Promise.reject(err.message)}},RestAPIClass.prototype.put=function(apiName,path,init){try{var apiInfo=this.getEndpointInfo(apiName,path),cancellableToken=this._api.getCancellableToken(),initParams=Object.assign({},init);initParams.cancellableToken=cancellableToken;var responsePromise=this._api.put(apiInfo,initParams);return this._api.updateRequestToBeCancellable(responsePromise,cancellableToken),responsePromise}catch(err){return Promise.reject(err.message)}},RestAPIClass.prototype.patch=function(apiName,path,init){try{var apiInfo=this.getEndpointInfo(apiName,path),cancellableToken=this._api.getCancellableToken(),initParams=Object.assign({},init);initParams.cancellableToken=cancellableToken;var responsePromise=this._api.patch(apiInfo,initParams);return this._api.updateRequestToBeCancellable(responsePromise,cancellableToken),responsePromise}catch(err){return Promise.reject(err.message)}},RestAPIClass.prototype.del=function(apiName,path,init){try{var apiInfo=this.getEndpointInfo(apiName,path),cancellableToken=this._api.getCancellableToken(),initParams=Object.assign({},init);initParams.cancellableToken=cancellableToken;var responsePromise=this._api.del(apiInfo,initParams);return this._api.updateRequestToBeCancellable(responsePromise,cancellableToken),responsePromise}catch(err){return Promise.reject(err.message)}},RestAPIClass.prototype.head=function(apiName,path,init){try{var apiInfo=this.getEndpointInfo(apiName,path),cancellableToken=this._api.getCancellableToken(),initParams=Object.assign({},init);initParams.cancellableToken=cancellableToken;var responsePromise=this._api.head(apiInfo,initParams);return this._api.updateRequestToBeCancellable(responsePromise,cancellableToken),responsePromise}catch(err){return Promise.reject(err.message)}},RestAPIClass.prototype.isCancel=function(error){return this._api.isCancel(error)},RestAPIClass.prototype.cancel=function(request,message){return this._api.cancel(request,message)},RestAPIClass.prototype.endpoint=function(apiName){return RestAPI_awaiter(this,void 0,void 0,(function(){return RestAPI_generator(this,(function(_a){return[2,this._api.endpoint(apiName)]}))}))},RestAPIClass.prototype.getEndpointInfo=function(apiName,path){var cloud_logic_array=this._options.endpoints;if(!Array.isArray(cloud_logic_array))throw new Error("API category not configured");var apiConfig=cloud_logic_array.find((function(api){return api.name===apiName}));if(!apiConfig)throw new Error("API "+apiName+" does not exist");var response={endpoint:apiConfig.endpoint+path};return"string"==typeof apiConfig.region?response.region=apiConfig.region:"string"==typeof this._options.region&&(response.region=this._options.region),"string"==typeof apiConfig.service?response.service=apiConfig.service||"execute-api":response.service="execute-api","function"==typeof apiConfig.custom_header?response.custom_header=apiConfig.custom_header:response.custom_header=void 0,response},RestAPIClass}(),RestAPI=new RestAPI_RestAPIClass(null);Amplify.a.register(RestAPI);var GraphQLError=__webpack_require__(150),QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},BREAK={};function isNode(maybeNode){return Boolean(maybeNode&&"string"==typeof maybeNode.kind)}function getVisitFn(visitor,kind,isLeaving){var kindVisitor=visitor[kind];if(kindVisitor){if(!isLeaving&&"function"==typeof kindVisitor)return kindVisitor;var kindSpecificVisitor=isLeaving?kindVisitor.leave:kindVisitor.enter;if("function"==typeof kindSpecificVisitor)return kindSpecificVisitor}else{var specificVisitor=isLeaving?visitor.leave:visitor.enter;if(specificVisitor){if("function"==typeof specificVisitor)return specificVisitor;var specificKindVisitor=specificVisitor[kind];if("function"==typeof specificKindVisitor)return specificKindVisitor}}}function print(ast){return function(root,visitor){var visitorKeys=arguments.length>2&&void 0!==arguments[2]?arguments[2]:QueryDocumentKeys,stack=void 0,inArray=Array.isArray(root),keys=[root],index=-1,edits=[],node=void 0,key=void 0,parent=void 0,path=[],ancestors=[],newRoot=root;do{var isLeaving=++index===keys.length,isEdited=isLeaving&&0!==edits.length;if(isLeaving){if(key=0===ancestors.length?void 0:path[path.length-1],node=parent,parent=ancestors.pop(),isEdited){if(inArray)node=node.slice();else{var clone={};for(var k in node)node.hasOwnProperty(k)&&(clone[k]=node[k]);node=clone}for(var editOffset=0,ii=0;ii<edits.length;ii++){var editKey=edits[ii][0],editValue=edits[ii][1];inArray&&(editKey-=editOffset),inArray&&null===editValue?(node.splice(editKey,1),editOffset++):node[editKey]=editValue}}index=stack.index,keys=stack.keys,edits=stack.edits,inArray=stack.inArray,stack=stack.prev}else{if(key=parent?inArray?index:keys[index]:void 0,null==(node=parent?parent[key]:newRoot))continue;parent&&path.push(key)}var result=void 0;if(!Array.isArray(node)){if(!isNode(node))throw new Error("Invalid AST Node: "+JSON.stringify(node));var visitFn=getVisitFn(visitor,node.kind,isLeaving);if(visitFn){if((result=visitFn.call(visitor,node,key,parent,path,ancestors))===BREAK)break;if(!1===result){if(!isLeaving){path.pop();continue}}else if(void 0!==result&&(edits.push([key,result]),!isLeaving)){if(!isNode(result)){path.pop();continue}node=result}}}void 0===result&&isEdited&&edits.push([key,node]),isLeaving?path.pop():(stack={inArray:inArray,index:index,keys:keys,edits:edits,prev:stack},keys=(inArray=Array.isArray(node))?node:visitorKeys[node.kind]||[],index=-1,edits=[],parent&&ancestors.push(parent),parent=node)}while(void 0!==stack);return 0!==edits.length&&(newRoot=edits[edits.length-1][1]),newRoot}(ast,{leave:printDocASTReducer})}var printDocASTReducer={Name:function(node){return node.value},Variable:function(node){return"$"+node.name},Document:function(node){return join(node.definitions,"\n\n")+"\n"},OperationDefinition:function(node){var op=node.operation,name=node.name,varDefs=wrap("(",join(node.variableDefinitions,", "),")"),directives=join(node.directives," "),selectionSet=node.selectionSet;return name||directives||varDefs||"query"!==op?join([op,join([name,varDefs]),directives,selectionSet]," "):selectionSet},VariableDefinition:function(_ref){var variable=_ref.variable,type=_ref.type,defaultValue=_ref.defaultValue,directives=_ref.directives;return variable+": "+type+wrap(" = ",defaultValue)+wrap(" ",join(directives," "))},SelectionSet:function(_ref2){return block(_ref2.selections)},Field:function(_ref3){var alias=_ref3.alias,name=_ref3.name,args=_ref3.arguments,directives=_ref3.directives,selectionSet=_ref3.selectionSet;return join([wrap("",alias,": ")+name+wrap("(",join(args,", "),")"),join(directives," "),selectionSet]," ")},Argument:function(_ref4){return _ref4.name+": "+_ref4.value},FragmentSpread:function(_ref5){return"..."+_ref5.name+wrap(" ",join(_ref5.directives," "))},InlineFragment:function(_ref6){var typeCondition=_ref6.typeCondition,directives=_ref6.directives,selectionSet=_ref6.selectionSet;return join(["...",wrap("on ",typeCondition),join(directives," "),selectionSet]," ")},FragmentDefinition:function(_ref7){var name=_ref7.name,typeCondition=_ref7.typeCondition,variableDefinitions=_ref7.variableDefinitions,directives=_ref7.directives,selectionSet=_ref7.selectionSet;return"fragment ".concat(name).concat(wrap("(",join(variableDefinitions,", "),")")," ")+"on ".concat(typeCondition," ").concat(wrap("",join(directives," ")," "))+selectionSet},IntValue:function(_ref8){return _ref8.value},FloatValue:function(_ref9){return _ref9.value},StringValue:function(_ref10,key){var value=_ref10.value;return _ref10.block?function(value,isDescription){var escaped=value.replace(/"""/g,'\\"""');return" "!==value[0]&&"\t"!==value[0]||-1!==value.indexOf("\n")?'"""\n'.concat(isDescription?escaped:indent(escaped),'\n"""'):'"""'.concat(escaped.replace(/"$/,'"\n'),'"""')}(value,"description"===key):JSON.stringify(value)},BooleanValue:function(_ref11){return _ref11.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(_ref12){return _ref12.value},ListValue:function(_ref13){return"["+join(_ref13.values,", ")+"]"},ObjectValue:function(_ref14){return"{"+join(_ref14.fields,", ")+"}"},ObjectField:function(_ref15){return _ref15.name+": "+_ref15.value},Directive:function(_ref16){return"@"+_ref16.name+wrap("(",join(_ref16.arguments,", "),")")},NamedType:function(_ref17){return _ref17.name},ListType:function(_ref18){return"["+_ref18.type+"]"},NonNullType:function(_ref19){return _ref19.type+"!"},SchemaDefinition:function(_ref20){var directives=_ref20.directives,operationTypes=_ref20.operationTypes;return join(["schema",join(directives," "),block(operationTypes)]," ")},OperationTypeDefinition:function(_ref21){return _ref21.operation+": "+_ref21.type},ScalarTypeDefinition:addDescription((function(_ref22){return join(["scalar",_ref22.name,join(_ref22.directives," ")]," ")})),ObjectTypeDefinition:addDescription((function(_ref23){var name=_ref23.name,interfaces=_ref23.interfaces,directives=_ref23.directives,fields=_ref23.fields;return join(["type",name,wrap("implements ",join(interfaces," & ")),join(directives," "),block(fields)]," ")})),FieldDefinition:addDescription((function(_ref24){var name=_ref24.name,args=_ref24.arguments,type=_ref24.type,directives=_ref24.directives;return name+(args.every((function(arg){return-1===arg.indexOf("\n")}))?wrap("(",join(args,", "),")"):wrap("(\n",indent(join(args,"\n")),"\n)"))+": "+type+wrap(" ",join(directives," "))})),InputValueDefinition:addDescription((function(_ref25){var name=_ref25.name,type=_ref25.type,defaultValue=_ref25.defaultValue,directives=_ref25.directives;return join([name+": "+type,wrap("= ",defaultValue),join(directives," ")]," ")})),InterfaceTypeDefinition:addDescription((function(_ref26){var name=_ref26.name,directives=_ref26.directives,fields=_ref26.fields;return join(["interface",name,join(directives," "),block(fields)]," ")})),UnionTypeDefinition:addDescription((function(_ref27){var name=_ref27.name,directives=_ref27.directives,types=_ref27.types;return join(["union",name,join(directives," "),types&&0!==types.length?"= "+join(types," | "):""]," ")})),EnumTypeDefinition:addDescription((function(_ref28){var name=_ref28.name,directives=_ref28.directives,values=_ref28.values;return join(["enum",name,join(directives," "),block(values)]," ")})),EnumValueDefinition:addDescription((function(_ref29){return join([_ref29.name,join(_ref29.directives," ")]," ")})),InputObjectTypeDefinition:addDescription((function(_ref30){var name=_ref30.name,directives=_ref30.directives,fields=_ref30.fields;return join(["input",name,join(directives," "),block(fields)]," ")})),DirectiveDefinition:addDescription((function(_ref31){var name=_ref31.name,args=_ref31.arguments,locations=_ref31.locations;return"directive @"+name+(args.every((function(arg){return-1===arg.indexOf("\n")}))?wrap("(",join(args,", "),")"):wrap("(\n",indent(join(args,"\n")),"\n)"))+" on "+join(locations," | ")})),SchemaExtension:function(_ref32){var directives=_ref32.directives,operationTypes=_ref32.operationTypes;return join(["extend schema",join(directives," "),block(operationTypes)]," ")},ScalarTypeExtension:function(_ref33){return join(["extend scalar",_ref33.name,join(_ref33.directives," ")]," ")},ObjectTypeExtension:function(_ref34){var name=_ref34.name,interfaces=_ref34.interfaces,directives=_ref34.directives,fields=_ref34.fields;return join(["extend type",name,wrap("implements ",join(interfaces," & ")),join(directives," "),block(fields)]," ")},InterfaceTypeExtension:function(_ref35){var name=_ref35.name,directives=_ref35.directives,fields=_ref35.fields;return join(["extend interface",name,join(directives," "),block(fields)]," ")},UnionTypeExtension:function(_ref36){var name=_ref36.name,directives=_ref36.directives,types=_ref36.types;return join(["extend union",name,join(directives," "),types&&0!==types.length?"= "+join(types," | "):""]," ")},EnumTypeExtension:function(_ref37){var name=_ref37.name,directives=_ref37.directives,values=_ref37.values;return join(["extend enum",name,join(directives," "),block(values)]," ")},InputObjectTypeExtension:function(_ref38){var name=_ref38.name,directives=_ref38.directives,fields=_ref38.fields;return join(["extend input",name,join(directives," "),block(fields)]," ")}};function addDescription(cb){return function(node){return join([node.description,cb(node)],"\n")}}function join(maybeArray,separator){return maybeArray?maybeArray.filter((function(x){return x})).join(separator||""):""}function block(array){return array&&0!==array.length?"{\n"+indent(join(array,"\n"))+"\n}":""}function wrap(start,maybeString,end){return maybeString?start+maybeString+(end||""):""}function indent(maybeString){return maybeString&&"  "+maybeString.replace(/\n/g,"\n  ")}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function inspect(value){return value&&"object"===_typeof(value)?"function"==typeof value.inspect?value.inspect():Array.isArray(value)?"["+value.map(inspect).join(", ")+"]":"{"+Object.keys(value).map((function(k){return"".concat(k,": ").concat(inspect(value[k]))})).join(", ")+"}":"string"==typeof value?'"'+value+'"':"function"==typeof value?"[function ".concat(value.name,"]"):String(value)}function invariant(condition,message){if(!condition)throw new Error(message)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var classObject,source_Source=function(body,name,locationOffset){_defineProperty(this,"body",void 0),_defineProperty(this,"name",void 0),_defineProperty(this,"locationOffset",void 0),this.body=body,this.name=name||"GraphQL request",this.locationOffset=locationOffset||{line:1,column:1},this.locationOffset.line>0||invariant(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||invariant(0,"column in locationOffset is 1-indexed and must be positive")};function syntaxError(source,position,description){return new GraphQLError.a("Syntax Error: ".concat(description),void 0,source,[position])}function blockStringValue(rawString){for(var lines=rawString.split(/\r\n|[\n\r]/g),commonIndent=null,i=1;i<lines.length;i++){var line=lines[i],indent=leadingWhitespace(line);if(indent<line.length&&(null===commonIndent||indent<commonIndent)&&0===(commonIndent=indent))break}if(commonIndent)for(var _i=1;_i<lines.length;_i++)lines[_i]=lines[_i].slice(commonIndent);for(;lines.length>0&&isBlank(lines[0]);)lines.shift();for(;lines.length>0&&isBlank(lines[lines.length-1]);)lines.pop();return lines.join("\n")}function leadingWhitespace(str){for(var i=0;i<str.length&&(" "===str[i]||"\t"===str[i]);)i++;return i}function isBlank(str){return leadingWhitespace(str)===str.length}function createLexer(source,options){var startOfFileToken=new Tok(TokenKind.SOF,0,0,0,0,null);return{source:source,options:options,lastToken:startOfFileToken,token:startOfFileToken,line:1,lineStart:0,advance:advanceLexer,lookahead:lookahead}}function advanceLexer(){return this.lastToken=this.token,this.token=this.lookahead()}function lookahead(){var token=this.token;if(token.kind!==TokenKind.EOF)do{token=token.next||(token.next=readToken(this,token))}while(token.kind===TokenKind.COMMENT);return token}classObject=source_Source,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(classObject.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var TokenKind=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function getTokenDesc(token){var value=token.value;return value?"".concat(token.kind,' "').concat(value,'"'):token.kind}var charCodeAt=String.prototype.charCodeAt,slice=String.prototype.slice;function Tok(kind,start,end,line,column,prev,value){this.kind=kind,this.start=start,this.end=end,this.line=line,this.column=column,this.value=value,this.prev=prev,this.next=null}function printCharCode(code){return isNaN(code)?TokenKind.EOF:code<127?JSON.stringify(String.fromCharCode(code)):'"\\u'.concat(("00"+code.toString(16).toUpperCase()).slice(-4),'"')}function readToken(lexer,prev){var source=lexer.source,body=source.body,bodyLength=body.length,pos=function(body,startPosition,lexer){var bodyLength=body.length,position=startPosition;for(;position<bodyLength;){var code=charCodeAt.call(body,position);if(9===code||32===code||44===code||65279===code)++position;else if(10===code)++position,++lexer.line,lexer.lineStart=position;else{if(13!==code)break;10===charCodeAt.call(body,position+1)?position+=2:++position,++lexer.line,lexer.lineStart=position}}return position}(body,prev.end,lexer),line=lexer.line,col=1+pos-lexer.lineStart;if(pos>=bodyLength)return new Tok(TokenKind.EOF,bodyLength,bodyLength,line,col,prev);var code=charCodeAt.call(body,pos);switch(code){case 33:return new Tok(TokenKind.BANG,pos,pos+1,line,col,prev);case 35:return function(source,start,line,col,prev){var code,body=source.body,position=start;do{code=charCodeAt.call(body,++position)}while(null!==code&&(code>31||9===code));return new Tok(TokenKind.COMMENT,start,position,line,col,prev,slice.call(body,start+1,position))}(source,pos,line,col,prev);case 36:return new Tok(TokenKind.DOLLAR,pos,pos+1,line,col,prev);case 38:return new Tok(TokenKind.AMP,pos,pos+1,line,col,prev);case 40:return new Tok(TokenKind.PAREN_L,pos,pos+1,line,col,prev);case 41:return new Tok(TokenKind.PAREN_R,pos,pos+1,line,col,prev);case 46:if(46===charCodeAt.call(body,pos+1)&&46===charCodeAt.call(body,pos+2))return new Tok(TokenKind.SPREAD,pos,pos+3,line,col,prev);break;case 58:return new Tok(TokenKind.COLON,pos,pos+1,line,col,prev);case 61:return new Tok(TokenKind.EQUALS,pos,pos+1,line,col,prev);case 64:return new Tok(TokenKind.AT,pos,pos+1,line,col,prev);case 91:return new Tok(TokenKind.BRACKET_L,pos,pos+1,line,col,prev);case 93:return new Tok(TokenKind.BRACKET_R,pos,pos+1,line,col,prev);case 123:return new Tok(TokenKind.BRACE_L,pos,pos+1,line,col,prev);case 124:return new Tok(TokenKind.PIPE,pos,pos+1,line,col,prev);case 125:return new Tok(TokenKind.BRACE_R,pos,pos+1,line,col,prev);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(source,start,line,col,prev){var body=source.body,bodyLength=body.length,position=start+1,code=0;for(;position!==bodyLength&&null!==(code=charCodeAt.call(body,position))&&(95===code||code>=48&&code<=57||code>=65&&code<=90||code>=97&&code<=122);)++position;return new Tok(TokenKind.NAME,start,position,line,col,prev,slice.call(body,start,position))}(source,pos,line,col,prev);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(source,start,firstCode,line,col,prev){var body=source.body,code=firstCode,position=start,isFloat=!1;45===code&&(code=charCodeAt.call(body,++position));if(48===code){if((code=charCodeAt.call(body,++position))>=48&&code<=57)throw syntaxError(source,position,"Invalid number, unexpected digit after 0: ".concat(printCharCode(code),"."))}else position=readDigits(source,position,code),code=charCodeAt.call(body,position);46===code&&(isFloat=!0,code=charCodeAt.call(body,++position),position=readDigits(source,position,code),code=charCodeAt.call(body,position));69!==code&&101!==code||(isFloat=!0,43!==(code=charCodeAt.call(body,++position))&&45!==code||(code=charCodeAt.call(body,++position)),position=readDigits(source,position,code));return new Tok(isFloat?TokenKind.FLOAT:TokenKind.INT,start,position,line,col,prev,slice.call(body,start,position))}(source,pos,code,line,col,prev);case 34:return 34===charCodeAt.call(body,pos+1)&&34===charCodeAt.call(body,pos+2)?function(source,start,line,col,prev){var body=source.body,position=start+3,chunkStart=position,code=0,rawValue="";for(;position<body.length&&null!==(code=charCodeAt.call(body,position));){if(34===code&&34===charCodeAt.call(body,position+1)&&34===charCodeAt.call(body,position+2))return rawValue+=slice.call(body,chunkStart,position),new Tok(TokenKind.BLOCK_STRING,start,position+3,line,col,prev,blockStringValue(rawValue));if(code<32&&9!==code&&10!==code&&13!==code)throw syntaxError(source,position,"Invalid character within String: ".concat(printCharCode(code),"."));92===code&&34===charCodeAt.call(body,position+1)&&34===charCodeAt.call(body,position+2)&&34===charCodeAt.call(body,position+3)?(rawValue+=slice.call(body,chunkStart,position)+'"""',chunkStart=position+=4):++position}throw syntaxError(source,position,"Unterminated string.")}(source,pos,line,col,prev):function(source,start,line,col,prev){var body=source.body,position=start+1,chunkStart=position,code=0,value="";for(;position<body.length&&null!==(code=charCodeAt.call(body,position))&&10!==code&&13!==code;){if(34===code)return value+=slice.call(body,chunkStart,position),new Tok(TokenKind.STRING,start,position+1,line,col,prev,value);if(code<32&&9!==code)throw syntaxError(source,position,"Invalid character within String: ".concat(printCharCode(code),"."));if(++position,92===code){switch(value+=slice.call(body,chunkStart,position-1),code=charCodeAt.call(body,position)){case 34:value+='"';break;case 47:value+="/";break;case 92:value+="\\";break;case 98:value+="\b";break;case 102:value+="\f";break;case 110:value+="\n";break;case 114:value+="\r";break;case 116:value+="\t";break;case 117:var charCode=uniCharCode(charCodeAt.call(body,position+1),charCodeAt.call(body,position+2),charCodeAt.call(body,position+3),charCodeAt.call(body,position+4));if(charCode<0)throw syntaxError(source,position,"Invalid character escape sequence: "+"\\u".concat(body.slice(position+1,position+5),"."));value+=String.fromCharCode(charCode),position+=4;break;default:throw syntaxError(source,position,"Invalid character escape sequence: \\".concat(String.fromCharCode(code),"."))}chunkStart=++position}}throw syntaxError(source,position,"Unterminated string.")}(source,pos,line,col,prev)}throw syntaxError(source,pos,function(code){if(code<32&&9!==code&&10!==code&&13!==code)return"Cannot contain the invalid character ".concat(printCharCode(code),".");if(39===code)return"Unexpected single quote character ('), did you mean to use a double quote (\")?";return"Cannot parse the unexpected character ".concat(printCharCode(code),".")}(code))}function readDigits(source,start,firstCode){var body=source.body,position=start,code=firstCode;if(code>=48&&code<=57){do{code=charCodeAt.call(body,++position)}while(code>=48&&code<=57);return position}throw syntaxError(source,position,"Invalid number, expected digit but got: ".concat(printCharCode(code),"."))}function uniCharCode(a,b,c,d){return char2hex(a)<<12|char2hex(b)<<8|char2hex(c)<<4|char2hex(d)}function char2hex(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:-1}Tok.prototype.toJSON=Tok.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var Kind=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),DirectiveLocation=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function parse(source,options){var sourceObj="string"==typeof source?new source_Source(source):source;if(!(sourceObj instanceof source_Source))throw new TypeError("Must provide Source. Received: ".concat(inspect(sourceObj)));return function(lexer){var start=lexer.token;return{kind:Kind.DOCUMENT,definitions:many(lexer,TokenKind.SOF,parseDefinition,TokenKind.EOF),loc:loc(lexer,start)}}(createLexer(sourceObj,options||{}))}function parseName(lexer){var token=expect(lexer,TokenKind.NAME);return{kind:Kind.NAME,value:token.value,loc:loc(lexer,token)}}function parseDefinition(lexer){if(peek(lexer,TokenKind.NAME))switch(lexer.token.value){case"query":case"mutation":case"subscription":case"fragment":return parseExecutableDefinition(lexer);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return parseTypeSystemDefinition(lexer);case"extend":return function(lexer){var keywordToken=lexer.lookahead();if(keywordToken.kind===TokenKind.NAME)switch(keywordToken.value){case"schema":return function(lexer){var start=lexer.token;expectKeyword(lexer,"extend"),expectKeyword(lexer,"schema");var directives=parseDirectives(lexer,!0),operationTypes=peek(lexer,TokenKind.BRACE_L)?many(lexer,TokenKind.BRACE_L,parseOperationTypeDefinition,TokenKind.BRACE_R):[];if(0===directives.length&&0===operationTypes.length)throw unexpected(lexer);return{kind:Kind.SCHEMA_EXTENSION,directives:directives,operationTypes:operationTypes,loc:loc(lexer,start)}}(lexer);case"scalar":return function(lexer){var start=lexer.token;expectKeyword(lexer,"extend"),expectKeyword(lexer,"scalar");var name=parseName(lexer),directives=parseDirectives(lexer,!0);if(0===directives.length)throw unexpected(lexer);return{kind:Kind.SCALAR_TYPE_EXTENSION,name:name,directives:directives,loc:loc(lexer,start)}}(lexer);case"type":return function(lexer){var start=lexer.token;expectKeyword(lexer,"extend"),expectKeyword(lexer,"type");var name=parseName(lexer),interfaces=parseImplementsInterfaces(lexer),directives=parseDirectives(lexer,!0),fields=parseFieldsDefinition(lexer);if(0===interfaces.length&&0===directives.length&&0===fields.length)throw unexpected(lexer);return{kind:Kind.OBJECT_TYPE_EXTENSION,name:name,interfaces:interfaces,directives:directives,fields:fields,loc:loc(lexer,start)}}(lexer);case"interface":return function(lexer){var start=lexer.token;expectKeyword(lexer,"extend"),expectKeyword(lexer,"interface");var name=parseName(lexer),directives=parseDirectives(lexer,!0),fields=parseFieldsDefinition(lexer);if(0===directives.length&&0===fields.length)throw unexpected(lexer);return{kind:Kind.INTERFACE_TYPE_EXTENSION,name:name,directives:directives,fields:fields,loc:loc(lexer,start)}}(lexer);case"union":return function(lexer){var start=lexer.token;expectKeyword(lexer,"extend"),expectKeyword(lexer,"union");var name=parseName(lexer),directives=parseDirectives(lexer,!0),types=parseUnionMemberTypes(lexer);if(0===directives.length&&0===types.length)throw unexpected(lexer);return{kind:Kind.UNION_TYPE_EXTENSION,name:name,directives:directives,types:types,loc:loc(lexer,start)}}(lexer);case"enum":return function(lexer){var start=lexer.token;expectKeyword(lexer,"extend"),expectKeyword(lexer,"enum");var name=parseName(lexer),directives=parseDirectives(lexer,!0),values=parseEnumValuesDefinition(lexer);if(0===directives.length&&0===values.length)throw unexpected(lexer);return{kind:Kind.ENUM_TYPE_EXTENSION,name:name,directives:directives,values:values,loc:loc(lexer,start)}}(lexer);case"input":return function(lexer){var start=lexer.token;expectKeyword(lexer,"extend"),expectKeyword(lexer,"input");var name=parseName(lexer),directives=parseDirectives(lexer,!0),fields=parseInputFieldsDefinition(lexer);if(0===directives.length&&0===fields.length)throw unexpected(lexer);return{kind:Kind.INPUT_OBJECT_TYPE_EXTENSION,name:name,directives:directives,fields:fields,loc:loc(lexer,start)}}(lexer)}throw unexpected(lexer,keywordToken)}(lexer)}else{if(peek(lexer,TokenKind.BRACE_L))return parseExecutableDefinition(lexer);if(peekDescription(lexer))return parseTypeSystemDefinition(lexer)}throw unexpected(lexer)}function parseExecutableDefinition(lexer){if(peek(lexer,TokenKind.NAME))switch(lexer.token.value){case"query":case"mutation":case"subscription":return parseOperationDefinition(lexer);case"fragment":return function(lexer){var start=lexer.token;if(expectKeyword(lexer,"fragment"),lexer.options.experimentalFragmentVariables)return{kind:Kind.FRAGMENT_DEFINITION,name:parseFragmentName(lexer),variableDefinitions:parseVariableDefinitions(lexer),typeCondition:(expectKeyword(lexer,"on"),parseNamedType(lexer)),directives:parseDirectives(lexer,!1),selectionSet:parseSelectionSet(lexer),loc:loc(lexer,start)};return{kind:Kind.FRAGMENT_DEFINITION,name:parseFragmentName(lexer),typeCondition:(expectKeyword(lexer,"on"),parseNamedType(lexer)),directives:parseDirectives(lexer,!1),selectionSet:parseSelectionSet(lexer),loc:loc(lexer,start)}}(lexer)}else if(peek(lexer,TokenKind.BRACE_L))return parseOperationDefinition(lexer);throw unexpected(lexer)}function parseOperationDefinition(lexer){var start=lexer.token;if(peek(lexer,TokenKind.BRACE_L))return{kind:Kind.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:parseSelectionSet(lexer),loc:loc(lexer,start)};var name,operation=parseOperationType(lexer);return peek(lexer,TokenKind.NAME)&&(name=parseName(lexer)),{kind:Kind.OPERATION_DEFINITION,operation:operation,name:name,variableDefinitions:parseVariableDefinitions(lexer),directives:parseDirectives(lexer,!1),selectionSet:parseSelectionSet(lexer),loc:loc(lexer,start)}}function parseOperationType(lexer){var operationToken=expect(lexer,TokenKind.NAME);switch(operationToken.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw unexpected(lexer,operationToken)}function parseVariableDefinitions(lexer){return peek(lexer,TokenKind.PAREN_L)?many(lexer,TokenKind.PAREN_L,parseVariableDefinition,TokenKind.PAREN_R):[]}function parseVariableDefinition(lexer){var start=lexer.token;return lexer.options.experimentalVariableDefinitionDirectives?{kind:Kind.VARIABLE_DEFINITION,variable:parseVariable(lexer),type:(expect(lexer,TokenKind.COLON),parseTypeReference(lexer)),defaultValue:skip(lexer,TokenKind.EQUALS)?parseValueLiteral(lexer,!0):void 0,directives:parseDirectives(lexer,!0),loc:loc(lexer,start)}:{kind:Kind.VARIABLE_DEFINITION,variable:parseVariable(lexer),type:(expect(lexer,TokenKind.COLON),parseTypeReference(lexer)),defaultValue:skip(lexer,TokenKind.EQUALS)?parseValueLiteral(lexer,!0):void 0,loc:loc(lexer,start)}}function parseVariable(lexer){var start=lexer.token;return expect(lexer,TokenKind.DOLLAR),{kind:Kind.VARIABLE,name:parseName(lexer),loc:loc(lexer,start)}}function parseSelectionSet(lexer){var start=lexer.token;return{kind:Kind.SELECTION_SET,selections:many(lexer,TokenKind.BRACE_L,parseSelection,TokenKind.BRACE_R),loc:loc(lexer,start)}}function parseSelection(lexer){return peek(lexer,TokenKind.SPREAD)?function(lexer){var typeCondition,start=lexer.token;if(expect(lexer,TokenKind.SPREAD),peek(lexer,TokenKind.NAME)&&"on"!==lexer.token.value)return{kind:Kind.FRAGMENT_SPREAD,name:parseFragmentName(lexer),directives:parseDirectives(lexer,!1),loc:loc(lexer,start)};"on"===lexer.token.value&&(lexer.advance(),typeCondition=parseNamedType(lexer));return{kind:Kind.INLINE_FRAGMENT,typeCondition:typeCondition,directives:parseDirectives(lexer,!1),selectionSet:parseSelectionSet(lexer),loc:loc(lexer,start)}}(lexer):function(lexer){var alias,name,start=lexer.token,nameOrAlias=parseName(lexer);skip(lexer,TokenKind.COLON)?(alias=nameOrAlias,name=parseName(lexer)):name=nameOrAlias;return{kind:Kind.FIELD,alias:alias,name:name,arguments:parseArguments(lexer,!1),directives:parseDirectives(lexer,!1),selectionSet:peek(lexer,TokenKind.BRACE_L)?parseSelectionSet(lexer):void 0,loc:loc(lexer,start)}}(lexer)}function parseArguments(lexer,isConst){var item=isConst?parseConstArgument:parseArgument;return peek(lexer,TokenKind.PAREN_L)?many(lexer,TokenKind.PAREN_L,item,TokenKind.PAREN_R):[]}function parseArgument(lexer){var start=lexer.token;return{kind:Kind.ARGUMENT,name:parseName(lexer),value:(expect(lexer,TokenKind.COLON),parseValueLiteral(lexer,!1)),loc:loc(lexer,start)}}function parseConstArgument(lexer){var start=lexer.token;return{kind:Kind.ARGUMENT,name:parseName(lexer),value:(expect(lexer,TokenKind.COLON),parseConstValue(lexer)),loc:loc(lexer,start)}}function parseFragmentName(lexer){if("on"===lexer.token.value)throw unexpected(lexer);return parseName(lexer)}function parseValueLiteral(lexer,isConst){var token=lexer.token;switch(token.kind){case TokenKind.BRACKET_L:return function(lexer,isConst){var start=lexer.token,item=isConst?parseConstValue:parseValueValue;return{kind:Kind.LIST,values:any(lexer,TokenKind.BRACKET_L,item,TokenKind.BRACKET_R),loc:loc(lexer,start)}}(lexer,isConst);case TokenKind.BRACE_L:return function(lexer,isConst){var start=lexer.token;expect(lexer,TokenKind.BRACE_L);var fields=[];for(;!skip(lexer,TokenKind.BRACE_R);)fields.push(parseObjectField(lexer,isConst));return{kind:Kind.OBJECT,fields:fields,loc:loc(lexer,start)}}(lexer,isConst);case TokenKind.INT:return lexer.advance(),{kind:Kind.INT,value:token.value,loc:loc(lexer,token)};case TokenKind.FLOAT:return lexer.advance(),{kind:Kind.FLOAT,value:token.value,loc:loc(lexer,token)};case TokenKind.STRING:case TokenKind.BLOCK_STRING:return parseStringLiteral(lexer);case TokenKind.NAME:return"true"===token.value||"false"===token.value?(lexer.advance(),{kind:Kind.BOOLEAN,value:"true"===token.value,loc:loc(lexer,token)}):"null"===token.value?(lexer.advance(),{kind:Kind.NULL,loc:loc(lexer,token)}):(lexer.advance(),{kind:Kind.ENUM,value:token.value,loc:loc(lexer,token)});case TokenKind.DOLLAR:if(!isConst)return parseVariable(lexer)}throw unexpected(lexer)}function parseStringLiteral(lexer){var token=lexer.token;return lexer.advance(),{kind:Kind.STRING,value:token.value,block:token.kind===TokenKind.BLOCK_STRING,loc:loc(lexer,token)}}function parseConstValue(lexer){return parseValueLiteral(lexer,!0)}function parseValueValue(lexer){return parseValueLiteral(lexer,!1)}function parseObjectField(lexer,isConst){var start=lexer.token;return{kind:Kind.OBJECT_FIELD,name:parseName(lexer),value:(expect(lexer,TokenKind.COLON),parseValueLiteral(lexer,isConst)),loc:loc(lexer,start)}}function parseDirectives(lexer,isConst){for(var directives=[];peek(lexer,TokenKind.AT);)directives.push(parseDirective(lexer,isConst));return directives}function parseDirective(lexer,isConst){var start=lexer.token;return expect(lexer,TokenKind.AT),{kind:Kind.DIRECTIVE,name:parseName(lexer),arguments:parseArguments(lexer,isConst),loc:loc(lexer,start)}}function parseTypeReference(lexer){var type,start=lexer.token;return skip(lexer,TokenKind.BRACKET_L)?(type=parseTypeReference(lexer),expect(lexer,TokenKind.BRACKET_R),type={kind:Kind.LIST_TYPE,type:type,loc:loc(lexer,start)}):type=parseNamedType(lexer),skip(lexer,TokenKind.BANG)?{kind:Kind.NON_NULL_TYPE,type:type,loc:loc(lexer,start)}:type}function parseNamedType(lexer){var start=lexer.token;return{kind:Kind.NAMED_TYPE,name:parseName(lexer),loc:loc(lexer,start)}}function parseTypeSystemDefinition(lexer){var keywordToken=peekDescription(lexer)?lexer.lookahead():lexer.token;if(keywordToken.kind===TokenKind.NAME)switch(keywordToken.value){case"schema":return function(lexer){var start=lexer.token;expectKeyword(lexer,"schema");var directives=parseDirectives(lexer,!0),operationTypes=many(lexer,TokenKind.BRACE_L,parseOperationTypeDefinition,TokenKind.BRACE_R);return{kind:Kind.SCHEMA_DEFINITION,directives:directives,operationTypes:operationTypes,loc:loc(lexer,start)}}(lexer);case"scalar":return function(lexer){var start=lexer.token,description=parseDescription(lexer);expectKeyword(lexer,"scalar");var name=parseName(lexer),directives=parseDirectives(lexer,!0);return{kind:Kind.SCALAR_TYPE_DEFINITION,description:description,name:name,directives:directives,loc:loc(lexer,start)}}(lexer);case"type":return function(lexer){var start=lexer.token,description=parseDescription(lexer);expectKeyword(lexer,"type");var name=parseName(lexer),interfaces=parseImplementsInterfaces(lexer),directives=parseDirectives(lexer,!0),fields=parseFieldsDefinition(lexer);return{kind:Kind.OBJECT_TYPE_DEFINITION,description:description,name:name,interfaces:interfaces,directives:directives,fields:fields,loc:loc(lexer,start)}}(lexer);case"interface":return function(lexer){var start=lexer.token,description=parseDescription(lexer);expectKeyword(lexer,"interface");var name=parseName(lexer),directives=parseDirectives(lexer,!0),fields=parseFieldsDefinition(lexer);return{kind:Kind.INTERFACE_TYPE_DEFINITION,description:description,name:name,directives:directives,fields:fields,loc:loc(lexer,start)}}(lexer);case"union":return function(lexer){var start=lexer.token,description=parseDescription(lexer);expectKeyword(lexer,"union");var name=parseName(lexer),directives=parseDirectives(lexer,!0),types=parseUnionMemberTypes(lexer);return{kind:Kind.UNION_TYPE_DEFINITION,description:description,name:name,directives:directives,types:types,loc:loc(lexer,start)}}(lexer);case"enum":return function(lexer){var start=lexer.token,description=parseDescription(lexer);expectKeyword(lexer,"enum");var name=parseName(lexer),directives=parseDirectives(lexer,!0),values=parseEnumValuesDefinition(lexer);return{kind:Kind.ENUM_TYPE_DEFINITION,description:description,name:name,directives:directives,values:values,loc:loc(lexer,start)}}(lexer);case"input":return function(lexer){var start=lexer.token,description=parseDescription(lexer);expectKeyword(lexer,"input");var name=parseName(lexer),directives=parseDirectives(lexer,!0),fields=parseInputFieldsDefinition(lexer);return{kind:Kind.INPUT_OBJECT_TYPE_DEFINITION,description:description,name:name,directives:directives,fields:fields,loc:loc(lexer,start)}}(lexer);case"directive":return function(lexer){var start=lexer.token,description=parseDescription(lexer);expectKeyword(lexer,"directive"),expect(lexer,TokenKind.AT);var name=parseName(lexer),args=parseArgumentDefs(lexer);expectKeyword(lexer,"on");var locations=function(lexer){skip(lexer,TokenKind.PIPE);var locations=[];do{locations.push(parseDirectiveLocation(lexer))}while(skip(lexer,TokenKind.PIPE));return locations}(lexer);return{kind:Kind.DIRECTIVE_DEFINITION,description:description,name:name,arguments:args,locations:locations,loc:loc(lexer,start)}}(lexer)}throw unexpected(lexer,keywordToken)}function peekDescription(lexer){return peek(lexer,TokenKind.STRING)||peek(lexer,TokenKind.BLOCK_STRING)}function parseDescription(lexer){if(peekDescription(lexer))return parseStringLiteral(lexer)}function parseOperationTypeDefinition(lexer){var start=lexer.token,operation=parseOperationType(lexer);expect(lexer,TokenKind.COLON);var type=parseNamedType(lexer);return{kind:Kind.OPERATION_TYPE_DEFINITION,operation:operation,type:type,loc:loc(lexer,start)}}function parseImplementsInterfaces(lexer){var types=[];if("implements"===lexer.token.value){lexer.advance(),skip(lexer,TokenKind.AMP);do{types.push(parseNamedType(lexer))}while(skip(lexer,TokenKind.AMP)||lexer.options.allowLegacySDLImplementsInterfaces&&peek(lexer,TokenKind.NAME))}return types}function parseFieldsDefinition(lexer){return lexer.options.allowLegacySDLEmptyFields&&peek(lexer,TokenKind.BRACE_L)&&lexer.lookahead().kind===TokenKind.BRACE_R?(lexer.advance(),lexer.advance(),[]):peek(lexer,TokenKind.BRACE_L)?many(lexer,TokenKind.BRACE_L,parseFieldDefinition,TokenKind.BRACE_R):[]}function parseFieldDefinition(lexer){var start=lexer.token,description=parseDescription(lexer),name=parseName(lexer),args=parseArgumentDefs(lexer);expect(lexer,TokenKind.COLON);var type=parseTypeReference(lexer),directives=parseDirectives(lexer,!0);return{kind:Kind.FIELD_DEFINITION,description:description,name:name,arguments:args,type:type,directives:directives,loc:loc(lexer,start)}}function parseArgumentDefs(lexer){return peek(lexer,TokenKind.PAREN_L)?many(lexer,TokenKind.PAREN_L,parseInputValueDef,TokenKind.PAREN_R):[]}function parseInputValueDef(lexer){var start=lexer.token,description=parseDescription(lexer),name=parseName(lexer);expect(lexer,TokenKind.COLON);var defaultValue,type=parseTypeReference(lexer);skip(lexer,TokenKind.EQUALS)&&(defaultValue=parseConstValue(lexer));var directives=parseDirectives(lexer,!0);return{kind:Kind.INPUT_VALUE_DEFINITION,description:description,name:name,type:type,defaultValue:defaultValue,directives:directives,loc:loc(lexer,start)}}function parseUnionMemberTypes(lexer){var types=[];if(skip(lexer,TokenKind.EQUALS)){skip(lexer,TokenKind.PIPE);do{types.push(parseNamedType(lexer))}while(skip(lexer,TokenKind.PIPE))}return types}function parseEnumValuesDefinition(lexer){return peek(lexer,TokenKind.BRACE_L)?many(lexer,TokenKind.BRACE_L,parseEnumValueDefinition,TokenKind.BRACE_R):[]}function parseEnumValueDefinition(lexer){var start=lexer.token,description=parseDescription(lexer),name=parseName(lexer),directives=parseDirectives(lexer,!0);return{kind:Kind.ENUM_VALUE_DEFINITION,description:description,name:name,directives:directives,loc:loc(lexer,start)}}function parseInputFieldsDefinition(lexer){return peek(lexer,TokenKind.BRACE_L)?many(lexer,TokenKind.BRACE_L,parseInputValueDef,TokenKind.BRACE_R):[]}function parseDirectiveLocation(lexer){var start=lexer.token,name=parseName(lexer);if(DirectiveLocation.hasOwnProperty(name.value))return name;throw unexpected(lexer,start)}function loc(lexer,startToken){if(!lexer.options.noLocation)return new Loc(startToken,lexer.lastToken,lexer.source)}function Loc(startToken,endToken,source){this.start=startToken.start,this.end=endToken.end,this.startToken=startToken,this.endToken=endToken,this.source=source}function peek(lexer,kind){return lexer.token.kind===kind}function skip(lexer,kind){var match=lexer.token.kind===kind;return match&&lexer.advance(),match}function expect(lexer,kind){var token=lexer.token;if(token.kind===kind)return lexer.advance(),token;throw syntaxError(lexer.source,token.start,"Expected ".concat(kind,", found ").concat(getTokenDesc(token)))}function expectKeyword(lexer,value){var token=lexer.token;if(token.kind===TokenKind.NAME&&token.value===value)return lexer.advance(),token;throw syntaxError(lexer.source,token.start,'Expected "'.concat(value,'", found ').concat(getTokenDesc(token)))}function unexpected(lexer,atToken){var token=atToken||lexer.token;return syntaxError(lexer.source,token.start,"Unexpected ".concat(getTokenDesc(token)))}function any(lexer,openKind,parseFn,closeKind){expect(lexer,openKind);for(var nodes=[];!skip(lexer,closeKind);)nodes.push(parseFn(lexer));return nodes}function many(lexer,openKind,parseFn,closeKind){expect(lexer,openKind);for(var nodes=[parseFn(lexer)];!skip(lexer,closeKind);)nodes.push(parseFn(lexer));return nodes}Loc.prototype.toJSON=Loc.prototype.inspect=function(){return{start:this.start,end:this.end}};var core_lib_esm=__webpack_require__(7),constants=__webpack_require__(166),pubsub_lib_esm=__webpack_require__(82),auth_lib_esm=__webpack_require__(50),GraphQLAPI_assign=function(){return(GraphQLAPI_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},GraphQLAPI_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},GraphQLAPI_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},GraphQLAPI_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},GraphQLAPI_logger=new ConsoleLogger.a("GraphQLAPI"),graphqlOperation=function(query,variables){return void 0===variables&&(variables={}),{query:query,variables:variables}},GraphQLAPI_GraphQLAPIClass=function(){function GraphQLAPIClass(options){this._api=null,this.Auth=auth_lib_esm.b,this.Cache=lib_esm.a,this.Credentials=Credentials.a,this._options=options,GraphQLAPI_logger.debug("API Options",this._options)}return GraphQLAPIClass.prototype.getModuleName=function(){return"GraphQLAPI"},GraphQLAPIClass.prototype.configure=function(options){var _a=options||{},_b=_a.API,API=void 0===_b?{}:_b,otherOptions=GraphQLAPI_rest(_a,["API"]),opt=GraphQLAPI_assign(GraphQLAPI_assign({},otherOptions),API);return GraphQLAPI_logger.debug("configure GraphQL API",{opt:opt}),opt.aws_project_region&&(opt=Object.assign({},opt,{region:opt.aws_project_region,header:{}})),void 0!==opt.graphql_headers&&"function"!=typeof opt.graphql_headers&&(GraphQLAPI_logger.warn("graphql_headers should be a function"),opt.graphql_headers=void 0),this._options=Object.assign({},this._options,opt),this.createInstance(),this._options},GraphQLAPIClass.prototype.createInstance=function(){return GraphQLAPI_logger.debug("create Rest instance"),this._options?(this._api=new RestClient_RestClient(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},GraphQLAPIClass.prototype._headerBasedAuth=function(defaultAuthenticationType){return GraphQLAPI_awaiter(this,void 0,void 0,(function(){var _a,aws_appsync_authenticationType,apiKey,headers,token,federatedInfo,currentUser,session;return GraphQLAPI_generator(this,(function(_c){switch(_c.label){case 0:switch(_a=this._options,aws_appsync_authenticationType=_a.aws_appsync_authenticationType,apiKey=_a.aws_appsync_apiKey,headers={},defaultAuthenticationType||aws_appsync_authenticationType||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,9]}return[3,11];case 1:if(!apiKey)throw new Error("No api-key configured");return headers={Authorization:null,"X-Api-Key":apiKey},[3,12];case 2:return[4,this._ensureCredentials()];case 3:if(!_c.sent())throw new Error("No credentials");return[3,12];case 4:return token=void 0,[4,lib_esm.a.getItem("federatedInfo")];case 5:return(federatedInfo=_c.sent())?(token=federatedInfo.token,[3,8]):[3,6];case 6:return[4,auth_lib_esm.b.currentAuthenticatedUser()];case 7:(currentUser=_c.sent())&&(token=currentUser.token),_c.label=8;case 8:if(!token)throw new Error("No federated jwt");return headers={Authorization:token},[3,12];case 9:return[4,this.Auth.currentSession()];case 10:return session=_c.sent(),headers={Authorization:session.getAccessToken().getJwtToken()},[3,12];case 11:return headers={Authorization:null},[3,12];case 12:return[2,headers]}}))}))},GraphQLAPIClass.prototype.getGraphqlOperationType=function(operation){var doc=parse(operation);return __read(doc.definitions,1)[0].operation},GraphQLAPIClass.prototype.graphql=function(_a,additionalHeaders){var paramQuery=_a.query,_b=_a.variables,variables=void 0===_b?{}:_b,authMode=_a.authMode,query=parse("string"==typeof paramQuery?paramQuery:print(paramQuery)),_d=__read(query.definitions.filter((function(def){return"OperationDefinition"===def.kind})),1)[0],operationType=(void 0===_d?{}:_d).operation;switch(operationType){case"query":case"mutation":var cancellableToken=this._api.getCancellableToken(),initParams={cancellableToken:cancellableToken},responsePromise=this._graphql({query:query,variables:variables,authMode:authMode},additionalHeaders,initParams);return this._api.updateRequestToBeCancellable(responsePromise,cancellableToken),responsePromise;case"subscription":return this._graphqlSubscribe({query:query,variables:variables,authMode:authMode},additionalHeaders)}throw new Error("invalid operation type: "+operationType)},GraphQLAPIClass.prototype._graphql=function(_a,additionalHeaders,initParams){var query=_a.query,variables=_a.variables,authMode=_a.authMode;return void 0===additionalHeaders&&(additionalHeaders={}),void 0===initParams&&(initParams={}),GraphQLAPI_awaiter(this,void 0,void 0,(function(){var _b,region,appSyncGraphqlEndpoint,_c,graphql_headers,customGraphqlEndpoint,customEndpointRegion,headers,_d,_e,_f,_g,_h,_j,body,init,endpoint,response,err_1,errors,_k;return GraphQLAPI_generator(this,(function(_l){switch(_l.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:_l.sent(),_l.label=2;case 2:return _b=this._options,region=_b.aws_appsync_region,appSyncGraphqlEndpoint=_b.aws_appsync_graphqlEndpoint,_c=_b.graphql_headers,graphql_headers=void 0===_c?function(){return{}}:_c,customGraphqlEndpoint=_b.graphql_endpoint,customEndpointRegion=_b.graphql_endpoint_iam_region,_d=[{}],(_e=!customGraphqlEndpoint)?[4,this._headerBasedAuth(authMode)]:[3,4];case 3:_e=_l.sent(),_l.label=4;case 4:return _f=[GraphQLAPI_assign.apply(void 0,_d.concat([_e]))],(_g=customGraphqlEndpoint)?customEndpointRegion?[4,this._headerBasedAuth(authMode)]:[3,6]:[3,8];case 5:return _h=_l.sent(),[3,7];case 6:_h={Authorization:null},_l.label=7;case 7:_g=_h,_l.label=8;case 8:return _j=[GraphQLAPI_assign.apply(void 0,_f.concat([_g]))],[4,graphql_headers({query:query,variables:variables})];case 9:if(headers=GraphQLAPI_assign.apply(void 0,[GraphQLAPI_assign.apply(void 0,[GraphQLAPI_assign.apply(void 0,_j.concat([_l.sent()])),additionalHeaders]),!customGraphqlEndpoint&&(_k={},_k["x-amz-user-agent"]=core_lib_esm.d.userAgent,_k)]),body={query:print(query),variables:variables},init=Object.assign({headers:headers,body:body,signerServiceInfo:{service:customGraphqlEndpoint?"execute-api":"appsync",region:customGraphqlEndpoint?customEndpointRegion:region}},initParams),!(endpoint=customGraphqlEndpoint||appSyncGraphqlEndpoint))throw{data:{},errors:[new GraphQLError.a("No graphql endpoint provided.")]};_l.label=10;case 10:return _l.trys.push([10,12,,13]),[4,this._api.post(endpoint,init)];case 11:return response=_l.sent(),[3,13];case 12:if(err_1=_l.sent(),this._api.isCancel(err_1))throw err_1;return response={data:{},errors:[new GraphQLError.a(err_1.message)]},[3,13];case 13:if((errors=response.errors)&&errors.length)throw response;return[2,response]}}))}))},GraphQLAPIClass.prototype.isCancel=function(error){return this._api.isCancel(error)},GraphQLAPIClass.prototype.cancel=function(request,message){return this._api.cancel(request,message)},GraphQLAPIClass.prototype._graphqlSubscribe=function(_a,additionalHeaders){var query=_a.query,variables=_a.variables,defaultAuthenticationType=_a.authMode;void 0===additionalHeaders&&(additionalHeaders={});var _b=this._options,region=_b.aws_appsync_region,appSyncGraphqlEndpoint=_b.aws_appsync_graphqlEndpoint,aws_appsync_authenticationType=_b.aws_appsync_authenticationType,apiKey=_b.aws_appsync_apiKey,_c=_b.graphql_headers,graphql_headers=void 0===_c?function(){return{}}:_c,authenticationType=defaultAuthenticationType||aws_appsync_authenticationType||"AWS_IAM";if(pubsub_lib_esm.c&&"function"==typeof pubsub_lib_esm.c.subscribe)return pubsub_lib_esm.c.subscribe("",{provider:constants.b,appSyncGraphqlEndpoint:appSyncGraphqlEndpoint,authenticationType:authenticationType,apiKey:apiKey,query:print(query),region:region,variables:variables,graphql_headers:graphql_headers,additionalHeaders:additionalHeaders});throw GraphQLAPI_logger.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},GraphQLAPIClass.prototype._ensureCredentials=function(){var _this=this;return this.Credentials.get().then((function(credentials){if(!credentials)return!1;var cred=_this.Credentials.shear(credentials);return GraphQLAPI_logger.debug("set credentials for api",cred),!0})).catch((function(err){return GraphQLAPI_logger.warn("ensure credentials error",err),!1}))},GraphQLAPIClass}(),GraphQLAPI=new GraphQLAPI_GraphQLAPIClass(null);Amplify.a.register(GraphQLAPI);var API_assign=function(){return(API_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},API_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},API_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},API_logger=new ConsoleLogger.a("API"),API_APIClass=function(){function APIClass(options){this.Auth=Auth.a,this.Cache=lib_esm.a,this.Credentials=Credentials.a,this._options=options,this._restApi=new RestAPI_RestAPIClass(options),this._graphqlApi=new GraphQLAPI_GraphQLAPIClass(options),API_logger.debug("API Options",this._options)}return APIClass.prototype.getModuleName=function(){return"API"},APIClass.prototype.configure=function(options){this._options=Object.assign({},this._options,options),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var restAPIConfig=this._restApi.configure(this._options),graphQLAPIConfig=this._graphqlApi.configure(this._options);return API_assign(API_assign({},restAPIConfig),graphQLAPIConfig)},APIClass.prototype.get=function(apiName,path,init){return this._restApi.get(apiName,path,init)},APIClass.prototype.post=function(apiName,path,init){return this._restApi.post(apiName,path,init)},APIClass.prototype.put=function(apiName,path,init){return this._restApi.put(apiName,path,init)},APIClass.prototype.patch=function(apiName,path,init){return this._restApi.patch(apiName,path,init)},APIClass.prototype.del=function(apiName,path,init){return this._restApi.del(apiName,path,init)},APIClass.prototype.head=function(apiName,path,init){return this._restApi.head(apiName,path,init)},APIClass.prototype.isCancel=function(error){return this._restApi.isCancel(error)},APIClass.prototype.cancel=function(request,message){return this._restApi.cancel(request,message)},APIClass.prototype.endpoint=function(apiName){return API_awaiter(this,void 0,void 0,(function(){return API_generator(this,(function(_a){return[2,this._restApi.endpoint(apiName)]}))}))},APIClass.prototype.getGraphqlOperationType=function(operation){return this._graphqlApi.getGraphqlOperationType(operation)},APIClass.prototype.graphql=function(options,additionalHeaders){return this._graphqlApi.graphql(options,additionalHeaders)},APIClass}(),API=new API_APIClass(null);Amplify.a.register(API);__webpack_require__.d(__webpack_exports__,"a",(function(){return API})),__webpack_require__.d(__webpack_exports__,"b",(function(){return API_APIClass})),__webpack_require__.d(__webpack_exports__,"d",(function(){return graphqlOperation}));__webpack_exports__.c=API},function(module,__webpack_exports__,__webpack_require__){"use strict";function identity(x){return x}__webpack_require__.d(__webpack_exports__,"a",(function(){return identity}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Notification}));var _observable_empty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_observable_of__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(118),_observable_throwError__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(119),Notification=function(){function Notification(kind,value,error){this.kind=kind,this.value=value,this.error=error,this.hasValue="N"===kind}return Notification.prototype.observe=function(observer){switch(this.kind){case"N":return observer.next&&observer.next(this.value);case"E":return observer.error&&observer.error(this.error);case"C":return observer.complete&&observer.complete()}},Notification.prototype.do=function(next,error,complete){switch(this.kind){case"N":return next&&next(this.value);case"E":return error&&error(this.error);case"C":return complete&&complete()}},Notification.prototype.accept=function(nextOrObserver,error,complete){return nextOrObserver&&"function"==typeof nextOrObserver.next?this.observe(nextOrObserver):this.do(nextOrObserver,error,complete)},Notification.prototype.toObservable=function(){switch(this.kind){case"N":return Object(_observable_of__WEBPACK_IMPORTED_MODULE_1__.a)(this.value);case"E":return Object(_observable_throwError__WEBPACK_IMPORTED_MODULE_2__.a)(this.error);case"C":return Object(_observable_empty__WEBPACK_IMPORTED_MODULE_0__.b)()}throw new Error("unexpected notification kind value")},Notification.createNext=function(value){return void 0!==value?new Notification("N",value):Notification.undefinedValueNotification},Notification.createError=function(err){return new Notification("E",void 0,err)},Notification.createComplete=function(){return Notification.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification}()},function(module,__webpack_exports__,__webpack_require__){"use strict";function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}__webpack_require__.d(__webpack_exports__,"a",(function(){return iterator}));var iterator=getSymbolIterator()},function(module,exports,__webpack_require__){(function(process,global){var Reflect;!function(Reflect){!function(factory){var root="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),exporter=makeExporter(Reflect);function makeExporter(target,previous){return function(key,value){"function"!=typeof target[key]&&Object.defineProperty(target,key,{configurable:!0,writable:!0,value:value}),previous&&previous(key,value)}}void 0===root.Reflect?root.Reflect=Reflect:exporter=makeExporter(root.Reflect,exporter),function(exporter){var hasOwn=Object.prototype.hasOwnProperty,supportsSymbol="function"==typeof Symbol,toPrimitiveSymbol=supportsSymbol&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",iteratorSymbol=supportsSymbol&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",supportsCreate="function"==typeof Object.create,supportsProto={__proto__:[]}instanceof Array,downLevel=!supportsCreate&&!supportsProto,HashMap={create:supportsCreate?function(){return MakeDictionary(Object.create(null))}:supportsProto?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:downLevel?function(map,key){return hasOwn.call(map,key)}:function(map,key){return key in map},get:downLevel?function(map,key){return hasOwn.call(map,key)?map[key]:void 0}:function(map,key){return map[key]}},functionPrototype=Object.getPrototypeOf(Function),usePolyfill="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,_Map=usePolyfill||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?CreateMapPolyfill():Map,_Set=usePolyfill||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?CreateSetPolyfill():Set,Metadata=new(usePolyfill||"function"!=typeof WeakMap?CreateWeakMapPolyfill():WeakMap);function decorate(decorators,target,propertyKey,attributes){if(IsUndefined(propertyKey)){if(!IsArray(decorators))throw new TypeError;if(!IsConstructor(target))throw new TypeError;return DecorateConstructor(decorators,target)}if(!IsArray(decorators))throw new TypeError;if(!IsObject(target))throw new TypeError;if(!IsObject(attributes)&&!IsUndefined(attributes)&&!IsNull(attributes))throw new TypeError;return IsNull(attributes)&&(attributes=void 0),DecorateProperty(decorators,target,propertyKey=ToPropertyKey(propertyKey),attributes)}function metadata(metadataKey,metadataValue){function decorator(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey)&&!IsPropertyKey(propertyKey))throw new TypeError;OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}return decorator}function defineMetadata(metadataKey,metadataValue,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}function hasMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryHasMetadata(metadataKey,target,propertyKey)}function hasOwnMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryHasOwnMetadata(metadataKey,target,propertyKey)}function getMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryGetMetadata(metadataKey,target,propertyKey)}function getOwnMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryGetOwnMetadata(metadataKey,target,propertyKey)}function getMetadataKeys(target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryMetadataKeys(target,propertyKey)}function getOwnMetadataKeys(target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryOwnMetadataKeys(target,propertyKey)}function deleteMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));var metadataMap=GetOrCreateMetadataMap(target,propertyKey,!1);if(IsUndefined(metadataMap))return!1;if(!metadataMap.delete(metadataKey))return!1;if(metadataMap.size>0)return!0;var targetMetadata=Metadata.get(target);return targetMetadata.delete(propertyKey),targetMetadata.size>0||Metadata.delete(target),!0}function DecorateConstructor(decorators,target){for(var i=decorators.length-1;i>=0;--i){var decorated=(0,decorators[i])(target);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsConstructor(decorated))throw new TypeError;target=decorated}}return target}function DecorateProperty(decorators,target,propertyKey,descriptor){for(var i=decorators.length-1;i>=0;--i){var decorated=(0,decorators[i])(target,propertyKey,descriptor);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsObject(decorated))throw new TypeError;descriptor=decorated}}return descriptor}function GetOrCreateMetadataMap(O,P,Create){var targetMetadata=Metadata.get(O);if(IsUndefined(targetMetadata)){if(!Create)return;targetMetadata=new _Map,Metadata.set(O,targetMetadata)}var metadataMap=targetMetadata.get(P);if(IsUndefined(metadataMap)){if(!Create)return;metadataMap=new _Map,targetMetadata.set(P,metadataMap)}return metadataMap}function OrdinaryHasMetadata(MetadataKey,O,P){if(OrdinaryHasOwnMetadata(MetadataKey,O,P))return!0;var parent=OrdinaryGetPrototypeOf(O);return!IsNull(parent)&&OrdinaryHasMetadata(MetadataKey,parent,P)}function OrdinaryHasOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!1);return!IsUndefined(metadataMap)&&ToBoolean(metadataMap.has(MetadataKey))}function OrdinaryGetMetadata(MetadataKey,O,P){if(OrdinaryHasOwnMetadata(MetadataKey,O,P))return OrdinaryGetOwnMetadata(MetadataKey,O,P);var parent=OrdinaryGetPrototypeOf(O);return IsNull(parent)?void 0:OrdinaryGetMetadata(MetadataKey,parent,P)}function OrdinaryGetOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!1);if(!IsUndefined(metadataMap))return metadataMap.get(MetadataKey)}function OrdinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){GetOrCreateMetadataMap(O,P,!0).set(MetadataKey,MetadataValue)}function OrdinaryMetadataKeys(O,P){var ownKeys=OrdinaryOwnMetadataKeys(O,P),parent=OrdinaryGetPrototypeOf(O);if(null===parent)return ownKeys;var parentKeys=OrdinaryMetadataKeys(parent,P);if(parentKeys.length<=0)return ownKeys;if(ownKeys.length<=0)return parentKeys;for(var set=new _Set,keys=[],_i=0,ownKeys_1=ownKeys;_i<ownKeys_1.length;_i++){var key=ownKeys_1[_i];set.has(key)||(set.add(key),keys.push(key))}for(var _a=0,parentKeys_1=parentKeys;_a<parentKeys_1.length;_a++){key=parentKeys_1[_a];set.has(key)||(set.add(key),keys.push(key))}return keys}function OrdinaryOwnMetadataKeys(O,P){var keys=[],metadataMap=GetOrCreateMetadataMap(O,P,!1);if(IsUndefined(metadataMap))return keys;for(var iterator=GetIterator(metadataMap.keys()),k=0;;){var next=IteratorStep(iterator);if(!next)return keys.length=k,keys;var nextValue=IteratorValue(next);try{keys[k]=nextValue}catch(e){try{IteratorClose(iterator)}finally{throw e}}k++}}function Type(x){if(null===x)return 1;switch(typeof x){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===x?1:6;default:return 6}}function IsUndefined(x){return void 0===x}function IsNull(x){return null===x}function IsSymbol(x){return"symbol"==typeof x}function IsObject(x){return"object"==typeof x?null!==x:"function"==typeof x}function ToPrimitive(input,PreferredType){switch(Type(input)){case 0:case 1:case 2:case 3:case 4:case 5:return input}var hint=3===PreferredType?"string":5===PreferredType?"number":"default",exoticToPrim=GetMethod(input,toPrimitiveSymbol);if(void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(IsObject(result))throw new TypeError;return result}return OrdinaryToPrimitive(input,"default"===hint?"number":hint)}function OrdinaryToPrimitive(O,hint){if("string"===hint){var toString_1=O.toString;if(IsCallable(toString_1))if(!IsObject(result=toString_1.call(O)))return result;if(IsCallable(valueOf=O.valueOf))if(!IsObject(result=valueOf.call(O)))return result}else{var valueOf;if(IsCallable(valueOf=O.valueOf))if(!IsObject(result=valueOf.call(O)))return result;var result,toString_2=O.toString;if(IsCallable(toString_2))if(!IsObject(result=toString_2.call(O)))return result}throw new TypeError}function ToBoolean(argument){return!!argument}function ToString(argument){return""+argument}function ToPropertyKey(argument){var key=ToPrimitive(argument,3);return IsSymbol(key)?key:ToString(key)}function IsArray(argument){return Array.isArray?Array.isArray(argument):argument instanceof Object?argument instanceof Array:"[object Array]"===Object.prototype.toString.call(argument)}function IsCallable(argument){return"function"==typeof argument}function IsConstructor(argument){return"function"==typeof argument}function IsPropertyKey(argument){switch(Type(argument)){case 3:case 4:return!0;default:return!1}}function GetMethod(V,P){var func=V[P];if(null!=func){if(!IsCallable(func))throw new TypeError;return func}}function GetIterator(obj){var method=GetMethod(obj,iteratorSymbol);if(!IsCallable(method))throw new TypeError;var iterator=method.call(obj);if(!IsObject(iterator))throw new TypeError;return iterator}function IteratorValue(iterResult){return iterResult.value}function IteratorStep(iterator){var result=iterator.next();return!result.done&&result}function IteratorClose(iterator){var f=iterator.return;f&&f.call(iterator)}function OrdinaryGetPrototypeOf(O){var proto=Object.getPrototypeOf(O);if("function"!=typeof O||O===functionPrototype)return proto;if(proto!==functionPrototype)return proto;var prototype=O.prototype,prototypeProto=prototype&&Object.getPrototypeOf(prototype);if(null==prototypeProto||prototypeProto===Object.prototype)return proto;var constructor=prototypeProto.constructor;return"function"!=typeof constructor||constructor===O?proto:constructor}function CreateMapPolyfill(){var cacheSentinel={},arraySentinel=[],MapIterator=function(){function MapIterator(keys,values,selector){this._index=0,this._keys=keys,this._values=values,this._selector=selector}return MapIterator.prototype["@@iterator"]=function(){return this},MapIterator.prototype[iteratorSymbol]=function(){return this},MapIterator.prototype.next=function(){var index=this._index;if(index>=0&&index<this._keys.length){var result=this._selector(this._keys[index],this._values[index]);return index+1>=this._keys.length?(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel):this._index++,{value:result,done:!1}}return{value:void 0,done:!0}},MapIterator.prototype.throw=function(error){throw this._index>=0&&(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel),error},MapIterator.prototype.return=function(value){return this._index>=0&&(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel),{value:value,done:!0}},MapIterator}();return function(){function Map(){this._keys=[],this._values=[],this._cacheKey=cacheSentinel,this._cacheIndex=-2}return Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Map.prototype.has=function(key){return this._find(key,!1)>=0},Map.prototype.get=function(key){var index=this._find(key,!1);return index>=0?this._values[index]:void 0},Map.prototype.set=function(key,value){var index=this._find(key,!0);return this._values[index]=value,this},Map.prototype.delete=function(key){var index=this._find(key,!1);if(index>=0){for(var size=this._keys.length,i=index+1;i<size;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,key===this._cacheKey&&(this._cacheKey=cacheSentinel,this._cacheIndex=-2),!0}return!1},Map.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=cacheSentinel,this._cacheIndex=-2},Map.prototype.keys=function(){return new MapIterator(this._keys,this._values,getKey)},Map.prototype.values=function(){return new MapIterator(this._keys,this._values,getValue)},Map.prototype.entries=function(){return new MapIterator(this._keys,this._values,getEntry)},Map.prototype["@@iterator"]=function(){return this.entries()},Map.prototype[iteratorSymbol]=function(){return this.entries()},Map.prototype._find=function(key,insert){return this._cacheKey!==key&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=key)),this._cacheIndex<0&&insert&&(this._cacheIndex=this._keys.length,this._keys.push(key),this._values.push(void 0)),this._cacheIndex},Map}();function getKey(key,_){return key}function getValue(_,value){return value}function getEntry(key,value){return[key,value]}}function CreateSetPolyfill(){return function(){function Set(){this._map=new _Map}return Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Set.prototype.has=function(value){return this._map.has(value)},Set.prototype.add=function(value){return this._map.set(value,value),this},Set.prototype.delete=function(value){return this._map.delete(value)},Set.prototype.clear=function(){this._map.clear()},Set.prototype.keys=function(){return this._map.keys()},Set.prototype.values=function(){return this._map.values()},Set.prototype.entries=function(){return this._map.entries()},Set.prototype["@@iterator"]=function(){return this.keys()},Set.prototype[iteratorSymbol]=function(){return this.keys()},Set}()}function CreateWeakMapPolyfill(){var UUID_SIZE=16,keys=HashMap.create(),rootKey=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}return WeakMap.prototype.has=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table&&HashMap.has(table,this._key)},WeakMap.prototype.get=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table?HashMap.get(table,this._key):void 0},WeakMap.prototype.set=function(target,value){return GetOrCreateWeakMapTable(target,!0)[this._key]=value,this},WeakMap.prototype.delete=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table&&delete table[this._key]},WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()},WeakMap}();function CreateUniqueKey(){var key;do{key="@@WeakMap@@"+CreateUUID()}while(HashMap.has(keys,key));return keys[key]=!0,key}function GetOrCreateWeakMapTable(target,create){if(!hasOwn.call(target,rootKey)){if(!create)return;Object.defineProperty(target,rootKey,{value:HashMap.create()})}return target[rootKey]}function FillRandomBytes(buffer,size){for(var i=0;i<size;++i)buffer[i]=255*Math.random()|0;return buffer}function GenRandomBytes(size){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(size)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(size)):FillRandomBytes(new Uint8Array(size),size):FillRandomBytes(new Array(size),size)}function CreateUUID(){var data=GenRandomBytes(UUID_SIZE);data[6]=79&data[6]|64,data[8]=191&data[8]|128;for(var result="",offset=0;offset<UUID_SIZE;++offset){var byte=data[offset];4!==offset&&6!==offset&&8!==offset||(result+="-"),byte<16&&(result+="0"),result+=byte.toString(16).toLowerCase()}return result}}function MakeDictionary(obj){return obj.__=void 0,delete obj.__,obj}exporter("decorate",decorate),exporter("metadata",metadata),exporter("defineMetadata",defineMetadata),exporter("hasMetadata",hasMetadata),exporter("hasOwnMetadata",hasOwnMetadata),exporter("getMetadata",getMetadata),exporter("getOwnMetadata",getOwnMetadata),exporter("getMetadataKeys",getMetadataKeys),exporter("getOwnMetadataKeys",getOwnMetadataKeys),exporter("deleteMetadata",deleteMetadata)}(exporter)}()}(Reflect||(Reflect={}))}).call(this,__webpack_require__(76),__webpack_require__(54))},function(module,exports){function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}module.exports=assert,assert.equal=function(l,r,msg){if(l!=r)throw new Error(msg||"Assertion failed: "+l+" != "+r)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return observable}));var observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ObjectUnsubscribedError}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),ObjectUnsubscribedError=function(_super){function ObjectUnsubscribedError(){var _this=_super.call(this,"object unsubscribed")||this;return _this.name="ObjectUnsubscribedError",Object.setPrototypeOf(_this,ObjectUnsubscribedError.prototype),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(ObjectUnsubscribedError,_super),ObjectUnsubscribedError}(Error)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return concat}));var _util_isScheduler__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),_of__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(118),_from__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39),_operators_concatAll__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(171);function concat(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return 1===observables.length||2===observables.length&&Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_0__.a)(observables[1])?Object(_from__WEBPACK_IMPORTED_MODULE_2__.a)(observables[0]):Object(_operators_concatAll__WEBPACK_IMPORTED_MODULE_3__.a)()(_of__WEBPACK_IMPORTED_MODULE_1__.a.apply(void 0,observables))}},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),Metadata=function(){function Metadata(key,value){this.key=key,this.value=value}return Metadata.prototype.toString=function(){return this.key===METADATA_KEY.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},Metadata}();exports.Metadata=Metadata},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return mergeMap}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_OuterSubscriber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),_map__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(28),_observable_from__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(39);function mergeMap(project,resultSelector,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"function"==typeof resultSelector?function(source){return source.pipe(mergeMap((function(a,i){return Object(_observable_from__WEBPACK_IMPORTED_MODULE_4__.a)(project(a,i)).pipe(Object(_map__WEBPACK_IMPORTED_MODULE_3__.a)((function(b,ii){return resultSelector(a,b,i,ii)})))}),concurrent))}:("number"==typeof resultSelector&&(concurrent=resultSelector),function(source){return source.lift(new MergeMapOperator(project,concurrent))})}var MergeMapOperator=function(){function MergeMapOperator(project,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.project=project,this.concurrent=concurrent}return MergeMapOperator.prototype.call=function(observer,source){return source.subscribe(new MergeMapSubscriber(observer,this.project,this.concurrent))},MergeMapOperator}(),MergeMapSubscriber=function(_super){function MergeMapSubscriber(destination,project,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY);var _this=_super.call(this,destination)||this;return _this.project=project,_this.concurrent=concurrent,_this.hasCompleted=!1,_this.buffer=[],_this.active=0,_this.index=0,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(MergeMapSubscriber,_super),MergeMapSubscriber.prototype._next=function(value){this.active<this.concurrent?this._tryNext(value):this.buffer.push(value)},MergeMapSubscriber.prototype._tryNext=function(value){var result,index=this.index++;try{result=this.project(value,index)}catch(err){return void this.destination.error(err)}this.active++,this._innerSub(result,value,index)},MergeMapSubscriber.prototype._innerSub=function(ish,value,index){this.add(Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_1__.a)(this,ish,value,index))},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},MergeMapSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_2__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ArgumentOutOfRangeError}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),ArgumentOutOfRangeError=function(_super){function ArgumentOutOfRangeError(){var _this=_super.call(this,"argument out of range")||this;return _this.name="ArgumentOutOfRangeError",Object.setPrototypeOf(_this,ArgumentOutOfRangeError.prototype),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(ArgumentOutOfRangeError,_super),ArgumentOutOfRangeError}(Error)},function(module,__webpack_exports__,__webpack_require__){"use strict";function isFunction(x){return"function"==typeof x}__webpack_require__.d(__webpack_exports__,"a",(function(){return isFunction}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var extendStatics,bundle_esm=__webpack_require__(27),JS=__webpack_require__(57),ConsoleLogger=__webpack_require__(84),constants=__webpack_require__(166),Amplify=__webpack_require__(40),paho_mqtt=__webpack_require__(323),uuid=__webpack_require__(30),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},logger=new ConsoleLogger.a("AbstractPubSubProvider"),AbstractPubSubProvider=function(){function AbstractPubSubProvider(options){void 0===options&&(options={}),this._config=options}return AbstractPubSubProvider.prototype.configure=function(config){return void 0===config&&(config={}),this._config=__assign(__assign({},config),this._config),logger.debug("configure "+this.getProviderName(),this._config),this.options},AbstractPubSubProvider.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(AbstractPubSubProvider.prototype,"options",{get:function(){return __assign({},this._config)},enumerable:!0,configurable:!0}),AbstractPubSubProvider}(),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),MqttOverWSProvider_assign=function(){return(MqttOverWSProvider_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},MqttOverWSProvider_logger=new ConsoleLogger.a("MqttOverWSProvider");var MESSAGE_TYPES,SUBSCRIPTION_STATUS,SOCKET_STATUS,ClientsQueue=function(){function ClientsQueue(){this.promises=new Map}return ClientsQueue.prototype.get=function(clientId,clientFactory){return __awaiter(this,void 0,void 0,(function(){var promise;return __generator(this,(function(_a){return(promise=this.promises.get(clientId))||(promise=clientFactory(clientId),this.promises.set(clientId,promise)),[2,promise]}))}))},Object.defineProperty(ClientsQueue.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),ClientsQueue.prototype.remove=function(clientId){this.promises.delete(clientId)},ClientsQueue}(),topicSymbol="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",MqttOverWSProvider_MqttOverWSProvider=function(_super){function MqttOverWSProvider(options){void 0===options&&(options={});var _this=_super.call(this,MqttOverWSProvider_assign(MqttOverWSProvider_assign({},options),{clientId:options.clientId||Object(uuid.v4)()}))||this;return _this._clientsQueue=new ClientsQueue,_this._topicObservers=new Map,_this._clientIdObservers=new Map,_this}return __extends(MqttOverWSProvider,_super),Object.defineProperty(MqttOverWSProvider.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(MqttOverWSProvider.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(MqttOverWSProvider.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(MqttOverWSProvider.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),MqttOverWSProvider.prototype.getTopicForValue=function(value){return"object"==typeof value&&value[topicSymbol]},MqttOverWSProvider.prototype.getProviderName=function(){return"MqttOverWSProvider"},MqttOverWSProvider.prototype.onDisconnect=function(_a){var _this=this,clientId=_a.clientId,errorCode=_a.errorCode,args=__rest(_a,["clientId","errorCode"]);if(0!==errorCode){MqttOverWSProvider_logger.warn(clientId,JSON.stringify(MqttOverWSProvider_assign({errorCode:errorCode},args),null,2));var topicsToDelete_1=[],clientIdObservers=this._clientIdObservers.get(clientId);if(!clientIdObservers)return;clientIdObservers.forEach((function(observer){observer.error("Disconnected, error code: "+errorCode),_this._topicObservers.forEach((function(observerForTopic,observerTopic){observerForTopic.delete(observer),0===observerForTopic.size&&topicsToDelete_1.push(observerTopic)}))})),this._clientIdObservers.delete(clientId),topicsToDelete_1.forEach((function(topic){_this._topicObservers.delete(topic)}))}},MqttOverWSProvider.prototype.newClient=function(_a){var url=_a.url,clientId=_a.clientId;return __awaiter(this,void 0,void 0,(function(){var client,_this=this;return __generator(this,(function(_b){switch(_b.label){case 0:return MqttOverWSProvider_logger.debug("Creating new MQTT client",clientId),(client=new paho_mqtt.Client(url,clientId)).onMessageArrived=function(_a){var topic=_a.destinationName,msg=_a.payloadString;_this._onMessage(topic,msg)},client.onConnectionLost=function(_a){var errorCode=_a.errorCode,args=__rest(_a,["errorCode"]);_this.onDisconnect(MqttOverWSProvider_assign({clientId:clientId,errorCode:errorCode},args))},[4,new Promise((function(resolve,reject){client.connect({useSSL:_this.isSSLEnabled,mqttVersion:3,onSuccess:function(){return resolve(client)},onFailure:reject})}))];case 1:return _b.sent(),[2,client]}}))}))},MqttOverWSProvider.prototype.connect=function(clientId,options){return void 0===options&&(options={}),__awaiter(this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.clientsQueue.get(clientId,(function(clientId){return _this.newClient(MqttOverWSProvider_assign(MqttOverWSProvider_assign({},options),{clientId:clientId}))}))];case 1:return[2,_a.sent()]}}))}))},MqttOverWSProvider.prototype.disconnect=function(clientId){return __awaiter(this,void 0,void 0,(function(){var client;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.clientsQueue.get(clientId,(function(){return null}))];case 1:return(client=_a.sent())&&client.isConnected()&&client.disconnect(),this.clientsQueue.remove(clientId),[2]}}))}))},MqttOverWSProvider.prototype.publish=function(topics,msg){return __awaiter(this,void 0,void 0,(function(){var targetTopics,message,url,client;return __generator(this,(function(_a){switch(_a.label){case 0:return targetTopics=[].concat(topics),message=JSON.stringify(msg),[4,this.endpoint];case 1:return url=_a.sent(),[4,this.connect(this.clientId,{url:url})];case 2:return client=_a.sent(),MqttOverWSProvider_logger.debug("Publishing to topic(s)",targetTopics.join(","),message),targetTopics.forEach((function(topic){return client.send(topic,message)})),[2]}}))}))},MqttOverWSProvider.prototype._onMessage=function(topic,msg){try{var matchedTopicObservers_1=[];this._topicObservers.forEach((function(observerForTopic,observerTopic){(function(filter,topic){for(var filterArray=filter.split("/"),length=filterArray.length,topicArray=topic.split("/"),i=0;i<length;++i){var left=filterArray[i],right=topicArray[i];if("#"===left)return topicArray.length>=length;if("+"!==left&&left!==right)return!1}return length===topicArray.length})(observerTopic,topic)&&matchedTopicObservers_1.push(observerForTopic)}));var parsedMessage_1=JSON.parse(msg);"object"==typeof parsedMessage_1&&(parsedMessage_1[topicSymbol]=topic),matchedTopicObservers_1.forEach((function(observersForTopic){observersForTopic.forEach((function(observer){return observer.next(parsedMessage_1)}))}))}catch(error){MqttOverWSProvider_logger.warn("Error handling message",error,msg)}},MqttOverWSProvider.prototype.subscribe=function(topics,options){var _this=this;void 0===options&&(options={});var targetTopics=[].concat(topics);return MqttOverWSProvider_logger.debug("Subscribing to topic(s)",targetTopics.join(",")),new bundle_esm.a((function(observer){var client;targetTopics.forEach((function(topic){var observersForTopic=_this._topicObservers.get(topic);observersForTopic||(observersForTopic=new Set,_this._topicObservers.set(topic,observersForTopic)),observersForTopic.add(observer)}));var _a=options.clientId,clientId=void 0===_a?_this.clientId:_a,observersForClientId=_this._clientIdObservers.get(clientId);return observersForClientId||(observersForClientId=new Set),observersForClientId.add(observer),_this._clientIdObservers.set(clientId,observersForClientId),__awaiter(_this,void 0,void 0,(function(){var _a,url,_b,e_1;return __generator(this,(function(_c){switch(_c.label){case 0:return void 0!==(_a=options.url)?[3,2]:[4,this.endpoint];case 1:return _b=_c.sent(),[3,3];case 2:_b=_a,_c.label=3;case 3:url=_b,_c.label=4;case 4:return _c.trys.push([4,6,,7]),[4,this.connect(clientId,{url:url})];case 5:return client=_c.sent(),targetTopics.forEach((function(topic){client.subscribe(topic)})),[3,7];case 6:return e_1=_c.sent(),observer.error(e_1),[3,7];case 7:return[2]}}))})),function(){return MqttOverWSProvider_logger.debug("Unsubscribing from topic(s)",targetTopics.join(",")),client&&(_this._clientIdObservers.get(clientId).delete(observer),0===_this._clientIdObservers.get(clientId).size&&(_this.disconnect(clientId),_this._clientIdObservers.delete(clientId)),targetTopics.forEach((function(topic){var observersForTopic=_this._topicObservers.get(topic)||new Set;observersForTopic.delete(observer),0===observersForTopic.size&&(_this._topicObservers.delete(topic),client.isConnected()&&client.unsubscribe(topic))}))),null}}))},MqttOverWSProvider}(AbstractPubSubProvider),AWSAppSyncProvider_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AWSAppSyncProvider_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AWSAppSyncProvider_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},AWSAppSyncProvider_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},AWSAppSyncProvider_logger=new ConsoleLogger.a("AWSAppSyncProvider"),AWSAppSyncProvider_AWSAppSyncProvider=function(_super){function AWSAppSyncProvider(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._topicClient=new Map,_this._topicAlias=new Map,_this}return AWSAppSyncProvider_extends(AWSAppSyncProvider,_super),Object.defineProperty(AWSAppSyncProvider.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),AWSAppSyncProvider.prototype.getProviderName=function(){return"AWSAppSyncProvider"},AWSAppSyncProvider.prototype.publish=function(topics,msg,options){return AWSAppSyncProvider_awaiter(this,void 0,void 0,(function(){return AWSAppSyncProvider_generator(this,(function(_a){throw new Error("Operation not supported")}))}))},AWSAppSyncProvider.prototype._cleanUp=function(clientId){var _this=this;Array.from(this._topicClient.entries()).filter((function(_a){return __read(_a,2)[1].clientId===clientId})).map((function(_a){return __read(_a,1)[0]})).forEach((function(t){return _this._cleanUpForTopic(t)}))},AWSAppSyncProvider.prototype._cleanUpForTopic=function(topic){this._topicClient.delete(topic),this._topicAlias.delete(topic)},AWSAppSyncProvider.prototype.onDisconnect=function(_a){var _this=this,clientId=_a.clientId,errorCode=_a.errorCode,args=AWSAppSyncProvider_rest(_a,["clientId","errorCode"]);0!==errorCode&&(Array.from(this._topicClient.entries()).filter((function(_a){return __read(_a,2)[1].clientId===clientId})).map((function(_a){return __read(_a,1)[0]})).forEach((function(topic){_this._topicObservers.has(topic)&&(_this._topicObservers.get(topic).forEach((function(obs){obs.closed||obs.error(args)})),_this._topicObservers.delete(topic))})),this._cleanUp(clientId))},AWSAppSyncProvider.prototype.disconnect=function(clientId){return AWSAppSyncProvider_awaiter(this,void 0,void 0,(function(){return AWSAppSyncProvider_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.clientsQueue.get(clientId,(function(){return null}))];case 1:return _a.sent(),[4,_super.prototype.disconnect.call(this,clientId)];case 2:return _a.sent(),this._cleanUp(clientId),[2]}}))}))},AWSAppSyncProvider.prototype.subscribe=function(topics,options){var _this=this;void 0===options&&(options={});var result=new bundle_esm.a((function(observer){var targetTopics=[].concat(topics);return AWSAppSyncProvider_logger.debug("Subscribing to topic(s)",targetTopics.join(",")),AWSAppSyncProvider_awaiter(_this,void 0,void 0,(function(){var _a,mqttConnections,newSubscriptions,newAliases,map,_this=this;return AWSAppSyncProvider_generator(this,(function(_b){switch(_b.label){case 0:return targetTopics.forEach((function(t){_this._topicObservers.has(t)||_this._topicObservers.set(t,new Set),_this._topicObservers.get(t).add(observer)})),_a=options.mqttConnections,mqttConnections=void 0===_a?[]:_a,newSubscriptions=options.newSubscriptions,newAliases=Object.entries(newSubscriptions).map((function(_a){var _b=__read(_a,2),alias=_b[0];return[_b[1].topic,alias]})),this._topicAlias=new Map(__spread(Array.from(this._topicAlias.entries()),newAliases)),map=Object.entries(targetTopics.reduce((function(acc,elem){var connectionInfoForTopic=mqttConnections.find((function(c){return c.topics.indexOf(elem)>-1}));if(connectionInfoForTopic){var clientId=connectionInfoForTopic.client,url=connectionInfoForTopic.url;acc[clientId]||(acc[clientId]={url:url,topics:new Set}),acc[clientId].topics.add(elem)}return acc}),{})),[4,Promise.all(map.map((function(_a){var _b=__read(_a,2),clientId=_b[0],_c=_b[1],url=_c.url,topics=_c.topics;return AWSAppSyncProvider_awaiter(_this,void 0,void 0,(function(){var client,err_1,_this=this;return AWSAppSyncProvider_generator(this,(function(_d){switch(_d.label){case 0:client=null,_d.label=1;case 1:return _d.trys.push([1,3,,4]),[4,this.connect(clientId,{clientId:clientId,url:url})];case 2:return client=_d.sent(),[3,4];case 3:return err_1=_d.sent(),observer.error({message:"Failed to connect",error:err_1}),observer.complete(),[2,void 0];case 4:return topics.forEach((function(topic){client.isConnected()&&(client.subscribe(topic),_this._topicClient.set(topic,client))})),[2,client]}}))}))})))];case 1:return _b.sent(),[2]}}))})),function(){AWSAppSyncProvider_logger.debug("Unsubscribing from topic(s)",targetTopics.join(",")),targetTopics.forEach((function(t){var client=_this._topicClient.get(t);client&&client.isConnected()&&(client.unsubscribe(t),_this._topicClient.delete(t),Array.from(_this._topicClient.values()).some((function(c){return c===client}))||_this.disconnect(client.clientId)),_this._topicObservers.delete(t)}))}}));return bundle_esm.a.from(result).map((function(value){var topic=_this.getTopicForValue(value),alias=_this._topicAlias.get(topic);return value.data=Object.entries(value.data).reduce((function(obj,_a){var _b=__read(_a,2),origKey=_b[0],val=_b[1];return obj[alias||origKey]=val,obj}),{}),value}))},AWSAppSyncProvider}(MqttOverWSProvider_MqttOverWSProvider),GraphQLError=__webpack_require__(150),url_url=__webpack_require__(33),buffer=__webpack_require__(11),Hub=__webpack_require__(186),lib_esm=__webpack_require__(7),Retry=__webpack_require__(620),Credentials=__webpack_require__(175),Signer=__webpack_require__(286),cache_lib_esm=__webpack_require__(43),auth_lib_esm=__webpack_require__(50),AWSAppSyncRealTimeProvider_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AWSAppSyncRealTimeProvider_assign=function(){return(AWSAppSyncRealTimeProvider_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},AWSAppSyncRealTimeProvider_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AWSAppSyncRealTimeProvider_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},AWSAppSyncRealTimeProvider_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},AWSAppSyncRealTimeProvider_logger=new ConsoleLogger.a("AWSAppSyncRealTimeProvider"),AMPLIFY_SYMBOL="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",NON_RETRYABLE_CODES=[400,401,403];!function(MESSAGE_TYPES){MESSAGE_TYPES.GQL_CONNECTION_INIT="connection_init",MESSAGE_TYPES.GQL_CONNECTION_ERROR="connection_error",MESSAGE_TYPES.GQL_CONNECTION_ACK="connection_ack",MESSAGE_TYPES.GQL_START="start",MESSAGE_TYPES.GQL_START_ACK="start_ack",MESSAGE_TYPES.GQL_DATA="data",MESSAGE_TYPES.GQL_CONNECTION_KEEP_ALIVE="ka",MESSAGE_TYPES.GQL_STOP="stop",MESSAGE_TYPES.GQL_COMPLETE="complete",MESSAGE_TYPES.GQL_ERROR="error"}(MESSAGE_TYPES||(MESSAGE_TYPES={})),function(SUBSCRIPTION_STATUS){SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS.PENDING=0]="PENDING",SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS.CONNECTED=1]="CONNECTED",SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS.FAILED=2]="FAILED"}(SUBSCRIPTION_STATUS||(SUBSCRIPTION_STATUS={})),function(SOCKET_STATUS){SOCKET_STATUS[SOCKET_STATUS.CLOSED=0]="CLOSED",SOCKET_STATUS[SOCKET_STATUS.READY=1]="READY",SOCKET_STATUS[SOCKET_STATUS.CONNECTING=2]="CONNECTING"}(SOCKET_STATUS||(SOCKET_STATUS={}));var CONTROL_MSG,AWS_APPSYNC_REALTIME_HEADERS={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},AWSAppSyncRealTimeProvider_AWSAppSyncRealTimeProvider=function(_super){function AWSAppSyncRealTimeProvider(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.socketStatus=SOCKET_STATUS.CLOSED,_this.keepAliveTimeout=3e5,_this.subscriptionObserverMap=new Map,_this.promiseArray=[],_this}return AWSAppSyncRealTimeProvider_extends(AWSAppSyncRealTimeProvider,_super),AWSAppSyncRealTimeProvider.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},AWSAppSyncRealTimeProvider.prototype.newClient=function(){throw new Error("Not used here")},AWSAppSyncRealTimeProvider.prototype.publish=function(_topics,_msg,_options){return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){return AWSAppSyncRealTimeProvider_generator(this,(function(_a){throw new Error("Operation not supported")}))}))},AWSAppSyncRealTimeProvider.prototype.subscribe=function(_topics,options){var _this=this,appSyncGraphqlEndpoint=options.appSyncGraphqlEndpoint;return new bundle_esm.a((function(observer){if(appSyncGraphqlEndpoint){var subscriptionId_1=Object(uuid.v4)();return _this._startSubscriptionWithAWSAppSyncRealTime({options:options,observer:observer,subscriptionId:subscriptionId_1}),function(){return AWSAppSyncRealTimeProvider_awaiter(_this,void 0,void 0,(function(){var subscriptionState,err_1;return AWSAppSyncRealTimeProvider_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(subscriptionId_1)];case 1:if(_a.sent(),!(subscriptionState=(this.subscriptionObserverMap.get(subscriptionId_1)||{}).subscriptionState))return[2];if(subscriptionState!==SUBSCRIPTION_STATUS.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(subscriptionId_1),[3,4];case 2:return err_1=_a.sent(),AWSAppSyncRealTimeProvider_logger.debug("Error while unsubscribing "+err_1),[3,4];case 3:return this._removeSubscriptionObserver(subscriptionId_1),[7];case 4:return[2]}}))}))}}observer.error({errors:[AWSAppSyncRealTimeProvider_assign({},new GraphQLError.a("Subscribe only available for AWS AppSync endpoint"))]}),observer.complete()}))},Object.defineProperty(AWSAppSyncRealTimeProvider.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),AWSAppSyncRealTimeProvider.prototype._startSubscriptionWithAWSAppSyncRealTime=function(_a){var options=_a.options,observer=_a.observer,subscriptionId=_a.subscriptionId;return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){var appSyncGraphqlEndpoint,authenticationType,query,variables,apiKey,region,_b,graphql_headers,_c,additionalHeaders,subscriptionState,data,dataString,headerObj,_d,_e,subscriptionMessage,stringToAWSRealTime,err_2,_f,message,subscriptionFailedCallback_1,_g,subscriptionFailedCallback,subscriptionReadyCallback,_h,_this=this;return AWSAppSyncRealTimeProvider_generator(this,(function(_j){switch(_j.label){case 0:return appSyncGraphqlEndpoint=options.appSyncGraphqlEndpoint,authenticationType=options.authenticationType,query=options.query,variables=options.variables,apiKey=options.apiKey,region=options.region,_b=options.graphql_headers,graphql_headers=void 0===_b?function(){return{}}:_b,_c=options.additionalHeaders,additionalHeaders=void 0===_c?{}:_c,subscriptionState=SUBSCRIPTION_STATUS.PENDING,data={query:query,variables:variables},this.subscriptionObserverMap.set(subscriptionId,{observer:observer,query:query,variables:variables,subscriptionState:subscriptionState,startAckTimeoutId:null}),dataString=JSON.stringify(data),_d=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:apiKey,appSyncGraphqlEndpoint:appSyncGraphqlEndpoint,authenticationType:authenticationType,payload:dataString,canonicalUri:"",region:region})];case 1:return _e=[AWSAppSyncRealTimeProvider_assign.apply(void 0,_d.concat([_j.sent()]))],[4,graphql_headers()];case 2:headerObj=AWSAppSyncRealTimeProvider_assign.apply(void 0,[AWSAppSyncRealTimeProvider_assign.apply(void 0,[AWSAppSyncRealTimeProvider_assign.apply(void 0,_e.concat([_j.sent()])),additionalHeaders]),(_h={},_h[constants.c]=lib_esm.d.userAgent,_h)]),subscriptionMessage={id:subscriptionId,payload:{data:dataString,extensions:{authorization:AWSAppSyncRealTimeProvider_assign({},headerObj)}},type:MESSAGE_TYPES.GQL_START},stringToAWSRealTime=JSON.stringify(subscriptionMessage),_j.label=3;case 3:return _j.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:apiKey,appSyncGraphqlEndpoint:appSyncGraphqlEndpoint,authenticationType:authenticationType,region:region})];case 4:return _j.sent(),[3,6];case 5:return err_2=_j.sent(),AWSAppSyncRealTimeProvider_logger.debug({err:err_2}),_f=err_2.message,message=void 0===_f?"":_f,observer.error({errors:[AWSAppSyncRealTimeProvider_assign({},new GraphQLError.a("Connection failed: "+message))]}),observer.complete(),"function"==typeof(subscriptionFailedCallback_1=(this.subscriptionObserverMap.get(subscriptionId)||{}).subscriptionFailedCallback)&&subscriptionFailedCallback_1(),[2];case 6:return _g=this.subscriptionObserverMap.get(subscriptionId),subscriptionFailedCallback=_g.subscriptionFailedCallback,subscriptionReadyCallback=_g.subscriptionReadyCallback,this.subscriptionObserverMap.set(subscriptionId,{observer:observer,subscriptionState:subscriptionState,variables:variables,query:query,subscriptionReadyCallback:subscriptionReadyCallback,subscriptionFailedCallback:subscriptionFailedCallback,startAckTimeoutId:setTimeout((function(){_this._timeoutStartSubscriptionAck.call(_this,subscriptionId)}),15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(stringToAWSRealTime),[2]}}))}))},AWSAppSyncRealTimeProvider.prototype._waitForSubscriptionToBeConnected=function(subscriptionId){return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){var _this=this;return AWSAppSyncRealTimeProvider_generator(this,(function(_a){return this.subscriptionObserverMap.get(subscriptionId).subscriptionState===SUBSCRIPTION_STATUS.PENDING?[2,new Promise((function(res,rej){var _a=_this.subscriptionObserverMap.get(subscriptionId),observer=_a.observer,subscriptionState=_a.subscriptionState,variables=_a.variables,query=_a.query;_this.subscriptionObserverMap.set(subscriptionId,{observer:observer,subscriptionState:subscriptionState,variables:variables,query:query,subscriptionReadyCallback:res,subscriptionFailedCallback:rej})}))]:[2]}))}))},AWSAppSyncRealTimeProvider.prototype._sendUnsubscriptionMessage=function(subscriptionId){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===SOCKET_STATUS.READY){var unsubscribeMessage={id:subscriptionId,type:MESSAGE_TYPES.GQL_STOP},stringToAWSRealTime=JSON.stringify(unsubscribeMessage);this.awsRealTimeSocket.send(stringToAWSRealTime)}}catch(err){AWSAppSyncRealTimeProvider_logger.debug({err:err})}},AWSAppSyncRealTimeProvider.prototype._removeSubscriptionObserver=function(subscriptionId){this.subscriptionObserverMap.delete(subscriptionId),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},AWSAppSyncRealTimeProvider.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{AWSAppSyncRealTimeProvider_logger.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var tempSocket=this.awsRealTimeSocket;tempSocket.onclose=void 0,tempSocket.onerror=void 0,tempSocket.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=SOCKET_STATUS.CLOSED}else this.socketStatus=SOCKET_STATUS.CLOSED},AWSAppSyncRealTimeProvider.prototype._handleIncomingSubscriptionMessage=function(message){AWSAppSyncRealTimeProvider_logger.debug("subscription message from AWS AppSync RealTime: "+message.data);var _a=JSON.parse(message.data),_b=_a.id,id=void 0===_b?"":_b,payload=_a.payload,type=_a.type,_c=this.subscriptionObserverMap.get(id)||{},_d=_c.observer,observer=void 0===_d?null:_d,_e=_c.query,query=void 0===_e?"":_e,_f=_c.variables,variables=void 0===_f?{}:_f,startAckTimeoutId=_c.startAckTimeoutId,subscriptionReadyCallback=_c.subscriptionReadyCallback,subscriptionFailedCallback=_c.subscriptionFailedCallback;if(AWSAppSyncRealTimeProvider_logger.debug({id:id,observer:observer,query:query,variables:variables}),type===MESSAGE_TYPES.GQL_DATA&&payload&&payload.data)observer?observer.next(payload):AWSAppSyncRealTimeProvider_logger.debug("observer not found for id: "+id);else if(type!==MESSAGE_TYPES.GQL_START_ACK){if(type===MESSAGE_TYPES.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,CONTROL_MSG.TIMEOUT_DISCONNECT),this.keepAliveTimeout));if(type===MESSAGE_TYPES.GQL_ERROR){subscriptionState=SUBSCRIPTION_STATUS.FAILED;this.subscriptionObserverMap.set(id,{observer:observer,query:query,variables:variables,startAckTimeoutId:startAckTimeoutId,subscriptionReadyCallback:subscriptionReadyCallback,subscriptionFailedCallback:subscriptionFailedCallback,subscriptionState:subscriptionState}),observer.error({errors:[AWSAppSyncRealTimeProvider_assign({},new GraphQLError.a("Connection failed: "+JSON.stringify(payload)))]}),clearTimeout(startAckTimeoutId),observer.complete(),"function"==typeof subscriptionFailedCallback&&subscriptionFailedCallback()}}else{AWSAppSyncRealTimeProvider_logger.debug("subscription ready for "+JSON.stringify({query:query,variables:variables})),"function"==typeof subscriptionReadyCallback&&subscriptionReadyCallback(),clearTimeout(startAckTimeoutId),function(event,data,message){Hub.a.dispatch("api",{event:event,data:data,message:message},"PubSub",AMPLIFY_SYMBOL)}(CONTROL_MSG.SUBSCRIPTION_ACK,{query:query,variables:variables},"Connection established for subscription");var subscriptionState=SUBSCRIPTION_STATUS.CONNECTED;this.subscriptionObserverMap.set(id,{observer:observer,query:query,variables:variables,startAckTimeoutId:null,subscriptionState:subscriptionState,subscriptionReadyCallback:subscriptionReadyCallback,subscriptionFailedCallback:subscriptionFailedCallback})}},AWSAppSyncRealTimeProvider.prototype._errorDisconnect=function(msg){AWSAppSyncRealTimeProvider_logger.debug("Disconnect error: "+msg),this.subscriptionObserverMap.forEach((function(_a){var observer=_a.observer;observer&&!observer.closed&&observer.error({errors:[AWSAppSyncRealTimeProvider_assign({},new GraphQLError.a(msg))]})})),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=SOCKET_STATUS.CLOSED},AWSAppSyncRealTimeProvider.prototype._timeoutStartSubscriptionAck=function(subscriptionId){var _a=this.subscriptionObserverMap.get(subscriptionId)||{},observer=_a.observer,query=_a.query,variables=_a.variables;observer&&(this.subscriptionObserverMap.set(subscriptionId,{observer:observer,query:query,variables:variables,subscriptionState:SUBSCRIPTION_STATUS.FAILED}),observer&&!observer.closed&&(observer.error({errors:[AWSAppSyncRealTimeProvider_assign({},new GraphQLError.a("Subscription timeout "+JSON.stringify({query:query,variables:variables})))]}),observer.complete()),AWSAppSyncRealTimeProvider_logger.debug("timeoutStartSubscription",JSON.stringify({query:query,variables:variables})))},AWSAppSyncRealTimeProvider.prototype._initializeWebSocketConnection=function(_a){var _this=this,appSyncGraphqlEndpoint=_a.appSyncGraphqlEndpoint,authenticationType=_a.authenticationType,apiKey=_a.apiKey,region=_a.region;if(this.socketStatus!==SOCKET_STATUS.READY)return new Promise((function(res,rej){return AWSAppSyncRealTimeProvider_awaiter(_this,void 0,void 0,(function(){var protocol,discoverableEndpoint,payloadString,headerString,_a,_b,headerQs,payloadQs,awsRealTimeUrl,err_3;return AWSAppSyncRealTimeProvider_generator(this,(function(_c){switch(_c.label){case 0:if(this.promiseArray.push({res:res,rej:rej}),this.socketStatus!==SOCKET_STATUS.CLOSED)return[3,5];_c.label=1;case 1:return _c.trys.push([1,4,,5]),this.socketStatus=SOCKET_STATUS.CONNECTING,protocol=this.isSSLEnabled?"wss://":"ws://",discoverableEndpoint=appSyncGraphqlEndpoint.replace("https://",protocol).replace("http://",protocol).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),payloadString="{}",_b=(_a=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:authenticationType,payload:payloadString,canonicalUri:"/connect",apiKey:apiKey,appSyncGraphqlEndpoint:appSyncGraphqlEndpoint,region:region})];case 2:return headerString=_b.apply(_a,[_c.sent()]),headerQs=buffer.Buffer.from(headerString).toString("base64"),payloadQs=buffer.Buffer.from(payloadString).toString("base64"),awsRealTimeUrl=discoverableEndpoint+"?header="+headerQs+"&payload="+payloadQs,[4,this._initializeRetryableHandshake({awsRealTimeUrl:awsRealTimeUrl})];case 3:return _c.sent(),this.promiseArray.forEach((function(_a){var res=_a.res;AWSAppSyncRealTimeProvider_logger.debug("Notifying connection successful"),res()})),this.socketStatus=SOCKET_STATUS.READY,this.promiseArray=[],[3,5];case 4:return err_3=_c.sent(),this.promiseArray.forEach((function(_a){return(0,_a.rej)(err_3)})),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=SOCKET_STATUS.CLOSED,[3,5];case 5:return[2]}}))}))}))},AWSAppSyncRealTimeProvider.prototype._initializeRetryableHandshake=function(_a){var awsRealTimeUrl=_a.awsRealTimeUrl;return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){return AWSAppSyncRealTimeProvider_generator(this,(function(_b){switch(_b.label){case 0:return AWSAppSyncRealTimeProvider_logger.debug("Initializaling retryable Handshake"),[4,Object(Retry.b)(this._initializeHandshake.bind(this),[{awsRealTimeUrl:awsRealTimeUrl}],5e3)];case 1:return _b.sent(),[2]}}))}))},AWSAppSyncRealTimeProvider.prototype._initializeHandshake=function(_a){var awsRealTimeUrl=_a.awsRealTimeUrl;return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){var err_4,errorType,errorCode,_this=this;return AWSAppSyncRealTimeProvider_generator(this,(function(_b){switch(_b.label){case 0:AWSAppSyncRealTimeProvider_logger.debug("Initializing handshake "+awsRealTimeUrl),_b.label=1;case 1:return _b.trys.push([1,4,,5]),[4,new Promise((function(res,rej){var newSocket=new WebSocket(awsRealTimeUrl,"graphql-ws");newSocket.onerror=function(){AWSAppSyncRealTimeProvider_logger.debug("WebSocket connection error")},newSocket.onclose=function(){rej(new Error("Connection handshake error"))},newSocket.onopen=function(){return _this.awsRealTimeSocket=newSocket,res()}}))];case 2:return _b.sent(),[4,new Promise((function(res,rej){var ackOk=!1;_this.awsRealTimeSocket.onerror=function(error){AWSAppSyncRealTimeProvider_logger.debug("WebSocket error "+JSON.stringify(error))},_this.awsRealTimeSocket.onclose=function(event){AWSAppSyncRealTimeProvider_logger.debug("WebSocket closed "+event.reason),rej(new Error(JSON.stringify(event)))},_this.awsRealTimeSocket.onmessage=function(message){AWSAppSyncRealTimeProvider_logger.debug("subscription message from AWS AppSyncRealTime: "+message.data+" ");var data=JSON.parse(message.data),type=data.type,_a=data.payload,_b=(void 0===_a?{}:_a).connectionTimeoutMs,connectionTimeoutMs=void 0===_b?3e5:_b;if(type===MESSAGE_TYPES.GQL_CONNECTION_ACK)return ackOk=!0,_this.keepAliveTimeout=connectionTimeoutMs,_this.awsRealTimeSocket.onmessage=_this._handleIncomingSubscriptionMessage.bind(_this),_this.awsRealTimeSocket.onerror=function(err){AWSAppSyncRealTimeProvider_logger.debug(err),_this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED)},_this.awsRealTimeSocket.onclose=function(event){AWSAppSyncRealTimeProvider_logger.debug("WebSocket closed "+event.reason),_this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED)},void res("Cool, connected to AWS AppSyncRealTime");if(type===MESSAGE_TYPES.GQL_CONNECTION_ERROR){var _c=data.payload,_d=(void 0===_c?{}:_c).errors,_f=AWSAppSyncRealTimeProvider_read(void 0===_d?[]:_d,1)[0],_g=void 0===_f?{}:_f,_h=_g.errorType,errorType=void 0===_h?"":_h,_j=_g.errorCode;rej({errorType:errorType,errorCode:void 0===_j?0:_j})}};var gqlInit={type:MESSAGE_TYPES.GQL_CONNECTION_INIT};_this.awsRealTimeSocket.send(JSON.stringify(gqlInit)),setTimeout(function(){ackOk||rej(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(_this),15e3)}))];case 3:return _b.sent(),[3,5];case 4:throw err_4=_b.sent(),errorType=err_4.errorType,errorCode=err_4.errorCode,NON_RETRYABLE_CODES.includes(errorCode)?new Retry.a(errorType):errorType?new Error(errorType):err_4;case 5:return[2]}}))}))},AWSAppSyncRealTimeProvider.prototype._awsRealTimeHeaderBasedAuth=function(_a){var authenticationType=_a.authenticationType,payload=_a.payload,canonicalUri=_a.canonicalUri,appSyncGraphqlEndpoint=_a.appSyncGraphqlEndpoint,apiKey=_a.apiKey,region=_a.region;return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){var headerHandler,handler,host;return AWSAppSyncRealTimeProvider_generator(this,(function(_b){switch(_b.label){case 0:return headerHandler={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(handler=headerHandler[authenticationType])?(AWSAppSyncRealTimeProvider_logger.debug("Authentication type "+authenticationType+" not supported"),[2,""]):(host=url_url.parse(appSyncGraphqlEndpoint).host,[4,handler({payload:payload,canonicalUri:canonicalUri,appSyncGraphqlEndpoint:appSyncGraphqlEndpoint,apiKey:apiKey,region:region,host:host})]);case 1:return[2,_b.sent()]}}))}))},AWSAppSyncRealTimeProvider.prototype._awsRealTimeCUPHeader=function(_a){var host=_a.host;return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){return AWSAppSyncRealTimeProvider_generator(this,(function(_b){switch(_b.label){case 0:return[4,auth_lib_esm.b.currentSession()];case 1:return[2,{Authorization:_b.sent().getAccessToken().getJwtToken(),host:host}]}}))}))},AWSAppSyncRealTimeProvider.prototype._awsRealTimeOPENIDHeader=function(_a){var host=_a.host;return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){var token,federatedInfo,currentUser;return AWSAppSyncRealTimeProvider_generator(this,(function(_b){switch(_b.label){case 0:return[4,cache_lib_esm.a.getItem("federatedInfo")];case 1:return(federatedInfo=_b.sent())?(token=federatedInfo.token,[3,4]):[3,2];case 2:return[4,auth_lib_esm.b.currentAuthenticatedUser()];case 3:(currentUser=_b.sent())&&(token=currentUser.token),_b.label=4;case 4:if(!token)throw new Error("No federated jwt");return[2,{Authorization:token,host:host}]}}))}))},AWSAppSyncRealTimeProvider.prototype._awsRealTimeApiKeyHeader=function(_a){var apiKey=_a.apiKey,host=_a.host;return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){var dt,dtStr;return AWSAppSyncRealTimeProvider_generator(this,(function(_b){return dt=new Date,dtStr=dt.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:host,"x-amz-date":dtStr,"x-api-key":apiKey}]}))}))},AWSAppSyncRealTimeProvider.prototype._awsRealTimeIAMHeader=function(_a){var payload=_a.payload,canonicalUri=_a.canonicalUri,appSyncGraphqlEndpoint=_a.appSyncGraphqlEndpoint,region=_a.region;return AWSAppSyncRealTimeProvider_awaiter(this,void 0,void 0,(function(){var endpointInfo,creds,request;return AWSAppSyncRealTimeProvider_generator(this,(function(_b){switch(_b.label){case 0:return endpointInfo={region:region,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!_b.sent())throw new Error("No credentials");return[4,Credentials.a.get().then((function(credentials){return{secret_key:credentials.secretAccessKey,access_key:credentials.accessKeyId,session_token:credentials.sessionToken}}))];case 2:return creds=_b.sent(),request={url:""+appSyncGraphqlEndpoint+canonicalUri,data:payload,method:"POST",headers:AWSAppSyncRealTimeProvider_assign({},AWS_APPSYNC_REALTIME_HEADERS)},[2,Signer.a.sign(request,creds,endpointInfo).headers]}}))}))},AWSAppSyncRealTimeProvider.prototype._ensureCredentials=function(){return Credentials.a.get().then((function(credentials){if(!credentials)return!1;var cred=Credentials.a.shear(credentials);return AWSAppSyncRealTimeProvider_logger.debug("set credentials for AWSAppSyncRealTimeProvider",cred),!0})).catch((function(err){return AWSAppSyncRealTimeProvider_logger.warn("ensure credentials error",err),!1}))},AWSAppSyncRealTimeProvider}(AbstractPubSubProvider),PubSub_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},PubSub_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},isNode=Object(JS.b)().isNode,PubSub_logger=new ConsoleLogger.a("PubSub"),PubSub=new(function(){function PubSubClass(options){this._options=options,PubSub_logger.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(PubSubClass.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new AWSAppSyncProvider_AWSAppSyncProvider(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(PubSubClass.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new AWSAppSyncRealTimeProvider_AWSAppSyncRealTimeProvider(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),PubSubClass.prototype.getModuleName=function(){return"PubSub"},PubSubClass.prototype.configure=function(options){var _this=this,opt=options?options.PubSub||options:{};return PubSub_logger.debug("configure PubSub",{opt:opt}),this._options=Object.assign({},this._options,opt),this._pluggables.map((function(pluggable){return pluggable.configure(_this._options)})),this._options},PubSubClass.prototype.addPluggable=function(pluggable){return PubSub_awaiter(this,void 0,void 0,(function(){return PubSub_generator(this,(function(_a){return pluggable&&"PubSub"===pluggable.getCategory()?(this._pluggables.push(pluggable),[2,pluggable.configure(this._options)]):[2]}))}))},PubSubClass.prototype.getProviderByName=function(providerName){return providerName===constants.a?this.awsAppSyncProvider:providerName===constants.b?this.awsAppSyncRealTimeProvider:this._pluggables.find((function(pluggable){return pluggable.getProviderName()===providerName}))},PubSubClass.prototype.getProviders=function(options){void 0===options&&(options={});var providerName=options.provider;if(!providerName)return this._pluggables;var provider=this.getProviderByName(providerName);if(!provider)throw new Error("Could not find provider named "+providerName);return[provider]},PubSubClass.prototype.publish=function(topics,msg,options){return PubSub_awaiter(this,void 0,void 0,(function(){return PubSub_generator(this,(function(_a){return[2,Promise.all(this.getProviders(options).map((function(provider){return provider.publish(topics,msg,options)})))]}))}))},PubSubClass.prototype.subscribe=function(topics,options){if(isNode&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");PubSub_logger.debug("subscribe options",options);var providers=this.getProviders(options);return new bundle_esm.a((function(observer){var subscriptions=providers.map((function(provider){return{provider:provider,observable:provider.subscribe(topics,options)}})).map((function(_a){var provider=_a.provider;return _a.observable.subscribe({start:console.error,next:function(value){return observer.next({provider:provider,value:value})},error:function(error){return observer.error({provider:provider,error:error})}})}));return function(){return subscriptions.forEach((function(subscription){return subscription.unsubscribe()}))}}))},PubSubClass}())(null);Amplify.a.register(PubSub),__webpack_require__.d(__webpack_exports__,"a",(function(){return CONTROL_MSG})),__webpack_require__.d(__webpack_exports__,"b",(function(){return PubSub})),function(CONTROL_MSG){CONTROL_MSG.CONNECTION_CLOSED="Connection closed",CONTROL_MSG.TIMEOUT_DISCONNECT="Timeout disconnect",CONTROL_MSG.SUBSCRIPTION_ACK="Subscription ack"}(CONTROL_MSG||(CONTROL_MSG={}));__webpack_exports__.c=PubSub},function(module,__webpack_exports__,__webpack_require__){"use strict";var GRAPHQL_AUTH_MODE;__webpack_require__.d(__webpack_exports__,"a",(function(){return GRAPHQL_AUTH_MODE})),function(GRAPHQL_AUTH_MODE){GRAPHQL_AUTH_MODE.API_KEY="API_KEY",GRAPHQL_AUTH_MODE.AWS_IAM="AWS_IAM",GRAPHQL_AUTH_MODE.OPENID_CONNECT="OPENID_CONNECT",GRAPHQL_AUTH_MODE.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS"}(GRAPHQL_AUTH_MODE||(GRAPHQL_AUTH_MODE={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ConsoleLogger}));var __read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},LOG_LEVELS={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},ConsoleLogger=function(){function ConsoleLogger(name,level){void 0===level&&(level="WARN"),this.name=name,this.level=level}return ConsoleLogger.prototype._padding=function(n){return n<10?"0"+n:""+n},ConsoleLogger.prototype._ts=function(){var dt=new Date;return[this._padding(dt.getMinutes()),this._padding(dt.getSeconds())].join(":")+"."+dt.getMilliseconds()},ConsoleLogger.prototype._log=function(type){for(var msg=[],_i=1;_i<arguments.length;_i++)msg[_i-1]=arguments[_i];var logger_level_name=this.level;ConsoleLogger.LOG_LEVEL&&(logger_level_name=ConsoleLogger.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(logger_level_name=window.LOG_LEVEL);var logger_level=LOG_LEVELS[logger_level_name],type_level=LOG_LEVELS[type];if(type_level>=logger_level){var log=console.log.bind(console);"ERROR"===type&&console.error&&(log=console.error.bind(console)),"WARN"===type&&console.warn&&(log=console.warn.bind(console));var prefix="["+type+"] "+this._ts()+" "+this.name;if(1===msg.length&&"string"==typeof msg[0])log(prefix+" - "+msg[0]);else if(1===msg.length)log(prefix,msg[0]);else if("string"==typeof msg[0]){var obj=msg.slice(1);1===obj.length&&(obj=obj[0]),log(prefix+" - "+msg[0],obj)}else log(prefix,msg)}},ConsoleLogger.prototype.log=function(){for(var msg=[],_i=0;_i<arguments.length;_i++)msg[_i]=arguments[_i];this._log.apply(this,__spread(["INFO"],msg))},ConsoleLogger.prototype.info=function(){for(var msg=[],_i=0;_i<arguments.length;_i++)msg[_i]=arguments[_i];this._log.apply(this,__spread(["INFO"],msg))},ConsoleLogger.prototype.warn=function(){for(var msg=[],_i=0;_i<arguments.length;_i++)msg[_i]=arguments[_i];this._log.apply(this,__spread(["WARN"],msg))},ConsoleLogger.prototype.error=function(){for(var msg=[],_i=0;_i<arguments.length;_i++)msg[_i]=arguments[_i];this._log.apply(this,__spread(["ERROR"],msg))},ConsoleLogger.prototype.debug=function(){for(var msg=[],_i=0;_i<arguments.length;_i++)msg[_i]=arguments[_i];this._log.apply(this,__spread(["DEBUG"],msg))},ConsoleLogger.prototype.verbose=function(){for(var msg=[],_i=0;_i<arguments.length;_i++)msg[_i]=arguments[_i];this._log.apply(this,__spread(["VERBOSE"],msg))},ConsoleLogger.LOG_LEVEL=null,ConsoleLogger}()},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(72),inherits=__webpack_require__(15);function isSurrogatePair(msg,i){return 55296==(64512&msg.charCodeAt(i))&&(!(i<0||i+1>=msg.length)&&56320==(64512&msg.charCodeAt(i+1)))}function htonl(w){return(w>>>24|w>>>8&65280|w<<8&16711680|(255&w)<<24)>>>0}function zero2(word){return 1===word.length?"0"+word:word}function zero8(word){return 7===word.length?"0"+word:6===word.length?"00"+word:5===word.length?"000"+word:4===word.length?"0000"+word:3===word.length?"00000"+word:2===word.length?"000000"+word:1===word.length?"0000000"+word:word}exports.inherits=inherits,exports.toArray=function(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if("string"==typeof msg)if(enc){if("hex"===enc)for((msg=msg.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(msg="0"+msg),i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}else for(var p=0,i=0;i<msg.length;i++){var c=msg.charCodeAt(i);c<128?res[p++]=c:c<2048?(res[p++]=c>>6|192,res[p++]=63&c|128):isSurrogatePair(msg,i)?(c=65536+((1023&c)<<10)+(1023&msg.charCodeAt(++i)),res[p++]=c>>18|240,res[p++]=c>>12&63|128,res[p++]=c>>6&63|128,res[p++]=63&c|128):(res[p++]=c>>12|224,res[p++]=c>>6&63|128,res[p++]=63&c|128)}else for(i=0;i<msg.length;i++)res[i]=0|msg[i];return res},exports.toHex=function(msg){for(var res="",i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res},exports.htonl=htonl,exports.toHex32=function(msg,endian){for(var res="",i=0;i<msg.length;i++){var w=msg[i];"little"===endian&&(w=htonl(w)),res+=zero8(w.toString(16))}return res},exports.zero2=zero2,exports.zero8=zero8,exports.join32=function(msg,start,end,endian){var len=end-start;assert(len%4==0);for(var res=new Array(len/4),i=0,k=start;i<res.length;i++,k+=4){var w;w="big"===endian?msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3]:msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k],res[i]=w>>>0}return res},exports.split32=function(msg,endian){for(var res=new Array(4*msg.length),i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];"big"===endian?(res[k]=m>>>24,res[k+1]=m>>>16&255,res[k+2]=m>>>8&255,res[k+3]=255&m):(res[k+3]=m>>>24,res[k+2]=m>>>16&255,res[k+1]=m>>>8&255,res[k]=255&m)}return res},exports.rotr32=function(w,b){return w>>>b|w<<32-b},exports.rotl32=function(w,b){return w<<b|w>>>32-b},exports.sum32=function(a,b){return a+b>>>0},exports.sum32_3=function(a,b,c){return a+b+c>>>0},exports.sum32_4=function(a,b,c,d){return a+b+c+d>>>0},exports.sum32_5=function(a,b,c,d,e){return a+b+c+d+e>>>0},exports.sum64=function(buf,pos,ah,al){var bh=buf[pos],lo=al+buf[pos+1]>>>0,hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0,buf[pos+1]=lo},exports.sum64_hi=function(ah,al,bh,bl){return(al+bl>>>0<al?1:0)+ah+bh>>>0},exports.sum64_lo=function(ah,al,bh,bl){return al+bl>>>0},exports.sum64_4_hi=function(ah,al,bh,bl,ch,cl,dh,dl){var carry=0,lo=al;return carry+=(lo=lo+bl>>>0)<al?1:0,carry+=(lo=lo+cl>>>0)<cl?1:0,ah+bh+ch+dh+(carry+=(lo=lo+dl>>>0)<dl?1:0)>>>0},exports.sum64_4_lo=function(ah,al,bh,bl,ch,cl,dh,dl){return al+bl+cl+dl>>>0},exports.sum64_5_hi=function(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0,lo=al;return carry+=(lo=lo+bl>>>0)<al?1:0,carry+=(lo=lo+cl>>>0)<cl?1:0,carry+=(lo=lo+dl>>>0)<dl?1:0,ah+bh+ch+dh+eh+(carry+=(lo=lo+el>>>0)<el?1:0)>>>0},exports.sum64_5_lo=function(ah,al,bh,bl,ch,cl,dh,dl,eh,el){return al+bl+cl+dl+el>>>0},exports.rotr64_hi=function(ah,al,num){return(al<<32-num|ah>>>num)>>>0},exports.rotr64_lo=function(ah,al,num){return(ah<<32-num|al>>>num)>>>0},exports.shr64_hi=function(ah,al,num){return ah>>>num},exports.shr64_lo=function(ah,al,num){return(ah<<32-num|al>>>num)>>>0}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var tslib_es6=__webpack_require__(0),tryCatch=__webpack_require__(29),errorObject=__webpack_require__(13),OuterSubscriber=__webpack_require__(10),subscribeToResult=__webpack_require__(9);function audit(durationSelector){return function(source){return source.lift(new AuditOperator(durationSelector))}}var AuditOperator=function(){function AuditOperator(durationSelector){this.durationSelector=durationSelector}return AuditOperator.prototype.call=function(subscriber,source){return source.subscribe(new audit_AuditSubscriber(subscriber,this.durationSelector))},AuditOperator}(),audit_AuditSubscriber=function(_super){function AuditSubscriber(destination,durationSelector){var _this=_super.call(this,destination)||this;return _this.durationSelector=durationSelector,_this.hasValue=!1,_this}return tslib_es6.__extends(AuditSubscriber,_super),AuditSubscriber.prototype._next=function(value){if(this.value=value,this.hasValue=!0,!this.throttled){var duration=Object(tryCatch.a)(this.durationSelector)(value);if(duration===errorObject.a)this.destination.error(errorObject.a.e);else{var innerSubscription=Object(subscribeToResult.a)(this,duration);!innerSubscription||innerSubscription.closed?this.clearThrottle():this.add(this.throttled=innerSubscription)}}},AuditSubscriber.prototype.clearThrottle=function(){var value=this.value,hasValue=this.hasValue,throttled=this.throttled;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe()),hasValue&&(this.value=null,this.hasValue=!1,this.destination.next(value))},AuditSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(OuterSubscriber.a),scheduler_async=__webpack_require__(24),timer=__webpack_require__(174);function auditTime(duration,scheduler){return void 0===scheduler&&(scheduler=scheduler_async.a),audit((function(){return Object(timer.a)(duration,scheduler)}))}function buffer_buffer(closingNotifier){return function(source){return source.lift(new BufferOperator(closingNotifier))}}var BufferOperator=function(){function BufferOperator(closingNotifier){this.closingNotifier=closingNotifier}return BufferOperator.prototype.call=function(subscriber,source){return source.subscribe(new buffer_BufferSubscriber(subscriber,this.closingNotifier))},BufferOperator}(),buffer_BufferSubscriber=function(_super){function BufferSubscriber(destination,closingNotifier){var _this=_super.call(this,destination)||this;return _this.buffer=[],_this.add(Object(subscribeToResult.a)(_this,closingNotifier)),_this}return tslib_es6.__extends(BufferSubscriber,_super),BufferSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var buffer=this.buffer;this.buffer=[],this.destination.next(buffer)},BufferSubscriber}(OuterSubscriber.a),Subscriber=__webpack_require__(4);function bufferCount(bufferSize,startBufferEvery){return void 0===startBufferEvery&&(startBufferEvery=null),function(source){return source.lift(new BufferCountOperator(bufferSize,startBufferEvery))}}var BufferCountOperator=function(){function BufferCountOperator(bufferSize,startBufferEvery){this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery,this.subscriberClass=startBufferEvery&&bufferSize!==startBufferEvery?bufferCount_BufferSkipCountSubscriber:bufferCount_BufferCountSubscriber}return BufferCountOperator.prototype.call=function(subscriber,source){return source.subscribe(new this.subscriberClass(subscriber,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),bufferCount_BufferCountSubscriber=function(_super){function BufferCountSubscriber(destination,bufferSize){var _this=_super.call(this,destination)||this;return _this.bufferSize=bufferSize,_this.buffer=[],_this}return tslib_es6.__extends(BufferCountSubscriber,_super),BufferCountSubscriber.prototype._next=function(value){var buffer=this.buffer;buffer.push(value),buffer.length==this.bufferSize&&(this.destination.next(buffer),this.buffer=[])},BufferCountSubscriber.prototype._complete=function(){var buffer=this.buffer;buffer.length>0&&this.destination.next(buffer),_super.prototype._complete.call(this)},BufferCountSubscriber}(Subscriber.a),bufferCount_BufferSkipCountSubscriber=function(_super){function BufferSkipCountSubscriber(destination,bufferSize,startBufferEvery){var _this=_super.call(this,destination)||this;return _this.bufferSize=bufferSize,_this.startBufferEvery=startBufferEvery,_this.buffers=[],_this.count=0,_this}return tslib_es6.__extends(BufferSkipCountSubscriber,_super),BufferSkipCountSubscriber.prototype._next=function(value){var bufferSize=this.bufferSize,startBufferEvery=this.startBufferEvery,buffers=this.buffers,count=this.count;this.count++,count%startBufferEvery==0&&buffers.push([]);for(var i=buffers.length;i--;){var buffer=buffers[i];buffer.push(value),buffer.length===bufferSize&&(buffers.splice(i,1),this.destination.next(buffer))}},BufferSkipCountSubscriber.prototype._complete=function(){for(var buffers=this.buffers,destination=this.destination;buffers.length>0;){var buffer=buffers.shift();buffer.length>0&&destination.next(buffer)}_super.prototype._complete.call(this)},BufferSkipCountSubscriber}(Subscriber.a),isScheduler=__webpack_require__(26);function bufferTime(bufferTimeSpan){var length=arguments.length,scheduler=scheduler_async.a;Object(isScheduler.a)(arguments[arguments.length-1])&&(scheduler=arguments[arguments.length-1],length--);var bufferCreationInterval=null;length>=2&&(bufferCreationInterval=arguments[1]);var maxBufferSize=Number.POSITIVE_INFINITY;return length>=3&&(maxBufferSize=arguments[2]),function(source){return source.lift(new BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler))}}var BufferTimeOperator=function(){function BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler){this.bufferTimeSpan=bufferTimeSpan,this.bufferCreationInterval=bufferCreationInterval,this.maxBufferSize=maxBufferSize,this.scheduler=scheduler}return BufferTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new bufferTime_BufferTimeSubscriber(subscriber,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},BufferTimeOperator}(),Context=function(){return function(){this.buffer=[]}}(),bufferTime_BufferTimeSubscriber=function(_super){function BufferTimeSubscriber(destination,bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler){var _this=_super.call(this,destination)||this;_this.bufferTimeSpan=bufferTimeSpan,_this.bufferCreationInterval=bufferCreationInterval,_this.maxBufferSize=maxBufferSize,_this.scheduler=scheduler,_this.contexts=[];var context=_this.openContext();if(_this.timespanOnly=null==bufferCreationInterval||bufferCreationInterval<0,_this.timespanOnly){var timeSpanOnlyState={subscriber:_this,context:context,bufferTimeSpan:bufferTimeSpan};_this.add(context.closeAction=scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,timeSpanOnlyState))}else{var closeState={subscriber:_this,context:context},creationState={bufferTimeSpan:bufferTimeSpan,bufferCreationInterval:bufferCreationInterval,subscriber:_this,scheduler:scheduler};_this.add(context.closeAction=scheduler.schedule(dispatchBufferClose,bufferTimeSpan,closeState)),_this.add(scheduler.schedule(dispatchBufferCreation,bufferCreationInterval,creationState))}return _this}return tslib_es6.__extends(BufferTimeSubscriber,_super),BufferTimeSubscriber.prototype._next=function(value){for(var filledBufferContext,contexts=this.contexts,len=contexts.length,i=0;i<len;i++){var context_1=contexts[i],buffer=context_1.buffer;buffer.push(value),buffer.length==this.maxBufferSize&&(filledBufferContext=context_1)}filledBufferContext&&this.onBufferFull(filledBufferContext)},BufferTimeSubscriber.prototype._error=function(err){this.contexts.length=0,_super.prototype._error.call(this,err)},BufferTimeSubscriber.prototype._complete=function(){for(var contexts=this.contexts,destination=this.destination;contexts.length>0;){var context_2=contexts.shift();destination.next(context_2.buffer)}_super.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.contexts=null},BufferTimeSubscriber.prototype.onBufferFull=function(context){this.closeContext(context);var closeAction=context.closeAction;if(closeAction.unsubscribe(),this.remove(closeAction),!this.closed&&this.timespanOnly){context=this.openContext();var bufferTimeSpan=this.bufferTimeSpan,timeSpanOnlyState={subscriber:this,context:context,bufferTimeSpan:bufferTimeSpan};this.add(context.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,timeSpanOnlyState))}},BufferTimeSubscriber.prototype.openContext=function(){var context=new Context;return this.contexts.push(context),context},BufferTimeSubscriber.prototype.closeContext=function(context){this.destination.next(context.buffer);var contexts=this.contexts;(contexts?contexts.indexOf(context):-1)>=0&&contexts.splice(contexts.indexOf(context),1)},BufferTimeSubscriber}(Subscriber.a);function dispatchBufferTimeSpanOnly(state){var subscriber=state.subscriber,prevContext=state.context;prevContext&&subscriber.closeContext(prevContext),subscriber.closed||(state.context=subscriber.openContext(),state.context.closeAction=this.schedule(state,state.bufferTimeSpan))}function dispatchBufferCreation(state){var bufferCreationInterval=state.bufferCreationInterval,bufferTimeSpan=state.bufferTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,context=subscriber.openContext();subscriber.closed||(subscriber.add(context.closeAction=scheduler.schedule(dispatchBufferClose,bufferTimeSpan,{subscriber:subscriber,context:context})),this.schedule(state,bufferCreationInterval))}function dispatchBufferClose(arg){var subscriber=arg.subscriber,context=arg.context;subscriber.closeContext(context)}var Subscription=__webpack_require__(12);function bufferToggle(openings,closingSelector){return function(source){return source.lift(new BufferToggleOperator(openings,closingSelector))}}var BufferToggleOperator=function(){function BufferToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return BufferToggleOperator.prototype.call=function(subscriber,source){return source.subscribe(new bufferToggle_BufferToggleSubscriber(subscriber,this.openings,this.closingSelector))},BufferToggleOperator}(),bufferToggle_BufferToggleSubscriber=function(_super){function BufferToggleSubscriber(destination,openings,closingSelector){var _this=_super.call(this,destination)||this;return _this.openings=openings,_this.closingSelector=closingSelector,_this.contexts=[],_this.add(Object(subscribeToResult.a)(_this,openings)),_this}return tslib_es6.__extends(BufferToggleSubscriber,_super),BufferToggleSubscriber.prototype._next=function(value){for(var contexts=this.contexts,len=contexts.length,i=0;i<len;i++)contexts[i].buffer.push(value)},BufferToggleSubscriber.prototype._error=function(err){for(var contexts=this.contexts;contexts.length>0;){var context_1=contexts.shift();context_1.subscription.unsubscribe(),context_1.buffer=null,context_1.subscription=null}this.contexts=null,_super.prototype._error.call(this,err)},BufferToggleSubscriber.prototype._complete=function(){for(var contexts=this.contexts;contexts.length>0;){var context_2=contexts.shift();this.destination.next(context_2.buffer),context_2.subscription.unsubscribe(),context_2.buffer=null,context_2.subscription=null}this.contexts=null,_super.prototype._complete.call(this)},BufferToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){outerValue?this.closeBuffer(outerValue):this.openBuffer(innerValue)},BufferToggleSubscriber.prototype.notifyComplete=function(innerSub){this.closeBuffer(innerSub.context)},BufferToggleSubscriber.prototype.openBuffer=function(value){try{var closingNotifier=this.closingSelector.call(this,value);closingNotifier&&this.trySubscribe(closingNotifier)}catch(err){this._error(err)}},BufferToggleSubscriber.prototype.closeBuffer=function(context){var contexts=this.contexts;if(contexts&&context){var buffer=context.buffer,subscription=context.subscription;this.destination.next(buffer),contexts.splice(contexts.indexOf(context),1),this.remove(subscription),subscription.unsubscribe()}},BufferToggleSubscriber.prototype.trySubscribe=function(closingNotifier){var contexts=this.contexts,subscription=new Subscription.a,context={buffer:[],subscription:subscription};contexts.push(context);var innerSubscription=Object(subscribeToResult.a)(this,closingNotifier,context);!innerSubscription||innerSubscription.closed?this.closeBuffer(context):(innerSubscription.context=context,this.add(innerSubscription),subscription.add(innerSubscription))},BufferToggleSubscriber}(OuterSubscriber.a);function bufferWhen(closingSelector){return function(source){return source.lift(new BufferWhenOperator(closingSelector))}}var BufferWhenOperator=function(){function BufferWhenOperator(closingSelector){this.closingSelector=closingSelector}return BufferWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new bufferWhen_BufferWhenSubscriber(subscriber,this.closingSelector))},BufferWhenOperator}(),bufferWhen_BufferWhenSubscriber=function(_super){function BufferWhenSubscriber(destination,closingSelector){var _this=_super.call(this,destination)||this;return _this.closingSelector=closingSelector,_this.subscribing=!1,_this.openBuffer(),_this}return tslib_es6.__extends(BufferWhenSubscriber,_super),BufferWhenSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferWhenSubscriber.prototype._complete=function(){var buffer=this.buffer;buffer&&this.destination.next(buffer),_super.prototype._complete.call(this)},BufferWhenSubscriber.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},BufferWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openBuffer()},BufferWhenSubscriber.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},BufferWhenSubscriber.prototype.openBuffer=function(){var closingSubscription=this.closingSubscription;closingSubscription&&(this.remove(closingSubscription),closingSubscription.unsubscribe());var buffer=this.buffer;this.buffer&&this.destination.next(buffer),this.buffer=[];var closingNotifier=Object(tryCatch.a)(this.closingSelector)();closingNotifier===errorObject.a?this.error(errorObject.a.e):(closingSubscription=new Subscription.a,this.closingSubscription=closingSubscription,this.add(closingSubscription),this.subscribing=!0,closingSubscription.add(Object(subscribeToResult.a)(this,closingNotifier)),this.subscribing=!1)},BufferWhenSubscriber}(OuterSubscriber.a);function catchError(selector){return function(source){var operator=new CatchOperator(selector),caught=source.lift(operator);return operator.caught=caught}}var CatchOperator=function(){function CatchOperator(selector){this.selector=selector}return CatchOperator.prototype.call=function(subscriber,source){return source.subscribe(new catchError_CatchSubscriber(subscriber,this.selector,this.caught))},CatchOperator}(),catchError_CatchSubscriber=function(_super){function CatchSubscriber(destination,selector,caught){var _this=_super.call(this,destination)||this;return _this.selector=selector,_this.caught=caught,_this}return tslib_es6.__extends(CatchSubscriber,_super),CatchSubscriber.prototype.error=function(err){if(!this.isStopped){var result=void 0;try{result=this.selector(err,this.caught)}catch(err2){return void _super.prototype.error.call(this,err2)}this._unsubscribeAndRecycle(),this.add(Object(subscribeToResult.a)(this,result))}},CatchSubscriber}(OuterSubscriber.a),combineLatest=__webpack_require__(120);function combineAll(project){return function(source){return source.lift(new combineLatest.a(project))}}var isArray=__webpack_require__(25),from=__webpack_require__(39);function combineLatest_combineLatest(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];var project=null;return"function"==typeof observables[observables.length-1]&&(project=observables.pop()),1===observables.length&&Object(isArray.a)(observables[0])&&(observables=observables[0].slice()),function(source){return source.lift.call(Object(from.a)([source].concat(observables)),new combineLatest.a(project))}}var concat=__webpack_require__(75);function concat_concat(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return function(source){return source.lift.call(concat.a.apply(void 0,[source].concat(observables)))}}var concatAll=__webpack_require__(171),mergeMap=__webpack_require__(79);function concatMap(project,resultSelector){return Object(mergeMap.a)(project,resultSelector,1)}function concatMapTo(innerObservable,resultSelector){return concatMap((function(){return innerObservable}),resultSelector)}function count_count(predicate){return function(source){return source.lift(new CountOperator(predicate,source))}}var CountOperator=function(){function CountOperator(predicate,source){this.predicate=predicate,this.source=source}return CountOperator.prototype.call=function(subscriber,source){return source.subscribe(new count_CountSubscriber(subscriber,this.predicate,this.source))},CountOperator}(),count_CountSubscriber=function(_super){function CountSubscriber(destination,predicate,source){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.source=source,_this.count=0,_this.index=0,_this}return tslib_es6.__extends(CountSubscriber,_super),CountSubscriber.prototype._next=function(value){this.predicate?this._tryPredicate(value):this.count++},CountSubscriber.prototype._tryPredicate=function(value){var result;try{result=this.predicate(value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result&&this.count++},CountSubscriber.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},CountSubscriber}(Subscriber.a);function debounce(durationSelector){return function(source){return source.lift(new DebounceOperator(durationSelector))}}var DebounceOperator=function(){function DebounceOperator(durationSelector){this.durationSelector=durationSelector}return DebounceOperator.prototype.call=function(subscriber,source){return source.subscribe(new debounce_DebounceSubscriber(subscriber,this.durationSelector))},DebounceOperator}(),debounce_DebounceSubscriber=function(_super){function DebounceSubscriber(destination,durationSelector){var _this=_super.call(this,destination)||this;return _this.durationSelector=durationSelector,_this.hasValue=!1,_this.durationSubscription=null,_this}return tslib_es6.__extends(DebounceSubscriber,_super),DebounceSubscriber.prototype._next=function(value){try{var result=this.durationSelector.call(this,value);result&&this._tryNext(value,result)}catch(err){this.destination.error(err)}},DebounceSubscriber.prototype._complete=function(){this.emitValue(),this.destination.complete()},DebounceSubscriber.prototype._tryNext=function(value,duration){var subscription=this.durationSubscription;this.value=value,this.hasValue=!0,subscription&&(subscription.unsubscribe(),this.remove(subscription)),(subscription=Object(subscribeToResult.a)(this,duration))&&!subscription.closed&&this.add(this.durationSubscription=subscription)},DebounceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.emitValue()},DebounceSubscriber.prototype.notifyComplete=function(){this.emitValue()},DebounceSubscriber.prototype.emitValue=function(){if(this.hasValue){var value=this.value,subscription=this.durationSubscription;subscription&&(this.durationSubscription=null,subscription.unsubscribe(),this.remove(subscription)),this.value=null,this.hasValue=!1,_super.prototype._next.call(this,value)}},DebounceSubscriber}(OuterSubscriber.a);function debounceTime(dueTime,scheduler){return void 0===scheduler&&(scheduler=scheduler_async.a),function(source){return source.lift(new DebounceTimeOperator(dueTime,scheduler))}}var DebounceTimeOperator=function(){function DebounceTimeOperator(dueTime,scheduler){this.dueTime=dueTime,this.scheduler=scheduler}return DebounceTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new debounceTime_DebounceTimeSubscriber(subscriber,this.dueTime,this.scheduler))},DebounceTimeOperator}(),debounceTime_DebounceTimeSubscriber=function(_super){function DebounceTimeSubscriber(destination,dueTime,scheduler){var _this=_super.call(this,destination)||this;return _this.dueTime=dueTime,_this.scheduler=scheduler,_this.debouncedSubscription=null,_this.lastValue=null,_this.hasValue=!1,_this}return tslib_es6.__extends(DebounceTimeSubscriber,_super),DebounceTimeSubscriber.prototype._next=function(value){this.clearDebounce(),this.lastValue=value,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var lastValue=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(lastValue)}},DebounceTimeSubscriber.prototype.clearDebounce=function(){var debouncedSubscription=this.debouncedSubscription;null!==debouncedSubscription&&(this.remove(debouncedSubscription),debouncedSubscription.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(Subscriber.a);function dispatchNext(subscriber){subscriber.debouncedNext()}function defaultIfEmpty(defaultValue){return void 0===defaultValue&&(defaultValue=null),function(source){return source.lift(new DefaultIfEmptyOperator(defaultValue))}}var DefaultIfEmptyOperator=function(){function DefaultIfEmptyOperator(defaultValue){this.defaultValue=defaultValue}return DefaultIfEmptyOperator.prototype.call=function(subscriber,source){return source.subscribe(new defaultIfEmpty_DefaultIfEmptySubscriber(subscriber,this.defaultValue))},DefaultIfEmptyOperator}(),defaultIfEmpty_DefaultIfEmptySubscriber=function(_super){function DefaultIfEmptySubscriber(destination,defaultValue){var _this=_super.call(this,destination)||this;return _this.defaultValue=defaultValue,_this.isEmpty=!0,_this}return tslib_es6.__extends(DefaultIfEmptySubscriber,_super),DefaultIfEmptySubscriber.prototype._next=function(value){this.isEmpty=!1,this.destination.next(value)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(Subscriber.a);function isDate(value){return value instanceof Date&&!isNaN(+value)}var Notification=__webpack_require__(69);function delay_delay(delay,scheduler){void 0===scheduler&&(scheduler=scheduler_async.a);var delayFor=isDate(delay)?+delay-scheduler.now():Math.abs(delay);return function(source){return source.lift(new DelayOperator(delayFor,scheduler))}}var DelayOperator=function(){function DelayOperator(delay,scheduler){this.delay=delay,this.scheduler=scheduler}return DelayOperator.prototype.call=function(subscriber,source){return source.subscribe(new delay_DelaySubscriber(subscriber,this.delay,this.scheduler))},DelayOperator}(),delay_DelaySubscriber=function(_super){function DelaySubscriber(destination,delay,scheduler){var _this=_super.call(this,destination)||this;return _this.delay=delay,_this.scheduler=scheduler,_this.queue=[],_this.active=!1,_this.errored=!1,_this}return tslib_es6.__extends(DelaySubscriber,_super),DelaySubscriber.dispatch=function(state){for(var source=state.source,queue=source.queue,scheduler=state.scheduler,destination=state.destination;queue.length>0&&queue[0].time-scheduler.now()<=0;)queue.shift().notification.observe(destination);if(queue.length>0){var delay_1=Math.max(0,queue[0].time-scheduler.now());this.schedule(state,delay_1)}else this.unsubscribe(),source.active=!1},DelaySubscriber.prototype._schedule=function(scheduler){this.active=!0,this.add(scheduler.schedule(DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:scheduler}))},DelaySubscriber.prototype.scheduleNotification=function(notification){if(!0!==this.errored){var scheduler=this.scheduler,message=new DelayMessage(scheduler.now()+this.delay,notification);this.queue.push(message),!1===this.active&&this._schedule(scheduler)}},DelaySubscriber.prototype._next=function(value){this.scheduleNotification(Notification.a.createNext(value))},DelaySubscriber.prototype._error=function(err){this.errored=!0,this.queue=[],this.destination.error(err)},DelaySubscriber.prototype._complete=function(){this.scheduleNotification(Notification.a.createComplete())},DelaySubscriber}(Subscriber.a),DelayMessage=function(){return function(time,notification){this.time=time,this.notification=notification}}(),Observable=__webpack_require__(6);function delayWhen(delayDurationSelector,subscriptionDelay){return subscriptionDelay?function(source){return new delayWhen_SubscriptionDelayObservable(source,subscriptionDelay).lift(new DelayWhenOperator(delayDurationSelector))}:function(source){return source.lift(new DelayWhenOperator(delayDurationSelector))}}var DelayWhenOperator=function(){function DelayWhenOperator(delayDurationSelector){this.delayDurationSelector=delayDurationSelector}return DelayWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new delayWhen_DelayWhenSubscriber(subscriber,this.delayDurationSelector))},DelayWhenOperator}(),delayWhen_DelayWhenSubscriber=function(_super){function DelayWhenSubscriber(destination,delayDurationSelector){var _this=_super.call(this,destination)||this;return _this.delayDurationSelector=delayDurationSelector,_this.completed=!1,_this.delayNotifierSubscriptions=[],_this}return tslib_es6.__extends(DelayWhenSubscriber,_super),DelayWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(outerValue),this.removeSubscription(innerSub),this.tryComplete()},DelayWhenSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},DelayWhenSubscriber.prototype.notifyComplete=function(innerSub){var value=this.removeSubscription(innerSub);value&&this.destination.next(value),this.tryComplete()},DelayWhenSubscriber.prototype._next=function(value){try{var delayNotifier=this.delayDurationSelector(value);delayNotifier&&this.tryDelay(delayNotifier,value)}catch(err){this.destination.error(err)}},DelayWhenSubscriber.prototype._complete=function(){this.completed=!0,this.tryComplete()},DelayWhenSubscriber.prototype.removeSubscription=function(subscription){subscription.unsubscribe();var subscriptionIdx=this.delayNotifierSubscriptions.indexOf(subscription);return-1!==subscriptionIdx&&this.delayNotifierSubscriptions.splice(subscriptionIdx,1),subscription.outerValue},DelayWhenSubscriber.prototype.tryDelay=function(delayNotifier,value){var notifierSubscription=Object(subscribeToResult.a)(this,delayNotifier,value);notifierSubscription&&!notifierSubscription.closed&&(this.add(notifierSubscription),this.delayNotifierSubscriptions.push(notifierSubscription))},DelayWhenSubscriber.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},DelayWhenSubscriber}(OuterSubscriber.a),delayWhen_SubscriptionDelayObservable=function(_super){function SubscriptionDelayObservable(source,subscriptionDelay){var _this=_super.call(this)||this;return _this.source=source,_this.subscriptionDelay=subscriptionDelay,_this}return tslib_es6.__extends(SubscriptionDelayObservable,_super),SubscriptionDelayObservable.prototype._subscribe=function(subscriber){this.subscriptionDelay.subscribe(new delayWhen_SubscriptionDelaySubscriber(subscriber,this.source))},SubscriptionDelayObservable}(Observable.a),delayWhen_SubscriptionDelaySubscriber=function(_super){function SubscriptionDelaySubscriber(parent,source){var _this=_super.call(this)||this;return _this.parent=parent,_this.source=source,_this.sourceSubscribed=!1,_this}return tslib_es6.__extends(SubscriptionDelaySubscriber,_super),SubscriptionDelaySubscriber.prototype._next=function(unused){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(err){this.unsubscribe(),this.parent.error(err)},SubscriptionDelaySubscriber.prototype._complete=function(){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(Subscriber.a);function dematerialize(){return function(source){return source.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function DeMaterializeOperator(){}return DeMaterializeOperator.prototype.call=function(subscriber,source){return source.subscribe(new dematerialize_DeMaterializeSubscriber(subscriber))},DeMaterializeOperator}(),dematerialize_DeMaterializeSubscriber=function(_super){function DeMaterializeSubscriber(destination){return _super.call(this,destination)||this}return tslib_es6.__extends(DeMaterializeSubscriber,_super),DeMaterializeSubscriber.prototype._next=function(value){value.observe(this.destination)},DeMaterializeSubscriber}(Subscriber.a);function distinct(keySelector,flushes){return function(source){return source.lift(new DistinctOperator(keySelector,flushes))}}var DistinctOperator=function(){function DistinctOperator(keySelector,flushes){this.keySelector=keySelector,this.flushes=flushes}return DistinctOperator.prototype.call=function(subscriber,source){return source.subscribe(new distinct_DistinctSubscriber(subscriber,this.keySelector,this.flushes))},DistinctOperator}(),distinct_DistinctSubscriber=function(_super){function DistinctSubscriber(destination,keySelector,flushes){var _this=_super.call(this,destination)||this;return _this.keySelector=keySelector,_this.values=new Set,flushes&&_this.add(Object(subscribeToResult.a)(_this,flushes)),_this}return tslib_es6.__extends(DistinctSubscriber,_super),DistinctSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values.clear()},DistinctSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},DistinctSubscriber.prototype._next=function(value){this.keySelector?this._useKeySelector(value):this._finalizeNext(value,value)},DistinctSubscriber.prototype._useKeySelector=function(value){var key,destination=this.destination;try{key=this.keySelector(value)}catch(err){return void destination.error(err)}this._finalizeNext(key,value)},DistinctSubscriber.prototype._finalizeNext=function(key,value){var values=this.values;values.has(key)||(values.add(key),this.destination.next(value))},DistinctSubscriber}(OuterSubscriber.a);function distinctUntilChanged(compare,keySelector){return function(source){return source.lift(new DistinctUntilChangedOperator(compare,keySelector))}}var DistinctUntilChangedOperator=function(){function DistinctUntilChangedOperator(compare,keySelector){this.compare=compare,this.keySelector=keySelector}return DistinctUntilChangedOperator.prototype.call=function(subscriber,source){return source.subscribe(new distinctUntilChanged_DistinctUntilChangedSubscriber(subscriber,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),distinctUntilChanged_DistinctUntilChangedSubscriber=function(_super){function DistinctUntilChangedSubscriber(destination,compare,keySelector){var _this=_super.call(this,destination)||this;return _this.keySelector=keySelector,_this.hasKey=!1,"function"==typeof compare&&(_this.compare=compare),_this}return tslib_es6.__extends(DistinctUntilChangedSubscriber,_super),DistinctUntilChangedSubscriber.prototype.compare=function(x,y){return x===y},DistinctUntilChangedSubscriber.prototype._next=function(value){var key=value;if(this.keySelector&&(key=Object(tryCatch.a)(this.keySelector)(value))===errorObject.a)return this.destination.error(errorObject.a.e);var result=!1;if(this.hasKey){if((result=Object(tryCatch.a)(this.compare)(this.key,key))===errorObject.a)return this.destination.error(errorObject.a.e)}else this.hasKey=!0;!1===Boolean(result)&&(this.key=key,this.destination.next(value))},DistinctUntilChangedSubscriber}(Subscriber.a);function distinctUntilKeyChanged(key,compare){return distinctUntilChanged((function(x,y){return compare?compare(x[key],y[key]):x[key]===y[key]}))}var ArgumentOutOfRangeError=__webpack_require__(80);function filter(predicate,thisArg){return function(source){return source.lift(new FilterOperator(predicate,thisArg))}}var FilterOperator=function(){function FilterOperator(predicate,thisArg){this.predicate=predicate,this.thisArg=thisArg}return FilterOperator.prototype.call=function(subscriber,source){return source.subscribe(new filter_FilterSubscriber(subscriber,this.predicate,this.thisArg))},FilterOperator}(),filter_FilterSubscriber=function(_super){function FilterSubscriber(destination,predicate,thisArg){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.thisArg=thisArg,_this.count=0,_this}return tslib_es6.__extends(FilterSubscriber,_super),FilterSubscriber.prototype._next=function(value){var result;try{result=this.predicate.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}result&&this.destination.next(value)},FilterSubscriber}(Subscriber.a),noop=__webpack_require__(51),isFunction=__webpack_require__(81);function tap(nextOrObserver,error,complete){return function(source){return source.lift(new DoOperator(nextOrObserver,error,complete))}}var DoOperator=function(){function DoOperator(nextOrObserver,error,complete){this.nextOrObserver=nextOrObserver,this.error=error,this.complete=complete}return DoOperator.prototype.call=function(subscriber,source){return source.subscribe(new tap_TapSubscriber(subscriber,this.nextOrObserver,this.error,this.complete))},DoOperator}(),tap_TapSubscriber=function(_super){function TapSubscriber(destination,observerOrNext,error,complete){var _this=_super.call(this,destination)||this;return _this._tapNext=noop.a,_this._tapError=noop.a,_this._tapComplete=noop.a,_this._tapError=error||noop.a,_this._tapComplete=complete||noop.a,Object(isFunction.a)(observerOrNext)?(_this._context=_this,_this._tapNext=observerOrNext):observerOrNext&&(_this._context=observerOrNext,_this._tapNext=observerOrNext.next||noop.a,_this._tapError=observerOrNext.error||noop.a,_this._tapComplete=observerOrNext.complete||noop.a),_this}return tslib_es6.__extends(TapSubscriber,_super),TapSubscriber.prototype._next=function(value){try{this._tapNext.call(this._context,value)}catch(err){return void this.destination.error(err)}this.destination.next(value)},TapSubscriber.prototype._error=function(err){try{this._tapError.call(this._context,err)}catch(err){return void this.destination.error(err)}this.destination.error(err)},TapSubscriber.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(err){return void this.destination.error(err)}return this.destination.complete()},TapSubscriber}(Subscriber.a),EmptyError=__webpack_require__(87),throwIfEmpty=function(errorFactory){return void 0===errorFactory&&(errorFactory=defaultErrorFactory),tap({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw errorFactory()}})};function defaultErrorFactory(){return new EmptyError.a}var empty=__webpack_require__(23);function take(count){return function(source){return 0===count?Object(empty.b)():source.lift(new take_TakeOperator(count))}}var take_TakeOperator=function(){function TakeOperator(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError.a}return TakeOperator.prototype.call=function(subscriber,source){return source.subscribe(new take_TakeSubscriber(subscriber,this.total))},TakeOperator}(),take_TakeSubscriber=function(_super){function TakeSubscriber(destination,total){var _this=_super.call(this,destination)||this;return _this.total=total,_this.count=0,_this}return tslib_es6.__extends(TakeSubscriber,_super),TakeSubscriber.prototype._next=function(value){var total=this.total,count=++this.count;count<=total&&(this.destination.next(value),count===total&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(Subscriber.a);function elementAt(index,defaultValue){if(index<0)throw new ArgumentOutOfRangeError.a;var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe(filter((function(v,i){return i===index})),take(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty((function(){return new ArgumentOutOfRangeError.a})))}}var fromArray=__webpack_require__(47),scalar=__webpack_require__(125);function endWith(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i]=arguments[_i];return function(source){var scheduler=array[array.length-1];Object(isScheduler.a)(scheduler)?array.pop():scheduler=null;var len=array.length;return 1!==len||scheduler?len>0?Object(concat.a)(source,Object(fromArray.a)(array,scheduler)):Object(concat.a)(source,Object(empty.b)(scheduler)):Object(concat.a)(source,Object(scalar.a)(array[0]))}}function every(predicate,thisArg){return function(source){return source.lift(new EveryOperator(predicate,thisArg,source))}}var EveryOperator=function(){function EveryOperator(predicate,thisArg,source){this.predicate=predicate,this.thisArg=thisArg,this.source=source}return EveryOperator.prototype.call=function(observer,source){return source.subscribe(new every_EverySubscriber(observer,this.predicate,this.thisArg,this.source))},EveryOperator}(),every_EverySubscriber=function(_super){function EverySubscriber(destination,predicate,thisArg,source){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.thisArg=thisArg,_this.source=source,_this.index=0,_this.thisArg=thisArg||_this,_this}return tslib_es6.__extends(EverySubscriber,_super),EverySubscriber.prototype.notifyComplete=function(everyValueMatch){this.destination.next(everyValueMatch),this.destination.complete()},EverySubscriber.prototype._next=function(value){var result=!1;try{result=this.predicate.call(this.thisArg,value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result||this.notifyComplete(!1)},EverySubscriber.prototype._complete=function(){this.notifyComplete(!0)},EverySubscriber}(Subscriber.a);function exhaust(){return function(source){return source.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function SwitchFirstOperator(){}return SwitchFirstOperator.prototype.call=function(subscriber,source){return source.subscribe(new exhaust_SwitchFirstSubscriber(subscriber))},SwitchFirstOperator}(),exhaust_SwitchFirstSubscriber=function(_super){function SwitchFirstSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.hasCompleted=!1,_this.hasSubscription=!1,_this}return tslib_es6.__extends(SwitchFirstSubscriber,_super),SwitchFirstSubscriber.prototype._next=function(value){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(subscribeToResult.a)(this,value)))},SwitchFirstSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},SwitchFirstSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},SwitchFirstSubscriber}(OuterSubscriber.a),map=__webpack_require__(28);function exhaustMap(project,resultSelector){return resultSelector?function(source){return source.pipe(exhaustMap((function(a,i){return Object(from.a)(project(a,i)).pipe(Object(map.a)((function(b,ii){return resultSelector(a,b,i,ii)})))})))}:function(source){return source.lift(new ExhauseMapOperator(project))}}var ExhauseMapOperator=function(){function ExhauseMapOperator(project){this.project=project}return ExhauseMapOperator.prototype.call=function(subscriber,source){return source.subscribe(new exhaustMap_ExhaustMapSubscriber(subscriber,this.project))},ExhauseMapOperator}(),exhaustMap_ExhaustMapSubscriber=function(_super){function ExhaustMapSubscriber(destination,project){var _this=_super.call(this,destination)||this;return _this.project=project,_this.hasSubscription=!1,_this.hasCompleted=!1,_this.index=0,_this}return tslib_es6.__extends(ExhaustMapSubscriber,_super),ExhaustMapSubscriber.prototype._next=function(value){this.hasSubscription||this.tryNext(value)},ExhaustMapSubscriber.prototype.tryNext=function(value){var index=this.index++,destination=this.destination;try{var result=this.project(value,index);this.hasSubscription=!0,this.add(Object(subscribeToResult.a)(this,result,value,index))}catch(err){destination.error(err)}},ExhaustMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},ExhaustMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},ExhaustMapSubscriber.prototype.notifyError=function(err){this.destination.error(err)},ExhaustMapSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},ExhaustMapSubscriber}(OuterSubscriber.a);function expand(project,concurrent,scheduler){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),void 0===scheduler&&(scheduler=void 0),concurrent=(concurrent||0)<1?Number.POSITIVE_INFINITY:concurrent,function(source){return source.lift(new ExpandOperator(project,concurrent,scheduler))}}var ExpandOperator=function(){function ExpandOperator(project,concurrent,scheduler){this.project=project,this.concurrent=concurrent,this.scheduler=scheduler}return ExpandOperator.prototype.call=function(subscriber,source){return source.subscribe(new expand_ExpandSubscriber(subscriber,this.project,this.concurrent,this.scheduler))},ExpandOperator}(),expand_ExpandSubscriber=function(_super){function ExpandSubscriber(destination,project,concurrent,scheduler){var _this=_super.call(this,destination)||this;return _this.project=project,_this.concurrent=concurrent,_this.scheduler=scheduler,_this.index=0,_this.active=0,_this.hasCompleted=!1,concurrent<Number.POSITIVE_INFINITY&&(_this.buffer=[]),_this}return tslib_es6.__extends(ExpandSubscriber,_super),ExpandSubscriber.dispatch=function(arg){var subscriber=arg.subscriber,result=arg.result,value=arg.value,index=arg.index;subscriber.subscribeToProjection(result,value,index)},ExpandSubscriber.prototype._next=function(value){var destination=this.destination;if(destination.closed)this._complete();else{var index=this.index++;if(this.active<this.concurrent){destination.next(value);var result=Object(tryCatch.a)(this.project)(value,index);if(result===errorObject.a)destination.error(errorObject.a.e);else if(this.scheduler){var state={subscriber:this,result:result,value:value,index:index};this.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,state))}else this.subscribeToProjection(result,value,index)}else this.buffer.push(value)}},ExpandSubscriber.prototype.subscribeToProjection=function(result,value,index){this.active++,this.add(Object(subscribeToResult.a)(this,result,value,index))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this._next(innerValue)},ExpandSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer&&buffer.length>0&&this._next(buffer.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(OuterSubscriber.a);function finalize(callback){return function(source){return source.lift(new FinallyOperator(callback))}}var FinallyOperator=function(){function FinallyOperator(callback){this.callback=callback}return FinallyOperator.prototype.call=function(subscriber,source){return source.subscribe(new finalize_FinallySubscriber(subscriber,this.callback))},FinallyOperator}(),finalize_FinallySubscriber=function(_super){function FinallySubscriber(destination,callback){var _this=_super.call(this,destination)||this;return _this.add(new Subscription.a(callback)),_this}return tslib_es6.__extends(FinallySubscriber,_super),FinallySubscriber}(Subscriber.a);function find(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("predicate is not a function");return function(source){return source.lift(new FindValueOperator(predicate,source,!1,thisArg))}}var FindValueOperator=function(){function FindValueOperator(predicate,source,yieldIndex,thisArg){this.predicate=predicate,this.source=source,this.yieldIndex=yieldIndex,this.thisArg=thisArg}return FindValueOperator.prototype.call=function(observer,source){return source.subscribe(new find_FindValueSubscriber(observer,this.predicate,this.source,this.yieldIndex,this.thisArg))},FindValueOperator}(),find_FindValueSubscriber=function(_super){function FindValueSubscriber(destination,predicate,source,yieldIndex,thisArg){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.source=source,_this.yieldIndex=yieldIndex,_this.thisArg=thisArg,_this.index=0,_this}return tslib_es6.__extends(FindValueSubscriber,_super),FindValueSubscriber.prototype.notifyComplete=function(value){var destination=this.destination;destination.next(value),destination.complete()},FindValueSubscriber.prototype._next=function(value){var predicate=this.predicate,thisArg=this.thisArg,index=this.index++;try{predicate.call(thisArg||this,value,index,this.source)&&this.notifyComplete(this.yieldIndex?index:value)}catch(err){this.destination.error(err)}},FindValueSubscriber.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},FindValueSubscriber}(Subscriber.a);function findIndex(predicate,thisArg){return function(source){return source.lift(new FindValueOperator(predicate,source,!0,thisArg))}}var identity=__webpack_require__(68);function first(predicate,defaultValue){var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe(predicate?filter((function(v,i){return predicate(v,i,source)})):identity.a,take(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty((function(){return new EmptyError.a})))}}var groupBy=__webpack_require__(154);function ignoreElements(){return function(source){return source.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function IgnoreElementsOperator(){}return IgnoreElementsOperator.prototype.call=function(subscriber,source){return source.subscribe(new ignoreElements_IgnoreElementsSubscriber(subscriber))},IgnoreElementsOperator}(),ignoreElements_IgnoreElementsSubscriber=function(_super){function IgnoreElementsSubscriber(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.__extends(IgnoreElementsSubscriber,_super),IgnoreElementsSubscriber.prototype._next=function(unused){},IgnoreElementsSubscriber}(Subscriber.a);function isEmpty(){return function(source){return source.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function IsEmptyOperator(){}return IsEmptyOperator.prototype.call=function(observer,source){return source.subscribe(new isEmpty_IsEmptySubscriber(observer))},IsEmptyOperator}(),isEmpty_IsEmptySubscriber=function(_super){function IsEmptySubscriber(destination){return _super.call(this,destination)||this}return tslib_es6.__extends(IsEmptySubscriber,_super),IsEmptySubscriber.prototype.notifyComplete=function(isEmpty){var destination=this.destination;destination.next(isEmpty),destination.complete()},IsEmptySubscriber.prototype._next=function(value){this.notifyComplete(!1)},IsEmptySubscriber.prototype._complete=function(){this.notifyComplete(!0)},IsEmptySubscriber}(Subscriber.a);function takeLast(count){return function(source){return 0===count?Object(empty.b)():source.lift(new takeLast_TakeLastOperator(count))}}var takeLast_TakeLastOperator=function(){function TakeLastOperator(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError.a}return TakeLastOperator.prototype.call=function(subscriber,source){return source.subscribe(new takeLast_TakeLastSubscriber(subscriber,this.total))},TakeLastOperator}(),takeLast_TakeLastSubscriber=function(_super){function TakeLastSubscriber(destination,total){var _this=_super.call(this,destination)||this;return _this.total=total,_this.ring=new Array,_this.count=0,_this}return tslib_es6.__extends(TakeLastSubscriber,_super),TakeLastSubscriber.prototype._next=function(value){var ring=this.ring,total=this.total,count=this.count++;ring.length<total?ring.push(value):ring[count%total]=value},TakeLastSubscriber.prototype._complete=function(){var destination=this.destination,count=this.count;if(count>0)for(var total=this.count>=this.total?this.total:this.count,ring=this.ring,i=0;i<total;i++){var idx=count++%total;destination.next(ring[idx])}destination.complete()},TakeLastSubscriber}(Subscriber.a);function last(predicate,defaultValue){var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe(predicate?filter((function(v,i){return predicate(v,i,source)})):identity.a,takeLast(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty((function(){return new EmptyError.a})))}}function mapTo(value){return function(source){return source.lift(new MapToOperator(value))}}var MapToOperator=function(){function MapToOperator(value){this.value=value}return MapToOperator.prototype.call=function(subscriber,source){return source.subscribe(new mapTo_MapToSubscriber(subscriber,this.value))},MapToOperator}(),mapTo_MapToSubscriber=function(_super){function MapToSubscriber(destination,value){var _this=_super.call(this,destination)||this;return _this.value=value,_this}return tslib_es6.__extends(MapToSubscriber,_super),MapToSubscriber.prototype._next=function(x){this.destination.next(this.value)},MapToSubscriber}(Subscriber.a);function materialize(){return function(source){return source.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function MaterializeOperator(){}return MaterializeOperator.prototype.call=function(subscriber,source){return source.subscribe(new materialize_MaterializeSubscriber(subscriber))},MaterializeOperator}(),materialize_MaterializeSubscriber=function(_super){function MaterializeSubscriber(destination){return _super.call(this,destination)||this}return tslib_es6.__extends(MaterializeSubscriber,_super),MaterializeSubscriber.prototype._next=function(value){this.destination.next(Notification.a.createNext(value))},MaterializeSubscriber.prototype._error=function(err){var destination=this.destination;destination.next(Notification.a.createError(err)),destination.complete()},MaterializeSubscriber.prototype._complete=function(){var destination=this.destination;destination.next(Notification.a.createComplete()),destination.complete()},MaterializeSubscriber}(Subscriber.a);function scan(accumulator,seed){var hasSeed=!1;return arguments.length>=2&&(hasSeed=!0),function(source){return source.lift(new ScanOperator(accumulator,seed,hasSeed))}}var ScanOperator=function(){function ScanOperator(accumulator,seed,hasSeed){void 0===hasSeed&&(hasSeed=!1),this.accumulator=accumulator,this.seed=seed,this.hasSeed=hasSeed}return ScanOperator.prototype.call=function(subscriber,source){return source.subscribe(new scan_ScanSubscriber(subscriber,this.accumulator,this.seed,this.hasSeed))},ScanOperator}(),scan_ScanSubscriber=function(_super){function ScanSubscriber(destination,accumulator,_seed,hasSeed){var _this=_super.call(this,destination)||this;return _this.accumulator=accumulator,_this._seed=_seed,_this.hasSeed=hasSeed,_this.index=0,_this}return tslib_es6.__extends(ScanSubscriber,_super),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(value){this.hasSeed=!0,this._seed=value},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(value){if(this.hasSeed)return this._tryNext(value);this.seed=value,this.destination.next(value)},ScanSubscriber.prototype._tryNext=function(value){var result,index=this.index++;try{result=this.accumulator(this.seed,value,index)}catch(err){this.destination.error(err)}this.seed=result,this.destination.next(result)},ScanSubscriber}(Subscriber.a),pipe=__webpack_require__(107);function reduce(accumulator,seed){return arguments.length>=2?function(source){return Object(pipe.a)(scan(accumulator,seed),takeLast(1),defaultIfEmpty(seed))(source)}:function(source){return Object(pipe.a)(scan((function(acc,value,index){return accumulator(acc,value,index+1)})),takeLast(1))(source)}}function max_max(comparer){return reduce("function"==typeof comparer?function(x,y){return comparer(x,y)>0?x:y}:function(x,y){return x>y?x:y})}var merge=__webpack_require__(172);function merge_merge(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return function(source){return source.lift.call(merge.a.apply(void 0,[source].concat(observables)))}}var mergeAll=__webpack_require__(121);function mergeMapTo(innerObservable,resultSelector,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"function"==typeof resultSelector?Object(mergeMap.a)((function(){return innerObservable}),resultSelector,concurrent):("number"==typeof resultSelector&&(concurrent=resultSelector),Object(mergeMap.a)((function(){return innerObservable}),concurrent))}function mergeScan(accumulator,seed,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),function(source){return source.lift(new MergeScanOperator(accumulator,seed,concurrent))}}var MergeScanOperator=function(){function MergeScanOperator(accumulator,seed,concurrent){this.accumulator=accumulator,this.seed=seed,this.concurrent=concurrent}return MergeScanOperator.prototype.call=function(subscriber,source){return source.subscribe(new mergeScan_MergeScanSubscriber(subscriber,this.accumulator,this.seed,this.concurrent))},MergeScanOperator}(),mergeScan_MergeScanSubscriber=function(_super){function MergeScanSubscriber(destination,accumulator,acc,concurrent){var _this=_super.call(this,destination)||this;return _this.accumulator=accumulator,_this.acc=acc,_this.concurrent=concurrent,_this.hasValue=!1,_this.hasCompleted=!1,_this.buffer=[],_this.active=0,_this.index=0,_this}return tslib_es6.__extends(MergeScanSubscriber,_super),MergeScanSubscriber.prototype._next=function(value){if(this.active<this.concurrent){var index=this.index++,ish=Object(tryCatch.a)(this.accumulator)(this.acc,value),destination=this.destination;ish===errorObject.a?destination.error(errorObject.a.e):(this.active++,this._innerSub(ish,value,index))}else this.buffer.push(value)},MergeScanSubscriber.prototype._innerSub=function(ish,value,index){this.add(Object(subscribeToResult.a)(this,ish,value,index))},MergeScanSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},MergeScanSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var destination=this.destination;this.acc=innerValue,this.hasValue=!0,destination.next(innerValue)},MergeScanSubscriber.prototype.notifyComplete=function(innerSub){var buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},MergeScanSubscriber}(OuterSubscriber.a);function min_min(comparer){return reduce("function"==typeof comparer?function(x,y){return comparer(x,y)<0?x:y}:function(x,y){return x<y?x:y})}var ConnectableObservable=__webpack_require__(167);function multicast(subjectOrSubjectFactory,selector){return function(source){var subjectFactory;if(subjectFactory="function"==typeof subjectOrSubjectFactory?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory},"function"==typeof selector)return source.lift(new MulticastOperator(subjectFactory,selector));var connectable=Object.create(source,ConnectableObservable.b);return connectable.source=source,connectable.subjectFactory=subjectFactory,connectable}}var MulticastOperator=function(){function MulticastOperator(subjectFactory,selector){this.subjectFactory=subjectFactory,this.selector=selector}return MulticastOperator.prototype.call=function(subscriber,source){var selector=this.selector,subject=this.subjectFactory(),subscription=selector(subject).subscribe(subscriber);return subscription.add(source.subscribe(subject)),subscription},MulticastOperator}(),observeOn=__webpack_require__(169);function onErrorResumeNext(){for(var nextSources=[],_i=0;_i<arguments.length;_i++)nextSources[_i]=arguments[_i];return 1===nextSources.length&&Object(isArray.a)(nextSources[0])&&(nextSources=nextSources[0]),function(source){return source.lift(new OnErrorResumeNextOperator(nextSources))}}var OnErrorResumeNextOperator=function(){function OnErrorResumeNextOperator(nextSources){this.nextSources=nextSources}return OnErrorResumeNextOperator.prototype.call=function(subscriber,source){return source.subscribe(new onErrorResumeNext_OnErrorResumeNextSubscriber(subscriber,this.nextSources))},OnErrorResumeNextOperator}(),onErrorResumeNext_OnErrorResumeNextSubscriber=function(_super){function OnErrorResumeNextSubscriber(destination,nextSources){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this.nextSources=nextSources,_this}return tslib_es6.__extends(OnErrorResumeNextSubscriber,_super),OnErrorResumeNextSubscriber.prototype.notifyError=function(error,innerSub){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype.notifyComplete=function(innerSub){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype._error=function(err){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype._complete=function(){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype.subscribeToNextSource=function(){var next=this.nextSources.shift();next?this.add(Object(subscribeToResult.a)(this,next)):this.destination.complete()},OnErrorResumeNextSubscriber}(OuterSubscriber.a);function pairwise(){return function(source){return source.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function PairwiseOperator(){}return PairwiseOperator.prototype.call=function(subscriber,source){return source.subscribe(new pairwise_PairwiseSubscriber(subscriber))},PairwiseOperator}(),pairwise_PairwiseSubscriber=function(_super){function PairwiseSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.hasPrev=!1,_this}return tslib_es6.__extends(PairwiseSubscriber,_super),PairwiseSubscriber.prototype._next=function(value){this.hasPrev?this.destination.next([this.prev,value]):this.hasPrev=!0,this.prev=value},PairwiseSubscriber}(Subscriber.a);function not(pred,thisArg){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=pred,notPred.thisArg=thisArg,notPred}function partition(predicate,thisArg){return function(source){return[filter(predicate,thisArg)(source),filter(not(predicate,thisArg))(source)]}}function pluck(){for(var properties=[],_i=0;_i<arguments.length;_i++)properties[_i]=arguments[_i];var length=properties.length;if(0===length)throw new Error("list of properties cannot be empty.");return function(source){return Object(map.a)(plucker(properties,length))(source)}}function plucker(props,length){return function(x){for(var currentProp=x,i=0;i<length;i++){var p=currentProp[props[i]];if(void 0===p)return;currentProp=p}return currentProp}}var Subject=__webpack_require__(19);function publish(selector){return selector?multicast((function(){return new Subject.a}),selector):multicast(new Subject.a)}var BehaviorSubject=__webpack_require__(168);function publishBehavior(value){return function(source){return multicast(new BehaviorSubject.a(value))(source)}}var AsyncSubject=__webpack_require__(89);function publishLast(){return function(source){return multicast(new AsyncSubject.a)(source)}}var ReplaySubject=__webpack_require__(117);function publishReplay(bufferSize,windowTime,selectorOrScheduler,scheduler){selectorOrScheduler&&"function"!=typeof selectorOrScheduler&&(scheduler=selectorOrScheduler);var selector="function"==typeof selectorOrScheduler?selectorOrScheduler:void 0,subject=new ReplaySubject.a(bufferSize,windowTime,scheduler);return function(source){return multicast((function(){return subject}),selector)(source)}}var race=__webpack_require__(173);function race_race(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return function(source){return 1===observables.length&&Object(isArray.a)(observables[0])&&(observables=observables[0]),source.lift.call(race.a.apply(void 0,[source].concat(observables)))}}function repeat(count){return void 0===count&&(count=-1),function(source){return 0===count?Object(empty.b)():count<0?source.lift(new RepeatOperator(-1,source)):source.lift(new RepeatOperator(count-1,source))}}var RepeatOperator=function(){function RepeatOperator(count,source){this.count=count,this.source=source}return RepeatOperator.prototype.call=function(subscriber,source){return source.subscribe(new repeat_RepeatSubscriber(subscriber,this.count,this.source))},RepeatOperator}(),repeat_RepeatSubscriber=function(_super){function RepeatSubscriber(destination,count,source){var _this=_super.call(this,destination)||this;return _this.count=count,_this.source=source,_this}return tslib_es6.__extends(RepeatSubscriber,_super),RepeatSubscriber.prototype.complete=function(){if(!this.isStopped){var source=this.source,count=this.count;if(0===count)return _super.prototype.complete.call(this);count>-1&&(this.count=count-1),source.subscribe(this._unsubscribeAndRecycle())}},RepeatSubscriber}(Subscriber.a);function repeatWhen(notifier){return function(source){return source.lift(new RepeatWhenOperator(notifier))}}var RepeatWhenOperator=function(){function RepeatWhenOperator(notifier){this.notifier=notifier}return RepeatWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new repeatWhen_RepeatWhenSubscriber(subscriber,this.notifier,source))},RepeatWhenOperator}(),repeatWhen_RepeatWhenSubscriber=function(_super){function RepeatWhenSubscriber(destination,notifier,source){var _this=_super.call(this,destination)||this;return _this.notifier=notifier,_this.source=source,_this.sourceIsBeingSubscribedTo=!0,_this}return tslib_es6.__extends(RepeatWhenSubscriber,_super),RepeatWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},RepeatWhenSubscriber.prototype.notifyComplete=function(innerSub){if(!1===this.sourceIsBeingSubscribedTo)return _super.prototype.complete.call(this)},RepeatWhenSubscriber.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return _super.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},RepeatWhenSubscriber.prototype._unsubscribe=function(){var notifications=this.notifications,retriesSubscription=this.retriesSubscription;notifications&&(notifications.unsubscribe(),this.notifications=null),retriesSubscription&&(retriesSubscription.unsubscribe(),this.retriesSubscription=null),this.retries=null},RepeatWhenSubscriber.prototype._unsubscribeAndRecycle=function(){var _unsubscribe=this._unsubscribe;return this._unsubscribe=null,_super.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=_unsubscribe,this},RepeatWhenSubscriber.prototype.subscribeToRetries=function(){this.notifications=new Subject.a;var retries=Object(tryCatch.a)(this.notifier)(this.notifications);if(retries===errorObject.a)return _super.prototype.complete.call(this);this.retries=retries,this.retriesSubscription=Object(subscribeToResult.a)(this,retries)},RepeatWhenSubscriber}(OuterSubscriber.a);function retry(count){return void 0===count&&(count=-1),function(source){return source.lift(new RetryOperator(count,source))}}var RetryOperator=function(){function RetryOperator(count,source){this.count=count,this.source=source}return RetryOperator.prototype.call=function(subscriber,source){return source.subscribe(new retry_RetrySubscriber(subscriber,this.count,this.source))},RetryOperator}(),retry_RetrySubscriber=function(_super){function RetrySubscriber(destination,count,source){var _this=_super.call(this,destination)||this;return _this.count=count,_this.source=source,_this}return tslib_es6.__extends(RetrySubscriber,_super),RetrySubscriber.prototype.error=function(err){if(!this.isStopped){var source=this.source,count=this.count;if(0===count)return _super.prototype.error.call(this,err);count>-1&&(this.count=count-1),source.subscribe(this._unsubscribeAndRecycle())}},RetrySubscriber}(Subscriber.a);function retryWhen(notifier){return function(source){return source.lift(new RetryWhenOperator(notifier,source))}}var RetryWhenOperator=function(){function RetryWhenOperator(notifier,source){this.notifier=notifier,this.source=source}return RetryWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new retryWhen_RetryWhenSubscriber(subscriber,this.notifier,this.source))},RetryWhenOperator}(),retryWhen_RetryWhenSubscriber=function(_super){function RetryWhenSubscriber(destination,notifier,source){var _this=_super.call(this,destination)||this;return _this.notifier=notifier,_this.source=source,_this}return tslib_es6.__extends(RetryWhenSubscriber,_super),RetryWhenSubscriber.prototype.error=function(err){if(!this.isStopped){var errors=this.errors,retries=this.retries,retriesSubscription=this.retriesSubscription;if(retries)this.errors=null,this.retriesSubscription=null;else{if(errors=new Subject.a,(retries=Object(tryCatch.a)(this.notifier)(errors))===errorObject.a)return _super.prototype.error.call(this,errorObject.a.e);retriesSubscription=Object(subscribeToResult.a)(this,retries)}this._unsubscribeAndRecycle(),this.errors=errors,this.retries=retries,this.retriesSubscription=retriesSubscription,errors.next(err)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var errors=this.errors,retriesSubscription=this.retriesSubscription;errors&&(errors.unsubscribe(),this.errors=null),retriesSubscription&&(retriesSubscription.unsubscribe(),this.retriesSubscription=null),this.retries=null},RetryWhenSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var _unsubscribe=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=_unsubscribe,this.source.subscribe(this)},RetryWhenSubscriber}(OuterSubscriber.a),operators_refCount=__webpack_require__(116);function sample(notifier){return function(source){return source.lift(new sample_SampleOperator(notifier))}}var sample_SampleOperator=function(){function SampleOperator(notifier){this.notifier=notifier}return SampleOperator.prototype.call=function(subscriber,source){var sampleSubscriber=new sample_SampleSubscriber(subscriber),subscription=source.subscribe(sampleSubscriber);return subscription.add(Object(subscribeToResult.a)(sampleSubscriber,this.notifier)),subscription},SampleOperator}(),sample_SampleSubscriber=function(_super){function SampleSubscriber(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.hasValue=!1,_this}return tslib_es6.__extends(SampleSubscriber,_super),SampleSubscriber.prototype._next=function(value){this.value=value,this.hasValue=!0},SampleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.emitValue()},SampleSubscriber.prototype.notifyComplete=function(){this.emitValue()},SampleSubscriber.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},SampleSubscriber}(OuterSubscriber.a);function sampleTime(period,scheduler){return void 0===scheduler&&(scheduler=scheduler_async.a),function(source){return source.lift(new SampleTimeOperator(period,scheduler))}}var SampleTimeOperator=function(){function SampleTimeOperator(period,scheduler){this.period=period,this.scheduler=scheduler}return SampleTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new sampleTime_SampleTimeSubscriber(subscriber,this.period,this.scheduler))},SampleTimeOperator}(),sampleTime_SampleTimeSubscriber=function(_super){function SampleTimeSubscriber(destination,period,scheduler){var _this=_super.call(this,destination)||this;return _this.period=period,_this.scheduler=scheduler,_this.hasValue=!1,_this.add(scheduler.schedule(dispatchNotification,period,{subscriber:_this,period:period})),_this}return tslib_es6.__extends(SampleTimeSubscriber,_super),SampleTimeSubscriber.prototype._next=function(value){this.lastValue=value,this.hasValue=!0},SampleTimeSubscriber.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},SampleTimeSubscriber}(Subscriber.a);function dispatchNotification(state){var subscriber=state.subscriber,period=state.period;subscriber.notifyNext(),this.schedule(state,period)}function sequenceEqual(compareTo,comparor){return function(source){return source.lift(new SequenceEqualOperator(compareTo,comparor))}}var SequenceEqualOperator=function(){function SequenceEqualOperator(compareTo,comparor){this.compareTo=compareTo,this.comparor=comparor}return SequenceEqualOperator.prototype.call=function(subscriber,source){return source.subscribe(new sequenceEqual_SequenceEqualSubscriber(subscriber,this.compareTo,this.comparor))},SequenceEqualOperator}(),sequenceEqual_SequenceEqualSubscriber=function(_super){function SequenceEqualSubscriber(destination,compareTo,comparor){var _this=_super.call(this,destination)||this;return _this.compareTo=compareTo,_this.comparor=comparor,_this._a=[],_this._b=[],_this._oneComplete=!1,_this.add(compareTo.subscribe(new sequenceEqual_SequenceEqualCompareToSubscriber(destination,_this))),_this}return tslib_es6.__extends(SequenceEqualSubscriber,_super),SequenceEqualSubscriber.prototype._next=function(value){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(value),this.checkValues())},SequenceEqualSubscriber.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},SequenceEqualSubscriber.prototype.checkValues=function(){for(var _a=this._a,_b=this._b,comparor=this.comparor;_a.length>0&&_b.length>0;){var a=_a.shift(),b=_b.shift(),areEqual=!1;comparor?(areEqual=Object(tryCatch.a)(comparor)(a,b))===errorObject.a&&this.destination.error(errorObject.a.e):areEqual=a===b,areEqual||this.emit(!1)}},SequenceEqualSubscriber.prototype.emit=function(value){var destination=this.destination;destination.next(value),destination.complete()},SequenceEqualSubscriber.prototype.nextB=function(value){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(value),this.checkValues())},SequenceEqualSubscriber}(Subscriber.a),sequenceEqual_SequenceEqualCompareToSubscriber=function(_super){function SequenceEqualCompareToSubscriber(destination,parent){var _this=_super.call(this,destination)||this;return _this.parent=parent,_this}return tslib_es6.__extends(SequenceEqualCompareToSubscriber,_super),SequenceEqualCompareToSubscriber.prototype._next=function(value){this.parent.nextB(value)},SequenceEqualCompareToSubscriber.prototype._error=function(err){this.parent.error(err)},SequenceEqualCompareToSubscriber.prototype._complete=function(){this.parent._complete()},SequenceEqualCompareToSubscriber}(Subscriber.a);function shareSubjectFactory(){return new Subject.a}function share(){return function(source){return Object(operators_refCount.a)()(multicast(shareSubjectFactory)(source))}}function shareReplay(bufferSize,windowTime,scheduler){return function(source){return source.lift(function(bufferSize,windowTime,scheduler){var subject,subscription,refCount=0,hasError=!1,isComplete=!1;return function(source){refCount++,subject&&!hasError||(hasError=!1,subject=new ReplaySubject.a(bufferSize,windowTime,scheduler),subscription=source.subscribe({next:function(value){subject.next(value)},error:function(err){hasError=!0,subject.error(err)},complete:function(){isComplete=!0,subject.complete()}}));var innerSub=subject.subscribe(this);return function(){refCount--,innerSub.unsubscribe(),subscription&&0===refCount&&isComplete&&subscription.unsubscribe()}}}(bufferSize,windowTime,scheduler))}}function single(predicate){return function(source){return source.lift(new SingleOperator(predicate,source))}}var SingleOperator=function(){function SingleOperator(predicate,source){this.predicate=predicate,this.source=source}return SingleOperator.prototype.call=function(subscriber,source){return source.subscribe(new single_SingleSubscriber(subscriber,this.predicate,this.source))},SingleOperator}(),single_SingleSubscriber=function(_super){function SingleSubscriber(destination,predicate,source){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.source=source,_this.seenValue=!1,_this.index=0,_this}return tslib_es6.__extends(SingleSubscriber,_super),SingleSubscriber.prototype.applySingleValue=function(value){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=value)},SingleSubscriber.prototype._next=function(value){var index=this.index++;this.predicate?this.tryNext(value,index):this.applySingleValue(value)},SingleSubscriber.prototype.tryNext=function(value,index){try{this.predicate(value,index,this.source)&&this.applySingleValue(value)}catch(err){this.destination.error(err)}},SingleSubscriber.prototype._complete=function(){var destination=this.destination;this.index>0?(destination.next(this.seenValue?this.singleValue:void 0),destination.complete()):destination.error(new EmptyError.a)},SingleSubscriber}(Subscriber.a);function skip(count){return function(source){return source.lift(new SkipOperator(count))}}var SkipOperator=function(){function SkipOperator(total){this.total=total}return SkipOperator.prototype.call=function(subscriber,source){return source.subscribe(new skip_SkipSubscriber(subscriber,this.total))},SkipOperator}(),skip_SkipSubscriber=function(_super){function SkipSubscriber(destination,total){var _this=_super.call(this,destination)||this;return _this.total=total,_this.count=0,_this}return tslib_es6.__extends(SkipSubscriber,_super),SkipSubscriber.prototype._next=function(x){++this.count>this.total&&this.destination.next(x)},SkipSubscriber}(Subscriber.a);function skipLast(count){return function(source){return source.lift(new skipLast_SkipLastOperator(count))}}var skipLast_SkipLastOperator=function(){function SkipLastOperator(_skipCount){if(this._skipCount=_skipCount,this._skipCount<0)throw new ArgumentOutOfRangeError.a}return SkipLastOperator.prototype.call=function(subscriber,source){return 0===this._skipCount?source.subscribe(new Subscriber.a(subscriber)):source.subscribe(new skipLast_SkipLastSubscriber(subscriber,this._skipCount))},SkipLastOperator}(),skipLast_SkipLastSubscriber=function(_super){function SkipLastSubscriber(destination,_skipCount){var _this=_super.call(this,destination)||this;return _this._skipCount=_skipCount,_this._count=0,_this._ring=new Array(_skipCount),_this}return tslib_es6.__extends(SkipLastSubscriber,_super),SkipLastSubscriber.prototype._next=function(value){var skipCount=this._skipCount,count=this._count++;if(count<skipCount)this._ring[count]=value;else{var currentIndex=count%skipCount,ring=this._ring,oldValue=ring[currentIndex];ring[currentIndex]=value,this.destination.next(oldValue)}},SkipLastSubscriber}(Subscriber.a);function skipUntil(notifier){return function(source){return source.lift(new SkipUntilOperator(notifier))}}var SkipUntilOperator=function(){function SkipUntilOperator(notifier){this.notifier=notifier}return SkipUntilOperator.prototype.call=function(destination,source){return source.subscribe(new skipUntil_SkipUntilSubscriber(destination,this.notifier))},SkipUntilOperator}(),skipUntil_SkipUntilSubscriber=function(_super){function SkipUntilSubscriber(destination,notifier){var _this=_super.call(this,destination)||this;return _this.hasValue=!1,_this.add(_this.innerSubscription=Object(subscribeToResult.a)(_this,notifier)),_this}return tslib_es6.__extends(SkipUntilSubscriber,_super),SkipUntilSubscriber.prototype._next=function(value){this.hasValue&&_super.prototype._next.call(this,value)},SkipUntilSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},SkipUntilSubscriber.prototype.notifyComplete=function(){},SkipUntilSubscriber}(OuterSubscriber.a);function skipWhile(predicate){return function(source){return source.lift(new SkipWhileOperator(predicate))}}var SkipWhileOperator=function(){function SkipWhileOperator(predicate){this.predicate=predicate}return SkipWhileOperator.prototype.call=function(subscriber,source){return source.subscribe(new skipWhile_SkipWhileSubscriber(subscriber,this.predicate))},SkipWhileOperator}(),skipWhile_SkipWhileSubscriber=function(_super){function SkipWhileSubscriber(destination,predicate){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.skipping=!0,_this.index=0,_this}return tslib_es6.__extends(SkipWhileSubscriber,_super),SkipWhileSubscriber.prototype._next=function(value){var destination=this.destination;this.skipping&&this.tryCallPredicate(value),this.skipping||destination.next(value)},SkipWhileSubscriber.prototype.tryCallPredicate=function(value){try{var result=this.predicate(value,this.index++);this.skipping=Boolean(result)}catch(err){this.destination.error(err)}},SkipWhileSubscriber}(Subscriber.a);function startWith(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i]=arguments[_i];return function(source){var scheduler=array[array.length-1];Object(isScheduler.a)(scheduler)?array.pop():scheduler=null;var len=array.length;return 1!==len||scheduler?len>0?Object(concat.a)(Object(fromArray.a)(array,scheduler),source):Object(concat.a)(Object(empty.b)(scheduler),source):Object(concat.a)(Object(scalar.a)(array[0]),source)}}var asap=__webpack_require__(127),isNumeric=__webpack_require__(91),SubscribeOnObservable_SubscribeOnObservable=function(_super){function SubscribeOnObservable(source,delayTime,scheduler){void 0===delayTime&&(delayTime=0),void 0===scheduler&&(scheduler=asap.a);var _this=_super.call(this)||this;return _this.source=source,_this.delayTime=delayTime,_this.scheduler=scheduler,(!Object(isNumeric.a)(delayTime)||delayTime<0)&&(_this.delayTime=0),scheduler&&"function"==typeof scheduler.schedule||(_this.scheduler=asap.a),_this}return tslib_es6.__extends(SubscribeOnObservable,_super),SubscribeOnObservable.create=function(source,delay,scheduler){return void 0===delay&&(delay=0),void 0===scheduler&&(scheduler=asap.a),new SubscribeOnObservable(source,delay,scheduler)},SubscribeOnObservable.dispatch=function(arg){var source=arg.source,subscriber=arg.subscriber;return this.add(source.subscribe(subscriber))},SubscribeOnObservable.prototype._subscribe=function(subscriber){var delay=this.delayTime,source=this.source;return this.scheduler.schedule(SubscribeOnObservable.dispatch,delay,{source:source,subscriber:subscriber})},SubscribeOnObservable}(Observable.a);function subscribeOn(scheduler,delay){return void 0===delay&&(delay=0),function(source){return source.lift(new subscribeOn_SubscribeOnOperator(scheduler,delay))}}var subscribeOn_SubscribeOnOperator=function(){function SubscribeOnOperator(scheduler,delay){this.scheduler=scheduler,this.delay=delay}return SubscribeOnOperator.prototype.call=function(subscriber,source){return new SubscribeOnObservable_SubscribeOnObservable(source,this.delay,this.scheduler).subscribe(subscriber)},SubscribeOnOperator}();function switchMap(project,resultSelector){return"function"==typeof resultSelector?function(source){return source.pipe(switchMap((function(a,i){return Object(from.a)(project(a,i)).pipe(Object(map.a)((function(b,ii){return resultSelector(a,b,i,ii)})))})))}:function(source){return source.lift(new SwitchMapOperator(project))}}var SwitchMapOperator=function(){function SwitchMapOperator(project){this.project=project}return SwitchMapOperator.prototype.call=function(subscriber,source){return source.subscribe(new switchMap_SwitchMapSubscriber(subscriber,this.project))},SwitchMapOperator}(),switchMap_SwitchMapSubscriber=function(_super){function SwitchMapSubscriber(destination,project){var _this=_super.call(this,destination)||this;return _this.project=project,_this.index=0,_this}return tslib_es6.__extends(SwitchMapSubscriber,_super),SwitchMapSubscriber.prototype._next=function(value){var result,index=this.index++;try{result=this.project(value,index)}catch(error){return void this.destination.error(error)}this._innerSub(result,value,index)},SwitchMapSubscriber.prototype._innerSub=function(result,value,index){var innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe(),this.add(this.innerSubscription=Object(subscribeToResult.a)(this,result,value,index))},SwitchMapSubscriber.prototype._complete=function(){var innerSubscription=this.innerSubscription;innerSubscription&&!innerSubscription.closed||_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapSubscriber.prototype.notifyComplete=function(innerSub){this.remove(innerSub),this.innerSubscription=null,this.isStopped&&_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)},SwitchMapSubscriber}(OuterSubscriber.a);function switchAll(){return switchMap(identity.a)}function switchMapTo(innerObservable,resultSelector){return resultSelector?switchMap((function(){return innerObservable}),resultSelector):switchMap((function(){return innerObservable}))}function takeUntil(notifier){return function(source){return source.lift(new takeUntil_TakeUntilOperator(notifier))}}var takeUntil_TakeUntilOperator=function(){function TakeUntilOperator(notifier){this.notifier=notifier}return TakeUntilOperator.prototype.call=function(subscriber,source){var takeUntilSubscriber=new takeUntil_TakeUntilSubscriber(subscriber),notifierSubscription=Object(subscribeToResult.a)(takeUntilSubscriber,this.notifier);return notifierSubscription&&!notifierSubscription.closed?(takeUntilSubscriber.add(notifierSubscription),source.subscribe(takeUntilSubscriber)):takeUntilSubscriber},TakeUntilOperator}(),takeUntil_TakeUntilSubscriber=function(_super){function TakeUntilSubscriber(destination){return _super.call(this,destination)||this}return tslib_es6.__extends(TakeUntilSubscriber,_super),TakeUntilSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.complete()},TakeUntilSubscriber.prototype.notifyComplete=function(){},TakeUntilSubscriber}(OuterSubscriber.a);function takeWhile(predicate){return function(source){return source.lift(new TakeWhileOperator(predicate))}}var TakeWhileOperator=function(){function TakeWhileOperator(predicate){this.predicate=predicate}return TakeWhileOperator.prototype.call=function(subscriber,source){return source.subscribe(new takeWhile_TakeWhileSubscriber(subscriber,this.predicate))},TakeWhileOperator}(),takeWhile_TakeWhileSubscriber=function(_super){function TakeWhileSubscriber(destination,predicate){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.index=0,_this}return tslib_es6.__extends(TakeWhileSubscriber,_super),TakeWhileSubscriber.prototype._next=function(value){var result,destination=this.destination;try{result=this.predicate(value,this.index++)}catch(err){return void destination.error(err)}this.nextOrComplete(value,result)},TakeWhileSubscriber.prototype.nextOrComplete=function(value,predicateResult){var destination=this.destination;Boolean(predicateResult)?destination.next(value):destination.complete()},TakeWhileSubscriber}(Subscriber.a),defaultThrottleConfig={leading:!0,trailing:!1};function throttle(durationSelector,config){return void 0===config&&(config=defaultThrottleConfig),function(source){return source.lift(new ThrottleOperator(durationSelector,config.leading,config.trailing))}}var ThrottleOperator=function(){function ThrottleOperator(durationSelector,leading,trailing){this.durationSelector=durationSelector,this.leading=leading,this.trailing=trailing}return ThrottleOperator.prototype.call=function(subscriber,source){return source.subscribe(new throttle_ThrottleSubscriber(subscriber,this.durationSelector,this.leading,this.trailing))},ThrottleOperator}(),throttle_ThrottleSubscriber=function(_super){function ThrottleSubscriber(destination,durationSelector,_leading,_trailing){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this.durationSelector=durationSelector,_this._leading=_leading,_this._trailing=_trailing,_this._hasValue=!1,_this}return tslib_es6.__extends(ThrottleSubscriber,_super),ThrottleSubscriber.prototype._next=function(value){this._hasValue=!0,this._sendValue=value,this._throttled||(this._leading?this.send():this.throttle(value))},ThrottleSubscriber.prototype.send=function(){var _hasValue=this._hasValue,_sendValue=this._sendValue;_hasValue&&(this.destination.next(_sendValue),this.throttle(_sendValue)),this._hasValue=!1,this._sendValue=null},ThrottleSubscriber.prototype.throttle=function(value){var duration=this.tryDurationSelector(value);duration&&this.add(this._throttled=Object(subscribeToResult.a)(this,duration))},ThrottleSubscriber.prototype.tryDurationSelector=function(value){try{return this.durationSelector(value)}catch(err){return this.destination.error(err),null}},ThrottleSubscriber.prototype.throttlingDone=function(){var _throttled=this._throttled,_trailing=this._trailing;_throttled&&_throttled.unsubscribe(),this._throttled=null,_trailing&&this.send()},ThrottleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.throttlingDone()},ThrottleSubscriber.prototype.notifyComplete=function(){this.throttlingDone()},ThrottleSubscriber}(OuterSubscriber.a);function throttleTime(duration,scheduler,config){return void 0===scheduler&&(scheduler=scheduler_async.a),void 0===config&&(config=defaultThrottleConfig),function(source){return source.lift(new ThrottleTimeOperator(duration,scheduler,config.leading,config.trailing))}}var ThrottleTimeOperator=function(){function ThrottleTimeOperator(duration,scheduler,leading,trailing){this.duration=duration,this.scheduler=scheduler,this.leading=leading,this.trailing=trailing}return ThrottleTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new throttleTime_ThrottleTimeSubscriber(subscriber,this.duration,this.scheduler,this.leading,this.trailing))},ThrottleTimeOperator}(),throttleTime_ThrottleTimeSubscriber=function(_super){function ThrottleTimeSubscriber(destination,duration,scheduler,leading,trailing){var _this=_super.call(this,destination)||this;return _this.duration=duration,_this.scheduler=scheduler,_this.leading=leading,_this.trailing=trailing,_this._hasTrailingValue=!1,_this._trailingValue=null,_this}return tslib_es6.__extends(ThrottleTimeSubscriber,_super),ThrottleTimeSubscriber.prototype._next=function(value){this.throttled?this.trailing&&(this._trailingValue=value,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(throttleTime_dispatchNext,this.duration,{subscriber:this})),this.leading&&this.destination.next(value))},ThrottleTimeSubscriber.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},ThrottleTimeSubscriber.prototype.clearThrottle=function(){var throttled=this.throttled;throttled&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),throttled.unsubscribe(),this.remove(throttled),this.throttled=null)},ThrottleTimeSubscriber}(Subscriber.a);function throttleTime_dispatchNext(arg){arg.subscriber.clearThrottle()}var defer=__webpack_require__(122);function timeInterval(scheduler){return void 0===scheduler&&(scheduler=scheduler_async.a),function(source){return Object(defer.a)((function(){return source.pipe(scan((function(_a,value){var current=_a.current;return{value:value,current:scheduler.now(),last:current}}),{current:scheduler.now(),value:void 0,last:void 0}),Object(map.a)((function(_a){var current=_a.current,last=_a.last,value=_a.value;return new TimeInterval(value,current-last)})))}))}}var TimeInterval=function(){return function(value,interval){this.value=value,this.interval=interval}}(),TimeoutError=__webpack_require__(170);function timeoutWith(due,withObservable,scheduler){return void 0===scheduler&&(scheduler=scheduler_async.a),function(source){var absoluteTimeout=isDate(due),waitFor=absoluteTimeout?+due-scheduler.now():Math.abs(due);return source.lift(new TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler))}}var TimeoutWithOperator=function(){function TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler){this.waitFor=waitFor,this.absoluteTimeout=absoluteTimeout,this.withObservable=withObservable,this.scheduler=scheduler}return TimeoutWithOperator.prototype.call=function(subscriber,source){return source.subscribe(new timeoutWith_TimeoutWithSubscriber(subscriber,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),timeoutWith_TimeoutWithSubscriber=function(_super){function TimeoutWithSubscriber(destination,absoluteTimeout,waitFor,withObservable,scheduler){var _this=_super.call(this,destination)||this;return _this.absoluteTimeout=absoluteTimeout,_this.waitFor=waitFor,_this.withObservable=withObservable,_this.scheduler=scheduler,_this.action=null,_this.scheduleTimeout(),_this}return tslib_es6.__extends(TimeoutWithSubscriber,_super),TimeoutWithSubscriber.dispatchTimeout=function(subscriber){var withObservable=subscriber.withObservable;subscriber._unsubscribeAndRecycle(),subscriber.add(Object(subscribeToResult.a)(subscriber,withObservable))},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var action=this.action;action?this.action=action.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,this))},TimeoutWithSubscriber.prototype._next=function(value){this.absoluteTimeout||this.scheduleTimeout(),_super.prototype._next.call(this,value)},TimeoutWithSubscriber.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},TimeoutWithSubscriber}(OuterSubscriber.a),throwError=__webpack_require__(119);function timeout(due,scheduler){return void 0===scheduler&&(scheduler=scheduler_async.a),timeoutWith(due,Object(throwError.a)(new TimeoutError.a),scheduler)}function timestamp(scheduler){return void 0===scheduler&&(scheduler=scheduler_async.a),Object(map.a)((function(value){return new Timestamp(value,scheduler.now())}))}var Timestamp=function(){return function(value,timestamp){this.value=value,this.timestamp=timestamp}}();function toArrayReducer(arr,item,index){return 0===index?[item]:(arr.push(item),arr)}function toArray(){return reduce(toArrayReducer,[])}function window_window(windowBoundaries){return function(source){return source.lift(new window_WindowOperator(windowBoundaries))}}var window_WindowOperator=function(){function WindowOperator(windowBoundaries){this.windowBoundaries=windowBoundaries}return WindowOperator.prototype.call=function(subscriber,source){var windowSubscriber=new window_WindowSubscriber(subscriber),sourceSubscription=source.subscribe(windowSubscriber);return sourceSubscription.closed||windowSubscriber.add(Object(subscribeToResult.a)(windowSubscriber,this.windowBoundaries)),sourceSubscription},WindowOperator}(),window_WindowSubscriber=function(_super){function WindowSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.window=new Subject.a,destination.next(_this.window),_this}return tslib_es6.__extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openWindow()},WindowSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this._complete()},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err)},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete()},WindowSubscriber.prototype._unsubscribe=function(){this.window=null},WindowSubscriber.prototype.openWindow=function(){var prevWindow=this.window;prevWindow&&prevWindow.complete();var destination=this.destination,newWindow=this.window=new Subject.a;destination.next(newWindow)},WindowSubscriber}(OuterSubscriber.a);function windowCount(windowSize,startWindowEvery){return void 0===startWindowEvery&&(startWindowEvery=0),function(source){return source.lift(new WindowCountOperator(windowSize,startWindowEvery))}}var WindowCountOperator=function(){function WindowCountOperator(windowSize,startWindowEvery){this.windowSize=windowSize,this.startWindowEvery=startWindowEvery}return WindowCountOperator.prototype.call=function(subscriber,source){return source.subscribe(new windowCount_WindowCountSubscriber(subscriber,this.windowSize,this.startWindowEvery))},WindowCountOperator}(),windowCount_WindowCountSubscriber=function(_super){function WindowCountSubscriber(destination,windowSize,startWindowEvery){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this.windowSize=windowSize,_this.startWindowEvery=startWindowEvery,_this.windows=[new Subject.a],_this.count=0,destination.next(_this.windows[0]),_this}return tslib_es6.__extends(WindowCountSubscriber,_super),WindowCountSubscriber.prototype._next=function(value){for(var startWindowEvery=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,destination=this.destination,windowSize=this.windowSize,windows=this.windows,len=windows.length,i=0;i<len&&!this.closed;i++)windows[i].next(value);var c=this.count-windowSize+1;if(c>=0&&c%startWindowEvery==0&&!this.closed&&windows.shift().complete(),++this.count%startWindowEvery==0&&!this.closed){var window_1=new Subject.a;windows.push(window_1),destination.next(window_1)}},WindowCountSubscriber.prototype._error=function(err){var windows=this.windows;if(windows)for(;windows.length>0&&!this.closed;)windows.shift().error(err);this.destination.error(err)},WindowCountSubscriber.prototype._complete=function(){var windows=this.windows;if(windows)for(;windows.length>0&&!this.closed;)windows.shift().complete();this.destination.complete()},WindowCountSubscriber.prototype._unsubscribe=function(){this.count=0,this.windows=null},WindowCountSubscriber}(Subscriber.a);function windowTime_windowTime(windowTimeSpan){var scheduler=scheduler_async.a,windowCreationInterval=null,maxWindowSize=Number.POSITIVE_INFINITY;return Object(isScheduler.a)(arguments[3])&&(scheduler=arguments[3]),Object(isScheduler.a)(arguments[2])?scheduler=arguments[2]:Object(isNumeric.a)(arguments[2])&&(maxWindowSize=arguments[2]),Object(isScheduler.a)(arguments[1])?scheduler=arguments[1]:Object(isNumeric.a)(arguments[1])&&(windowCreationInterval=arguments[1]),function(source){return source.lift(new WindowTimeOperator(windowTimeSpan,windowCreationInterval,maxWindowSize,scheduler))}}var WindowTimeOperator=function(){function WindowTimeOperator(windowTimeSpan,windowCreationInterval,maxWindowSize,scheduler){this.windowTimeSpan=windowTimeSpan,this.windowCreationInterval=windowCreationInterval,this.maxWindowSize=maxWindowSize,this.scheduler=scheduler}return WindowTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new windowTime_WindowTimeSubscriber(subscriber,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},WindowTimeOperator}(),windowTime_CountedSubject=function(_super){function CountedSubject(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._numberOfNextedValues=0,_this}return tslib_es6.__extends(CountedSubject,_super),CountedSubject.prototype.next=function(value){this._numberOfNextedValues++,_super.prototype.next.call(this,value)},Object.defineProperty(CountedSubject.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),CountedSubject}(Subject.a),windowTime_WindowTimeSubscriber=function(_super){function WindowTimeSubscriber(destination,windowTimeSpan,windowCreationInterval,maxWindowSize,scheduler){var _this=_super.call(this,destination)||this;_this.destination=destination,_this.windowTimeSpan=windowTimeSpan,_this.windowCreationInterval=windowCreationInterval,_this.maxWindowSize=maxWindowSize,_this.scheduler=scheduler,_this.windows=[];var window=_this.openWindow();if(null!==windowCreationInterval&&windowCreationInterval>=0){var closeState={subscriber:_this,window:window,context:null},creationState={windowTimeSpan:windowTimeSpan,windowCreationInterval:windowCreationInterval,subscriber:_this,scheduler:scheduler};_this.add(scheduler.schedule(dispatchWindowClose,windowTimeSpan,closeState)),_this.add(scheduler.schedule(dispatchWindowCreation,windowCreationInterval,creationState))}else{var timeSpanOnlyState={subscriber:_this,window:window,windowTimeSpan:windowTimeSpan};_this.add(scheduler.schedule(dispatchWindowTimeSpanOnly,windowTimeSpan,timeSpanOnlyState))}return _this}return tslib_es6.__extends(WindowTimeSubscriber,_super),WindowTimeSubscriber.prototype._next=function(value){for(var windows=this.windows,len=windows.length,i=0;i<len;i++){var window_1=windows[i];window_1.closed||(window_1.next(value),window_1.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(window_1))}},WindowTimeSubscriber.prototype._error=function(err){for(var windows=this.windows;windows.length>0;)windows.shift().error(err);this.destination.error(err)},WindowTimeSubscriber.prototype._complete=function(){for(var windows=this.windows;windows.length>0;){var window_2=windows.shift();window_2.closed||window_2.complete()}this.destination.complete()},WindowTimeSubscriber.prototype.openWindow=function(){var window=new windowTime_CountedSubject;return this.windows.push(window),this.destination.next(window),window},WindowTimeSubscriber.prototype.closeWindow=function(window){window.complete();var windows=this.windows;windows.splice(windows.indexOf(window),1)},WindowTimeSubscriber}(Subscriber.a);function dispatchWindowTimeSpanOnly(state){var subscriber=state.subscriber,windowTimeSpan=state.windowTimeSpan,window=state.window;window&&subscriber.closeWindow(window),state.window=subscriber.openWindow(),this.schedule(state,windowTimeSpan)}function dispatchWindowCreation(state){var windowTimeSpan=state.windowTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,windowCreationInterval=state.windowCreationInterval,window=subscriber.openWindow(),context={action:this,subscription:null},timeSpanState={subscriber:subscriber,window:window,context:context};context.subscription=scheduler.schedule(dispatchWindowClose,windowTimeSpan,timeSpanState),this.add(context.subscription),this.schedule(state,windowCreationInterval)}function dispatchWindowClose(state){var subscriber=state.subscriber,window=state.window,context=state.context;context&&context.action&&context.subscription&&context.action.remove(context.subscription),subscriber.closeWindow(window)}function windowToggle(openings,closingSelector){return function(source){return source.lift(new WindowToggleOperator(openings,closingSelector))}}var WindowToggleOperator=function(){function WindowToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return WindowToggleOperator.prototype.call=function(subscriber,source){return source.subscribe(new windowToggle_WindowToggleSubscriber(subscriber,this.openings,this.closingSelector))},WindowToggleOperator}(),windowToggle_WindowToggleSubscriber=function(_super){function WindowToggleSubscriber(destination,openings,closingSelector){var _this=_super.call(this,destination)||this;return _this.openings=openings,_this.closingSelector=closingSelector,_this.contexts=[],_this.add(_this.openSubscription=Object(subscribeToResult.a)(_this,openings,openings)),_this}return tslib_es6.__extends(WindowToggleSubscriber,_super),WindowToggleSubscriber.prototype._next=function(value){var contexts=this.contexts;if(contexts)for(var len=contexts.length,i=0;i<len;i++)contexts[i].window.next(value)},WindowToggleSubscriber.prototype._error=function(err){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context_1=contexts[index];context_1.window.error(err),context_1.subscription.unsubscribe()}_super.prototype._error.call(this,err)},WindowToggleSubscriber.prototype._complete=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context_2=contexts[index];context_2.window.complete(),context_2.subscription.unsubscribe()}_super.prototype._complete.call(this)},WindowToggleSubscriber.prototype._unsubscribe=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1;++index<len;){var context_3=contexts[index];context_3.window.unsubscribe(),context_3.subscription.unsubscribe()}},WindowToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(outerValue===this.openings){var closingSelector=this.closingSelector,closingNotifier=Object(tryCatch.a)(closingSelector)(innerValue);if(closingNotifier===errorObject.a)return this.error(errorObject.a.e);var window_1=new Subject.a,subscription=new Subscription.a,context_4={window:window_1,subscription:subscription};this.contexts.push(context_4);var innerSubscription=Object(subscribeToResult.a)(this,closingNotifier,context_4);innerSubscription.closed?this.closeWindow(this.contexts.length-1):(innerSubscription.context=context_4,subscription.add(innerSubscription)),this.destination.next(window_1)}else this.closeWindow(this.contexts.indexOf(outerValue))},WindowToggleSubscriber.prototype.notifyError=function(err){this.error(err)},WindowToggleSubscriber.prototype.notifyComplete=function(inner){inner!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(inner.context))},WindowToggleSubscriber.prototype.closeWindow=function(index){if(-1!==index){var contexts=this.contexts,context=contexts[index],window=context.window,subscription=context.subscription;contexts.splice(index,1),window.complete(),subscription.unsubscribe()}},WindowToggleSubscriber}(OuterSubscriber.a);function windowWhen(closingSelector){return function(source){return source.lift(new windowWhen_WindowOperator(closingSelector))}}var windowWhen_WindowOperator=function(){function WindowOperator(closingSelector){this.closingSelector=closingSelector}return WindowOperator.prototype.call=function(subscriber,source){return source.subscribe(new windowWhen_WindowSubscriber(subscriber,this.closingSelector))},WindowOperator}(),windowWhen_WindowSubscriber=function(_super){function WindowSubscriber(destination,closingSelector){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this.closingSelector=closingSelector,_this.openWindow(),_this}return tslib_es6.__extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype.notifyError=function(error,innerSub){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err),this.unsubscribeClosingNotification()},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},WindowSubscriber.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},WindowSubscriber.prototype.openWindow=function(innerSub){void 0===innerSub&&(innerSub=null),innerSub&&(this.remove(innerSub),innerSub.unsubscribe());var prevWindow=this.window;prevWindow&&prevWindow.complete();var window=this.window=new Subject.a;this.destination.next(window);var closingNotifier=Object(tryCatch.a)(this.closingSelector)();if(closingNotifier===errorObject.a){var err=errorObject.a.e;this.destination.error(err),this.window.error(err)}else this.add(this.closingNotification=Object(subscribeToResult.a)(this,closingNotifier))},WindowSubscriber}(OuterSubscriber.a);function withLatestFrom(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return function(source){var project;"function"==typeof args[args.length-1]&&(project=args.pop());var observables=args;return source.lift(new WithLatestFromOperator(observables,project))}}var WithLatestFromOperator=function(){function WithLatestFromOperator(observables,project){this.observables=observables,this.project=project}return WithLatestFromOperator.prototype.call=function(subscriber,source){return source.subscribe(new withLatestFrom_WithLatestFromSubscriber(subscriber,this.observables,this.project))},WithLatestFromOperator}(),withLatestFrom_WithLatestFromSubscriber=function(_super){function WithLatestFromSubscriber(destination,observables,project){var _this=_super.call(this,destination)||this;_this.observables=observables,_this.project=project,_this.toRespond=[];var len=observables.length;_this.values=new Array(len);for(var i=0;i<len;i++)_this.toRespond.push(i);for(i=0;i<len;i++){var observable=observables[i];_this.add(Object(subscribeToResult.a)(_this,observable,observable,i))}return _this}return tslib_es6.__extends(WithLatestFromSubscriber,_super),WithLatestFromSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue;var toRespond=this.toRespond;if(toRespond.length>0){var found=toRespond.indexOf(outerIndex);-1!==found&&toRespond.splice(found,1)}},WithLatestFromSubscriber.prototype.notifyComplete=function(){},WithLatestFromSubscriber.prototype._next=function(value){if(0===this.toRespond.length){var args=[value].concat(this.values);this.project?this._tryProject(args):this.destination.next(args)}},WithLatestFromSubscriber.prototype._tryProject=function(args){var result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},WithLatestFromSubscriber}(OuterSubscriber.a),zip=__webpack_require__(123);function zip_zip(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return function(source){return source.lift.call(zip.b.apply(void 0,[source].concat(observables)))}}function zipAll(project){return function(source){return source.lift(new zip.a(project))}}__webpack_require__.d(__webpack_exports__,"audit",(function(){return audit})),__webpack_require__.d(__webpack_exports__,"auditTime",(function(){return auditTime})),__webpack_require__.d(__webpack_exports__,"buffer",(function(){return buffer_buffer})),__webpack_require__.d(__webpack_exports__,"bufferCount",(function(){return bufferCount})),__webpack_require__.d(__webpack_exports__,"bufferTime",(function(){return bufferTime})),__webpack_require__.d(__webpack_exports__,"bufferToggle",(function(){return bufferToggle})),__webpack_require__.d(__webpack_exports__,"bufferWhen",(function(){return bufferWhen})),__webpack_require__.d(__webpack_exports__,"catchError",(function(){return catchError})),__webpack_require__.d(__webpack_exports__,"combineAll",(function(){return combineAll})),__webpack_require__.d(__webpack_exports__,"combineLatest",(function(){return combineLatest_combineLatest})),__webpack_require__.d(__webpack_exports__,"concat",(function(){return concat_concat})),__webpack_require__.d(__webpack_exports__,"concatAll",(function(){return concatAll.a})),__webpack_require__.d(__webpack_exports__,"concatMap",(function(){return concatMap})),__webpack_require__.d(__webpack_exports__,"concatMapTo",(function(){return concatMapTo})),__webpack_require__.d(__webpack_exports__,"count",(function(){return count_count})),__webpack_require__.d(__webpack_exports__,"debounce",(function(){return debounce})),__webpack_require__.d(__webpack_exports__,"debounceTime",(function(){return debounceTime})),__webpack_require__.d(__webpack_exports__,"defaultIfEmpty",(function(){return defaultIfEmpty})),__webpack_require__.d(__webpack_exports__,"delay",(function(){return delay_delay})),__webpack_require__.d(__webpack_exports__,"delayWhen",(function(){return delayWhen})),__webpack_require__.d(__webpack_exports__,"dematerialize",(function(){return dematerialize})),__webpack_require__.d(__webpack_exports__,"distinct",(function(){return distinct})),__webpack_require__.d(__webpack_exports__,"distinctUntilChanged",(function(){return distinctUntilChanged})),__webpack_require__.d(__webpack_exports__,"distinctUntilKeyChanged",(function(){return distinctUntilKeyChanged})),__webpack_require__.d(__webpack_exports__,"elementAt",(function(){return elementAt})),__webpack_require__.d(__webpack_exports__,"endWith",(function(){return endWith})),__webpack_require__.d(__webpack_exports__,"every",(function(){return every})),__webpack_require__.d(__webpack_exports__,"exhaust",(function(){return exhaust})),__webpack_require__.d(__webpack_exports__,"exhaustMap",(function(){return exhaustMap})),__webpack_require__.d(__webpack_exports__,"expand",(function(){return expand})),__webpack_require__.d(__webpack_exports__,"filter",(function(){return filter})),__webpack_require__.d(__webpack_exports__,"finalize",(function(){return finalize})),__webpack_require__.d(__webpack_exports__,"find",(function(){return find})),__webpack_require__.d(__webpack_exports__,"findIndex",(function(){return findIndex})),__webpack_require__.d(__webpack_exports__,"first",(function(){return first})),__webpack_require__.d(__webpack_exports__,"groupBy",(function(){return groupBy.b})),__webpack_require__.d(__webpack_exports__,"ignoreElements",(function(){return ignoreElements})),__webpack_require__.d(__webpack_exports__,"isEmpty",(function(){return isEmpty})),__webpack_require__.d(__webpack_exports__,"last",(function(){return last})),__webpack_require__.d(__webpack_exports__,"map",(function(){return map.a})),__webpack_require__.d(__webpack_exports__,"mapTo",(function(){return mapTo})),__webpack_require__.d(__webpack_exports__,"materialize",(function(){return materialize})),__webpack_require__.d(__webpack_exports__,"max",(function(){return max_max})),__webpack_require__.d(__webpack_exports__,"merge",(function(){return merge_merge})),__webpack_require__.d(__webpack_exports__,"mergeAll",(function(){return mergeAll.a})),__webpack_require__.d(__webpack_exports__,"mergeMap",(function(){return mergeMap.a})),__webpack_require__.d(__webpack_exports__,"flatMap",(function(){return mergeMap.a})),__webpack_require__.d(__webpack_exports__,"mergeMapTo",(function(){return mergeMapTo})),__webpack_require__.d(__webpack_exports__,"mergeScan",(function(){return mergeScan})),__webpack_require__.d(__webpack_exports__,"min",(function(){return min_min})),__webpack_require__.d(__webpack_exports__,"multicast",(function(){return multicast})),__webpack_require__.d(__webpack_exports__,"observeOn",(function(){return observeOn.b})),__webpack_require__.d(__webpack_exports__,"onErrorResumeNext",(function(){return onErrorResumeNext})),__webpack_require__.d(__webpack_exports__,"pairwise",(function(){return pairwise})),__webpack_require__.d(__webpack_exports__,"partition",(function(){return partition})),__webpack_require__.d(__webpack_exports__,"pluck",(function(){return pluck})),__webpack_require__.d(__webpack_exports__,"publish",(function(){return publish})),__webpack_require__.d(__webpack_exports__,"publishBehavior",(function(){return publishBehavior})),__webpack_require__.d(__webpack_exports__,"publishLast",(function(){return publishLast})),__webpack_require__.d(__webpack_exports__,"publishReplay",(function(){return publishReplay})),__webpack_require__.d(__webpack_exports__,"race",(function(){return race_race})),__webpack_require__.d(__webpack_exports__,"reduce",(function(){return reduce})),__webpack_require__.d(__webpack_exports__,"repeat",(function(){return repeat})),__webpack_require__.d(__webpack_exports__,"repeatWhen",(function(){return repeatWhen})),__webpack_require__.d(__webpack_exports__,"retry",(function(){return retry})),__webpack_require__.d(__webpack_exports__,"retryWhen",(function(){return retryWhen})),__webpack_require__.d(__webpack_exports__,"refCount",(function(){return operators_refCount.a})),__webpack_require__.d(__webpack_exports__,"sample",(function(){return sample})),__webpack_require__.d(__webpack_exports__,"sampleTime",(function(){return sampleTime})),__webpack_require__.d(__webpack_exports__,"scan",(function(){return scan})),__webpack_require__.d(__webpack_exports__,"sequenceEqual",(function(){return sequenceEqual})),__webpack_require__.d(__webpack_exports__,"share",(function(){return share})),__webpack_require__.d(__webpack_exports__,"shareReplay",(function(){return shareReplay})),__webpack_require__.d(__webpack_exports__,"single",(function(){return single})),__webpack_require__.d(__webpack_exports__,"skip",(function(){return skip})),__webpack_require__.d(__webpack_exports__,"skipLast",(function(){return skipLast})),__webpack_require__.d(__webpack_exports__,"skipUntil",(function(){return skipUntil})),__webpack_require__.d(__webpack_exports__,"skipWhile",(function(){return skipWhile})),__webpack_require__.d(__webpack_exports__,"startWith",(function(){return startWith})),__webpack_require__.d(__webpack_exports__,"subscribeOn",(function(){return subscribeOn})),__webpack_require__.d(__webpack_exports__,"switchAll",(function(){return switchAll})),__webpack_require__.d(__webpack_exports__,"switchMap",(function(){return switchMap})),__webpack_require__.d(__webpack_exports__,"switchMapTo",(function(){return switchMapTo})),__webpack_require__.d(__webpack_exports__,"take",(function(){return take})),__webpack_require__.d(__webpack_exports__,"takeLast",(function(){return takeLast})),__webpack_require__.d(__webpack_exports__,"takeUntil",(function(){return takeUntil})),__webpack_require__.d(__webpack_exports__,"takeWhile",(function(){return takeWhile})),__webpack_require__.d(__webpack_exports__,"tap",(function(){return tap})),__webpack_require__.d(__webpack_exports__,"throttle",(function(){return throttle})),__webpack_require__.d(__webpack_exports__,"throttleTime",(function(){return throttleTime})),__webpack_require__.d(__webpack_exports__,"throwIfEmpty",(function(){return throwIfEmpty})),__webpack_require__.d(__webpack_exports__,"timeInterval",(function(){return timeInterval})),__webpack_require__.d(__webpack_exports__,"timeout",(function(){return timeout})),__webpack_require__.d(__webpack_exports__,"timeoutWith",(function(){return timeoutWith})),__webpack_require__.d(__webpack_exports__,"timestamp",(function(){return timestamp})),__webpack_require__.d(__webpack_exports__,"toArray",(function(){return toArray})),__webpack_require__.d(__webpack_exports__,"window",(function(){return window_window})),__webpack_require__.d(__webpack_exports__,"windowCount",(function(){return windowCount})),__webpack_require__.d(__webpack_exports__,"windowTime",(function(){return windowTime_windowTime})),__webpack_require__.d(__webpack_exports__,"windowToggle",(function(){return windowToggle})),__webpack_require__.d(__webpack_exports__,"windowWhen",(function(){return windowWhen})),__webpack_require__.d(__webpack_exports__,"withLatestFrom",(function(){return withLatestFrom})),__webpack_require__.d(__webpack_exports__,"zip",(function(){return zip_zip})),__webpack_require__.d(__webpack_exports__,"zipAll",(function(){return zipAll}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EmptyError}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),EmptyError=function(_super){function EmptyError(){var _this=_super.call(this,"no elements in sequence")||this;return _this.name="EmptyError",Object.setPrototypeOf(_this,EmptyError.prototype),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(EmptyError,_super),EmptyError}(Error)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AsyncScheduler}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Scheduler__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(147),AsyncScheduler=function(_super){function AsyncScheduler(SchedulerAction,now){void 0===now&&(now=_Scheduler__WEBPACK_IMPORTED_MODULE_1__.a.now);var _this=_super.call(this,SchedulerAction,(function(){return AsyncScheduler.delegate&&AsyncScheduler.delegate!==_this?AsyncScheduler.delegate.now():now()}))||this;return _this.actions=[],_this.active=!1,_this.scheduled=void 0,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(AsyncScheduler,_super),AsyncScheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),AsyncScheduler.delegate&&AsyncScheduler.delegate!==this?AsyncScheduler.delegate.schedule(work,delay,state):_super.prototype.schedule.call(this,work,delay,state)},AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this.active)actions.push(action);else{var error;this.active=!0;do{if(error=action.execute(action.state,action.delay))break}while(action=actions.shift());if(this.active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}}},AsyncScheduler}(_Scheduler__WEBPACK_IMPORTED_MODULE_1__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AsyncSubject}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Subject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19),_Subscription__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),AsyncSubject=function(_super){function AsyncSubject(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.value=null,_this.hasNext=!1,_this.hasCompleted=!1,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(AsyncSubject,_super),AsyncSubject.prototype._subscribe=function(subscriber){return this.hasError?(subscriber.error(this.thrownError),_Subscription__WEBPACK_IMPORTED_MODULE_2__.a.EMPTY):this.hasCompleted&&this.hasNext?(subscriber.next(this.value),subscriber.complete(),_Subscription__WEBPACK_IMPORTED_MODULE_2__.a.EMPTY):_super.prototype._subscribe.call(this,subscriber)},AsyncSubject.prototype.next=function(value){this.hasCompleted||(this.value=value,this.hasNext=!0)},AsyncSubject.prototype.error=function(error){this.hasCompleted||_super.prototype.error.call(this,error)},AsyncSubject.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&_super.prototype.next.call(this,this.value),_super.prototype.complete.call(this)},AsyncSubject}(_Subject__WEBPACK_IMPORTED_MODULE_1__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),Action_Action=function(_super){function Action(scheduler,work){return _super.call(this)||this}return tslib_es6.__extends(Action,_super),Action.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),this},Action}(__webpack_require__(12).a);__webpack_require__.d(__webpack_exports__,"a",(function(){return AsyncAction_AsyncAction}));var AsyncAction_AsyncAction=function(_super){function AsyncAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this.pending=!1,_this}return tslib_es6.__extends(AsyncAction,_super),AsyncAction.prototype.schedule=function(state,delay){if(void 0===delay&&(delay=0),this.closed)return this;this.state=state;var id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.pending=!0,this.delay=delay,this.id=this.id||this.requestAsyncId(scheduler,this.id,delay),this},AsyncAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),setInterval(scheduler.flush.bind(scheduler,this),delay)},AsyncAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(void 0===delay&&(delay=0),null!==delay&&this.delay===delay&&!1===this.pending)return id;clearInterval(id)},AsyncAction.prototype.execute=function(state,delay){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var error=this._execute(state,delay);if(error)return error;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(state,delay){var errored=!1,errorValue=void 0;try{this.work(state)}catch(e){errored=!0,errorValue=!!e&&e||new Error(e)}if(errored)return this.unsubscribe(),errorValue},AsyncAction.prototype._unsubscribe=function(){var id=this.id,scheduler=this.scheduler,actions=scheduler.actions,index=actions.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==index&&actions.splice(index,1),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null)),this.delay=null},AsyncAction}(Action_Action)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isNumeric}));var _isArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25);function isNumeric(val){return!Object(_isArray__WEBPACK_IMPORTED_MODULE_0__.a)(val)&&val-parseFloat(val)+1>=0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};exports.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};exports.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(288),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports,__webpack_require__){"use strict";const nameStartChar=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",nameRegexp="["+nameStartChar+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",regexName=new RegExp("^"+nameRegexp+"$");exports.isExist=function(v){return void 0!==v},exports.isEmptyObject=function(obj){return 0===Object.keys(obj).length},exports.merge=function(target,a,arrayMode){if(a){const keys=Object.keys(a),len=keys.length;for(let i=0;i<len;i++)target[keys[i]]="strict"===arrayMode?[a[keys[i]]]:a[keys[i]]}},exports.getValue=function(v){return exports.isExist(v)?v:""},exports.buildOptions=function(options,defaultOptions,props){var newOptions={};if(!options)return defaultOptions;for(let i=0;i<props.length;i++)void 0!==options[props[i]]?newOptions[props[i]]=options[props[i]]:newOptions[props[i]]=defaultOptions[props[i]];return newOptions},exports.isTagNameInArrayMode=function(tagName,arrayMode,parentTagName){return!1!==arrayMode&&(arrayMode instanceof RegExp?arrayMode.test(tagName):"function"==typeof arrayMode?!!arrayMode(tagName,parentTagName):"strict"===arrayMode)},exports.isName=function(string){const match=regexName.exec(string);return!(null==match)},exports.getAllMatches=function(string,regex){const matches=[];let match=regex.exec(string);for(;match;){const allmatches=[],len=match.length;for(let index=0;index<len;index++)allmatches.push(match[index]);matches.push(allmatches),match=regex.exec(string)}return matches},exports.nameRegexp=nameRegexp},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var Observable=__webpack_require__(6),ConnectableObservable=__webpack_require__(167),groupBy=__webpack_require__(154),observable=__webpack_require__(73),Subject=__webpack_require__(19),BehaviorSubject=__webpack_require__(168),ReplaySubject=__webpack_require__(117),AsyncSubject=__webpack_require__(89),asap=__webpack_require__(127),scheduler_async=__webpack_require__(24),queue=__webpack_require__(176),tslib_es6=__webpack_require__(0),AsyncAction=__webpack_require__(90),AnimationFrameAction_AnimationFrameAction=function(_super){function AnimationFrameAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this}return tslib_es6.__extends(AnimationFrameAction,_super),AnimationFrameAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&delay>0?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):(scheduler.actions.push(this),scheduler.scheduled||(scheduler.scheduled=requestAnimationFrame((function(){return scheduler.flush(null)}))))},AnimationFrameAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(void 0===delay&&(delay=0),null!==delay&&delay>0||null===delay&&this.delay>0)return _super.prototype.recycleAsyncId.call(this,scheduler,id,delay);0===scheduler.actions.length&&(cancelAnimationFrame(id),scheduler.scheduled=void 0)},AnimationFrameAction}(AsyncAction.a),AsyncScheduler=__webpack_require__(88),animationFrame=new(function(_super){function AnimationFrameScheduler(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.__extends(AnimationFrameScheduler,_super),AnimationFrameScheduler.prototype.flush=function(action){this.active=!0,this.scheduled=void 0;var error,actions=this.actions,index=-1,count=actions.length;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay))break}while(++index<count&&(action=actions.shift()));if(this.active=!1,error){for(;++index<count&&(action=actions.shift());)action.unsubscribe();throw error}},AnimationFrameScheduler}(AsyncScheduler.a))(AnimationFrameAction_AnimationFrameAction),VirtualTimeScheduler_VirtualTimeScheduler=function(_super){function VirtualTimeScheduler(SchedulerAction,maxFrames){void 0===SchedulerAction&&(SchedulerAction=VirtualTimeScheduler_VirtualAction),void 0===maxFrames&&(maxFrames=Number.POSITIVE_INFINITY);var _this=_super.call(this,SchedulerAction,(function(){return _this.frame}))||this;return _this.maxFrames=maxFrames,_this.frame=0,_this.index=-1,_this}return tslib_es6.__extends(VirtualTimeScheduler,_super),VirtualTimeScheduler.prototype.flush=function(){for(var error,action,actions=this.actions,maxFrames=this.maxFrames;(action=actions.shift())&&(this.frame=action.delay)<=maxFrames&&!(error=action.execute(action.state,action.delay)););if(error){for(;action=actions.shift();)action.unsubscribe();throw error}},VirtualTimeScheduler.frameTimeFactor=10,VirtualTimeScheduler}(AsyncScheduler.a),VirtualTimeScheduler_VirtualAction=function(_super){function VirtualAction(scheduler,work,index){void 0===index&&(index=scheduler.index+=1);var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this.index=index,_this.active=!0,_this.index=scheduler.index=index,_this}return tslib_es6.__extends(VirtualAction,_super),VirtualAction.prototype.schedule=function(state,delay){if(void 0===delay&&(delay=0),!this.id)return _super.prototype.schedule.call(this,state,delay);this.active=!1;var action=new VirtualAction(this.scheduler,this.work);return this.add(action),action.schedule(state,delay)},VirtualAction.prototype.requestAsyncId=function(scheduler,id,delay){void 0===delay&&(delay=0),this.delay=scheduler.frame+delay;var actions=scheduler.actions;return actions.push(this),actions.sort(VirtualAction.sortActions),!0},VirtualAction.prototype.recycleAsyncId=function(scheduler,id,delay){void 0===delay&&(delay=0)},VirtualAction.prototype._execute=function(state,delay){if(!0===this.active)return _super.prototype._execute.call(this,state,delay)},VirtualAction.sortActions=function(a,b){return a.delay===b.delay?a.index===b.index?0:a.index>b.index?1:-1:a.delay>b.delay?1:-1},VirtualAction}(AsyncAction.a),Scheduler=__webpack_require__(147),Subscription=__webpack_require__(12),Subscriber=__webpack_require__(4),Notification=__webpack_require__(69),pipe=__webpack_require__(107),noop=__webpack_require__(51),identity=__webpack_require__(68);function isObservable(obj){return!!obj&&(obj instanceof Observable.a||"function"==typeof obj.lift&&"function"==typeof obj.subscribe)}var ArgumentOutOfRangeError=__webpack_require__(80),EmptyError=__webpack_require__(87),ObjectUnsubscribedError=__webpack_require__(74),UnsubscriptionError=__webpack_require__(108),TimeoutError=__webpack_require__(170),map=__webpack_require__(28),isArray=__webpack_require__(25),isScheduler=__webpack_require__(26);function bindCallback(callbackFunc,resultSelector,scheduler){if(resultSelector){if(!Object(isScheduler.a)(resultSelector))return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return bindCallback(callbackFunc,scheduler).apply(void 0,args).pipe(Object(map.a)((function(args){return Object(isArray.a)(args)?resultSelector.apply(void 0,args):resultSelector(args)})))};scheduler=resultSelector}return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var subject,context=this,params={context:context,subject:subject,callbackFunc:callbackFunc,scheduler:scheduler};return new Observable.a((function(subscriber){if(scheduler){var state={args:args,subscriber:subscriber,params:params};return scheduler.schedule(dispatch,0,state)}if(!subject){subject=new AsyncSubject.a;try{callbackFunc.apply(context,args.concat([function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];subject.next(innerArgs.length<=1?innerArgs[0]:innerArgs),subject.complete()}]))}catch(err){subject.error(err)}}return subject.subscribe(subscriber)}))}}function dispatch(state){var _this=this,args=state.args,subscriber=state.subscriber,params=state.params,callbackFunc=params.callbackFunc,context=params.context,scheduler=params.scheduler,subject=params.subject;if(!subject){subject=params.subject=new AsyncSubject.a;try{callbackFunc.apply(context,args.concat([function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];var value=innerArgs.length<=1?innerArgs[0]:innerArgs;_this.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))}]))}catch(err){subject.error(err)}}this.add(subject.subscribe(subscriber))}function dispatchNext(state){var value=state.value,subject=state.subject;subject.next(value),subject.complete()}function bindNodeCallback(callbackFunc,resultSelector,scheduler){if(resultSelector){if(!Object(isScheduler.a)(resultSelector))return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return bindNodeCallback(callbackFunc,scheduler).apply(void 0,args).pipe(Object(map.a)((function(args){return Object(isArray.a)(args)?resultSelector.apply(void 0,args):resultSelector(args)})))};scheduler=resultSelector}return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var params={subject:void 0,args:args,callbackFunc:callbackFunc,scheduler:scheduler,context:this};return new Observable.a((function(subscriber){var context=params.context,subject=params.subject;if(scheduler)return scheduler.schedule(bindNodeCallback_dispatch,0,{params:params,subscriber:subscriber,context:context});if(!subject){subject=params.subject=new AsyncSubject.a;try{callbackFunc.apply(context,args.concat([function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];var err=innerArgs.shift();err?subject.error(err):(subject.next(innerArgs.length<=1?innerArgs[0]:innerArgs),subject.complete())}]))}catch(err){subject.error(err)}}return subject.subscribe(subscriber)}))}}function bindNodeCallback_dispatch(state){var _this=this,params=state.params,subscriber=state.subscriber,context=state.context,callbackFunc=params.callbackFunc,args=params.args,scheduler=params.scheduler,subject=params.subject;if(!subject){subject=params.subject=new AsyncSubject.a;try{callbackFunc.apply(context,args.concat([function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];var err=innerArgs.shift();if(err)_this.add(scheduler.schedule(bindNodeCallback_dispatchError,0,{err:err,subject:subject}));else{var value=innerArgs.length<=1?innerArgs[0]:innerArgs;_this.add(scheduler.schedule(bindNodeCallback_dispatchNext,0,{value:value,subject:subject}))}}]))}catch(err){this.add(scheduler.schedule(bindNodeCallback_dispatchError,0,{err:err,subject:subject}))}}this.add(subject.subscribe(subscriber))}function bindNodeCallback_dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value),subject.complete()}function bindNodeCallback_dispatchError(arg){var err=arg.err;arg.subject.error(err)}var combineLatest=__webpack_require__(120),concat=__webpack_require__(75),defer=__webpack_require__(122),empty=__webpack_require__(23),subscribeToResult=__webpack_require__(9);function forkJoin(){for(var resultSelector,sources=[],_i=0;_i<arguments.length;_i++)sources[_i]=arguments[_i];return"function"==typeof sources[sources.length-1]&&(resultSelector=sources.pop()),1===sources.length&&Object(isArray.a)(sources[0])&&(sources=sources[0]),0===sources.length?empty.a:resultSelector?forkJoin(sources).pipe(Object(map.a)((function(args){return resultSelector.apply(void 0,args)}))):new Observable.a((function(subscriber){return new forkJoin_ForkJoinSubscriber(subscriber,sources)}))}var forkJoin_ForkJoinSubscriber=function(_super){function ForkJoinSubscriber(destination,sources){var _this=_super.call(this,destination)||this;_this.sources=sources,_this.completed=0,_this.haveValues=0;var len=sources.length;_this.values=new Array(len);for(var i=0;i<len;i++){var source=sources[i],innerSubscription=Object(subscribeToResult.a)(_this,source,null,i);innerSubscription&&_this.add(innerSubscription)}return _this}return tslib_es6.__extends(ForkJoinSubscriber,_super),ForkJoinSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue,innerSub._hasValue||(innerSub._hasValue=!0,this.haveValues++)},ForkJoinSubscriber.prototype.notifyComplete=function(innerSub){var destination=this.destination,haveValues=this.haveValues,values=this.values,len=values.length;innerSub._hasValue?(this.completed++,this.completed===len&&(haveValues===len&&destination.next(values),destination.complete())):destination.complete()},ForkJoinSubscriber}(__webpack_require__(10).a),from=__webpack_require__(39),isFunction=__webpack_require__(81);Object.prototype.toString;function fromEvent(target,eventName,options,resultSelector){return Object(isFunction.a)(options)&&(resultSelector=options,options=void 0),resultSelector?fromEvent(target,eventName,options).pipe(Object(map.a)((function(args){return Object(isArray.a)(args)?resultSelector.apply(void 0,args):resultSelector(args)}))):new Observable.a((function(subscriber){setupSubscription(target,eventName,(function(e){arguments.length>1?subscriber.next(Array.prototype.slice.call(arguments)):subscriber.next(e)}),subscriber,options)}))}function setupSubscription(sourceObj,eventName,handler,subscriber,options){var unsubscribe;if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.addEventListener&&"function"==typeof sourceObj.removeEventListener}(sourceObj)){var source_1=sourceObj;sourceObj.addEventListener(eventName,handler,options),unsubscribe=function(){return source_1.removeEventListener(eventName,handler,options)}}else if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.on&&"function"==typeof sourceObj.off}(sourceObj)){var source_2=sourceObj;sourceObj.on(eventName,handler),unsubscribe=function(){return source_2.off(eventName,handler)}}else if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.addListener&&"function"==typeof sourceObj.removeListener}(sourceObj)){var source_3=sourceObj;sourceObj.addListener(eventName,handler),unsubscribe=function(){return source_3.removeListener(eventName,handler)}}else{if(!sourceObj||!sourceObj.length)throw new TypeError("Invalid event target");for(var i=0,len=sourceObj.length;i<len;i++)setupSubscription(sourceObj[i],eventName,handler,subscriber,options)}subscriber.add(unsubscribe)}function fromEventPattern(addHandler,removeHandler,resultSelector){return resultSelector?fromEventPattern(addHandler,removeHandler).pipe(Object(map.a)((function(args){return Object(isArray.a)(args)?resultSelector.apply(void 0,args):resultSelector(args)}))):new Observable.a((function(subscriber){var retValue,handler=function(){for(var e=[],_i=0;_i<arguments.length;_i++)e[_i]=arguments[_i];return subscriber.next(1===e.length?e[0]:e)};try{retValue=addHandler(handler)}catch(err){return void subscriber.error(err)}if(Object(isFunction.a)(removeHandler))return function(){return removeHandler(handler,retValue)}}))}function generate(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler){var resultSelector,initialState;if(1==arguments.length){var options=initialStateOrOptions;initialState=options.initialState,condition=options.condition,iterate=options.iterate,resultSelector=options.resultSelector||identity.a,scheduler=options.scheduler}else void 0===resultSelectorOrObservable||Object(isScheduler.a)(resultSelectorOrObservable)?(initialState=initialStateOrOptions,resultSelector=identity.a,scheduler=resultSelectorOrObservable):(initialState=initialStateOrOptions,resultSelector=resultSelectorOrObservable);return new Observable.a((function(subscriber){var state=initialState;if(scheduler)return scheduler.schedule(generate_dispatch,0,{subscriber:subscriber,iterate:iterate,condition:condition,resultSelector:resultSelector,state:state});for(;;){if(condition){var conditionResult=void 0;try{conditionResult=condition(state)}catch(err){return void subscriber.error(err)}if(!conditionResult){subscriber.complete();break}}var value=void 0;try{value=resultSelector(state)}catch(err){return void subscriber.error(err)}if(subscriber.next(value),subscriber.closed)break;try{state=iterate(state)}catch(err){return void subscriber.error(err)}}}))}function generate_dispatch(state){var subscriber=state.subscriber,condition=state.condition;if(!subscriber.closed){if(state.needIterate)try{state.state=state.iterate(state.state)}catch(err){return void subscriber.error(err)}else state.needIterate=!0;if(condition){var conditionResult=void 0;try{conditionResult=condition(state.state)}catch(err){return void subscriber.error(err)}if(!conditionResult)return void subscriber.complete();if(subscriber.closed)return}var value;try{value=state.resultSelector(state.state)}catch(err){return void subscriber.error(err)}if(!subscriber.closed&&(subscriber.next(value),!subscriber.closed))return this.schedule(state)}}function iif(condition,trueResult,falseResult){return void 0===trueResult&&(trueResult=empty.a),void 0===falseResult&&(falseResult=empty.a),Object(defer.a)((function(){return condition()?trueResult:falseResult}))}var isNumeric=__webpack_require__(91);function interval(period,scheduler){return void 0===period&&(period=0),void 0===scheduler&&(scheduler=scheduler_async.a),(!Object(isNumeric.a)(period)||period<0)&&(period=0),scheduler&&"function"==typeof scheduler.schedule||(scheduler=scheduler_async.a),new Observable.a((function(subscriber){return subscriber.add(scheduler.schedule(interval_dispatch,period,{subscriber:subscriber,counter:0,period:period})),subscriber}))}function interval_dispatch(state){var subscriber=state.subscriber,counter=state.counter,period=state.period;subscriber.next(counter),this.schedule({subscriber:subscriber,counter:counter+1,period:period},period)}var merge=__webpack_require__(172),NEVER=new Observable.a(noop.a);function never(){return NEVER}var of=__webpack_require__(118);function onErrorResumeNext(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i]=arguments[_i];if(0===sources.length)return empty.a;var first=sources[0],remainder=sources.slice(1);return 1===sources.length&&Object(isArray.a)(first)?onErrorResumeNext.apply(void 0,first):new Observable.a((function(subscriber){var subNext=function(){return subscriber.add(onErrorResumeNext.apply(void 0,remainder).subscribe(subscriber))};return Object(from.a)(first).subscribe({next:function(value){subscriber.next(value)},error:subNext,complete:subNext})}))}function pairs(obj,scheduler){return scheduler?new Observable.a((function(subscriber){var keys=Object.keys(obj),subscription=new Subscription.a;return subscription.add(scheduler.schedule(pairs_dispatch,0,{keys:keys,index:0,subscriber:subscriber,subscription:subscription,obj:obj})),subscription})):new Observable.a((function(subscriber){for(var keys=Object.keys(obj),i=0;i<keys.length&&!subscriber.closed;i++){var key=keys[i];obj.hasOwnProperty(key)&&subscriber.next([key,obj[key]])}subscriber.complete()}))}function pairs_dispatch(state){var keys=state.keys,index=state.index,subscriber=state.subscriber,subscription=state.subscription,obj=state.obj;if(!subscriber.closed)if(index<keys.length){var key=keys[index];subscriber.next([key,obj[key]]),subscription.add(this.schedule({keys:keys,index:index+1,subscriber:subscriber,subscription:subscription,obj:obj}))}else subscriber.complete()}var race=__webpack_require__(173);function range(start,count,scheduler){return void 0===start&&(start=0),void 0===count&&(count=0),new Observable.a((function(subscriber){var index=0,current=start;if(scheduler)return scheduler.schedule(range_dispatch,0,{index:index,count:count,start:start,subscriber:subscriber});for(;;){if(index++>=count){subscriber.complete();break}if(subscriber.next(current++),subscriber.closed)break}}))}function range_dispatch(state){var start=state.start,index=state.index,count=state.count,subscriber=state.subscriber;index>=count?subscriber.complete():(subscriber.next(start),subscriber.closed||(state.index=index+1,state.start=start+1,this.schedule(state)))}var throwError=__webpack_require__(119),timer=__webpack_require__(174);function using(resourceFactory,observableFactory){return new Observable.a((function(subscriber){var resource,result;try{resource=resourceFactory()}catch(err){return void subscriber.error(err)}try{result=observableFactory(resource)}catch(err){return void subscriber.error(err)}var subscription=(result?Object(from.a)(result):empty.a).subscribe(subscriber);return function(){subscription.unsubscribe(),resource&&resource.unsubscribe()}}))}var zip=__webpack_require__(123),config=__webpack_require__(49);__webpack_require__.d(__webpack_exports__,"Observable",(function(){return Observable.a})),__webpack_require__.d(__webpack_exports__,"ConnectableObservable",(function(){return ConnectableObservable.a})),__webpack_require__.d(__webpack_exports__,"GroupedObservable",(function(){return groupBy.a})),__webpack_require__.d(__webpack_exports__,"observable",(function(){return observable.a})),__webpack_require__.d(__webpack_exports__,"Subject",(function(){return Subject.a})),__webpack_require__.d(__webpack_exports__,"BehaviorSubject",(function(){return BehaviorSubject.a})),__webpack_require__.d(__webpack_exports__,"ReplaySubject",(function(){return ReplaySubject.a})),__webpack_require__.d(__webpack_exports__,"AsyncSubject",(function(){return AsyncSubject.a})),__webpack_require__.d(__webpack_exports__,"asapScheduler",(function(){return asap.a})),__webpack_require__.d(__webpack_exports__,"asyncScheduler",(function(){return scheduler_async.a})),__webpack_require__.d(__webpack_exports__,"queueScheduler",(function(){return queue.a})),__webpack_require__.d(__webpack_exports__,"animationFrameScheduler",(function(){return animationFrame})),__webpack_require__.d(__webpack_exports__,"VirtualTimeScheduler",(function(){return VirtualTimeScheduler_VirtualTimeScheduler})),__webpack_require__.d(__webpack_exports__,"VirtualAction",(function(){return VirtualTimeScheduler_VirtualAction})),__webpack_require__.d(__webpack_exports__,"Scheduler",(function(){return Scheduler.a})),__webpack_require__.d(__webpack_exports__,"Subscription",(function(){return Subscription.a})),__webpack_require__.d(__webpack_exports__,"Subscriber",(function(){return Subscriber.a})),__webpack_require__.d(__webpack_exports__,"Notification",(function(){return Notification.a})),__webpack_require__.d(__webpack_exports__,"pipe",(function(){return pipe.a})),__webpack_require__.d(__webpack_exports__,"noop",(function(){return noop.a})),__webpack_require__.d(__webpack_exports__,"identity",(function(){return identity.a})),__webpack_require__.d(__webpack_exports__,"isObservable",(function(){return isObservable})),__webpack_require__.d(__webpack_exports__,"ArgumentOutOfRangeError",(function(){return ArgumentOutOfRangeError.a})),__webpack_require__.d(__webpack_exports__,"EmptyError",(function(){return EmptyError.a})),__webpack_require__.d(__webpack_exports__,"ObjectUnsubscribedError",(function(){return ObjectUnsubscribedError.a})),__webpack_require__.d(__webpack_exports__,"UnsubscriptionError",(function(){return UnsubscriptionError.a})),__webpack_require__.d(__webpack_exports__,"TimeoutError",(function(){return TimeoutError.a})),__webpack_require__.d(__webpack_exports__,"bindCallback",(function(){return bindCallback})),__webpack_require__.d(__webpack_exports__,"bindNodeCallback",(function(){return bindNodeCallback})),__webpack_require__.d(__webpack_exports__,"combineLatest",(function(){return combineLatest.b})),__webpack_require__.d(__webpack_exports__,"concat",(function(){return concat.a})),__webpack_require__.d(__webpack_exports__,"defer",(function(){return defer.a})),__webpack_require__.d(__webpack_exports__,"empty",(function(){return empty.b})),__webpack_require__.d(__webpack_exports__,"forkJoin",(function(){return forkJoin})),__webpack_require__.d(__webpack_exports__,"from",(function(){return from.a})),__webpack_require__.d(__webpack_exports__,"fromEvent",(function(){return fromEvent})),__webpack_require__.d(__webpack_exports__,"fromEventPattern",(function(){return fromEventPattern})),__webpack_require__.d(__webpack_exports__,"generate",(function(){return generate})),__webpack_require__.d(__webpack_exports__,"iif",(function(){return iif})),__webpack_require__.d(__webpack_exports__,"interval",(function(){return interval})),__webpack_require__.d(__webpack_exports__,"merge",(function(){return merge.a})),__webpack_require__.d(__webpack_exports__,"never",(function(){return never})),__webpack_require__.d(__webpack_exports__,"of",(function(){return of.a})),__webpack_require__.d(__webpack_exports__,"onErrorResumeNext",(function(){return onErrorResumeNext})),__webpack_require__.d(__webpack_exports__,"pairs",(function(){return pairs})),__webpack_require__.d(__webpack_exports__,"race",(function(){return race.a})),__webpack_require__.d(__webpack_exports__,"range",(function(){return range})),__webpack_require__.d(__webpack_exports__,"throwError",(function(){return throwError.a})),__webpack_require__.d(__webpack_exports__,"timer",(function(){return timer.a})),__webpack_require__.d(__webpack_exports__,"using",(function(){return using})),__webpack_require__.d(__webpack_exports__,"zip",(function(){return zip.b})),__webpack_require__.d(__webpack_exports__,"EMPTY",(function(){return empty.a})),__webpack_require__.d(__webpack_exports__,"NEVER",(function(){return NEVER})),__webpack_require__.d(__webpack_exports__,"config",(function(){return config.a}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Platform})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getAmplifyUserAgent}));var Platform={userAgent:"aws-amplify/3.8.13 js",product:"",navigator:null,isReactNative:!1};if("undefined"!=typeof navigator&&navigator.product)switch(Platform.product=navigator.product||"",Platform.navigator=navigator||null,navigator.product){case"ReactNative":Platform.userAgent="aws-amplify/3.8.13 react-native",Platform.isReactNative=!0;break;default:Platform.userAgent="aws-amplify/3.8.13 js",Platform.isReactNative=!1}var getAmplifyUserAgent=function(){return Platform.userAgent}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(338)},function(module,__webpack_exports__,__webpack_require__){"use strict";function hostReportError(err){setTimeout((function(){throw err}))}__webpack_require__.d(__webpack_exports__,"a",(function(){return hostReportError}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return rxSubscriber}));var rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},function(module,__webpack_exports__,__webpack_require__){"use strict";var escapeUri=function(uri){return encodeURIComponent(uri).replace(/[!'()*]/g,hexEncode)},hexEncode=function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()};__webpack_require__.d(__webpack_exports__,"a",(function(){return escapeUri}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(66),METADATA_KEY=__webpack_require__(45);function _tagParameterOrProperty(metadataKey,annotationTarget,propertyName,metadata,parameterIndex){var paramsOrPropertiesMetadata={},isParameterDecorator="number"==typeof parameterIndex,key=void 0!==parameterIndex&&isParameterDecorator?parameterIndex.toString():propertyName;if(isParameterDecorator&&void 0!==propertyName)throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(metadataKey,annotationTarget)&&(paramsOrPropertiesMetadata=Reflect.getMetadata(metadataKey,annotationTarget));var paramOrPropertyMetadata=paramsOrPropertiesMetadata[key];if(Array.isArray(paramOrPropertyMetadata))for(var _i=0,paramOrPropertyMetadata_1=paramOrPropertyMetadata;_i<paramOrPropertyMetadata_1.length;_i++){var m=paramOrPropertyMetadata_1[_i];if(m.key===metadata.key)throw new Error(ERROR_MSGS.DUPLICATED_METADATA+" "+m.key.toString())}else paramOrPropertyMetadata=[];paramOrPropertyMetadata.push(metadata),paramsOrPropertiesMetadata[key]=paramOrPropertyMetadata,Reflect.defineMetadata(metadataKey,paramsOrPropertiesMetadata,annotationTarget)}function _decorate(decorators,target){Reflect.decorate(decorators,target)}function _param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}exports.tagParameter=function(annotationTarget,propertyName,parameterIndex,metadata){_tagParameterOrProperty(METADATA_KEY.TAGGED,annotationTarget,propertyName,metadata,parameterIndex)},exports.tagProperty=function(annotationTarget,propertyName,metadata){_tagParameterOrProperty(METADATA_KEY.TAGGED_PROP,annotationTarget.constructor,propertyName,metadata)},exports.decorate=function(decorator,target,parameterIndex){"number"==typeof parameterIndex?_decorate([_param(parameterIndex,decorator)],target):"string"==typeof parameterIndex?Reflect.decorate([decorator],target,parameterIndex):_decorate([decorator],target)}},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(16).Buffer,Transform=__webpack_require__(195).Transform,StringDecoder=__webpack_require__(198).StringDecoder;function CipherBase(hashMode){Transform.call(this),this.hashMode="string"==typeof hashMode,this.hashMode?this[hashMode]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}__webpack_require__(15)(CipherBase,Transform),CipherBase.prototype.update=function(data,inputEnc,outputEnc){"string"==typeof data&&(data=Buffer.from(data,inputEnc));var outData=this._update(data);return this.hashMode?this:(outputEnc&&(outData=this._toString(outData,outputEnc)),outData)},CipherBase.prototype.setAutoPadding=function(){},CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},CipherBase.prototype._transform=function(data,_,next){var err;try{this.hashMode?this._update(data):this.push(this._update(data))}catch(e){err=e}finally{next(err)}},CipherBase.prototype._flush=function(done){var err;try{this.push(this.__final())}catch(e){err=e}done(err)},CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this.__final()||Buffer.alloc(0);return outputEnc&&(outData=this._toString(outData,outputEnc,!0)),outData},CipherBase.prototype._toString=function(value,enc,fin){if(this._decoder||(this._decoder=new StringDecoder(enc),this._encoding=enc),this._encoding!==enc)throw new Error("can't switch encodings");var out=this._decoder.write(value);return fin&&(out+=this._decoder.end()),out},module.exports=CipherBase},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var idCounter=0;exports.id=function(){return idCounter++}},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(155),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=__webpack_require__(137);util.inherits=__webpack_require__(15);var Readable=__webpack_require__(245),Writable=__webpack_require__(197);util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),pna.nextTick(cb,err)}},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){"use strict";var ReflectOwnKeys,R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function $getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing,warning;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),(m=$getMaxListeners(target))>0&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,warning=w,console&&console.warn&&console.warn(warning)}return target}function onceWrapper(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,ReflectApply(this.listener,this.target,args))}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(void 0===events)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(void 0!==events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){var er;if(args.length>0&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else{var len=handler.length,listeners=arrayClone(handler,len);for(i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function(type,listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);return this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function(type,listener){var list,events,position,i,originalListener;if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);if(void 0===(events=this._events))return this;if(void 0===(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(type){var listeners,events,i;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var key,keys=Object.keys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return pipe})),__webpack_require__.d(__webpack_exports__,"b",(function(){return pipeFromArray}));var _noop__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(51);function pipe(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return pipeFromArray(fns)}function pipeFromArray(fns){return fns?1===fns.length?fns[0]:function(input){return fns.reduce((function(prev,fn){return fn(prev)}),input)}:_noop__WEBPACK_IMPORTED_MODULE_0__.a}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return UnsubscriptionError}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),UnsubscriptionError=function(_super){function UnsubscriptionError(errors){var _this=_super.call(this,errors?errors.length+" errors occurred during unsubscription:\n  "+errors.map((function(err,i){return i+1+") "+err.toString()})).join("\n  "):"")||this;return _this.errors=errors,_this.name="UnsubscriptionError",Object.setPrototypeOf(_this,UnsubscriptionError.prototype),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(UnsubscriptionError,_super),UnsubscriptionError}(Error)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){if(void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),!0,module.exports=factory(),!!0){var OldCookies=window.Cookies,api=window.Cookies=factory();api.noConflict=function(){return window.Cookies=OldCookies,api}}}((function(){function extend(){for(var i=0,result={};i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes)result[key]=attributes[key]}return result}function decode(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function init(converter){function api(){}function set(key,value,attributes){if("undefined"!=typeof document){"number"==typeof(attributes=extend({path:"/"},api.defaults,attributes)).expires&&(attributes.expires=new Date(1*new Date+864e5*attributes.expires)),attributes.expires=attributes.expires?attributes.expires.toUTCString():"";try{var result=JSON.stringify(value);/^[\{\[]/.test(result)&&(value=result)}catch(e){}value=converter.write?converter.write(value,key):encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),key=encodeURIComponent(String(key)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName]&&(stringifiedAttributes+="="+attributes[attributeName].split(";")[0]));return document.cookie=key+"="+value+stringifiedAttributes}}function get(key,json){if("undefined"!=typeof document){for(var jar={},cookies=document.cookie?document.cookie.split("; "):[],i=0;i<cookies.length;i++){var parts=cookies[i].split("="),cookie=parts.slice(1).join("=");json||'"'!==cookie.charAt(0)||(cookie=cookie.slice(1,-1));try{var name=decode(parts[0]);if(cookie=(converter.read||converter)(cookie,name)||decode(cookie),json)try{cookie=JSON.parse(cookie)}catch(e){}if(jar[name]=cookie,key===name)break}catch(e){}}return key?jar[key]:jar}}return api.set=set,api.get=function(key){return get(key,!1)},api.getJSON=function(key){return get(key,!0)},api.remove=function(key,attributes){set(key,"",extend(attributes,{expires:-1}))},api.defaults={},api.withConverter=init,api}((function(){}))}))},function(module,exports,__webpack_require__){"use strict";(function(global,process){var Buffer=__webpack_require__(16).Buffer,crypto=global.crypto||global.msCrypto;crypto&&crypto.getRandomValues?module.exports=function(size,cb){if(size>4294967295)throw new RangeError("requested too many random bytes");var bytes=Buffer.allocUnsafe(size);if(size>0)if(size>65536)for(var generated=0;generated<size;generated+=65536)crypto.getRandomValues(bytes.slice(generated,generated+65536));else crypto.getRandomValues(bytes);if("function"==typeof cb)return process.nextTick((function(){cb(null,bytes)}));return bytes}:module.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,__webpack_require__(54),__webpack_require__(76))},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(16).Buffer;function Hash(blockSize,finalSize){this._block=Buffer.alloc(blockSize),this._finalSize=finalSize,this._blockSize=blockSize,this._len=0}Hash.prototype.update=function(data,enc){"string"==typeof data&&(enc=enc||"utf8",data=Buffer.from(data,enc));for(var block=this._block,blockSize=this._blockSize,length=data.length,accum=this._len,offset=0;offset<length;){for(var assigned=accum%blockSize,remainder=Math.min(length-offset,blockSize-assigned),i=0;i<remainder;i++)block[assigned+i]=data[offset+i];offset+=remainder,(accum+=remainder)%blockSize==0&&this._update(block)}return this._len+=length,this},Hash.prototype.digest=function(enc){var rem=this._len%this._blockSize;this._block[rem]=128,this._block.fill(0,rem+1),rem>=this._finalSize&&(this._update(this._block),this._block.fill(0));var bits=8*this._len;if(bits<=4294967295)this._block.writeUInt32BE(bits,this._blockSize-4);else{var lowBits=(4294967295&bits)>>>0,highBits=(bits-lowBits)/4294967296;this._block.writeUInt32BE(highBits,this._blockSize-8),this._block.writeUInt32BE(lowBits,this._blockSize-4)}this._update(this._block);var hash=this._hash();return enc?hash.toString(enc):hash},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=Hash},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(509),getValue=__webpack_require__(512);module.exports=function(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _datastore_datastore__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(146);__webpack_require__.d(__webpack_exports__,"a",(function(){return _datastore_datastore__WEBPACK_IMPORTED_MODULE_0__.a}));var _predicates__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14);__webpack_require__.d(__webpack_exports__,"b",(function(){return _predicates__WEBPACK_IMPORTED_MODULE_1__.b}));var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);__webpack_require__.d(__webpack_exports__,"c",(function(){return _types__WEBPACK_IMPORTED_MODULE_2__.e})),__webpack_require__.d(__webpack_exports__,"d",(function(){return _types__WEBPACK_IMPORTED_MODULE_2__.n}))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0},function(module,__webpack_exports__,__webpack_require__){"use strict";var ConsoleLogger=__webpack_require__(84),Hub=__webpack_require__(186),Parser=__webpack_require__(285),Amplify=__webpack_require__(40),ClientDevice=__webpack_require__(309),Signer=__webpack_require__(286),JS=__webpack_require__(57),Platform=__webpack_require__(96),Credentials=__webpack_require__(175),extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.create;function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}var models_1_GetJourneyDateRangeKpiRequest,models_1_JourneyDateRangeKpiResponse,models_1_GetJourneyDateRangeKpiResponse,models_1_GetJourneyExecutionActivityMetricsRequest,models_1_JourneyExecutionActivityMetricsResponse,models_1_GetJourneyExecutionActivityMetricsResponse,models_1_GetJourneyExecutionMetricsRequest,models_1_JourneyExecutionMetricsResponse,models_1_GetJourneyExecutionMetricsResponse,models_1_GetPushTemplateRequest,models_1_PushNotificationTemplateResponse,models_1_GetPushTemplateResponse,models_1_GetRecommenderConfigurationRequest,models_1_GetRecommenderConfigurationResponse,models_1_GetRecommenderConfigurationsRequest,models_1_ListRecommenderConfigurationsResponse,models_1_GetRecommenderConfigurationsResponse,models_1_GetSegmentRequest,models_1_GetSegmentResponse,models_1_GetSegmentExportJobsRequest,models_1_GetSegmentExportJobsResponse,models_1_GetSegmentImportJobsRequest,models_1_GetSegmentImportJobsResponse,models_1_GetSegmentsRequest,models_1_SegmentsResponse,models_1_GetSegmentsResponse,models_1_GetSegmentVersionRequest,models_1_GetSegmentVersionResponse,models_1_GetSegmentVersionsRequest,models_1_GetSegmentVersionsResponse,models_1_GetSmsChannelRequest,models_1_GetSmsChannelResponse,models_1_GetSmsTemplateRequest,models_1_SMSTemplateResponse,models_1_GetSmsTemplateResponse,models_1_GetUserEndpointsRequest,models_1_GetUserEndpointsResponse,models_1_GetVoiceChannelRequest,models_1_GetVoiceChannelResponse,models_1_GetVoiceTemplateRequest,models_1_VoiceTemplateResponse,models_1_GetVoiceTemplateResponse,models_1_JourneysResponse,models_1_JourneyStateRequest,models_1_ListJourneysRequest,models_1_ListJourneysResponse,models_1_TemplateResponse,models_1_TemplateVersionResponse,models_1_ListTagsForResourceRequest,models_1_TagsModel,models_1_ListTagsForResourceResponse,models_1_ListTemplatesRequest,models_1_TemplatesResponse,models_1_ListTemplatesResponse,models_1_ListTemplateVersionsRequest,models_1_TemplateVersionsResponse,models_1_ListTemplateVersionsResponse,models_1_MessageResult,models_1_MessageRequest,models_1_MessageResponse,models_1_NumberValidateRequest,models_1_NumberValidateResponse,models_1_PhoneNumberValidateRequest,models_1_PhoneNumberValidateResponse,models_1_PutEventsRequest,models_1_PutEventsResponse,models_1_WriteEventStream,models_1_PutEventStreamRequest,models_1_PutEventStreamResponse,models_1_UpdateAttributesRequest,models_1_RemoveAttributesRequest,models_1_RemoveAttributesResponse,models_1_SendMessagesRequest,models_1_SendMessagesResponse,models_1_SendUsersMessageRequest,models_1_SendUsersMessagesRequest,models_1_SendUsersMessageResponse,models_1_SendUsersMessagesResponse,models_1_TagResourceRequest,models_1_UntagResourceRequest,models_1_UpdateAdmChannelRequest,models_1_UpdateAdmChannelResponse,models_1_UpdateApnsChannelRequest,models_1_UpdateApnsChannelResponse,models_1_UpdateApnsSandboxChannelRequest,models_1_UpdateApnsSandboxChannelResponse,models_1_UpdateApnsVoipChannelRequest,models_1_UpdateApnsVoipChannelResponse,models_1_UpdateApnsVoipSandboxChannelRequest,models_1_UpdateApnsVoipSandboxChannelResponse,models_1_WriteApplicationSettingsRequest,models_1_UpdateApplicationSettingsRequest,models_1_UpdateApplicationSettingsResponse,models_1_UpdateBaiduChannelRequest,models_1_UpdateBaiduChannelResponse,models_1_UpdateCampaignRequest,models_1_UpdateCampaignResponse,models_1_UpdateEmailChannelRequest,models_1_UpdateEmailChannelResponse,models_1_UpdateEmailTemplateRequest,models_1_UpdateEmailTemplateResponse,models_1_UpdateEndpointRequest,models_1_UpdateEndpointResponse,models_1_UpdateEndpointsBatchRequest,models_1_UpdateEndpointsBatchResponse,models_1_UpdateGcmChannelRequest,models_1_UpdateGcmChannelResponse,models_1_UpdateJourneyRequest,models_1_UpdateJourneyResponse,models_1_UpdateJourneyStateRequest,models_1_UpdateJourneyStateResponse,models_1_UpdatePushTemplateRequest,models_1_UpdatePushTemplateResponse,models_1_UpdateRecommenderConfigurationShape,models_1_UpdateRecommenderConfigurationRequest,models_1_UpdateRecommenderConfigurationResponse,models_1_UpdateSegmentRequest,models_1_UpdateSegmentResponse,models_1_SMSChannelRequest,models_1_UpdateSmsChannelRequest,models_1_UpdateSmsChannelResponse,models_1_UpdateSmsTemplateRequest,models_1_UpdateSmsTemplateResponse,models_1_TemplateActiveVersionRequest,models_1_UpdateTemplateActiveVersionRequest,models_1_UpdateTemplateActiveVersionResponse,models_1_VoiceChannelRequest,models_1_UpdateVoiceChannelRequest,models_1_UpdateVoiceChannelResponse,models_1_UpdateVoiceTemplateRequest,models_1_UpdateVoiceTemplateResponse;Object.create;(models_1_GetJourneyDateRangeKpiRequest||(models_1_GetJourneyDateRangeKpiRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_JourneyDateRangeKpiResponse||(models_1_JourneyDateRangeKpiResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetJourneyDateRangeKpiResponse||(models_1_GetJourneyDateRangeKpiResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetJourneyExecutionActivityMetricsRequest||(models_1_GetJourneyExecutionActivityMetricsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_JourneyExecutionActivityMetricsResponse||(models_1_JourneyExecutionActivityMetricsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetJourneyExecutionActivityMetricsResponse||(models_1_GetJourneyExecutionActivityMetricsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetJourneyExecutionMetricsRequest||(models_1_GetJourneyExecutionMetricsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_JourneyExecutionMetricsResponse||(models_1_JourneyExecutionMetricsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetJourneyExecutionMetricsResponse||(models_1_GetJourneyExecutionMetricsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetPushTemplateRequest||(models_1_GetPushTemplateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_PushNotificationTemplateResponse||(models_1_PushNotificationTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetPushTemplateResponse||(models_1_GetPushTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetRecommenderConfigurationRequest||(models_1_GetRecommenderConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetRecommenderConfigurationResponse||(models_1_GetRecommenderConfigurationResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetRecommenderConfigurationsRequest||(models_1_GetRecommenderConfigurationsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListRecommenderConfigurationsResponse||(models_1_ListRecommenderConfigurationsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetRecommenderConfigurationsResponse||(models_1_GetRecommenderConfigurationsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentRequest||(models_1_GetSegmentRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentResponse||(models_1_GetSegmentResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentExportJobsRequest||(models_1_GetSegmentExportJobsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentExportJobsResponse||(models_1_GetSegmentExportJobsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentImportJobsRequest||(models_1_GetSegmentImportJobsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentImportJobsResponse||(models_1_GetSegmentImportJobsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentsRequest||(models_1_GetSegmentsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SegmentsResponse||(models_1_SegmentsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentsResponse||(models_1_GetSegmentsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentVersionRequest||(models_1_GetSegmentVersionRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentVersionResponse||(models_1_GetSegmentVersionResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentVersionsRequest||(models_1_GetSegmentVersionsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSegmentVersionsResponse||(models_1_GetSegmentVersionsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSmsChannelRequest||(models_1_GetSmsChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSmsChannelResponse||(models_1_GetSmsChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSmsTemplateRequest||(models_1_GetSmsTemplateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SMSTemplateResponse||(models_1_SMSTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetSmsTemplateResponse||(models_1_GetSmsTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetUserEndpointsRequest||(models_1_GetUserEndpointsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetUserEndpointsResponse||(models_1_GetUserEndpointsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetVoiceChannelRequest||(models_1_GetVoiceChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetVoiceChannelResponse||(models_1_GetVoiceChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetVoiceTemplateRequest||(models_1_GetVoiceTemplateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_VoiceTemplateResponse||(models_1_VoiceTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_GetVoiceTemplateResponse||(models_1_GetVoiceTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_JourneysResponse||(models_1_JourneysResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_JourneyStateRequest||(models_1_JourneyStateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListJourneysRequest||(models_1_ListJourneysRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListJourneysResponse||(models_1_ListJourneysResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_TemplateResponse||(models_1_TemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_TemplateVersionResponse||(models_1_TemplateVersionResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListTagsForResourceRequest||(models_1_ListTagsForResourceRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_TagsModel||(models_1_TagsModel={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListTagsForResourceResponse||(models_1_ListTagsForResourceResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListTemplatesRequest||(models_1_ListTemplatesRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_TemplatesResponse||(models_1_TemplatesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListTemplatesResponse||(models_1_ListTemplatesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListTemplateVersionsRequest||(models_1_ListTemplateVersionsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_TemplateVersionsResponse||(models_1_TemplateVersionsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ListTemplateVersionsResponse||(models_1_ListTemplateVersionsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_MessageResult||(models_1_MessageResult={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_MessageRequest||(models_1_MessageRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_MessageResponse||(models_1_MessageResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_NumberValidateRequest||(models_1_NumberValidateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_NumberValidateResponse||(models_1_NumberValidateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_PhoneNumberValidateRequest||(models_1_PhoneNumberValidateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_PhoneNumberValidateResponse||(models_1_PhoneNumberValidateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_PutEventsRequest||(models_1_PutEventsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_PutEventsResponse||(models_1_PutEventsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_WriteEventStream||(models_1_WriteEventStream={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_PutEventStreamRequest||(models_1_PutEventStreamRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_PutEventStreamResponse||(models_1_PutEventStreamResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateAttributesRequest||(models_1_UpdateAttributesRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_RemoveAttributesRequest||(models_1_RemoveAttributesRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_RemoveAttributesResponse||(models_1_RemoveAttributesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SendMessagesRequest||(models_1_SendMessagesRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SendMessagesResponse||(models_1_SendMessagesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SendUsersMessageRequest||(models_1_SendUsersMessageRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SendUsersMessagesRequest||(models_1_SendUsersMessagesRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SendUsersMessageResponse||(models_1_SendUsersMessageResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SendUsersMessagesResponse||(models_1_SendUsersMessagesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_TagResourceRequest||(models_1_TagResourceRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UntagResourceRequest||(models_1_UntagResourceRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateAdmChannelRequest||(models_1_UpdateAdmChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateAdmChannelResponse||(models_1_UpdateAdmChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApnsChannelRequest||(models_1_UpdateApnsChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApnsChannelResponse||(models_1_UpdateApnsChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApnsSandboxChannelRequest||(models_1_UpdateApnsSandboxChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApnsSandboxChannelResponse||(models_1_UpdateApnsSandboxChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApnsVoipChannelRequest||(models_1_UpdateApnsVoipChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApnsVoipChannelResponse||(models_1_UpdateApnsVoipChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApnsVoipSandboxChannelRequest||(models_1_UpdateApnsVoipSandboxChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApnsVoipSandboxChannelResponse||(models_1_UpdateApnsVoipSandboxChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_WriteApplicationSettingsRequest||(models_1_WriteApplicationSettingsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApplicationSettingsRequest||(models_1_UpdateApplicationSettingsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateApplicationSettingsResponse||(models_1_UpdateApplicationSettingsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateBaiduChannelRequest||(models_1_UpdateBaiduChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateBaiduChannelResponse||(models_1_UpdateBaiduChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateCampaignRequest||(models_1_UpdateCampaignRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateCampaignResponse||(models_1_UpdateCampaignResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateEmailChannelRequest||(models_1_UpdateEmailChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateEmailChannelResponse||(models_1_UpdateEmailChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateEmailTemplateRequest||(models_1_UpdateEmailTemplateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateEmailTemplateResponse||(models_1_UpdateEmailTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateEndpointRequest||(models_1_UpdateEndpointRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateEndpointResponse||(models_1_UpdateEndpointResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateEndpointsBatchRequest||(models_1_UpdateEndpointsBatchRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateEndpointsBatchResponse||(models_1_UpdateEndpointsBatchResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateGcmChannelRequest||(models_1_UpdateGcmChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateGcmChannelResponse||(models_1_UpdateGcmChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateJourneyRequest||(models_1_UpdateJourneyRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateJourneyResponse||(models_1_UpdateJourneyResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateJourneyStateRequest||(models_1_UpdateJourneyStateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateJourneyStateResponse||(models_1_UpdateJourneyStateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdatePushTemplateRequest||(models_1_UpdatePushTemplateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdatePushTemplateResponse||(models_1_UpdatePushTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateRecommenderConfigurationShape||(models_1_UpdateRecommenderConfigurationShape={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateRecommenderConfigurationRequest||(models_1_UpdateRecommenderConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateRecommenderConfigurationResponse||(models_1_UpdateRecommenderConfigurationResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateSegmentRequest||(models_1_UpdateSegmentRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateSegmentResponse||(models_1_UpdateSegmentResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SMSChannelRequest||(models_1_SMSChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateSmsChannelRequest||(models_1_UpdateSmsChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateSmsChannelResponse||(models_1_UpdateSmsChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateSmsTemplateRequest||(models_1_UpdateSmsTemplateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateSmsTemplateResponse||(models_1_UpdateSmsTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_TemplateActiveVersionRequest||(models_1_TemplateActiveVersionRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateTemplateActiveVersionRequest||(models_1_UpdateTemplateActiveVersionRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateTemplateActiveVersionResponse||(models_1_UpdateTemplateActiveVersionResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_VoiceChannelRequest||(models_1_VoiceChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateVoiceChannelRequest||(models_1_UpdateVoiceChannelRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateVoiceChannelResponse||(models_1_UpdateVoiceChannelResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateVoiceTemplateRequest||(models_1_UpdateVoiceTemplateRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UpdateVoiceTemplateResponse||(models_1_UpdateVoiceTemplateResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)};var es=__webpack_require__(3),dist_es=__webpack_require__(1),deserializeAws_restJson1PutEventsCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,_e,_f,_g,_h,_j,parsedBody,message,_k;return __generator(this,(function(_l){switch(_l.label){case 0:return _a=[__assign({},output)],_k={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=__assign.apply(void 0,_a.concat([(_k.body=_l.sent(),_k)])),errorCode="UnknownError",errorCode=loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return _c=[{}],[4,deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput,context)];case 3:return response=__assign.apply(void 0,[__assign.apply(void 0,_c.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 4:return _d=[{}],[4,deserializeAws_restJson1ForbiddenExceptionResponse(parsedOutput,context)];case 5:return response=__assign.apply(void 0,[__assign.apply(void 0,_d.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 6:return _e=[{}],[4,deserializeAws_restJson1InternalServerErrorExceptionResponse(parsedOutput,context)];case 7:return response=__assign.apply(void 0,[__assign.apply(void 0,_e.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 8:return _f=[{}],[4,deserializeAws_restJson1MethodNotAllowedExceptionResponse(parsedOutput,context)];case 9:return response=__assign.apply(void 0,[__assign.apply(void 0,_f.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 10:return _g=[{}],[4,deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput,context)];case 11:return response=__assign.apply(void 0,[__assign.apply(void 0,_g.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 12:return _h=[{}],[4,deserializeAws_restJson1PayloadTooLargeExceptionResponse(parsedOutput,context)];case 13:return response=__assign.apply(void 0,[__assign.apply(void 0,_h.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 14:return _j=[{}],[4,deserializeAws_restJson1TooManyRequestsExceptionResponse(parsedOutput,context)];case 15:return response=__assign.apply(void 0,[__assign.apply(void 0,_j.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 16:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_l.label=17;case 17:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restJson1UpdateEndpointCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,_e,_f,_g,_h,_j,parsedBody,message,_k;return __generator(this,(function(_l){switch(_l.label){case 0:return _a=[__assign({},output)],_k={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=__assign.apply(void 0,_a.concat([(_k.body=_l.sent(),_k)])),errorCode="UnknownError",errorCode=loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return _c=[{}],[4,deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput,context)];case 3:return response=__assign.apply(void 0,[__assign.apply(void 0,_c.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 4:return _d=[{}],[4,deserializeAws_restJson1ForbiddenExceptionResponse(parsedOutput,context)];case 5:return response=__assign.apply(void 0,[__assign.apply(void 0,_d.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 6:return _e=[{}],[4,deserializeAws_restJson1InternalServerErrorExceptionResponse(parsedOutput,context)];case 7:return response=__assign.apply(void 0,[__assign.apply(void 0,_e.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 8:return _f=[{}],[4,deserializeAws_restJson1MethodNotAllowedExceptionResponse(parsedOutput,context)];case 9:return response=__assign.apply(void 0,[__assign.apply(void 0,_f.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 10:return _g=[{}],[4,deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput,context)];case 11:return response=__assign.apply(void 0,[__assign.apply(void 0,_g.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 12:return _h=[{}],[4,deserializeAws_restJson1PayloadTooLargeExceptionResponse(parsedOutput,context)];case 13:return response=__assign.apply(void 0,[__assign.apply(void 0,_h.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 14:return _j=[{}],[4,deserializeAws_restJson1TooManyRequestsExceptionResponse(parsedOutput,context)];case 15:return response=__assign.apply(void 0,[__assign.apply(void 0,_j.concat([_l.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,17];case 16:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_l.label=17;case 17:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restJson1BadRequestExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return contents={name:"BadRequestException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),Message:void 0,RequestID:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),void 0!==data.RequestID&&null!==data.RequestID&&(contents.RequestID=data.RequestID),[2,contents]}))}))},deserializeAws_restJson1ForbiddenExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return contents={name:"ForbiddenException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),Message:void 0,RequestID:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),void 0!==data.RequestID&&null!==data.RequestID&&(contents.RequestID=data.RequestID),[2,contents]}))}))},deserializeAws_restJson1InternalServerErrorExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return contents={name:"InternalServerErrorException",$fault:"server",$metadata:deserializeMetadata(parsedOutput),Message:void 0,RequestID:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),void 0!==data.RequestID&&null!==data.RequestID&&(contents.RequestID=data.RequestID),[2,contents]}))}))},deserializeAws_restJson1MethodNotAllowedExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return contents={name:"MethodNotAllowedException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),Message:void 0,RequestID:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),void 0!==data.RequestID&&null!==data.RequestID&&(contents.RequestID=data.RequestID),[2,contents]}))}))},deserializeAws_restJson1NotFoundExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return contents={name:"NotFoundException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),Message:void 0,RequestID:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),void 0!==data.RequestID&&null!==data.RequestID&&(contents.RequestID=data.RequestID),[2,contents]}))}))},deserializeAws_restJson1PayloadTooLargeExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return contents={name:"PayloadTooLargeException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),Message:void 0,RequestID:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),void 0!==data.RequestID&&null!==data.RequestID&&(contents.RequestID=data.RequestID),[2,contents]}))}))},deserializeAws_restJson1TooManyRequestsExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return contents={name:"TooManyRequestsException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),Message:void 0,RequestID:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),void 0!==data.RequestID&&null!==data.RequestID&&(contents.RequestID=data.RequestID),[2,contents]}))}))},serializeAws_restJson1EndpointDemographic=function(input,context){return __assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({},void 0!==input.AppVersion&&null!==input.AppVersion&&{AppVersion:input.AppVersion}),void 0!==input.Locale&&null!==input.Locale&&{Locale:input.Locale}),void 0!==input.Make&&null!==input.Make&&{Make:input.Make}),void 0!==input.Model&&null!==input.Model&&{Model:input.Model}),void 0!==input.ModelVersion&&null!==input.ModelVersion&&{ModelVersion:input.ModelVersion}),void 0!==input.Platform&&null!==input.Platform&&{Platform:input.Platform}),void 0!==input.PlatformVersion&&null!==input.PlatformVersion&&{PlatformVersion:input.PlatformVersion}),void 0!==input.Timezone&&null!==input.Timezone&&{Timezone:input.Timezone})},serializeAws_restJson1EndpointLocation=function(input,context){return __assign(__assign(__assign(__assign(__assign(__assign({},void 0!==input.City&&null!==input.City&&{City:input.City}),void 0!==input.Country&&null!==input.Country&&{Country:input.Country}),void 0!==input.Latitude&&null!==input.Latitude&&{Latitude:input.Latitude}),void 0!==input.Longitude&&null!==input.Longitude&&{Longitude:input.Longitude}),void 0!==input.PostalCode&&null!==input.PostalCode&&{PostalCode:input.PostalCode}),void 0!==input.Region&&null!==input.Region&&{Region:input.Region})},serializeAws_restJson1EndpointRequest=function(input,context){return __assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({},void 0!==input.Address&&null!==input.Address&&{Address:input.Address}),void 0!==input.Attributes&&null!==input.Attributes&&{Attributes:serializeAws_restJson1MapOfListOf__string(input.Attributes,context)}),void 0!==input.ChannelType&&null!==input.ChannelType&&{ChannelType:input.ChannelType}),void 0!==input.Demographic&&null!==input.Demographic&&{Demographic:serializeAws_restJson1EndpointDemographic(input.Demographic,context)}),void 0!==input.EffectiveDate&&null!==input.EffectiveDate&&{EffectiveDate:input.EffectiveDate}),void 0!==input.EndpointStatus&&null!==input.EndpointStatus&&{EndpointStatus:input.EndpointStatus}),void 0!==input.Location&&null!==input.Location&&{Location:serializeAws_restJson1EndpointLocation(input.Location,context)}),void 0!==input.Metrics&&null!==input.Metrics&&{Metrics:serializeAws_restJson1MapOf__double(input.Metrics,context)}),void 0!==input.OptOut&&null!==input.OptOut&&{OptOut:input.OptOut}),void 0!==input.RequestId&&null!==input.RequestId&&{RequestId:input.RequestId}),void 0!==input.User&&null!==input.User&&{User:serializeAws_restJson1EndpointUser(input.User,context)})},serializeAws_restJson1EndpointUser=function(input,context){return __assign(__assign({},void 0!==input.UserAttributes&&null!==input.UserAttributes&&{UserAttributes:serializeAws_restJson1MapOfListOf__string(input.UserAttributes,context)}),void 0!==input.UserId&&null!==input.UserId&&{UserId:input.UserId})},serializeAws_restJson1EventsRequest=function(input,context){return __assign({},void 0!==input.BatchItem&&null!==input.BatchItem&&{BatchItem:serializeAws_restJson1MapOfEventsBatch(input.BatchItem,context)})},serializeAws_restJson1ListOf__string=function(input,context){return input.filter((function(e){return null!=e})).map((function(entry){return null===entry?null:entry}))},serializeAws_restJson1MapOf__double=function(input,context){return Object.entries(input).reduce((function(acc,_a){var _b,_c=__read(_a,2),key=_c[0],value=_c[1];return null===value?acc:__assign(__assign({},acc),((_b={})[key]=value,_b))}),{})},serializeAws_restJson1MapOf__string=function(input,context){return Object.entries(input).reduce((function(acc,_a){var _b,_c=__read(_a,2),key=_c[0],value=_c[1];return null===value?acc:__assign(__assign({},acc),((_b={})[key]=value,_b))}),{})},serializeAws_restJson1MapOfEvent=function(input,context){return Object.entries(input).reduce((function(acc,_a){var _b,_c=__read(_a,2),key=_c[0],value=_c[1];return null===value?acc:__assign(__assign({},acc),((_b={})[key]=function(input,context){return __assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({},void 0!==input.AppPackageName&&null!==input.AppPackageName&&{AppPackageName:input.AppPackageName}),void 0!==input.AppTitle&&null!==input.AppTitle&&{AppTitle:input.AppTitle}),void 0!==input.AppVersionCode&&null!==input.AppVersionCode&&{AppVersionCode:input.AppVersionCode}),void 0!==input.Attributes&&null!==input.Attributes&&{Attributes:serializeAws_restJson1MapOf__string(input.Attributes,context)}),void 0!==input.ClientSdkVersion&&null!==input.ClientSdkVersion&&{ClientSdkVersion:input.ClientSdkVersion}),void 0!==input.EventType&&null!==input.EventType&&{EventType:input.EventType}),void 0!==input.Metrics&&null!==input.Metrics&&{Metrics:serializeAws_restJson1MapOf__double(input.Metrics,context)}),void 0!==input.SdkName&&null!==input.SdkName&&{SdkName:input.SdkName}),void 0!==input.Session&&null!==input.Session&&{Session:serializeAws_restJson1Session(input.Session,context)}),void 0!==input.Timestamp&&null!==input.Timestamp&&{Timestamp:input.Timestamp})}(value,context),_b))}),{})},serializeAws_restJson1MapOfEventsBatch=function(input,context){return Object.entries(input).reduce((function(acc,_a){var _b,_c=__read(_a,2),key=_c[0],value=_c[1];return null===value?acc:__assign(__assign({},acc),((_b={})[key]=function(input,context){return __assign(__assign({},void 0!==input.Endpoint&&null!==input.Endpoint&&{Endpoint:serializeAws_restJson1PublicEndpoint(input.Endpoint,context)}),void 0!==input.Events&&null!==input.Events&&{Events:serializeAws_restJson1MapOfEvent(input.Events,context)})}(value,context),_b))}),{})},serializeAws_restJson1MapOfListOf__string=function(input,context){return Object.entries(input).reduce((function(acc,_a){var _b,_c=__read(_a,2),key=_c[0],value=_c[1];return null===value?acc:__assign(__assign({},acc),((_b={})[key]=serializeAws_restJson1ListOf__string(value,context),_b))}),{})},serializeAws_restJson1PublicEndpoint=function(input,context){return __assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({},void 0!==input.Address&&null!==input.Address&&{Address:input.Address}),void 0!==input.Attributes&&null!==input.Attributes&&{Attributes:serializeAws_restJson1MapOfListOf__string(input.Attributes,context)}),void 0!==input.ChannelType&&null!==input.ChannelType&&{ChannelType:input.ChannelType}),void 0!==input.Demographic&&null!==input.Demographic&&{Demographic:serializeAws_restJson1EndpointDemographic(input.Demographic,context)}),void 0!==input.EffectiveDate&&null!==input.EffectiveDate&&{EffectiveDate:input.EffectiveDate}),void 0!==input.EndpointStatus&&null!==input.EndpointStatus&&{EndpointStatus:input.EndpointStatus}),void 0!==input.Location&&null!==input.Location&&{Location:serializeAws_restJson1EndpointLocation(input.Location,context)}),void 0!==input.Metrics&&null!==input.Metrics&&{Metrics:serializeAws_restJson1MapOf__double(input.Metrics,context)}),void 0!==input.OptOut&&null!==input.OptOut&&{OptOut:input.OptOut}),void 0!==input.RequestId&&null!==input.RequestId&&{RequestId:input.RequestId}),void 0!==input.User&&null!==input.User&&{User:serializeAws_restJson1EndpointUser(input.User,context)})},serializeAws_restJson1Session=function(input,context){return __assign(__assign(__assign(__assign({},void 0!==input.Duration&&null!==input.Duration&&{Duration:input.Duration}),void 0!==input.Id&&null!==input.Id&&{Id:input.Id}),void 0!==input.StartTimestamp&&null!==input.StartTimestamp&&{StartTimestamp:input.StartTimestamp}),void 0!==input.StopTimestamp&&null!==input.StopTimestamp&&{StopTimestamp:input.StopTimestamp})},deserializeAws_restJson1EndpointItemResponse=function(output,context){return{Message:void 0!==output.Message&&null!==output.Message?output.Message:void 0,StatusCode:void 0!==output.StatusCode&&null!==output.StatusCode?output.StatusCode:void 0}},deserializeAws_restJson1EventsResponse=function(output,context){return{Results:void 0!==output.Results&&null!==output.Results?deserializeAws_restJson1MapOfItemResponse(output.Results,context):void 0}},deserializeAws_restJson1MapOfEventItemResponse=function(output,context){return Object.entries(output).reduce((function(acc,_a){var _b,_c=__read(_a,2),key=_c[0],value=_c[1];return null===value?acc:__assign(__assign({},acc),((_b={})[key]=function(output,context){return{Message:void 0!==output.Message&&null!==output.Message?output.Message:void 0,StatusCode:void 0!==output.StatusCode&&null!==output.StatusCode?output.StatusCode:void 0}}(value),_b))}),{})},deserializeAws_restJson1MapOfItemResponse=function(output,context){return Object.entries(output).reduce((function(acc,_a){var _b,_c=__read(_a,2),key=_c[0],value=_c[1];return null===value?acc:__assign(__assign({},acc),((_b={})[key]=function(output,context){return{EndpointItemResponse:void 0!==output.EndpointItemResponse&&null!==output.EndpointItemResponse?deserializeAws_restJson1EndpointItemResponse(output.EndpointItemResponse):void 0,EventsItemResponse:void 0!==output.EventsItemResponse&&null!==output.EventsItemResponse?deserializeAws_restJson1MapOfEventItemResponse(output.EventsItemResponse,context):void 0}}(value,context),_b))}),{})},deserializeAws_restJson1MessageBody=function(output,context){return{Message:void 0!==output.Message&&null!==output.Message?output.Message:void 0,RequestID:void 0!==output.RequestID&&null!==output.RequestID?output.RequestID:void 0}},deserializeMetadata=function(output){var _a;return{httpStatusCode:output.statusCode,requestId:null!==(_a=output.headers["x-amzn-requestid"])&&void 0!==_a?_a:output.headers["x-amzn-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}},collectBody=function(streamBody,context){return void 0===streamBody&&(streamBody=new Uint8Array),streamBody instanceof Uint8Array?Promise.resolve(streamBody):context.streamCollector(streamBody)||Promise.resolve(new Uint8Array)},parseBody=function(streamBody,context){return function(streamBody,context){return collectBody(streamBody,context).then((function(body){return context.utf8Encoder(body)}))}(streamBody,context).then((function(encoded){return encoded.length?JSON.parse(encoded):{}}))},loadRestJsonErrorCode=function(output,data){var object,key,sanitizeErrorCode=function(rawValue){var cleanValue=rawValue;return cleanValue.indexOf(":")>=0&&(cleanValue=cleanValue.split(":")[0]),cleanValue.indexOf("#")>=0&&(cleanValue=cleanValue.split("#")[1]),cleanValue},headerKey=(object=output.headers,key="x-amzn-errortype",Object.keys(object).find((function(k){return k.toLowerCase()===key.toLowerCase()})));return void 0!==headerKey?sanitizeErrorCode(output.headers[headerKey]):void 0!==data.code?sanitizeErrorCode(data.code):void 0!==data.__type?sanitizeErrorCode(data.__type):""},middleware_serde_dist_es=__webpack_require__(17),PutEventsCommand_PutEventsCommand=function(_super){function PutEventsCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(PutEventsCommand,_super),PutEventsCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"PinpointClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:models_1_PutEventsRequest.filterSensitiveLog,outputFilterSensitiveLog:models_1_PutEventsResponse.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},PutEventsCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,body,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers={"content-type":"application/json"},resolvedPath="/v1/apps/{ApplicationId}/events",void 0===input.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((labelValue=input.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return resolvedPath=resolvedPath.replace("{ApplicationId}",Object(dist_es.f)(labelValue)),void 0!==input.EventsRequest&&(body=serializeAws_restJson1EventsRequest(input.EventsRequest,context)),void 0===body&&(body={}),body=JSON.stringify(body),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new es.a({protocol:protocol,hostname:hostname,port:port,method:"POST",headers:headers,path:resolvedPath,body:body})]}}))}))}(input,context)},PutEventsCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){switch(_a.label){case 0:return 202!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restJson1PutEventsCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),EventsResponse:void 0},[4,parseBody(output.body,context)]);case 1:return data=_a.sent(),contents.EventsResponse=deserializeAws_restJson1EventsResponse(data,context),[2,Promise.resolve(contents)]}}))}))}(output,context)},PutEventsCommand}(dist_es.b),UpdateEndpointCommand_UpdateEndpointCommand=function(_super){function UpdateEndpointCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(UpdateEndpointCommand,_super),UpdateEndpointCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"PinpointClient",commandName:"UpdateEndpointCommand",inputFilterSensitiveLog:models_1_UpdateEndpointRequest.filterSensitiveLog,outputFilterSensitiveLog:models_1_UpdateEndpointResponse.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},UpdateEndpointCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,body,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers={"content-type":"application/json"},resolvedPath="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===input.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((labelValue=input.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(resolvedPath=resolvedPath.replace("{ApplicationId}",Object(dist_es.f)(labelValue)),void 0===input.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((labelValue=input.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return resolvedPath=resolvedPath.replace("{EndpointId}",Object(dist_es.f)(labelValue)),void 0!==input.EndpointRequest&&(body=serializeAws_restJson1EndpointRequest(input.EndpointRequest,context)),void 0===body&&(body={}),body=JSON.stringify(body),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new es.a({protocol:protocol,hostname:hostname,port:port,method:"PUT",headers:headers,path:resolvedPath,body:body})]}}))}))}(input,context)},UpdateEndpointCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){switch(_a.label){case 0:return 202!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restJson1UpdateEndpointCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),MessageBody:void 0},[4,parseBody(output.body,context)]);case 1:return data=_a.sent(),contents.MessageBody=deserializeAws_restJson1MessageBody(data,context),[2,Promise.resolve(contents)]}}))}))}(output,context)},UpdateEndpointCommand}(dist_es.b),es_package=__webpack_require__(315),build=__webpack_require__(59),fetch_http_handler_dist_es=__webpack_require__(32),invalid_dependency_dist_es=__webpack_require__(62),middleware_retry_dist_es=__webpack_require__(18),util_base64_browser_dist_es=__webpack_require__(31),util_body_length_browser_dist_es=__webpack_require__(60),util_user_agent_browser_dist_es=__webpack_require__(61),util_utf8_browser_dist_es=__webpack_require__(21),AWS_REGIONS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),AWS_CN_REGIONS=new Set(["cn-north-1","cn-northwest-1"]),AWS_ISO_REGIONS=new Set(["us-iso-east-1"]),AWS_ISO_B_REGIONS=new Set(["us-isob-east-1"]),AWS_US_GOV_REGIONS=new Set(["us-gov-east-1","us-gov-west-1"]),url_parser_dist_es=__webpack_require__(64),ClientSharedValues={apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(region,options){var regionInfo=void 0;switch(region){case"ap-northeast-1":regionInfo={hostname:"pinpoint.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-northeast-2":regionInfo={hostname:"pinpoint.ap-northeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-south-1":regionInfo={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-1":regionInfo={hostname:"pinpoint.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":regionInfo={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ca-central-1":regionInfo={hostname:"pinpoint.ca-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":regionInfo={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":regionInfo={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-2":regionInfo={hostname:"pinpoint.eu-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"fips-us-east-1":regionInfo={hostname:"pinpoint-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-gov-west-1":regionInfo={hostname:"pinpoint-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":regionInfo={hostname:"pinpoint-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"us-east-1":regionInfo={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-gov-west-1":regionInfo={hostname:"pinpoint.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-west-2":regionInfo={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:AWS_REGIONS.has(region)&&(regionInfo={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",region),partition:"aws",signingService:"mobiletargeting"}),AWS_CN_REGIONS.has(region)&&(regionInfo={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",region),partition:"aws-cn"}),AWS_ISO_REGIONS.has(region)&&(regionInfo={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",region),partition:"aws-iso"}),AWS_ISO_B_REGIONS.has(region)&&(regionInfo={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",region),partition:"aws-iso-b"}),AWS_US_GOV_REGIONS.has(region)&&(regionInfo={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",region),partition:"aws-us-gov",signingService:"mobiletargeting"}),void 0===regionInfo&&(regionInfo={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",region),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(__assign({signingService:"mobiletargeting"},regionInfo))},serviceId:"Pinpoint",urlParser:url_parser_dist_es.a},ClientDefaultValues=__assign(__assign({},ClientSharedValues),{runtime:"browser",base64Decoder:util_base64_browser_dist_es.a,base64Encoder:util_base64_browser_dist_es.b,bodyLengthChecker:util_body_length_browser_dist_es.a,credentialDefaultProvider:function(_){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(util_user_agent_browser_dist_es.a)({serviceId:ClientSharedValues.serviceId,clientVersion:es_package.version}),maxAttempts:middleware_retry_dist_es.a,region:Object(invalid_dependency_dist_es.a)("Region is missing"),requestHandler:new fetch_http_handler_dist_es.a,sha256:build.Sha256,streamCollector:fetch_http_handler_dist_es.b,utf8Decoder:util_utf8_browser_dist_es.fromUtf8,utf8Encoder:util_utf8_browser_dist_es.toUtf8}),config_resolver_dist_es=__webpack_require__(36),middleware_content_length_dist_es=__webpack_require__(58),middleware_host_header_dist_es=__webpack_require__(34),middleware_logger_dist_es=__webpack_require__(63),middleware_signing_dist_es=__webpack_require__(41),middleware_user_agent_dist_es=__webpack_require__(35),PinpointClient_PinpointClient=function(_super){function PinpointClient(configuration){var _this=this,_config_0=__assign(__assign({},ClientDefaultValues),configuration),_config_1=Object(config_resolver_dist_es.b)(_config_0),_config_2=Object(config_resolver_dist_es.a)(_config_1),_config_3=Object(middleware_signing_dist_es.b)(_config_2),_config_4=Object(middleware_retry_dist_es.c)(_config_3),_config_5=Object(middleware_host_header_dist_es.b)(_config_4),_config_6=Object(middleware_user_agent_dist_es.b)(_config_5);return(_this=_super.call(this,_config_6)||this).config=_config_6,_this.middlewareStack.use(Object(middleware_signing_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_retry_dist_es.b)(_this.config)),_this.middlewareStack.use(Object(middleware_content_length_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_host_header_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_logger_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_user_agent_dist_es.a)(_this.config)),_this}return __extends(PinpointClient,_super),PinpointClient.prototype.destroy=function(){_super.prototype.destroy.call(this)},PinpointClient}(dist_es.a),lib_esm=__webpack_require__(43),uuid=__webpack_require__(30),EventBuffer_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},EventBuffer_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},EventBuffer_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},EventBuffer_spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(EventBuffer_read(arguments[i]));return ar},EventBuffer_logger=new ConsoleLogger.a("EventsBuffer"),RETRYABLE_CODES=[429,500],ACCEPTED_CODES=[202],EventBuffer=function(){function EventsBuffer(client,config){this._pause=!1,this._flush=!1,EventBuffer_logger.debug("Instantiating buffer with config:",config),this._buffer=[],this._client=client,this._config=config,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}return EventsBuffer.prototype.push=function(event){var _a;if(this._buffer>this._config.bufferSize)return EventBuffer_logger.debug("Exceeded analytics events buffer size"),event.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var bufferElement=((_a={})[event.params.event.eventId]=event,_a);this._buffer.push(bufferElement)},EventsBuffer.prototype.pause=function(){this._pause=!0},EventsBuffer.prototype.resume=function(){this._pause=!1},EventsBuffer.prototype.updateClient=function(client){this._client=client},EventsBuffer.prototype.flush=function(){this._flush=!0},EventsBuffer.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var flushInterval=this._config.flushInterval;this._interval=setInterval(this._sendBatch,flushInterval)},EventsBuffer.prototype._sendBatch=function(){var bufferLength=this._buffer.length;if(this._flush&&!bufferLength&&clearInterval(this._interval),!this._pause&&bufferLength){var flushSize=this._config.flushSize,batchSize=Math.min(flushSize,bufferLength),bufferSubset=this._buffer.splice(0,batchSize);this._putEvents(bufferSubset)}},EventsBuffer.prototype._putEvents=function(buffer){return EventBuffer_awaiter(this,void 0,void 0,(function(){var eventMap,batchEventParams,command,data,err_1;return EventBuffer_generator(this,(function(_a){switch(_a.label){case 0:eventMap=this._bufferToMap(buffer),batchEventParams=this._generateBatchEventParams(eventMap),_a.label=1;case 1:return _a.trys.push([1,3,,4]),command=new PutEventsCommand_PutEventsCommand(batchEventParams),[4,this._client.send(command)];case 2:return data=_a.sent(),this._processPutEventsSuccessResponse(data,eventMap),[3,4];case 3:return err_1=_a.sent(),[2,this._handlePutEventsFailure(err_1,eventMap)];case 4:return[2]}}))}))},EventsBuffer.prototype._generateBatchEventParams=function(eventMap){var batchEventParams={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(eventMap).forEach((function(item){var params=item.params,event=params.event,timestamp=params.timestamp,config=params.config,name=event.name,attributes=event.attributes,metrics=event.metrics,eventId=event.eventId,session=event.session,appId=config.appId,endpointId=config.endpointId,batchItem=batchEventParams.EventsRequest.BatchItem;batchEventParams.ApplicationId=batchEventParams.ApplicationId||appId,batchItem[endpointId]||(batchItem[endpointId]={Endpoint:{},Events:{}}),batchItem[endpointId].Events[eventId]={EventType:name,Timestamp:new Date(timestamp).toISOString(),Attributes:attributes,Metrics:metrics,Session:session}})),batchEventParams},EventsBuffer.prototype._handlePutEventsFailure=function(err,eventMap){EventBuffer_logger.debug("_putEvents Failed: ",err);var statusCode=err.$metadata&&err.$metadata.httpStatusCode;if(RETRYABLE_CODES.includes(statusCode)){var retryableEvents=Object.values(eventMap);this._retry(retryableEvents)}else;},EventsBuffer.prototype._processPutEventsSuccessResponse=function(data,eventMap){var Results=data.EventsResponse.Results,retryableEvents=[];Object.entries(Results).forEach((function(_a){var _b=EventBuffer_read(_a,2),endpointId=_b[0],responses=_b[1].EventsItemResponse;Object.entries(responses).forEach((function(_a){var _b,_c,_d=EventBuffer_read(_a,2),eventId=_d[0],_e=_d[1],StatusCode=_e.StatusCode,Message=_e.Message,eventObject=eventMap[eventId],response={EventsResponse:{Results:(_b={},_b[endpointId]={EventsItemResponse:(_c={},_c[eventId]={StatusCode:StatusCode,Message:Message},_c)},_b)}};if(ACCEPTED_CODES.includes(StatusCode))eventObject.handlers.resolve(response);else{if(!RETRYABLE_CODES.includes(StatusCode)){var name=eventObject.params.event.name;return EventBuffer_logger.error("event "+eventId+" : "+name+" failed with error: "+Message),eventObject.handlers.reject(response)}retryableEvents.push(eventObject)}}))})),retryableEvents.length&&this._retry(retryableEvents)},EventsBuffer.prototype._retry=function(retryableEvents){var _a,eligibleEvents=[];retryableEvents.forEach((function(event){var _a,params=event.params,_b=params.event,eventId=_b.eventId,name=_b.name;if(params.resendLimit-- >0)return EventBuffer_logger.debug("resending event "+eventId+" : "+name+" with "+params.resendLimit+" retry attempts remaining"),void eligibleEvents.push((_a={},_a[eventId]=event,_a));EventBuffer_logger.debug("no retry attempts remaining for event "+eventId+" : "+name)})),(_a=this._buffer).unshift.apply(_a,EventBuffer_spread(eligibleEvents))},EventsBuffer.prototype._bufferToMap=function(buffer){return buffer.reduce((function(acc,curVal){var _a=EventBuffer_read(Object.entries(curVal),1),_b=EventBuffer_read(_a[0],2),key=_b[0],value=_b[1];return acc[key]=value,acc}),{})},EventsBuffer}(),AWSPinpointProvider_assign=function(){return(AWSPinpointProvider_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},AWSPinpointProvider_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AWSPinpointProvider_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},AWSPinpointProvider_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},AMPLIFY_SYMBOL="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",dispatchAnalyticsEvent=function(event,data){Hub.a.dispatch("analytics",{event:event,data:data},"Analytics",AMPLIFY_SYMBOL)},AWSPinpointProvider_logger=new ConsoleLogger.a("AWSPinpointProvider"),AWSPinpointProvider_RETRYABLE_CODES=[429,500],AWSPinpointProvider_ACCEPTED_CODES=[202],BEACON_SUPPORTED="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,AWSPinpointProvider_AWSPinpointProvider=function(){function AWSPinpointProvider(config){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=config||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=ClientDevice.a.clientInfo()}return AWSPinpointProvider.prototype.getCategory=function(){return AWSPinpointProvider.category},AWSPinpointProvider.prototype.getProviderName=function(){return AWSPinpointProvider.providerName},AWSPinpointProvider.prototype.configure=function(config){var _this=this;AWSPinpointProvider_logger.debug("configure Analytics",config);var conf=config||{};if(this._config=Object.assign({},this._config,conf),this._endpointGenerating=!!config.autoSessionRecord,this._config.appId&&!this._config.disabled)if(this._config.endpointId)dispatchAnalyticsEvent("pinpointProvider_configured",null);else{var cacheKey=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(cacheKey).then((function(endpointId){AWSPinpointProvider_logger.debug("setting endpoint id from the cache",endpointId),_this._config.endpointId=endpointId,dispatchAnalyticsEvent("pinpointProvider_configured",null)})).catch((function(err){AWSPinpointProvider_logger.debug("Failed to generate endpointId",err)}))}else this._flushBuffer();return this._config},AWSPinpointProvider.prototype.record=function(params,handlers){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){var credentials,timestamp;return AWSPinpointProvider_generator(this,(function(_a){switch(_a.label){case 0:return AWSPinpointProvider_logger.debug("_public record",params),[4,this._getCredentials()];case 1:return(credentials=_a.sent())&&this._config.appId&&this._config.region?(this._initClients(credentials),timestamp=(new Date).getTime(),this._generateSession(params),params.event.eventId=Object(uuid.v1)(),Object.assign(params,{timestamp:timestamp,config:this._config}),params.event.immediate?[2,this._send(params,handlers)]:(this._putToBuffer(params,handlers),[2])):(AWSPinpointProvider_logger.debug("cannot send events without credentials, applicationId or region"),[2,handlers.reject(new Error("No credentials, applicationId or region"))])}}))}))},AWSPinpointProvider.prototype._sendEndpointUpdate=function(endpointObject){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){var next;return AWSPinpointProvider_generator(this,(function(_a){switch(_a.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(endpointObject),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(endpointObject)]);case 1:return _a.sent(),next=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,next&&this._sendEndpointUpdate(next),[2]}}))}))},AWSPinpointProvider.prototype._putToBuffer=function(params,handlers){"_update_endpoint"!==params.event.name?this._buffer&&this._buffer.push({params:params,handlers:handlers}):this._sendEndpointUpdate({params:params,handlers:handlers})},AWSPinpointProvider.prototype._generateSession=function(params){this._sessionId=this._sessionId||Object(uuid.v1)();var event=params.event;switch(event.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=Object(uuid.v1)(),event.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case"_session.stop":var stopTimestamp=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(uuid.v1)(),event.session={Id:this._sessionId,Duration:stopTimestamp-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(stopTimestamp).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(uuid.v1)(),event.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},AWSPinpointProvider.prototype._send=function(params,handlers){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){return AWSPinpointProvider_generator(this,(function(_a){switch(params.event.name){case"_update_endpoint":return[2,this._updateEndpoint({params:params,handlers:handlers})];case"_session.stop":return[2,this._pinpointSendStopSession(params,handlers)];default:return[2,this._pinpointPutEvents(params,handlers)]}return[2]}))}))},AWSPinpointProvider.prototype._generateBatchItemContext=function(params){var _a,event=params.event,timestamp=params.timestamp,config=params.config,name=event.name,attributes=event.attributes,metrics=event.metrics,eventId=event.eventId,session=event.session,appId=config.appId,endpointId=config.endpointId,eventParams={ApplicationId:appId,EventsRequest:{BatchItem:{}}},endpointObj={Endpoint:{}};return endpointObj.Events=((_a={})[eventId]={EventType:name,Timestamp:new Date(timestamp).toISOString(),Attributes:attributes,Metrics:metrics,Session:session},_a),eventParams.EventsRequest.BatchItem[endpointId]=endpointObj,eventParams},AWSPinpointProvider.prototype._pinpointPutEvents=function(params,handlers){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){var eventId,endpointId,eventParams,command,data,_a,_b,_c,StatusCode,Message,err_1;return AWSPinpointProvider_generator(this,(function(_d){switch(_d.label){case 0:eventId=params.event.eventId,endpointId=params.config.endpointId,eventParams=this._generateBatchItemContext(params),command=new PutEventsCommand_PutEventsCommand(eventParams),_d.label=1;case 1:return _d.trys.push([1,3,,4]),[4,this.pinpointClient.send(command)];case 2:return data=_d.sent(),_a=endpointId,_b=eventId,_c=data.EventsResponse.Results[_a].EventsItemResponse[_b],StatusCode=_c.StatusCode,Message=_c.Message,AWSPinpointProvider_ACCEPTED_CODES.includes(StatusCode)?(AWSPinpointProvider_logger.debug("record event success. ",data),[2,handlers.resolve(data)]):AWSPinpointProvider_RETRYABLE_CODES.includes(StatusCode)?(this._retry(params,handlers),[3,4]):(AWSPinpointProvider_logger.error("Event "+eventId+" is not accepted, the error is "+Message),[2,handlers.reject(data)]);case 3:return err_1=_d.sent(),this._eventError(err_1),[2,handlers.reject(err_1)];case 4:return[2]}}))}))},AWSPinpointProvider.prototype._pinpointSendStopSession=function(params,handlers){if(BEACON_SUPPORTED){var eventParams=this._generateBatchItemContext(params),region=this._config.region,ApplicationId=eventParams.ApplicationId,EventsRequest=eventParams.EventsRequest,accessInfo={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},url="https://pinpoint."+region+".amazonaws.com/v1/apps/"+ApplicationId+"/events/legacy",body=JSON.stringify(EventsRequest),request={url:url,body:body,method:"POST"},serviceInfo={region:region,service:"mobiletargeting"},requestUrl=Signer.a.signUrl(request,accessInfo,serviceInfo,null);return navigator.sendBeacon(requestUrl,body)?handlers.resolve("sendBeacon success"):handlers.reject("sendBeacon failure")}this._pinpointPutEvents(params,handlers)},AWSPinpointProvider.prototype._retry=function(params,handlers){var resendLimit=params.config.resendLimit;params.resendLimit="number"==typeof params.resendLimit?params.resendLimit:resendLimit,params.resendLimit-- >0?(AWSPinpointProvider_logger.debug("resending event "+params.eventName+" with "+params.resendLimit+" retry times left"),this._pinpointPutEvents(params,handlers)):AWSPinpointProvider_logger.debug("retry times used up for event "+params.eventName)},AWSPinpointProvider.prototype._updateEndpoint=function(endpointObject){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){var params,handlers,config,event,appId,endpointId,request,update_params,command,data,err_2,failureData;return AWSPinpointProvider_generator(this,(function(_a){switch(_a.label){case 0:params=endpointObject.params,handlers=endpointObject.handlers,config=params.config,event=params.event,appId=config.appId,endpointId=config.endpointId,request=this._endpointRequest(config,JS.a.transferKeyToLowerCase(event,[],["attributes","userAttributes","Attributes","UserAttributes"])),update_params={ApplicationId:appId,EndpointId:endpointId,EndpointRequest:request},_a.label=1;case 1:return _a.trys.push([1,3,,4]),command=new UpdateEndpointCommand_UpdateEndpointCommand(update_params),[4,this.pinpointClient.send(command)];case 2:return data=_a.sent(),AWSPinpointProvider_logger.debug("updateEndpoint success",data),this._endpointGenerating=!1,this._resumeBuffer(),handlers.resolve(data),[2];case 3:return err_2=_a.sent(),failureData={err:err_2,update_params:update_params,endpointObject:endpointObject},[2,this._handleEndpointUpdateFailure(failureData)];case 4:return[2]}}))}))},AWSPinpointProvider.prototype._handleEndpointUpdateFailure=function(failureData){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){var err,endpointObject,statusCode;return AWSPinpointProvider_generator(this,(function(_a){switch(err=failureData.err,endpointObject=failureData.endpointObject,statusCode=err.$metadata&&err.$metadata.httpStatusCode,AWSPinpointProvider_logger.debug("updateEndpoint error",err),statusCode){case 403:return[2,this._handleEndpointUpdateForbidden(failureData)];default:if(AWSPinpointProvider_RETRYABLE_CODES.includes(statusCode))return!0,[2,this._retryEndpointUpdate(endpointObject,true)];AWSPinpointProvider_logger.error("updateEndpoint failed",err),endpointObject.handlers.reject(err)}return[2]}))}))},AWSPinpointProvider.prototype._handleEndpointUpdateForbidden=function(failureData){var err=failureData.err,endpointObject=failureData.endpointObject,code=err.code,retryable=err.retryable;if("ExpiredTokenException"!==code&&!retryable)return endpointObject.handlers.reject(err);this._retryEndpointUpdate(endpointObject)},AWSPinpointProvider.prototype._retryEndpointUpdate=function(endpointObject,exponential){void 0===exponential&&(exponential=!1),AWSPinpointProvider_logger.debug("_retryEndpointUpdate",endpointObject);var params=endpointObject.params,resendLimit=params.config.resendLimit;if(params.resendLimit="number"==typeof params.resendLimit?params.resendLimit:resendLimit,params.resendLimit-- >0)return AWSPinpointProvider_logger.debug("resending endpoint update "+params.event.eventId+" with "+params.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(endpointObject):this._updateEndpoint(endpointObject));AWSPinpointProvider_logger.warn("resending endpoint update "+params.event.eventId+" failed after "+params.config.resendLimit+" attempts"),this._endpointGenerating&&AWSPinpointProvider_logger.error("Initial endpoint update failed. ")},AWSPinpointProvider.prototype._initClients=function(credentials){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){var identityId,region;return AWSPinpointProvider_generator(this,(function(_a){return AWSPinpointProvider_logger.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===credentials.sessionToken&&this._config.credentials.identityId===credentials.identityId?(AWSPinpointProvider_logger.debug("no change for aws credentials, directly return from init"),[2]):(identityId=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=credentials,region=this._config.region,AWSPinpointProvider_logger.debug("init clients with credentials",credentials),this.pinpointClient=new PinpointClient_PinpointClient({region:region,credentials:credentials,customUserAgent:Object(Platform.b)()}),this.pinpointClient.middlewareStack.addRelativeTo((function(next){return function(args){return delete args.request.headers["amz-sdk-invocation-id"],delete args.request.headers["amz-sdk-request"],next(args)}}),{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&identityId===credentials.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq(),[2])}))}))},AWSPinpointProvider.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof EventBuffer},AWSPinpointProvider.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new EventBuffer(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},AWSPinpointProvider.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},AWSPinpointProvider.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},AWSPinpointProvider.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},AWSPinpointProvider.prototype._customizePinpointClientReq=function(){},AWSPinpointProvider.prototype._getEndpointId=function(cacheKey){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){var endpointId;return AWSPinpointProvider_generator(this,(function(_a){switch(_a.label){case 0:return[4,lib_esm.a.getItem(cacheKey)];case 1:return endpointId=_a.sent(),AWSPinpointProvider_logger.debug("endpointId from cache",endpointId,"type",typeof endpointId),endpointId||(endpointId=Object(uuid.v1)(),lib_esm.a.setItem(cacheKey,endpointId)),[2,endpointId]}}))}))},AWSPinpointProvider.prototype._endpointRequest=function(config,event){var credentials=config.credentials,clientInfo=this._clientInfo||{},clientContext=config.clientContext||{},defaultEndpointConfig=config.endpoint||{},demographicByClientInfo={appVersion:clientInfo.appVersion,make:clientInfo.make,model:clientInfo.model,modelVersion:clientInfo.version,platform:clientInfo.platform},demographicByClientContext=(clientContext.clientId,clientContext.appTitle,clientContext.appVersionName,clientContext.appVersionCode,clientContext.appPackageName,AWSPinpointProvider_rest(clientContext,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),channelType=event.address?"android"===clientInfo.platform?"GCM":"APNS":void 0,tmp=AWSPinpointProvider_assign(AWSPinpointProvider_assign(AWSPinpointProvider_assign({channelType:channelType,requestId:Object(uuid.v1)(),effectiveDate:(new Date).toISOString()},defaultEndpointConfig),event),{attributes:AWSPinpointProvider_assign(AWSPinpointProvider_assign({},defaultEndpointConfig.attributes),event.attributes),demographic:AWSPinpointProvider_assign(AWSPinpointProvider_assign(AWSPinpointProvider_assign(AWSPinpointProvider_assign({},demographicByClientInfo),demographicByClientContext),defaultEndpointConfig.demographic),event.demographic),location:AWSPinpointProvider_assign(AWSPinpointProvider_assign({},defaultEndpointConfig.location),event.location),metrics:AWSPinpointProvider_assign(AWSPinpointProvider_assign({},defaultEndpointConfig.metrics),event.metrics),user:{userId:event.userId||defaultEndpointConfig.userId||credentials.identityId,userAttributes:AWSPinpointProvider_assign(AWSPinpointProvider_assign({},defaultEndpointConfig.userAttributes),event.userAttributes)}}),ret=(tmp.userId,tmp.userAttributes,tmp.name,tmp.session,tmp.eventId,tmp.immediate,AWSPinpointProvider_rest(tmp,["userId","userAttributes","name","session","eventId","immediate"]));return JS.a.transferKeyToUpperCase(ret,[],["metrics","userAttributes","attributes"])},AWSPinpointProvider.prototype._eventError=function(err){AWSPinpointProvider_logger.error("record event failed.",err),AWSPinpointProvider_logger.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},AWSPinpointProvider.prototype._getCredentials=function(){return AWSPinpointProvider_awaiter(this,void 0,void 0,(function(){var credentials,err_3;return AWSPinpointProvider_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,Credentials.a.get()];case 1:return(credentials=_a.sent())?(AWSPinpointProvider_logger.debug("set credentials for analytics",credentials),[2,Credentials.a.shear(credentials)]):[2,null];case 2:return err_3=_a.sent(),AWSPinpointProvider_logger.debug("ensure credentials error",err_3),[2,null];case 3:return[2]}}))}))},AWSPinpointProvider.category="Analytics",AWSPinpointProvider.providerName="AWSPinpoint",AWSPinpointProvider}(),MethodEmbed_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},MethodEmbed_spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(MethodEmbed_read(arguments[i]));return ar},lists=[],MethodEmbed=function(){function MethodEmbed(context,methodName){this.context=context,this.methodName=methodName,this._originalMethod=context[methodName].bind(context)}return MethodEmbed.add=function(context,methodName,methodOverride){getInstance(context,methodName).set(methodOverride)},MethodEmbed.remove=function(context,methodName){getInstance(context,methodName).remove()},MethodEmbed.prototype.set=function(methodOverride){var _this=this;this.context[this.methodName]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return methodOverride(_this._originalMethod.apply(_this,MethodEmbed_spread(args)))}},MethodEmbed.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},MethodEmbed}();function getInstance(context,methodName){var instance=lists.filter((function(h){return h.context===context&&h.methodName===methodName}))[0];return instance||(instance=new MethodEmbed(context,methodName),lists.push(instance)),instance}var PageViewTracker_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},PageViewTracker_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},PageViewTracker_logger=new ConsoleLogger.a("PageViewTracker"),PREV_URL_KEY="aws-amplify-analytics-prevUrl",defaultOpts={enable:!1,provider:"AWSPinpoint",getUrl:function(){return JS.a.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},trackers_PageViewTracker=function(){function PageViewTracker(tracker,opts){PageViewTracker_logger.debug("initialize pageview tracker with opts",opts),this._config=Object.assign({},defaultOpts,opts),this._tracker=tracker,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}return PageViewTracker.prototype.configure=function(opts){return Object.assign(this._config,opts),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},PageViewTracker.prototype._isSameUrl=function(){return sessionStorage.getItem(PREV_URL_KEY)===this._config.getUrl()&&(PageViewTracker_logger.debug("the url is same"),!0)},PageViewTracker.prototype._pageViewTrackDefault=function(){return PageViewTracker_awaiter(this,void 0,void 0,(function(){var url,customAttrs,_a,attributes;return PageViewTracker_generator(this,(function(_b){switch(_b.label){case 0:return JS.a.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(url=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(PageViewTracker_logger.debug("not in the supported web enviroment"),[2]);case 1:return _a=_b.sent(),[3,3];case 2:_a=this._config.attributes,_b.label=3;case 3:return customAttrs=_a,attributes=Object.assign({url:url},customAttrs),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:attributes},this._config.provider).catch((function(e){PageViewTracker_logger.debug("Failed to record the page view event",e)})),sessionStorage.setItem(PREV_URL_KEY,url)),[2]}}))}))},PageViewTracker.prototype._trackFunc=function(){return PageViewTracker_awaiter(this,void 0,void 0,(function(){var url,customAttrs,_a,attributes;return PageViewTracker_generator(this,(function(_b){switch(_b.label){case 0:return JS.a.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(url=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(PageViewTracker_logger.debug("not in the supported web enviroment"),[2]);case 1:return _a=_b.sent(),[3,3];case 2:_a=this._config.attributes,_b.label=3;case 3:return customAttrs=_a,attributes=Object.assign({url:url},customAttrs),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:attributes},this._config.provider).catch((function(e){PageViewTracker_logger.debug("Failed to record the page view event",e)})),sessionStorage.setItem(PREV_URL_KEY,url)),[2]}}))}))},PageViewTracker.prototype._pageViewTrackSPA=function(){JS.a.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(MethodEmbed.add(history,"pushState",this._trackFunc),MethodEmbed.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(MethodEmbed.remove(history,"pushState"),MethodEmbed.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):PageViewTracker_logger.debug("not in the supported web enviroment")},PageViewTracker}(),proto=JS.a.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,nativeMatches=proto?proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector:null;function matches(element,test){if(element&&1===element.nodeType&&test){if("string"==typeof test||1===test.nodeType)return element===test||matchesSelector(element,test);if("length"in test)for(var i=0,item=void 0;item=test[i];i++)if(element===item||matchesSelector(element,item))return!0}return!1}function matchesSelector(element,selector){if("string"!=typeof selector)return!1;if(nativeMatches)return nativeMatches.call(element,selector);for(var nodes=element.parentNode.querySelectorAll(selector),i=0,node=void 0;node=nodes[i];i++)if(node===element)return!0;return!1}function delegate(ancestor,eventType,selector,callback,opts){void 0===opts&&(opts={});var listener=function(event){var delegateTarget;if(opts.composed&&"function"==typeof event.composedPath)for(var composedPath=event.composedPath(),i=0,node=void 0;node=composedPath[i];i++)1===node.nodeType&&matches(node,selector)&&(delegateTarget=node);else delegateTarget=function(element,selector,shouldCheckSelf){if(void 0===shouldCheckSelf&&(shouldCheckSelf=!1),element&&1===element.nodeType&&selector)for(var parent_1,parentElements=(shouldCheckSelf?[element]:[]).concat(function(ele){for(var list=[],element=ele;element&&element.parentNode&&1===element.parentNode.nodeType;)element=element.parentNode,list.push(element);return list}(element)),i=0;parent_1=parentElements[i];i++)if(matches(parent_1,selector))return parent_1}(event.target,selector,!0);delegateTarget&&callback.call(delegateTarget,event,delegateTarget)};return ancestor.addEventListener(eventType,listener,opts.useCapture),{destroy:function(){ancestor.removeEventListener(eventType,listener,opts.useCapture)}}}var EventTracker_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},EventTracker_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},EventTracker_logger=new ConsoleLogger.a("EventTracker"),EventTracker_defaultOpts={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},trackers_EventTracker=function(){function EventTracker(tracker,opts){JS.a.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},EventTracker_defaultOpts,opts),this._tracker=tracker,this._delegates={},this._trackFunc=this._trackFunc.bind(this),EventTracker_logger.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):EventTracker_logger.debug("not in the supported web environment")}return EventTracker.prototype.configure=function(opts){var _this=this;if(Object.assign(this._config,opts),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var selector_1="["+this._config.selectorPrefix+"on]";this._config.events.forEach((function(evt){_this._delegates[evt]=delegate(document,evt,selector_1,_this._trackFunc,{composed:!0,useCapture:!0})}))}}else Object.keys(this._delegates).forEach((function(key){"function"==typeof _this._delegates[key].destroy&&_this._delegates[key].destroy()})),this._delegates={};return this._config},EventTracker.prototype._trackFunc=function(event,element){return EventTracker_awaiter(this,void 0,void 0,(function(){var customAttrs,events,eventName,attrs,defaultAttrs,_a,attributes;return EventTracker_generator(this,(function(_b){switch(_b.label){case 0:return customAttrs={},events=element.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),eventName=element.getAttribute(this._config.selectorPrefix+"name"),(attrs=element.getAttribute(this._config.selectorPrefix+"attrs"))&&attrs.split(/\s*,\s*/).forEach((function(attr){var tmp=attr.trim().split(/\s*:\s*/);customAttrs[tmp[0]]=tmp[1]})),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return _a=_b.sent(),[3,3];case 2:_a=this._config.attributes,_b.label=3;case 3:return defaultAttrs=_a,attributes=Object.assign({type:event.type,target:event.target.localName+" with id "+event.target.id},defaultAttrs,customAttrs),EventTracker_logger.debug("events needed to be recorded",events),EventTracker_logger.debug("attributes needed to be attached",customAttrs),events.indexOf(event.type)<0?(EventTracker_logger.debug("event "+event.type+" is not selected to be recorded"),[2]):(this._tracker({name:eventName||"event",attributes:attributes},this._config.provider).catch((function(e){EventTracker_logger.debug("Failed to record the "+event.type+" event', "+e)})),[2])}}))}))},EventTracker}(),SessionTracker_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},SessionTracker_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},SessionTracker_logger=new ConsoleLogger.a("SessionTracker"),SessionTracker_defaultOpts={enable:!1,provider:"AWSPinpoint"},initialEventSent=!1,trackers_SessionTracker=function(){function SessionTracker(tracker,opts){this._config=Object.assign({},SessionTracker_defaultOpts,opts),this._tracker=tracker,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}return SessionTracker.prototype._envCheck=function(){if(!JS.a.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return SessionTracker_logger.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return SessionTracker_logger.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},SessionTracker.prototype._trackFunc=function(){return SessionTracker_awaiter(this,void 0,void 0,(function(){var customAttrs,_a,attributes;return SessionTracker_generator(this,(function(_b){switch(_b.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return _a=_b.sent(),[3,3];case 2:_a=this._config.attributes,_b.label=3;case 3:return customAttrs=_a,attributes=Object.assign({},customAttrs),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:attributes},this._config.provider).catch((function(e){SessionTracker_logger.debug("record session stop event failed.",e)})):this._tracker({name:"_session.start",attributes:attributes},this._config.provider).catch((function(e){SessionTracker_logger.debug("record session start event failed.",e)})),[2]}}))}))},SessionTracker.prototype._trackBeforeUnload=function(event){var _this=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then((function(custom){var attributes=Object.assign({},custom);_this._tracker({name:"_session.stop",attributes:attributes,immediate:!0},_this._config.provider).catch((function(e){SessionTracker_logger.debug("record session stop event failed.",e)}))}))},SessionTracker.prototype._sendInitialEvent=function(){return SessionTracker_awaiter(this,void 0,void 0,(function(){var customAttrs,_a,attributes;return SessionTracker_generator(this,(function(_b){switch(_b.label){case 0:return initialEventSent?(SessionTracker_logger.debug("the start session has been sent when the page is loaded"),[2]):(initialEventSent=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return _a=_b.sent(),[3,3];case 2:_a=this._config.attributes,_b.label=3;case 3:return customAttrs=_a,attributes=Object.assign({},customAttrs),this._tracker({name:"_session.start",attributes:attributes},this._config.provider).catch((function(e){SessionTracker_logger.debug("record session start event failed.",e)})),[2]}}))}))},SessionTracker.prototype.configure=function(opts){return this._envCheck()?(Object.assign(this._config,opts),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1),this._config):this._config},SessionTracker}(),Analytics_assign=function(){return(Analytics_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Analytics_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Analytics_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},Analytics_logger=new ConsoleLogger.a("AnalyticsClass"),Analytics_AMPLIFY_SYMBOL="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",trackers={pageView:trackers_PageViewTracker,event:trackers_EventTracker,session:trackers_SessionTracker},_instance=null,Analytics_AnalyticsClass=function(){function AnalyticsClass(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},_instance=this,this.record=this.record.bind(this),Hub.a.listen("auth",Analytics_listener),Hub.a.listen("storage",Analytics_listener),Hub.a.listen("analytics",Analytics_listener)}return AnalyticsClass.prototype.getModuleName=function(){return"Analytics"},AnalyticsClass.prototype.configure=function(config){var _this=this;if(!config)return this._config;Analytics_logger.debug("configure Analytics",config);var event,data,message,amplifyConfig=Parser.a.parseMobilehubConfig(config);return this._config=Object.assign({},this._config,amplifyConfig.Analytics,config),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach((function(pluggable){var providerConfig="AWSPinpoint"!==pluggable.getProviderName()||_this._config.AWSPinpoint?_this._config[pluggable.getProviderName()]:_this._config;pluggable.configure(Analytics_assign({disabled:_this._config.disabled,autoSessionRecord:_this._config.autoSessionRecord},providerConfig))})),0===this._pluggables.length&&this.addPluggable(new AWSPinpointProvider_AWSPinpointProvider),event="configured",data=null,message="The Analytics category has been configured successfully",Hub.a.dispatch("analytics",{event:event,data:data,message:message},"Analytics",Analytics_AMPLIFY_SYMBOL),Analytics_logger.debug("current configuration",this._config),this._config},AnalyticsClass.prototype.addPluggable=function(pluggable){if(pluggable&&"Analytics"===pluggable.getCategory()){this._pluggables.push(pluggable);var providerConfig="AWSPinpoint"!==pluggable.getProviderName()||this._config.AWSPinpoint?this._config[pluggable.getProviderName()]:this._config,config=Analytics_assign({disabled:this._config.disabled},providerConfig);return pluggable.configure(config),config}},AnalyticsClass.prototype.getPluggable=function(providerName){for(var i=0;i<this._pluggables.length;i+=1){var pluggable=this._pluggables[i];if(pluggable.getProviderName()===providerName)return pluggable}return Analytics_logger.debug("No plugin found with providerName",providerName),null},AnalyticsClass.prototype.removePluggable=function(providerName){for(var idx=0;idx<this._pluggables.length&&this._pluggables[idx].getProviderName()!==providerName;)idx+=1;return idx===this._pluggables.length?void Analytics_logger.debug("No plugin found with providerName",providerName):void this._pluggables.splice(idx,idx+1)},AnalyticsClass.prototype.disable=function(){this._disabled=!0},AnalyticsClass.prototype.enable=function(){this._disabled=!1},AnalyticsClass.prototype.startSession=function(provider){return Analytics_awaiter(this,void 0,void 0,(function(){var params;return Analytics_generator(this,(function(_a){return params={event:{name:"_session.start"},provider:provider},[2,this._sendEvent(params)]}))}))},AnalyticsClass.prototype.stopSession=function(provider){return Analytics_awaiter(this,void 0,void 0,(function(){var params;return Analytics_generator(this,(function(_a){return params={event:{name:"_session.stop"},provider:provider},[2,this._sendEvent(params)]}))}))},AnalyticsClass.prototype.record=function(event,provider,metrics){return Analytics_awaiter(this,void 0,void 0,(function(){var params;return Analytics_generator(this,(function(_a){return params=null,params="string"==typeof event?{event:{name:event,attributes:provider,metrics:metrics},provider:"AWSPinpoint"}:{event:event,provider:provider},[2,this._sendEvent(params)]}))}))},AnalyticsClass.prototype.updateEndpoint=function(attrs,provider){return Analytics_awaiter(this,void 0,void 0,(function(){var event;return Analytics_generator(this,(function(_a){return event=Analytics_assign(Analytics_assign({},attrs),{name:"_update_endpoint"}),[2,this.record(event,provider)]}))}))},AnalyticsClass.prototype._sendEvent=function(params){var _this=this;if(this._disabled)return Analytics_logger.debug("Analytics has been disabled"),Promise.resolve();var provider=params.provider?params.provider:"AWSPinpoint";return new Promise((function(resolve,reject){_this._pluggables.forEach((function(pluggable){pluggable.getProviderName()===provider&&pluggable.record(params,{resolve:resolve,reject:reject})}))}))},AnalyticsClass.prototype.autoTrack=function(trackerType,opts){if(trackers[trackerType]){"session"===trackerType&&(this._config.autoSessionRecord=opts.enable);var tracker=this._trackers[trackerType];tracker?tracker.configure(opts):this._trackers[trackerType]=new trackers[trackerType](this.record,opts)}else Analytics_logger.debug("invalid tracker type")},AnalyticsClass}(),endpointUpdated=!1,authConfigured=!1,analyticsConfigured=!1,Analytics_listener=function(capsule){var channel=capsule.channel,payload=capsule.payload;switch(Analytics_logger.debug("on hub capsule "+channel,payload),channel){case"auth":authEvent(payload);break;case"storage":storageEvent(payload);break;case"analytics":analyticsEvent(payload)}},storageEvent=function(payload){var _a=payload.data,attrs=_a.attrs,metrics=_a.metrics;attrs&&analyticsConfigured&&_instance.record({name:"Storage",attributes:attrs,metrics:metrics}).catch((function(e){Analytics_logger.debug("Failed to send the storage event automatically",e)}))},authEvent=function(payload){var event=payload.event;if(event){var recordAuthEvent=function(eventName){return Analytics_awaiter(void 0,void 0,void 0,(function(){var err_1;return Analytics_generator(this,(function(_a){switch(_a.label){case 0:if(!authConfigured||!analyticsConfigured)return[3,4];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,_instance.record({name:"_userauth."+eventName})];case 2:return[2,_a.sent()];case 3:return err_1=_a.sent(),Analytics_logger.debug("Failed to send the "+eventName+" event automatically",err_1),[3,4];case 4:return[2]}}))}))};switch(event){case"signIn":return recordAuthEvent("sign_in");case"signUp":return recordAuthEvent("sign_up");case"signOut":return recordAuthEvent("sign_out");case"signIn_failure":return recordAuthEvent("auth_fail");case"configured":(authConfigured=!0)&&analyticsConfigured&&sendEvents()}}},analyticsEvent=function(payload){var event=payload.event;if(event)switch(event){case"pinpointProvider_configured":analyticsConfigured=!0,authConfigured&&analyticsConfigured&&sendEvents()}},sendEvents=function(){var config=_instance.configure();!endpointUpdated&&config.autoSessionRecord&&(_instance.updateEndpoint({immediate:!0}).catch((function(e){Analytics_logger.debug("Failed to update the endpoint",e)})),endpointUpdated=!0),_instance.autoTrack("session",{enable:config.autoSessionRecord})},Analytics=new Analytics_AnalyticsClass;Amplify.a.register(Analytics);var tslib_es6_extendStatics=function(d,b){return(tslib_es6_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function tslib_es6_extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}tslib_es6_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var tslib_es6_assign=function(){return(tslib_es6_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function tslib_es6_awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function tslib_es6_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.create;var models_0_AddTagsToStreamInput,models_0_InvalidArgumentException,models_0_LimitExceededException,models_0_ResourceInUseException,models_0_ResourceNotFoundException,models_0_HashKeyRange,models_0_ChildShard,ConsumerStatus,models_0_Consumer,models_0_ConsumerDescription,models_0_CreateStreamInput,models_0_DecreaseStreamRetentionPeriodInput,models_0_DeleteStreamInput,models_0_DeregisterStreamConsumerInput,models_0_DescribeLimitsInput,models_0_DescribeLimitsOutput,models_0_DescribeStreamInput,EncryptionType,MetricsName,models_0_EnhancedMetrics,models_0_SequenceNumberRange,models_0_Shard,StreamStatus,models_0_StreamDescription,models_0_DescribeStreamOutput,models_0_DescribeStreamConsumerInput,models_0_DescribeStreamConsumerOutput,models_0_DescribeStreamSummaryInput,models_0_StreamDescriptionSummary,models_0_DescribeStreamSummaryOutput,models_0_DisableEnhancedMonitoringInput,models_0_EnhancedMonitoringOutput,models_0_EnableEnhancedMonitoringInput,models_0_ExpiredIteratorException,models_0_ExpiredNextTokenException,models_0_GetRecordsInput,models_0_Record,models_0_GetRecordsOutput,models_0_KMSAccessDeniedException,models_0_KMSDisabledException,models_0_KMSInvalidStateException,models_0_KMSNotFoundException,models_0_KMSOptInRequired,models_0_KMSThrottlingException,models_0_ProvisionedThroughputExceededException,ShardIteratorType,models_0_GetShardIteratorInput,models_0_GetShardIteratorOutput,models_0_IncreaseStreamRetentionPeriodInput,models_0_InternalFailureException,ShardFilterType,models_0_ShardFilter,models_0_ListShardsInput,models_0_ListShardsOutput,models_0_ListStreamConsumersInput,models_0_ListStreamConsumersOutput,models_0_ListStreamsInput,models_0_ListStreamsOutput,models_0_ListTagsForStreamInput,models_0_Tag,models_0_ListTagsForStreamOutput,models_0_MergeShardsInput,models_0_PutRecordInput,models_0_PutRecordOutput,models_0_PutRecordsRequestEntry,models_0_PutRecordsInput,models_0_PutRecordsResultEntry,models_0_PutRecordsOutput,models_0_RegisterStreamConsumerInput,models_0_RegisterStreamConsumerOutput,models_0_RemoveTagsFromStreamInput,models_0_SplitShardInput,models_0_StartStreamEncryptionInput,models_0_StopStreamEncryptionInput,models_0_StartingPosition,models_0_SubscribeToShardInput,models_0_SubscribeToShardEvent,SubscribeToShardEventStream,models_0_SubscribeToShardOutput,ScalingType,models_0_UpdateShardCountInput,models_0_UpdateShardCountOutput;Object.create;(models_0_AddTagsToStreamInput||(models_0_AddTagsToStreamInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_InvalidArgumentException||(models_0_InvalidArgumentException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_LimitExceededException||(models_0_LimitExceededException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ResourceInUseException||(models_0_ResourceInUseException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ResourceNotFoundException||(models_0_ResourceNotFoundException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_HashKeyRange||(models_0_HashKeyRange={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ChildShard||(models_0_ChildShard={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},function(ConsumerStatus){ConsumerStatus.ACTIVE="ACTIVE",ConsumerStatus.CREATING="CREATING",ConsumerStatus.DELETING="DELETING"}(ConsumerStatus||(ConsumerStatus={})),(models_0_Consumer||(models_0_Consumer={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ConsumerDescription||(models_0_ConsumerDescription={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_CreateStreamInput||(models_0_CreateStreamInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DecreaseStreamRetentionPeriodInput||(models_0_DecreaseStreamRetentionPeriodInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DeleteStreamInput||(models_0_DeleteStreamInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DeregisterStreamConsumerInput||(models_0_DeregisterStreamConsumerInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DescribeLimitsInput||(models_0_DescribeLimitsInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DescribeLimitsOutput||(models_0_DescribeLimitsOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DescribeStreamInput||(models_0_DescribeStreamInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},function(EncryptionType){EncryptionType.KMS="KMS",EncryptionType.NONE="NONE"}(EncryptionType||(EncryptionType={})),function(MetricsName){MetricsName.ALL="ALL",MetricsName.INCOMING_BYTES="IncomingBytes",MetricsName.INCOMING_RECORDS="IncomingRecords",MetricsName.ITERATOR_AGE_MILLISECONDS="IteratorAgeMilliseconds",MetricsName.OUTGOING_BYTES="OutgoingBytes",MetricsName.OUTGOING_RECORDS="OutgoingRecords",MetricsName.READ_PROVISIONED_THROUGHPUT_EXCEEDED="ReadProvisionedThroughputExceeded",MetricsName.WRITE_PROVISIONED_THROUGHPUT_EXCEEDED="WriteProvisionedThroughputExceeded"}(MetricsName||(MetricsName={})),(models_0_EnhancedMetrics||(models_0_EnhancedMetrics={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_SequenceNumberRange||(models_0_SequenceNumberRange={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_Shard||(models_0_Shard={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},function(StreamStatus){StreamStatus.ACTIVE="ACTIVE",StreamStatus.CREATING="CREATING",StreamStatus.DELETING="DELETING",StreamStatus.UPDATING="UPDATING"}(StreamStatus||(StreamStatus={})),(models_0_StreamDescription||(models_0_StreamDescription={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DescribeStreamOutput||(models_0_DescribeStreamOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DescribeStreamConsumerInput||(models_0_DescribeStreamConsumerInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DescribeStreamConsumerOutput||(models_0_DescribeStreamConsumerOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DescribeStreamSummaryInput||(models_0_DescribeStreamSummaryInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_StreamDescriptionSummary||(models_0_StreamDescriptionSummary={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DescribeStreamSummaryOutput||(models_0_DescribeStreamSummaryOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_DisableEnhancedMonitoringInput||(models_0_DisableEnhancedMonitoringInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_EnhancedMonitoringOutput||(models_0_EnhancedMonitoringOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_EnableEnhancedMonitoringInput||(models_0_EnableEnhancedMonitoringInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ExpiredIteratorException||(models_0_ExpiredIteratorException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ExpiredNextTokenException||(models_0_ExpiredNextTokenException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_GetRecordsInput||(models_0_GetRecordsInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_Record||(models_0_Record={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_GetRecordsOutput||(models_0_GetRecordsOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_KMSAccessDeniedException||(models_0_KMSAccessDeniedException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_KMSDisabledException||(models_0_KMSDisabledException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_KMSInvalidStateException||(models_0_KMSInvalidStateException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_KMSNotFoundException||(models_0_KMSNotFoundException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_KMSOptInRequired||(models_0_KMSOptInRequired={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_KMSThrottlingException||(models_0_KMSThrottlingException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ProvisionedThroughputExceededException||(models_0_ProvisionedThroughputExceededException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},function(ShardIteratorType){ShardIteratorType.AFTER_SEQUENCE_NUMBER="AFTER_SEQUENCE_NUMBER",ShardIteratorType.AT_SEQUENCE_NUMBER="AT_SEQUENCE_NUMBER",ShardIteratorType.AT_TIMESTAMP="AT_TIMESTAMP",ShardIteratorType.LATEST="LATEST",ShardIteratorType.TRIM_HORIZON="TRIM_HORIZON"}(ShardIteratorType||(ShardIteratorType={})),(models_0_GetShardIteratorInput||(models_0_GetShardIteratorInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_GetShardIteratorOutput||(models_0_GetShardIteratorOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_IncreaseStreamRetentionPeriodInput||(models_0_IncreaseStreamRetentionPeriodInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_InternalFailureException||(models_0_InternalFailureException={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},function(ShardFilterType){ShardFilterType.AFTER_SHARD_ID="AFTER_SHARD_ID",ShardFilterType.AT_LATEST="AT_LATEST",ShardFilterType.AT_TIMESTAMP="AT_TIMESTAMP",ShardFilterType.AT_TRIM_HORIZON="AT_TRIM_HORIZON",ShardFilterType.FROM_TIMESTAMP="FROM_TIMESTAMP",ShardFilterType.FROM_TRIM_HORIZON="FROM_TRIM_HORIZON"}(ShardFilterType||(ShardFilterType={})),(models_0_ShardFilter||(models_0_ShardFilter={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ListShardsInput||(models_0_ListShardsInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ListShardsOutput||(models_0_ListShardsOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ListStreamConsumersInput||(models_0_ListStreamConsumersInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ListStreamConsumersOutput||(models_0_ListStreamConsumersOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ListStreamsInput||(models_0_ListStreamsInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ListStreamsOutput||(models_0_ListStreamsOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ListTagsForStreamInput||(models_0_ListTagsForStreamInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_Tag||(models_0_Tag={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_ListTagsForStreamOutput||(models_0_ListTagsForStreamOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_MergeShardsInput||(models_0_MergeShardsInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_PutRecordInput||(models_0_PutRecordInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_PutRecordOutput||(models_0_PutRecordOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_PutRecordsRequestEntry||(models_0_PutRecordsRequestEntry={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_PutRecordsInput||(models_0_PutRecordsInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_PutRecordsResultEntry||(models_0_PutRecordsResultEntry={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_PutRecordsOutput||(models_0_PutRecordsOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_RegisterStreamConsumerInput||(models_0_RegisterStreamConsumerInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_RegisterStreamConsumerOutput||(models_0_RegisterStreamConsumerOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_RemoveTagsFromStreamInput||(models_0_RemoveTagsFromStreamInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_SplitShardInput||(models_0_SplitShardInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_StartStreamEncryptionInput||(models_0_StartStreamEncryptionInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_StopStreamEncryptionInput||(models_0_StopStreamEncryptionInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_StartingPosition||(models_0_StartingPosition={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_SubscribeToShardInput||(models_0_SubscribeToShardInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_SubscribeToShardEvent||(models_0_SubscribeToShardEvent={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},function(SubscribeToShardEventStream){SubscribeToShardEventStream.visit=function(value,visitor){return void 0!==value.SubscribeToShardEvent?visitor.SubscribeToShardEvent(value.SubscribeToShardEvent):void 0!==value.ResourceNotFoundException?visitor.ResourceNotFoundException(value.ResourceNotFoundException):void 0!==value.ResourceInUseException?visitor.ResourceInUseException(value.ResourceInUseException):void 0!==value.KMSDisabledException?visitor.KMSDisabledException(value.KMSDisabledException):void 0!==value.KMSInvalidStateException?visitor.KMSInvalidStateException(value.KMSInvalidStateException):void 0!==value.KMSAccessDeniedException?visitor.KMSAccessDeniedException(value.KMSAccessDeniedException):void 0!==value.KMSNotFoundException?visitor.KMSNotFoundException(value.KMSNotFoundException):void 0!==value.KMSOptInRequired?visitor.KMSOptInRequired(value.KMSOptInRequired):void 0!==value.KMSThrottlingException?visitor.KMSThrottlingException(value.KMSThrottlingException):void 0!==value.InternalFailureException?visitor.InternalFailureException(value.InternalFailureException):visitor._(value.$unknown[0],value.$unknown[1])},SubscribeToShardEventStream.filterSensitiveLog=function(obj){var _a;return void 0!==obj.SubscribeToShardEvent?{SubscribeToShardEvent:models_0_SubscribeToShardEvent.filterSensitiveLog(obj.SubscribeToShardEvent)}:void 0!==obj.ResourceNotFoundException?{ResourceNotFoundException:models_0_ResourceNotFoundException.filterSensitiveLog(obj.ResourceNotFoundException)}:void 0!==obj.ResourceInUseException?{ResourceInUseException:models_0_ResourceInUseException.filterSensitiveLog(obj.ResourceInUseException)}:void 0!==obj.KMSDisabledException?{KMSDisabledException:models_0_KMSDisabledException.filterSensitiveLog(obj.KMSDisabledException)}:void 0!==obj.KMSInvalidStateException?{KMSInvalidStateException:models_0_KMSInvalidStateException.filterSensitiveLog(obj.KMSInvalidStateException)}:void 0!==obj.KMSAccessDeniedException?{KMSAccessDeniedException:models_0_KMSAccessDeniedException.filterSensitiveLog(obj.KMSAccessDeniedException)}:void 0!==obj.KMSNotFoundException?{KMSNotFoundException:models_0_KMSNotFoundException.filterSensitiveLog(obj.KMSNotFoundException)}:void 0!==obj.KMSOptInRequired?{KMSOptInRequired:models_0_KMSOptInRequired.filterSensitiveLog(obj.KMSOptInRequired)}:void 0!==obj.KMSThrottlingException?{KMSThrottlingException:models_0_KMSThrottlingException.filterSensitiveLog(obj.KMSThrottlingException)}:void 0!==obj.InternalFailureException?{InternalFailureException:models_0_InternalFailureException.filterSensitiveLog(obj.InternalFailureException)}:void 0!==obj.$unknown?((_a={})[obj.$unknown[0]]="UNKNOWN",_a):void 0}}(SubscribeToShardEventStream||(SubscribeToShardEventStream={})),(models_0_SubscribeToShardOutput||(models_0_SubscribeToShardOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign(tslib_es6_assign({},obj),obj.EventStream&&{EventStream:"STREAMING_CONTENT"})},function(ScalingType){ScalingType.UNIFORM_SCALING="UNIFORM_SCALING"}(ScalingType||(ScalingType={})),(models_0_UpdateShardCountInput||(models_0_UpdateShardCountInput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)},(models_0_UpdateShardCountOutput||(models_0_UpdateShardCountOutput={})).filterSensitiveLog=function(obj){return tslib_es6_assign({},obj)};var deserializeAws_json1_1PutRecordsCommandError=function(output,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,_e,_f,_g,_h,_j,_k,_l,parsedBody,message,_m;return tslib_es6_generator(this,(function(_o){switch(_o.label){case 0:return _a=[tslib_es6_assign({},output)],_m={},[4,Aws_json1_1_parseBody(output.body,context)];case 1:switch(parsedOutput=tslib_es6_assign.apply(void 0,_a.concat([(_m.body=_o.sent(),_m)])),errorCode="UnknownError",errorCode=Aws_json1_1_loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"InvalidArgumentException":case"com.amazonaws.kinesis#InvalidArgumentException":return[3,2];case"KMSAccessDeniedException":case"com.amazonaws.kinesis#KMSAccessDeniedException":return[3,4];case"KMSDisabledException":case"com.amazonaws.kinesis#KMSDisabledException":return[3,6];case"KMSInvalidStateException":case"com.amazonaws.kinesis#KMSInvalidStateException":return[3,8];case"KMSNotFoundException":case"com.amazonaws.kinesis#KMSNotFoundException":return[3,10];case"KMSOptInRequired":case"com.amazonaws.kinesis#KMSOptInRequired":return[3,12];case"KMSThrottlingException":case"com.amazonaws.kinesis#KMSThrottlingException":return[3,14];case"ProvisionedThroughputExceededException":case"com.amazonaws.kinesis#ProvisionedThroughputExceededException":return[3,16];case"ResourceNotFoundException":case"com.amazonaws.kinesis#ResourceNotFoundException":return[3,18]}return[3,20];case 2:return _c=[{}],[4,deserializeAws_json1_1InvalidArgumentExceptionResponse(parsedOutput,context)];case 3:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_c.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 4:return _d=[{}],[4,deserializeAws_json1_1KMSAccessDeniedExceptionResponse(parsedOutput,context)];case 5:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_d.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 6:return _e=[{}],[4,deserializeAws_json1_1KMSDisabledExceptionResponse(parsedOutput,context)];case 7:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_e.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 8:return _f=[{}],[4,deserializeAws_json1_1KMSInvalidStateExceptionResponse(parsedOutput,context)];case 9:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_f.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 10:return _g=[{}],[4,deserializeAws_json1_1KMSNotFoundExceptionResponse(parsedOutput,context)];case 11:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_g.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 12:return _h=[{}],[4,deserializeAws_json1_1KMSOptInRequiredResponse(parsedOutput,context)];case 13:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_h.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 14:return _j=[{}],[4,deserializeAws_json1_1KMSThrottlingExceptionResponse(parsedOutput,context)];case 15:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_j.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 16:return _k=[{}],[4,deserializeAws_json1_1ProvisionedThroughputExceededExceptionResponse(parsedOutput,context)];case 17:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_k.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 18:return _l=[{}],[4,deserializeAws_json1_1ResourceNotFoundExceptionResponse(parsedOutput,context)];case 19:return response=tslib_es6_assign.apply(void 0,[tslib_es6_assign.apply(void 0,_l.concat([_o.sent()])),{name:errorCode,$metadata:Aws_json1_1_deserializeMetadata(output)}]),[3,21];case 20:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=tslib_es6_assign(tslib_es6_assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(output)}),_o.label=21;case 21:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_json1_1InvalidArgumentExceptionResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1InvalidArgumentException(body,context),[2,tslib_es6_assign({name:"InvalidArgumentException",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1KMSAccessDeniedExceptionResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1KMSAccessDeniedException(body,context),[2,tslib_es6_assign({name:"KMSAccessDeniedException",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1KMSDisabledExceptionResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1KMSDisabledException(body,context),[2,tslib_es6_assign({name:"KMSDisabledException",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1KMSInvalidStateExceptionResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1KMSInvalidStateException(body,context),[2,tslib_es6_assign({name:"KMSInvalidStateException",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1KMSNotFoundExceptionResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1KMSNotFoundException(body,context),[2,tslib_es6_assign({name:"KMSNotFoundException",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1KMSOptInRequiredResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1KMSOptInRequired(body,context),[2,tslib_es6_assign({name:"KMSOptInRequired",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1KMSThrottlingExceptionResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1KMSThrottlingException(body,context),[2,tslib_es6_assign({name:"KMSThrottlingException",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1ProvisionedThroughputExceededExceptionResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1ProvisionedThroughputExceededException(body,context),[2,tslib_es6_assign({name:"ProvisionedThroughputExceededException",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1ResourceNotFoundExceptionResponse=function(parsedOutput,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1ResourceNotFoundException(body,context),[2,tslib_es6_assign({name:"ResourceNotFoundException",$fault:"client",$metadata:Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},serializeAws_json1_1PutRecordsInput=function(input,context){return tslib_es6_assign(tslib_es6_assign({},void 0!==input.Records&&null!==input.Records&&{Records:serializeAws_json1_1PutRecordsRequestEntryList(input.Records,context)}),void 0!==input.StreamName&&null!==input.StreamName&&{StreamName:input.StreamName})},serializeAws_json1_1PutRecordsRequestEntryList=function(input,context){return input.filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(input,context){return tslib_es6_assign(tslib_es6_assign(tslib_es6_assign({},void 0!==input.Data&&null!==input.Data&&{Data:context.base64Encoder(input.Data)}),void 0!==input.ExplicitHashKey&&null!==input.ExplicitHashKey&&{ExplicitHashKey:input.ExplicitHashKey}),void 0!==input.PartitionKey&&null!==input.PartitionKey&&{PartitionKey:input.PartitionKey})}(entry,context)}))},deserializeAws_json1_1InvalidArgumentException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1KMSAccessDeniedException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1KMSDisabledException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1KMSInvalidStateException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1KMSNotFoundException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1KMSOptInRequired=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1KMSThrottlingException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1ProvisionedThroughputExceededException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1PutRecordsOutput=function(output,context){return{EncryptionType:void 0!==output.EncryptionType&&null!==output.EncryptionType?output.EncryptionType:void 0,FailedRecordCount:void 0!==output.FailedRecordCount&&null!==output.FailedRecordCount?output.FailedRecordCount:void 0,Records:void 0!==output.Records&&null!==output.Records?deserializeAws_json1_1PutRecordsResultEntryList(output.Records,context):void 0}},deserializeAws_json1_1PutRecordsResultEntryList=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(output,context){return{ErrorCode:void 0!==output.ErrorCode&&null!==output.ErrorCode?output.ErrorCode:void 0,ErrorMessage:void 0!==output.ErrorMessage&&null!==output.ErrorMessage?output.ErrorMessage:void 0,SequenceNumber:void 0!==output.SequenceNumber&&null!==output.SequenceNumber?output.SequenceNumber:void 0,ShardId:void 0!==output.ShardId&&null!==output.ShardId?output.ShardId:void 0}}(entry)}))},deserializeAws_json1_1ResourceNotFoundException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},Aws_json1_1_deserializeMetadata=function(output){var _a;return{httpStatusCode:output.statusCode,requestId:null!==(_a=output.headers["x-amzn-requestid"])&&void 0!==_a?_a:output.headers["x-amzn-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}},Aws_json1_1_collectBody=function(streamBody,context){return void 0===streamBody&&(streamBody=new Uint8Array),streamBody instanceof Uint8Array?Promise.resolve(streamBody):context.streamCollector(streamBody)||Promise.resolve(new Uint8Array)},buildHttpRpcRequest=function(context,headers,path,resolvedHostname,body){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var _a,hostname,_b,protocol,port,contents;return tslib_es6_generator(this,(function(_c){switch(_c.label){case 0:return[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,contents={protocol:protocol,hostname:hostname,port:port,method:"POST",path:path,headers:headers},void 0!==resolvedHostname&&(contents.hostname=resolvedHostname),void 0!==body&&(contents.body=body),[2,new es.a(contents)]}}))}))},Aws_json1_1_parseBody=function(streamBody,context){return function(streamBody,context){return Aws_json1_1_collectBody(streamBody,context).then((function(body){return context.utf8Encoder(body)}))}(streamBody,context).then((function(encoded){return encoded.length?JSON.parse(encoded):{}}))},Aws_json1_1_loadRestJsonErrorCode=function(output,data){var object,key,sanitizeErrorCode=function(rawValue){var cleanValue=rawValue;return cleanValue.indexOf(":")>=0&&(cleanValue=cleanValue.split(":")[0]),cleanValue.indexOf("#")>=0&&(cleanValue=cleanValue.split("#")[1]),cleanValue},headerKey=(object=output.headers,key="x-amzn-errortype",Object.keys(object).find((function(k){return k.toLowerCase()===key.toLowerCase()})));return void 0!==headerKey?sanitizeErrorCode(output.headers[headerKey]):void 0!==data.code?sanitizeErrorCode(data.code):void 0!==data.__type?sanitizeErrorCode(data.__type):""},PutRecordsCommand_PutRecordsCommand=function(_super){function PutRecordsCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return tslib_es6_extends(PutRecordsCommand,_super),PutRecordsCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"KinesisClient",commandName:"PutRecordsCommand",inputFilterSensitiveLog:models_0_PutRecordsInput.filterSensitiveLog,outputFilterSensitiveLog:models_0_PutRecordsOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},PutRecordsCommand.prototype.serialize=function(input,context){return function(input,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var headers,body;return tslib_es6_generator(this,(function(_a){return headers={"content-type":"application/x-amz-json-1.1","x-amz-target":"Kinesis_20131202.PutRecords"},body=JSON.stringify(serializeAws_json1_1PutRecordsInput(input,context)),[2,buildHttpRpcRequest(context,headers,"/",void 0,body)]}))}))}(input,context)},PutRecordsCommand.prototype.deserialize=function(output,context){return function(output,context){return tslib_es6_awaiter(void 0,void 0,void 0,(function(){var data,contents,response;return tslib_es6_generator(this,(function(_a){switch(_a.label){case 0:return output.statusCode>=300?[2,deserializeAws_json1_1PutRecordsCommandError(output,context)]:[4,Aws_json1_1_parseBody(output.body,context)];case 1:return data=_a.sent(),contents=deserializeAws_json1_1PutRecordsOutput(data,context),response=tslib_es6_assign({$metadata:Aws_json1_1_deserializeMetadata(output)},contents),[2,Promise.resolve(response)]}}))}))}(output,context)},PutRecordsCommand}(dist_es.b),dist_es_package=__webpack_require__(316),eventstream_serde_browser_dist_es=__webpack_require__(189),endpoints_AWS_REGIONS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),endpoints_AWS_CN_REGIONS=new Set(["cn-north-1","cn-northwest-1"]),endpoints_AWS_ISO_REGIONS=new Set(["us-iso-east-1"]),endpoints_AWS_ISO_B_REGIONS=new Set(["us-isob-east-1"]),endpoints_AWS_US_GOV_REGIONS=new Set(["us-gov-east-1","us-gov-west-1"]),runtimeConfig_shared_ClientSharedValues={apiVersion:"2013-12-02",disableHostPrefix:!1,logger:{},regionInfoProvider:function(region,options){var regionInfo=void 0;switch(region){case"af-south-1":regionInfo={hostname:"kinesis.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":regionInfo={hostname:"kinesis.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":regionInfo={hostname:"kinesis.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":regionInfo={hostname:"kinesis.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":regionInfo={hostname:"kinesis.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":regionInfo={hostname:"kinesis.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":regionInfo={hostname:"kinesis.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":regionInfo={hostname:"kinesis.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":regionInfo={hostname:"kinesis.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":regionInfo={hostname:"kinesis.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":regionInfo={hostname:"kinesis.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":regionInfo={hostname:"kinesis.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":regionInfo={hostname:"kinesis.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":regionInfo={hostname:"kinesis.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":regionInfo={hostname:"kinesis.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":regionInfo={hostname:"kinesis.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":regionInfo={hostname:"kinesis-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":regionInfo={hostname:"kinesis-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-west-1":regionInfo={hostname:"kinesis-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":regionInfo={hostname:"kinesis-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":regionInfo={hostname:"kinesis.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":regionInfo={hostname:"kinesis.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":regionInfo={hostname:"kinesis.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":regionInfo={hostname:"kinesis.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":regionInfo={hostname:"kinesis.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"us-gov-west-1":regionInfo={hostname:"kinesis.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-iso-east-1":regionInfo={hostname:"kinesis.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":regionInfo={hostname:"kinesis.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":regionInfo={hostname:"kinesis.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":regionInfo={hostname:"kinesis.us-west-2.amazonaws.com",partition:"aws"};break;default:endpoints_AWS_REGIONS.has(region)&&(regionInfo={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",region),partition:"aws"}),endpoints_AWS_CN_REGIONS.has(region)&&(regionInfo={hostname:"kinesis.{region}.amazonaws.com.cn".replace("{region}",region),partition:"aws-cn"}),endpoints_AWS_ISO_REGIONS.has(region)&&(regionInfo={hostname:"kinesis.{region}.c2s.ic.gov".replace("{region}",region),partition:"aws-iso"}),endpoints_AWS_ISO_B_REGIONS.has(region)&&(regionInfo={hostname:"kinesis.{region}.sc2s.sgov.gov".replace("{region}",region),partition:"aws-iso-b"}),endpoints_AWS_US_GOV_REGIONS.has(region)&&(regionInfo={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",region),partition:"aws-us-gov"}),void 0===regionInfo&&(regionInfo={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",region),partition:"aws"})}return Promise.resolve(tslib_es6_assign({signingService:"kinesis"},regionInfo))},serviceId:"Kinesis",urlParser:url_parser_dist_es.a},runtimeConfig_browser_ClientDefaultValues=tslib_es6_assign(tslib_es6_assign({},runtimeConfig_shared_ClientSharedValues),{runtime:"browser",base64Decoder:util_base64_browser_dist_es.a,base64Encoder:util_base64_browser_dist_es.b,bodyLengthChecker:util_body_length_browser_dist_es.a,credentialDefaultProvider:function(_){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(util_user_agent_browser_dist_es.a)({serviceId:runtimeConfig_shared_ClientSharedValues.serviceId,clientVersion:dist_es_package.version}),eventStreamSerdeProvider:eventstream_serde_browser_dist_es.a,maxAttempts:middleware_retry_dist_es.a,region:Object(invalid_dependency_dist_es.a)("Region is missing"),requestHandler:new fetch_http_handler_dist_es.a,sha256:build.Sha256,streamCollector:fetch_http_handler_dist_es.b,utf8Decoder:util_utf8_browser_dist_es.fromUtf8,utf8Encoder:util_utf8_browser_dist_es.toUtf8}),eventstream_serde_config_resolver_dist_es=__webpack_require__(191),KinesisClient_KinesisClient=function(_super){function KinesisClient(configuration){var _this=this,_config_0=tslib_es6_assign(tslib_es6_assign({},runtimeConfig_browser_ClientDefaultValues),configuration),_config_1=Object(config_resolver_dist_es.b)(_config_0),_config_2=Object(config_resolver_dist_es.a)(_config_1),_config_3=Object(middleware_signing_dist_es.b)(_config_2),_config_4=Object(middleware_retry_dist_es.c)(_config_3),_config_5=Object(middleware_host_header_dist_es.b)(_config_4),_config_6=Object(middleware_user_agent_dist_es.b)(_config_5),_config_7=Object(eventstream_serde_config_resolver_dist_es.a)(_config_6);return(_this=_super.call(this,_config_7)||this).config=_config_7,_this.middlewareStack.use(Object(middleware_signing_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_retry_dist_es.b)(_this.config)),_this.middlewareStack.use(Object(middleware_content_length_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_host_header_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_logger_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_user_agent_dist_es.a)(_this.config)),_this}return tslib_es6_extends(KinesisClient,_super),KinesisClient.prototype.destroy=function(){_super.prototype.destroy.call(this)},KinesisClient}(dist_es.a),AWSKinesisProvider_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AWSKinesisProvider_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},AWSKinesisProvider_logger=new ConsoleLogger.a("AWSKinesisProvider"),AWSKinesisProvider_AWSKinesisProvider=function(){function AWSKinesisProvider(config){this._buffer=[],this._config=config||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._setupTimer()}return AWSKinesisProvider.prototype._setupTimer=function(){var _this=this;this._timer&&clearInterval(this._timer);var _a=this._config,flushSize=_a.flushSize,flushInterval=_a.flushInterval;this._timer=setInterval((function(){for(var size=_this._buffer.length<flushSize?_this._buffer.length:flushSize,events=[],i=0;i<size;i+=1){var params=_this._buffer.shift();events.push(params)}_this._sendFromBuffer(events)}),flushInterval)},AWSKinesisProvider.prototype.getCategory=function(){return"Analytics"},AWSKinesisProvider.prototype.getProviderName=function(){return"AWSKinesis"},AWSKinesisProvider.prototype.configure=function(config){AWSKinesisProvider_logger.debug("configure Analytics",config);var conf=config||{};return this._config=Object.assign({},this._config,conf),this._setupTimer(),this._config},AWSKinesisProvider.prototype.record=function(params){return AWSKinesisProvider_awaiter(this,void 0,void 0,(function(){var credentials;return AWSKinesisProvider_generator(this,(function(_a){switch(_a.label){case 0:return[4,this._getCredentials()];case 1:return(credentials=_a.sent())?(Object.assign(params,{config:this._config,credentials:credentials}),[2,this._putToBuffer(params)]):[2,Promise.resolve(!1)]}}))}))},AWSKinesisProvider.prototype.updateEndpoint=function(){return AWSKinesisProvider_logger.debug("updateEndpoint is not implemented in Kinesis provider"),Promise.resolve(!0)},AWSKinesisProvider.prototype._putToBuffer=function(params){return this._buffer.length<1e3?(this._buffer.push(params),Promise.resolve(!0)):(AWSKinesisProvider_logger.debug("exceed analytics events buffer size"),Promise.reject(!1))},AWSKinesisProvider.prototype._sendFromBuffer=function(events){for(var _this=this,eventsGroups=[],preCred=null,group=[],i=0;i<events.length;i+=1){var cred=events[i].credentials;0===i?(group.push(events[i]),preCred=cred):cred.sessionToken===preCred.sessionToken&&cred.identityId===preCred.identityId?(AWSKinesisProvider_logger.debug("no change for cred, put event in the same group"),group.push(events[i])):(eventsGroups.push(group),(group=[]).push(events[i]),preCred=cred)}eventsGroups.push(group),eventsGroups.map((function(evts){_this._sendEvents(evts)}))},AWSKinesisProvider.prototype._sendEvents=function(group){var _this=this;if(0!==group.length){var _a=group[0],config=_a.config,credentials=_a.credentials;if(!this._init(config,credentials))return!1;var records={};group.map((function(params){var evt=params.event,streamName=evt.streamName;void 0===records[streamName]&&(records[streamName]=[]);var bufferData=evt.data&&"string"!=typeof evt.data?JSON.stringify(evt.data):evt.data,record={Data:Object(util_utf8_browser_dist_es.fromUtf8)(bufferData),PartitionKey:evt.partitionKey||"partition-"+credentials.identityId};records[streamName].push(record)})),Object.keys(records).map((function(streamName){return AWSKinesisProvider_awaiter(_this,void 0,void 0,(function(){var command,err_1;return AWSKinesisProvider_generator(this,(function(_a){switch(_a.label){case 0:AWSKinesisProvider_logger.debug("putting records to kinesis with records",records[streamName]),_a.label=1;case 1:return _a.trys.push([1,3,,4]),command=new PutRecordsCommand_PutRecordsCommand({Records:records[streamName],StreamName:streamName}),[4,this._kinesis.send(command)];case 2:return _a.sent(),AWSKinesisProvider_logger.debug("Upload records to stream",streamName),[3,4];case 3:return err_1=_a.sent(),AWSKinesisProvider_logger.debug("Failed to upload records to Kinesis",err_1),[3,4];case 4:return[2]}}))}))}))}},AWSKinesisProvider.prototype._init=function(config,credentials){if(AWSKinesisProvider_logger.debug("init clients"),this._kinesis&&this._config.credentials&&this._config.credentials.sessionToken===credentials.sessionToken&&this._config.credentials.identityId===credentials.identityId)return AWSKinesisProvider_logger.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=credentials;var region=config.region,endpoint=config.endpoint;return this._initKinesis(region,endpoint,credentials)},AWSKinesisProvider.prototype._initKinesis=function(region,endpoint,credentials){return AWSKinesisProvider_logger.debug("initialize kinesis with credentials",credentials),this._kinesis=new KinesisClient_KinesisClient({region:region,credentials:credentials,customUserAgent:Object(Platform.b)(),endpoint:endpoint}),!0},AWSKinesisProvider.prototype._getCredentials=function(){var _this=this;return Credentials.a.get().then((function(credentials){return credentials?(AWSKinesisProvider_logger.debug("set credentials for analytics",_this._config.credentials),Credentials.a.shear(credentials)):null})).catch((function(err){return AWSKinesisProvider_logger.debug("ensure credentials error",err),null}))},AWSKinesisProvider}(),tslib_tslib_es6_extendStatics=function(d,b){return(tslib_tslib_es6_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function tslib_tslib_es6_extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}tslib_tslib_es6_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var tslib_tslib_es6_assign=function(){return(tslib_tslib_es6_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function tslib_tslib_es6_awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function tslib_tslib_es6_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.create;var models_0_BufferingHints,models_0_CloudWatchLoggingOptions,CompressionFormat,models_0_ConcurrentModificationException,ContentEncoding,models_0_CopyCommand,KeyType,models_0_DeliveryStreamEncryptionConfigurationInput,models_0_ElasticsearchBufferingHints,ProcessorParameterName,models_0_ProcessorParameter,models_0_Processor,models_0_ProcessingConfiguration,models_0_ElasticsearchRetryOptions,models_0_KMSEncryptionConfig,models_0_EncryptionConfiguration,models_0_S3DestinationConfiguration,models_0_VpcConfiguration,models_0_ElasticsearchDestinationConfiguration,models_0_HiveJsonSerDe,models_0_OpenXJsonSerDe,models_0_Deserializer,models_0_InputFormatConfiguration,OrcCompression,OrcFormatVersion,models_0_OrcSerDe,ParquetCompression,ParquetWriterVersion,models_0_ParquetSerDe,models_0_Serializer,models_0_OutputFormatConfiguration,models_0_SchemaConfiguration,models_0_DataFormatConversionConfiguration,models_0_ExtendedS3DestinationConfiguration,models_0_HttpEndpointBufferingHints,models_0_HttpEndpointConfiguration,models_0_HttpEndpointCommonAttribute,models_0_HttpEndpointRequestConfiguration,models_0_HttpEndpointRetryOptions,models_0_HttpEndpointDestinationConfiguration,models_0_KinesisStreamSourceConfiguration,models_0_RedshiftRetryOptions,models_0_RedshiftDestinationConfiguration,models_0_SplunkRetryOptions,models_0_SplunkDestinationConfiguration,models_models_0_Tag,models_0_CreateDeliveryStreamInput,models_0_CreateDeliveryStreamOutput,models_models_0_InvalidArgumentException,models_0_InvalidKMSResourceException,models_models_0_LimitExceededException,models_models_0_ResourceInUseException,models_0_DeleteDeliveryStreamInput,models_0_DeleteDeliveryStreamOutput,models_models_0_ResourceNotFoundException,DeliveryStreamFailureType,models_0_FailureDescription,DeliveryStreamEncryptionStatus,models_0_DeliveryStreamEncryptionConfiguration,DeliveryStreamStatus,models_0_S3DestinationDescription,models_0_VpcConfigurationDescription,models_0_ElasticsearchDestinationDescription,models_0_ExtendedS3DestinationDescription,models_0_HttpEndpointDescription,models_0_HttpEndpointDestinationDescription,models_0_RedshiftDestinationDescription,models_0_SplunkDestinationDescription,models_0_DestinationDescription,models_0_KinesisStreamSourceDescription,models_0_SourceDescription,models_0_DeliveryStreamDescription,models_0_DescribeDeliveryStreamInput,models_0_DescribeDeliveryStreamOutput,models_0_S3DestinationUpdate,models_0_ElasticsearchDestinationUpdate,models_0_ExtendedS3DestinationUpdate,models_0_ListDeliveryStreamsInput,models_0_ListDeliveryStreamsOutput,models_0_ListTagsForDeliveryStreamInput,models_0_ListTagsForDeliveryStreamOutput,models_models_0_Record,models_models_0_PutRecordInput,models_models_0_PutRecordOutput,models_0_ServiceUnavailableException,models_0_PutRecordBatchInput,models_0_PutRecordBatchResponseEntry,models_0_PutRecordBatchOutput,models_0_StartDeliveryStreamEncryptionInput,models_0_StartDeliveryStreamEncryptionOutput,models_0_StopDeliveryStreamEncryptionInput,models_0_StopDeliveryStreamEncryptionOutput,models_0_TagDeliveryStreamInput,models_0_TagDeliveryStreamOutput,models_0_UntagDeliveryStreamInput,models_0_UntagDeliveryStreamOutput,models_0_HttpEndpointDestinationUpdate,models_0_RedshiftDestinationUpdate,models_0_SplunkDestinationUpdate,models_0_UpdateDestinationInput,models_0_UpdateDestinationOutput;Object.create;(models_0_BufferingHints||(models_0_BufferingHints={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_CloudWatchLoggingOptions||(models_0_CloudWatchLoggingOptions={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(CompressionFormat){CompressionFormat.GZIP="GZIP",CompressionFormat.HADOOP_SNAPPY="HADOOP_SNAPPY",CompressionFormat.SNAPPY="Snappy",CompressionFormat.UNCOMPRESSED="UNCOMPRESSED",CompressionFormat.ZIP="ZIP"}(CompressionFormat||(CompressionFormat={})),(models_0_ConcurrentModificationException||(models_0_ConcurrentModificationException={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(ContentEncoding){ContentEncoding.GZIP="GZIP",ContentEncoding.NONE="NONE"}(ContentEncoding||(ContentEncoding={})),(models_0_CopyCommand||(models_0_CopyCommand={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(KeyType){KeyType.AWS_OWNED_CMK="AWS_OWNED_CMK",KeyType.CUSTOMER_MANAGED_CMK="CUSTOMER_MANAGED_CMK"}(KeyType||(KeyType={})),(models_0_DeliveryStreamEncryptionConfigurationInput||(models_0_DeliveryStreamEncryptionConfigurationInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ElasticsearchBufferingHints||(models_0_ElasticsearchBufferingHints={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(ProcessorParameterName){ProcessorParameterName.BUFFER_INTERVAL_IN_SECONDS="BufferIntervalInSeconds",ProcessorParameterName.BUFFER_SIZE_IN_MB="BufferSizeInMBs",ProcessorParameterName.LAMBDA_ARN="LambdaArn",ProcessorParameterName.LAMBDA_NUMBER_OF_RETRIES="NumberOfRetries",ProcessorParameterName.ROLE_ARN="RoleArn"}(ProcessorParameterName||(ProcessorParameterName={})),(models_0_ProcessorParameter||(models_0_ProcessorParameter={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_Processor||(models_0_Processor={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ProcessingConfiguration||(models_0_ProcessingConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ElasticsearchRetryOptions||(models_0_ElasticsearchRetryOptions={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_KMSEncryptionConfig||(models_0_KMSEncryptionConfig={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_EncryptionConfiguration||(models_0_EncryptionConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_S3DestinationConfiguration||(models_0_S3DestinationConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_VpcConfiguration||(models_0_VpcConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ElasticsearchDestinationConfiguration||(models_0_ElasticsearchDestinationConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_HiveJsonSerDe||(models_0_HiveJsonSerDe={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_OpenXJsonSerDe||(models_0_OpenXJsonSerDe={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_Deserializer||(models_0_Deserializer={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_InputFormatConfiguration||(models_0_InputFormatConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(OrcCompression){OrcCompression.NONE="NONE",OrcCompression.SNAPPY="SNAPPY",OrcCompression.ZLIB="ZLIB"}(OrcCompression||(OrcCompression={})),function(OrcFormatVersion){OrcFormatVersion.V0_11="V0_11",OrcFormatVersion.V0_12="V0_12"}(OrcFormatVersion||(OrcFormatVersion={})),(models_0_OrcSerDe||(models_0_OrcSerDe={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(ParquetCompression){ParquetCompression.GZIP="GZIP",ParquetCompression.SNAPPY="SNAPPY",ParquetCompression.UNCOMPRESSED="UNCOMPRESSED"}(ParquetCompression||(ParquetCompression={})),function(ParquetWriterVersion){ParquetWriterVersion.V1="V1",ParquetWriterVersion.V2="V2"}(ParquetWriterVersion||(ParquetWriterVersion={})),(models_0_ParquetSerDe||(models_0_ParquetSerDe={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_Serializer||(models_0_Serializer={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_OutputFormatConfiguration||(models_0_OutputFormatConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_SchemaConfiguration||(models_0_SchemaConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_DataFormatConversionConfiguration||(models_0_DataFormatConversionConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ExtendedS3DestinationConfiguration||(models_0_ExtendedS3DestinationConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_HttpEndpointBufferingHints||(models_0_HttpEndpointBufferingHints={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_HttpEndpointConfiguration||(models_0_HttpEndpointConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.Url&&{Url:dist_es.d}),obj.AccessKey&&{AccessKey:dist_es.d})},(models_0_HttpEndpointCommonAttribute||(models_0_HttpEndpointCommonAttribute={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.AttributeName&&{AttributeName:dist_es.d}),obj.AttributeValue&&{AttributeValue:dist_es.d})},(models_0_HttpEndpointRequestConfiguration||(models_0_HttpEndpointRequestConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.CommonAttributes&&{CommonAttributes:obj.CommonAttributes.map((function(item){return models_0_HttpEndpointCommonAttribute.filterSensitiveLog(item)}))})},(models_0_HttpEndpointRetryOptions||(models_0_HttpEndpointRetryOptions={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_HttpEndpointDestinationConfiguration||(models_0_HttpEndpointDestinationConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.EndpointConfiguration&&{EndpointConfiguration:models_0_HttpEndpointConfiguration.filterSensitiveLog(obj.EndpointConfiguration)}),obj.RequestConfiguration&&{RequestConfiguration:models_0_HttpEndpointRequestConfiguration.filterSensitiveLog(obj.RequestConfiguration)})},(models_0_KinesisStreamSourceConfiguration||(models_0_KinesisStreamSourceConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_RedshiftRetryOptions||(models_0_RedshiftRetryOptions={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_RedshiftDestinationConfiguration||(models_0_RedshiftDestinationConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.Username&&{Username:dist_es.d}),obj.Password&&{Password:dist_es.d})},(models_0_SplunkRetryOptions||(models_0_SplunkRetryOptions={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_SplunkDestinationConfiguration||(models_0_SplunkDestinationConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(Tag){Tag.filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)}}(models_models_0_Tag||(models_models_0_Tag={})),(models_0_CreateDeliveryStreamInput||(models_0_CreateDeliveryStreamInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.RedshiftDestinationConfiguration&&{RedshiftDestinationConfiguration:models_0_RedshiftDestinationConfiguration.filterSensitiveLog(obj.RedshiftDestinationConfiguration)}),obj.HttpEndpointDestinationConfiguration&&{HttpEndpointDestinationConfiguration:models_0_HttpEndpointDestinationConfiguration.filterSensitiveLog(obj.HttpEndpointDestinationConfiguration)})},(models_0_CreateDeliveryStreamOutput||(models_0_CreateDeliveryStreamOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(InvalidArgumentException){InvalidArgumentException.filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)}}(models_models_0_InvalidArgumentException||(models_models_0_InvalidArgumentException={})),(models_0_InvalidKMSResourceException||(models_0_InvalidKMSResourceException={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(LimitExceededException){LimitExceededException.filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)}}(models_models_0_LimitExceededException||(models_models_0_LimitExceededException={})),function(ResourceInUseException){ResourceInUseException.filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)}}(models_models_0_ResourceInUseException||(models_models_0_ResourceInUseException={})),(models_0_DeleteDeliveryStreamInput||(models_0_DeleteDeliveryStreamInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_DeleteDeliveryStreamOutput||(models_0_DeleteDeliveryStreamOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(ResourceNotFoundException){ResourceNotFoundException.filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)}}(models_models_0_ResourceNotFoundException||(models_models_0_ResourceNotFoundException={})),function(DeliveryStreamFailureType){DeliveryStreamFailureType.CREATE_ENI_FAILED="CREATE_ENI_FAILED",DeliveryStreamFailureType.CREATE_KMS_GRANT_FAILED="CREATE_KMS_GRANT_FAILED",DeliveryStreamFailureType.DELETE_ENI_FAILED="DELETE_ENI_FAILED",DeliveryStreamFailureType.DISABLED_KMS_KEY="DISABLED_KMS_KEY",DeliveryStreamFailureType.ENI_ACCESS_DENIED="ENI_ACCESS_DENIED",DeliveryStreamFailureType.INVALID_KMS_KEY="INVALID_KMS_KEY",DeliveryStreamFailureType.KMS_ACCESS_DENIED="KMS_ACCESS_DENIED",DeliveryStreamFailureType.KMS_KEY_NOT_FOUND="KMS_KEY_NOT_FOUND",DeliveryStreamFailureType.KMS_OPT_IN_REQUIRED="KMS_OPT_IN_REQUIRED",DeliveryStreamFailureType.RETIRE_KMS_GRANT_FAILED="RETIRE_KMS_GRANT_FAILED",DeliveryStreamFailureType.SECURITY_GROUP_ACCESS_DENIED="SECURITY_GROUP_ACCESS_DENIED",DeliveryStreamFailureType.SECURITY_GROUP_NOT_FOUND="SECURITY_GROUP_NOT_FOUND",DeliveryStreamFailureType.SUBNET_ACCESS_DENIED="SUBNET_ACCESS_DENIED",DeliveryStreamFailureType.SUBNET_NOT_FOUND="SUBNET_NOT_FOUND",DeliveryStreamFailureType.UNKNOWN_ERROR="UNKNOWN_ERROR"}(DeliveryStreamFailureType||(DeliveryStreamFailureType={})),(models_0_FailureDescription||(models_0_FailureDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(DeliveryStreamEncryptionStatus){DeliveryStreamEncryptionStatus.DISABLED="DISABLED",DeliveryStreamEncryptionStatus.DISABLING="DISABLING",DeliveryStreamEncryptionStatus.DISABLING_FAILED="DISABLING_FAILED",DeliveryStreamEncryptionStatus.ENABLED="ENABLED",DeliveryStreamEncryptionStatus.ENABLING="ENABLING",DeliveryStreamEncryptionStatus.ENABLING_FAILED="ENABLING_FAILED"}(DeliveryStreamEncryptionStatus||(DeliveryStreamEncryptionStatus={})),(models_0_DeliveryStreamEncryptionConfiguration||(models_0_DeliveryStreamEncryptionConfiguration={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(DeliveryStreamStatus){DeliveryStreamStatus.ACTIVE="ACTIVE",DeliveryStreamStatus.CREATING="CREATING",DeliveryStreamStatus.CREATING_FAILED="CREATING_FAILED",DeliveryStreamStatus.DELETING="DELETING",DeliveryStreamStatus.DELETING_FAILED="DELETING_FAILED"}(DeliveryStreamStatus||(DeliveryStreamStatus={})),(models_0_S3DestinationDescription||(models_0_S3DestinationDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_VpcConfigurationDescription||(models_0_VpcConfigurationDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ElasticsearchDestinationDescription||(models_0_ElasticsearchDestinationDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ExtendedS3DestinationDescription||(models_0_ExtendedS3DestinationDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_HttpEndpointDescription||(models_0_HttpEndpointDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.Url&&{Url:dist_es.d})},(models_0_HttpEndpointDestinationDescription||(models_0_HttpEndpointDestinationDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.EndpointConfiguration&&{EndpointConfiguration:models_0_HttpEndpointDescription.filterSensitiveLog(obj.EndpointConfiguration)}),obj.RequestConfiguration&&{RequestConfiguration:models_0_HttpEndpointRequestConfiguration.filterSensitiveLog(obj.RequestConfiguration)})},(models_0_RedshiftDestinationDescription||(models_0_RedshiftDestinationDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.Username&&{Username:dist_es.d})},(models_0_SplunkDestinationDescription||(models_0_SplunkDestinationDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_DestinationDescription||(models_0_DestinationDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.RedshiftDestinationDescription&&{RedshiftDestinationDescription:models_0_RedshiftDestinationDescription.filterSensitiveLog(obj.RedshiftDestinationDescription)}),obj.HttpEndpointDestinationDescription&&{HttpEndpointDestinationDescription:models_0_HttpEndpointDestinationDescription.filterSensitiveLog(obj.HttpEndpointDestinationDescription)})},(models_0_KinesisStreamSourceDescription||(models_0_KinesisStreamSourceDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_SourceDescription||(models_0_SourceDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_DeliveryStreamDescription||(models_0_DeliveryStreamDescription={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.Destinations&&{Destinations:obj.Destinations.map((function(item){return models_0_DestinationDescription.filterSensitiveLog(item)}))})},(models_0_DescribeDeliveryStreamInput||(models_0_DescribeDeliveryStreamInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_DescribeDeliveryStreamOutput||(models_0_DescribeDeliveryStreamOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.DeliveryStreamDescription&&{DeliveryStreamDescription:models_0_DeliveryStreamDescription.filterSensitiveLog(obj.DeliveryStreamDescription)})},(models_0_S3DestinationUpdate||(models_0_S3DestinationUpdate={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ElasticsearchDestinationUpdate||(models_0_ElasticsearchDestinationUpdate={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ExtendedS3DestinationUpdate||(models_0_ExtendedS3DestinationUpdate={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ListDeliveryStreamsInput||(models_0_ListDeliveryStreamsInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ListDeliveryStreamsOutput||(models_0_ListDeliveryStreamsOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ListTagsForDeliveryStreamInput||(models_0_ListTagsForDeliveryStreamInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_ListTagsForDeliveryStreamOutput||(models_0_ListTagsForDeliveryStreamOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},function(_Record){_Record.filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)}}(models_models_0_Record||(models_models_0_Record={})),function(PutRecordInput){PutRecordInput.filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)}}(models_models_0_PutRecordInput||(models_models_0_PutRecordInput={})),function(PutRecordOutput){PutRecordOutput.filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)}}(models_models_0_PutRecordOutput||(models_models_0_PutRecordOutput={})),(models_0_ServiceUnavailableException||(models_0_ServiceUnavailableException={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_PutRecordBatchInput||(models_0_PutRecordBatchInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_PutRecordBatchResponseEntry||(models_0_PutRecordBatchResponseEntry={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_PutRecordBatchOutput||(models_0_PutRecordBatchOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_StartDeliveryStreamEncryptionInput||(models_0_StartDeliveryStreamEncryptionInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_StartDeliveryStreamEncryptionOutput||(models_0_StartDeliveryStreamEncryptionOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_StopDeliveryStreamEncryptionInput||(models_0_StopDeliveryStreamEncryptionInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_StopDeliveryStreamEncryptionOutput||(models_0_StopDeliveryStreamEncryptionOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_TagDeliveryStreamInput||(models_0_TagDeliveryStreamInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_TagDeliveryStreamOutput||(models_0_TagDeliveryStreamOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_UntagDeliveryStreamInput||(models_0_UntagDeliveryStreamInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_UntagDeliveryStreamOutput||(models_0_UntagDeliveryStreamOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_HttpEndpointDestinationUpdate||(models_0_HttpEndpointDestinationUpdate={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.EndpointConfiguration&&{EndpointConfiguration:models_0_HttpEndpointConfiguration.filterSensitiveLog(obj.EndpointConfiguration)}),obj.RequestConfiguration&&{RequestConfiguration:models_0_HttpEndpointRequestConfiguration.filterSensitiveLog(obj.RequestConfiguration)})},(models_0_RedshiftDestinationUpdate||(models_0_RedshiftDestinationUpdate={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.Username&&{Username:dist_es.d}),obj.Password&&{Password:dist_es.d})},(models_0_SplunkDestinationUpdate||(models_0_SplunkDestinationUpdate={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)},(models_0_UpdateDestinationInput||(models_0_UpdateDestinationInput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign(tslib_tslib_es6_assign(tslib_tslib_es6_assign({},obj),obj.RedshiftDestinationUpdate&&{RedshiftDestinationUpdate:models_0_RedshiftDestinationUpdate.filterSensitiveLog(obj.RedshiftDestinationUpdate)}),obj.HttpEndpointDestinationUpdate&&{HttpEndpointDestinationUpdate:models_0_HttpEndpointDestinationUpdate.filterSensitiveLog(obj.HttpEndpointDestinationUpdate)})},(models_0_UpdateDestinationOutput||(models_0_UpdateDestinationOutput={})).filterSensitiveLog=function(obj){return tslib_tslib_es6_assign({},obj)};var deserializeAws_json1_1PutRecordBatchCommandError=function(output,context){return tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,_e,_f,parsedBody,message,_g;return tslib_tslib_es6_generator(this,(function(_h){switch(_h.label){case 0:return _a=[tslib_tslib_es6_assign({},output)],_g={},[4,protocols_Aws_json1_1_parseBody(output.body,context)];case 1:switch(parsedOutput=tslib_tslib_es6_assign.apply(void 0,_a.concat([(_g.body=_h.sent(),_g)])),errorCode="UnknownError",errorCode=protocols_Aws_json1_1_loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"InvalidArgumentException":case"com.amazonaws.firehose#InvalidArgumentException":return[3,2];case"InvalidKMSResourceException":case"com.amazonaws.firehose#InvalidKMSResourceException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.firehose#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.firehose#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return _c=[{}],[4,Aws_json1_1_deserializeAws_json1_1InvalidArgumentExceptionResponse(parsedOutput,context)];case 3:return response=tslib_tslib_es6_assign.apply(void 0,[tslib_tslib_es6_assign.apply(void 0,_c.concat([_h.sent()])),{name:errorCode,$metadata:protocols_Aws_json1_1_deserializeMetadata(output)}]),[3,11];case 4:return _d=[{}],[4,deserializeAws_json1_1InvalidKMSResourceExceptionResponse(parsedOutput,context)];case 5:return response=tslib_tslib_es6_assign.apply(void 0,[tslib_tslib_es6_assign.apply(void 0,_d.concat([_h.sent()])),{name:errorCode,$metadata:protocols_Aws_json1_1_deserializeMetadata(output)}]),[3,11];case 6:return _e=[{}],[4,Aws_json1_1_deserializeAws_json1_1ResourceNotFoundExceptionResponse(parsedOutput,context)];case 7:return response=tslib_tslib_es6_assign.apply(void 0,[tslib_tslib_es6_assign.apply(void 0,_e.concat([_h.sent()])),{name:errorCode,$metadata:protocols_Aws_json1_1_deserializeMetadata(output)}]),[3,11];case 8:return _f=[{}],[4,deserializeAws_json1_1ServiceUnavailableExceptionResponse(parsedOutput,context)];case 9:return response=tslib_tslib_es6_assign.apply(void 0,[tslib_tslib_es6_assign.apply(void 0,_f.concat([_h.sent()])),{name:errorCode,$metadata:protocols_Aws_json1_1_deserializeMetadata(output)}]),[3,11];case 10:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=tslib_tslib_es6_assign(tslib_tslib_es6_assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:protocols_Aws_json1_1_deserializeMetadata(output)}),_h.label=11;case 11:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},Aws_json1_1_deserializeAws_json1_1InvalidArgumentExceptionResponse=function(parsedOutput,context){return tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=Aws_json1_1_deserializeAws_json1_1InvalidArgumentException(body,context),[2,tslib_tslib_es6_assign({name:"InvalidArgumentException",$fault:"client",$metadata:protocols_Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1InvalidKMSResourceExceptionResponse=function(parsedOutput,context){return tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1InvalidKMSResourceException(body,context),[2,tslib_tslib_es6_assign({name:"InvalidKMSResourceException",$fault:"client",$metadata:protocols_Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},Aws_json1_1_deserializeAws_json1_1ResourceNotFoundExceptionResponse=function(parsedOutput,context){return tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=Aws_json1_1_deserializeAws_json1_1ResourceNotFoundException(body,context),[2,tslib_tslib_es6_assign({name:"ResourceNotFoundException",$fault:"client",$metadata:protocols_Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1ServiceUnavailableExceptionResponse=function(parsedOutput,context){return tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return tslib_tslib_es6_generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1ServiceUnavailableException(body,context),[2,tslib_tslib_es6_assign({name:"ServiceUnavailableException",$fault:"server",$metadata:protocols_Aws_json1_1_deserializeMetadata(parsedOutput)},deserialized)]}))}))},serializeAws_json1_1PutRecordBatchInput=function(input,context){return tslib_tslib_es6_assign(tslib_tslib_es6_assign({},void 0!==input.DeliveryStreamName&&null!==input.DeliveryStreamName&&{DeliveryStreamName:input.DeliveryStreamName}),void 0!==input.Records&&null!==input.Records&&{Records:serializeAws_json1_1PutRecordBatchRequestEntryList(input.Records,context)})},serializeAws_json1_1PutRecordBatchRequestEntryList=function(input,context){return input.filter((function(e){return null!=e})).map((function(entry){return null===entry?null:serializeAws_json1_1_Record(entry,context)}))},serializeAws_json1_1_Record=function(input,context){return tslib_tslib_es6_assign({},void 0!==input.Data&&null!==input.Data&&{Data:context.base64Encoder(input.Data)})},Aws_json1_1_deserializeAws_json1_1InvalidArgumentException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1InvalidKMSResourceException=function(output,context){return{code:void 0!==output.code&&null!==output.code?output.code:void 0,message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1PutRecordBatchOutput=function(output,context){return{Encrypted:void 0!==output.Encrypted&&null!==output.Encrypted?output.Encrypted:void 0,FailedPutCount:void 0!==output.FailedPutCount&&null!==output.FailedPutCount?output.FailedPutCount:void 0,RequestResponses:void 0!==output.RequestResponses&&null!==output.RequestResponses?deserializeAws_json1_1PutRecordBatchResponseEntryList(output.RequestResponses,context):void 0}},deserializeAws_json1_1PutRecordBatchResponseEntryList=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(output,context){return{ErrorCode:void 0!==output.ErrorCode&&null!==output.ErrorCode?output.ErrorCode:void 0,ErrorMessage:void 0!==output.ErrorMessage&&null!==output.ErrorMessage?output.ErrorMessage:void 0,RecordId:void 0!==output.RecordId&&null!==output.RecordId?output.RecordId:void 0}}(entry)}))},Aws_json1_1_deserializeAws_json1_1ResourceNotFoundException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1ServiceUnavailableException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},protocols_Aws_json1_1_deserializeMetadata=function(output){var _a;return{httpStatusCode:output.statusCode,requestId:null!==(_a=output.headers["x-amzn-requestid"])&&void 0!==_a?_a:output.headers["x-amzn-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}},protocols_Aws_json1_1_collectBodyString=function(streamBody,context){return function(streamBody,context){return void 0===streamBody&&(streamBody=new Uint8Array),streamBody instanceof Uint8Array?Promise.resolve(streamBody):context.streamCollector(streamBody)||Promise.resolve(new Uint8Array)}(streamBody,context).then((function(body){return context.utf8Encoder(body)}))},Aws_json1_1_buildHttpRpcRequest=function(context,headers,path,resolvedHostname,body){return tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var _a,hostname,_b,protocol,port,contents;return tslib_tslib_es6_generator(this,(function(_c){switch(_c.label){case 0:return[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,contents={protocol:protocol,hostname:hostname,port:port,method:"POST",path:path,headers:headers},void 0!==resolvedHostname&&(contents.hostname=resolvedHostname),void 0!==body&&(contents.body=body),[2,new es.a(contents)]}}))}))},protocols_Aws_json1_1_parseBody=function(streamBody,context){return protocols_Aws_json1_1_collectBodyString(streamBody,context).then((function(encoded){return encoded.length?JSON.parse(encoded):{}}))},protocols_Aws_json1_1_loadRestJsonErrorCode=function(output,data){var object,key,sanitizeErrorCode=function(rawValue){var cleanValue=rawValue;return cleanValue.indexOf(":")>=0&&(cleanValue=cleanValue.split(":")[0]),cleanValue.indexOf("#")>=0&&(cleanValue=cleanValue.split("#")[1]),cleanValue},headerKey=(object=output.headers,key="x-amzn-errortype",Object.keys(object).find((function(k){return k.toLowerCase()===key.toLowerCase()})));return void 0!==headerKey?sanitizeErrorCode(output.headers[headerKey]):void 0!==data.code?sanitizeErrorCode(data.code):void 0!==data.__type?sanitizeErrorCode(data.__type):""},PutRecordBatchCommand_PutRecordBatchCommand=function(_super){function PutRecordBatchCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return tslib_tslib_es6_extends(PutRecordBatchCommand,_super),PutRecordBatchCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"FirehoseClient",commandName:"PutRecordBatchCommand",inputFilterSensitiveLog:models_0_PutRecordBatchInput.filterSensitiveLog,outputFilterSensitiveLog:models_0_PutRecordBatchOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},PutRecordBatchCommand.prototype.serialize=function(input,context){return function(input,context){return tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var headers,body;return tslib_tslib_es6_generator(this,(function(_a){return headers={"content-type":"application/x-amz-json-1.1","x-amz-target":"Firehose_20150804.PutRecordBatch"},body=JSON.stringify(serializeAws_json1_1PutRecordBatchInput(input,context)),[2,Aws_json1_1_buildHttpRpcRequest(context,headers,"/",void 0,body)]}))}))}(input,context)},PutRecordBatchCommand.prototype.deserialize=function(output,context){return function(output,context){return tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var data,contents,response;return tslib_tslib_es6_generator(this,(function(_a){switch(_a.label){case 0:return output.statusCode>=300?[2,deserializeAws_json1_1PutRecordBatchCommandError(output,context)]:[4,protocols_Aws_json1_1_parseBody(output.body,context)];case 1:return data=_a.sent(),contents=deserializeAws_json1_1PutRecordBatchOutput(data,context),response=tslib_tslib_es6_assign({$metadata:protocols_Aws_json1_1_deserializeMetadata(output)},contents),[2,Promise.resolve(response)]}}))}))}(output,context)},PutRecordBatchCommand}(dist_es.b),client_firehose_dist_es_package=__webpack_require__(317),es_endpoints_AWS_REGIONS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),es_endpoints_AWS_CN_REGIONS=new Set(["cn-north-1","cn-northwest-1"]),es_endpoints_AWS_ISO_REGIONS=new Set(["us-iso-east-1"]),es_endpoints_AWS_ISO_B_REGIONS=new Set(["us-isob-east-1"]),es_endpoints_AWS_US_GOV_REGIONS=new Set(["us-gov-east-1","us-gov-west-1"]),es_runtimeConfig_shared_ClientSharedValues={apiVersion:"2015-08-04",disableHostPrefix:!1,logger:{},regionInfoProvider:function(region,options){var regionInfo=void 0;switch(region){case"af-south-1":regionInfo={hostname:"firehose.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":regionInfo={hostname:"firehose.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":regionInfo={hostname:"firehose.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":regionInfo={hostname:"firehose.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":regionInfo={hostname:"firehose.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":regionInfo={hostname:"firehose.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":regionInfo={hostname:"firehose.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":regionInfo={hostname:"firehose.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":regionInfo={hostname:"firehose.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":regionInfo={hostname:"firehose.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":regionInfo={hostname:"firehose.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":regionInfo={hostname:"firehose.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":regionInfo={hostname:"firehose.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":regionInfo={hostname:"firehose.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":regionInfo={hostname:"firehose.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":regionInfo={hostname:"firehose.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":regionInfo={hostname:"firehose-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":regionInfo={hostname:"firehose-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-east-1":regionInfo={hostname:"firehose-fips.us-gov-east-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-east-1"};break;case"fips-us-gov-west-1":regionInfo={hostname:"firehose-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-1":regionInfo={hostname:"firehose-fips.us-west-1.amazonaws.com",partition:"aws",signingRegion:"us-west-1"};break;case"fips-us-west-2":regionInfo={hostname:"firehose-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"me-south-1":regionInfo={hostname:"firehose.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":regionInfo={hostname:"firehose.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":regionInfo={hostname:"firehose.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":regionInfo={hostname:"firehose.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":regionInfo={hostname:"firehose.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":regionInfo={hostname:"firehose.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":regionInfo={hostname:"firehose.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":regionInfo={hostname:"firehose.us-west-2.amazonaws.com",partition:"aws"};break;default:es_endpoints_AWS_REGIONS.has(region)&&(regionInfo={hostname:"firehose.{region}.amazonaws.com".replace("{region}",region),partition:"aws"}),es_endpoints_AWS_CN_REGIONS.has(region)&&(regionInfo={hostname:"firehose.{region}.amazonaws.com.cn".replace("{region}",region),partition:"aws-cn"}),es_endpoints_AWS_ISO_REGIONS.has(region)&&(regionInfo={hostname:"firehose.{region}.c2s.ic.gov".replace("{region}",region),partition:"aws-iso"}),es_endpoints_AWS_ISO_B_REGIONS.has(region)&&(regionInfo={hostname:"firehose.{region}.sc2s.sgov.gov".replace("{region}",region),partition:"aws-iso-b"}),es_endpoints_AWS_US_GOV_REGIONS.has(region)&&(regionInfo={hostname:"firehose.{region}.amazonaws.com".replace("{region}",region),partition:"aws-us-gov"}),void 0===regionInfo&&(regionInfo={hostname:"firehose.{region}.amazonaws.com".replace("{region}",region),partition:"aws"})}return Promise.resolve(tslib_tslib_es6_assign({signingService:"firehose"},regionInfo))},serviceId:"Firehose",urlParser:url_parser_dist_es.a},es_runtimeConfig_browser_ClientDefaultValues=tslib_tslib_es6_assign(tslib_tslib_es6_assign({},es_runtimeConfig_shared_ClientSharedValues),{runtime:"browser",base64Decoder:util_base64_browser_dist_es.a,base64Encoder:util_base64_browser_dist_es.b,bodyLengthChecker:util_body_length_browser_dist_es.a,credentialDefaultProvider:function(_){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(util_user_agent_browser_dist_es.a)({serviceId:es_runtimeConfig_shared_ClientSharedValues.serviceId,clientVersion:client_firehose_dist_es_package.version}),maxAttempts:middleware_retry_dist_es.a,region:Object(invalid_dependency_dist_es.a)("Region is missing"),requestHandler:new fetch_http_handler_dist_es.a,sha256:build.Sha256,streamCollector:fetch_http_handler_dist_es.b,utf8Decoder:util_utf8_browser_dist_es.fromUtf8,utf8Encoder:util_utf8_browser_dist_es.toUtf8}),FirehoseClient_FirehoseClient=function(_super){function FirehoseClient(configuration){var _this=this,_config_0=tslib_tslib_es6_assign(tslib_tslib_es6_assign({},es_runtimeConfig_browser_ClientDefaultValues),configuration),_config_1=Object(config_resolver_dist_es.b)(_config_0),_config_2=Object(config_resolver_dist_es.a)(_config_1),_config_3=Object(middleware_signing_dist_es.b)(_config_2),_config_4=Object(middleware_retry_dist_es.c)(_config_3),_config_5=Object(middleware_host_header_dist_es.b)(_config_4),_config_6=Object(middleware_user_agent_dist_es.b)(_config_5);return(_this=_super.call(this,_config_6)||this).config=_config_6,_this.middlewareStack.use(Object(middleware_signing_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_retry_dist_es.b)(_this.config)),_this.middlewareStack.use(Object(middleware_content_length_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_host_header_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_logger_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_user_agent_dist_es.a)(_this.config)),_this}return tslib_tslib_es6_extends(FirehoseClient,_super),FirehoseClient.prototype.destroy=function(){_super.prototype.destroy.call(this)},FirehoseClient}(dist_es.a),AWSKinesisFirehoseProvider_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AWSKinesisFirehoseProvider_logger=new ConsoleLogger.a("AWSKineisFirehoseProvider"),AWSKinesisFirehoseProvider_AWSKinesisFirehoseProvider=function(_super){function AWSKinesisFirehoseProvider(config){return _super.call(this,config)||this}return AWSKinesisFirehoseProvider_extends(AWSKinesisFirehoseProvider,_super),AWSKinesisFirehoseProvider.prototype.getProviderName=function(){return"AWSKinesisFirehose"},AWSKinesisFirehoseProvider.prototype._sendEvents=function(group){var _this=this;if(0!==group.length){var _a=group[0],config=_a.config,credentials=_a.credentials;if(!this._init(config,credentials))return!1;var records={};group.map((function(params){var evt=params.event,streamName=evt.streamName,data=evt.data;void 0===records[streamName]&&(records[streamName]=[]);var bufferData=data&&"string"!=typeof data?JSON.stringify(data):data,record={Data:Object(util_utf8_browser_dist_es.fromUtf8)(bufferData)};records[streamName].push(record)})),Object.keys(records).map((function(streamName){AWSKinesisFirehoseProvider_logger.debug("putting records to kinesis",streamName,"with records",records[streamName]),_this._kinesisFirehose.send(new PutRecordBatchCommand_PutRecordBatchCommand({Records:records[streamName],DeliveryStreamName:streamName})).then((function(res){return AWSKinesisFirehoseProvider_logger.debug("Upload records to stream",streamName)})).catch((function(err){return AWSKinesisFirehoseProvider_logger.debug("Failed to upload records to Kinesis",err)}))}))}},AWSKinesisFirehoseProvider.prototype._init=function(config,credentials){if(AWSKinesisFirehoseProvider_logger.debug("init clients"),this._kinesisFirehose&&this._config.credentials&&this._config.credentials.sessionToken===credentials.sessionToken&&this._config.credentials.identityId===credentials.identityId)return AWSKinesisFirehoseProvider_logger.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=credentials;var region=config.region;return this._initFirehose(region,credentials)},AWSKinesisFirehoseProvider.prototype._initFirehose=function(region,credentials){return AWSKinesisFirehoseProvider_logger.debug("initialize kinesis firehose with credentials",credentials),this._kinesisFirehose=new FirehoseClient_FirehoseClient({apiVersion:"2015-08-04",region:region,credentials:credentials}),!0},AWSKinesisFirehoseProvider}(AWSKinesisProvider_AWSKinesisProvider),node_modules_tslib_tslib_es6_extendStatics=function(d,b){return(node_modules_tslib_tslib_es6_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function node_modules_tslib_tslib_es6_extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}node_modules_tslib_tslib_es6_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var node_modules_tslib_tslib_es6_assign=function(){return(node_modules_tslib_tslib_es6_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function node_modules_tslib_tslib_es6_awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function node_modules_tslib_tslib_es6_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.create;var models_0_InvalidInputException,models_0_Event,models_0_PutEventsRequest,models_0_Item,models_0_PutItemsRequest,es_models_models_0_ResourceNotFoundException,models_0_User,models_0_PutUsersRequest;Object.create;(models_0_InvalidInputException||(models_0_InvalidInputException={})).filterSensitiveLog=function(obj){return node_modules_tslib_tslib_es6_assign({},obj)},(models_0_Event||(models_0_Event={})).filterSensitiveLog=function(obj){return node_modules_tslib_tslib_es6_assign({},obj)},function(PutEventsRequest){PutEventsRequest.filterSensitiveLog=function(obj){return node_modules_tslib_tslib_es6_assign({},obj)}}(models_0_PutEventsRequest||(models_0_PutEventsRequest={})),(models_0_Item||(models_0_Item={})).filterSensitiveLog=function(obj){return node_modules_tslib_tslib_es6_assign({},obj)},(models_0_PutItemsRequest||(models_0_PutItemsRequest={})).filterSensitiveLog=function(obj){return node_modules_tslib_tslib_es6_assign({},obj)},function(ResourceNotFoundException){ResourceNotFoundException.filterSensitiveLog=function(obj){return node_modules_tslib_tslib_es6_assign({},obj)}}(es_models_models_0_ResourceNotFoundException||(es_models_models_0_ResourceNotFoundException={})),(models_0_User||(models_0_User={})).filterSensitiveLog=function(obj){return node_modules_tslib_tslib_es6_assign({},obj)},(models_0_PutUsersRequest||(models_0_PutUsersRequest={})).filterSensitiveLog=function(obj){return node_modules_tslib_tslib_es6_assign({},obj)};var HTML5_MEDIA_EVENT,MEDIA_TYPE,EVENT_TYPE,Aws_restJson1_deserializeAws_restJson1PutEventsCommandError=function(output,context){return node_modules_tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,parsedBody,message,_d;return node_modules_tslib_tslib_es6_generator(this,(function(_e){switch(_e.label){case 0:return _a=[node_modules_tslib_tslib_es6_assign({},output)],_d={},[4,Aws_restJson1_parseBody(output.body,context)];case 1:switch(parsedOutput=node_modules_tslib_tslib_es6_assign.apply(void 0,_a.concat([(_d.body=_e.sent(),_d)])),errorCode="UnknownError",errorCode=Aws_restJson1_loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"InvalidInputException":case"com.amazonaws.personalizeevents#InvalidInputException":return[3,2]}return[3,4];case 2:return _c=[{}],[4,deserializeAws_restJson1InvalidInputExceptionResponse(parsedOutput,context)];case 3:return response=node_modules_tslib_tslib_es6_assign.apply(void 0,[node_modules_tslib_tslib_es6_assign.apply(void 0,_c.concat([_e.sent()])),{name:errorCode,$metadata:Aws_restJson1_deserializeMetadata(output)}]),[3,5];case 4:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:Aws_restJson1_deserializeMetadata(output)}),_e.label=5;case 5:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restJson1InvalidInputExceptionResponse=function(parsedOutput,context){return node_modules_tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var contents,data;return node_modules_tslib_tslib_es6_generator(this,(function(_a){return contents={name:"InvalidInputException",$fault:"client",$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),message:void 0},void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},serializeAws_restJson1EventList=function(input,context){return input.filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(input,context){return node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign({},void 0!==input.eventId&&null!==input.eventId&&{eventId:input.eventId}),void 0!==input.eventType&&null!==input.eventType&&{eventType:input.eventType}),void 0!==input.eventValue&&null!==input.eventValue&&{eventValue:input.eventValue}),void 0!==input.impression&&null!==input.impression&&{impression:serializeAws_restJson1Impression(input.impression,context)}),void 0!==input.itemId&&null!==input.itemId&&{itemId:input.itemId}),void 0!==input.properties&&null!==input.properties&&{properties:dist_es.c.fromObject(input.properties)}),void 0!==input.recommendationId&&null!==input.recommendationId&&{recommendationId:input.recommendationId}),void 0!==input.sentAt&&null!==input.sentAt&&{sentAt:Math.round(input.sentAt.getTime()/1e3)})}(entry,context)}))},serializeAws_restJson1Impression=function(input,context){return input.filter((function(e){return null!=e})).map((function(entry){return null===entry?null:entry}))},Aws_restJson1_deserializeMetadata=function(output){var _a;return{httpStatusCode:output.statusCode,requestId:null!==(_a=output.headers["x-amzn-requestid"])&&void 0!==_a?_a:output.headers["x-amzn-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}},Aws_restJson1_collectBody=function(streamBody,context){return void 0===streamBody&&(streamBody=new Uint8Array),streamBody instanceof Uint8Array?Promise.resolve(streamBody):context.streamCollector(streamBody)||Promise.resolve(new Uint8Array)},Aws_restJson1_parseBody=function(streamBody,context){return function(streamBody,context){return Aws_restJson1_collectBody(streamBody,context).then((function(body){return context.utf8Encoder(body)}))}(streamBody,context).then((function(encoded){return encoded.length?JSON.parse(encoded):{}}))},Aws_restJson1_loadRestJsonErrorCode=function(output,data){var object,key,sanitizeErrorCode=function(rawValue){var cleanValue=rawValue;return cleanValue.indexOf(":")>=0&&(cleanValue=cleanValue.split(":")[0]),cleanValue.indexOf("#")>=0&&(cleanValue=cleanValue.split("#")[1]),cleanValue},headerKey=(object=output.headers,key="x-amzn-errortype",Object.keys(object).find((function(k){return k.toLowerCase()===key.toLowerCase()})));return void 0!==headerKey?sanitizeErrorCode(output.headers[headerKey]):void 0!==data.code?sanitizeErrorCode(data.code):void 0!==data.__type?sanitizeErrorCode(data.__type):""},commands_PutEventsCommand_PutEventsCommand=function(_super){function PutEventsCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return node_modules_tslib_tslib_es6_extends(PutEventsCommand,_super),PutEventsCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"PersonalizeEventsClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:models_0_PutEventsRequest.filterSensitiveLog,outputFilterSensitiveLog:function(output){return output}},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},PutEventsCommand.prototype.serialize=function(input,context){return function(input,context){return node_modules_tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,body,_a,hostname,_b,protocol,port;return node_modules_tslib_tslib_es6_generator(this,(function(_c){switch(_c.label){case 0:return headers={"content-type":"application/json"},resolvedPath="/events",body=JSON.stringify(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign({},void 0!==input.eventList&&null!==input.eventList&&{eventList:serializeAws_restJson1EventList(input.eventList,context)}),void 0!==input.sessionId&&null!==input.sessionId&&{sessionId:input.sessionId}),void 0!==input.trackingId&&null!==input.trackingId&&{trackingId:input.trackingId}),void 0!==input.userId&&null!==input.userId&&{userId:input.userId})),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new es.a({protocol:protocol,hostname:hostname,port:port,method:"POST",headers:headers,path:resolvedPath,body:body})]}}))}))}(input,context)},PutEventsCommand.prototype.deserialize=function(output,context){return function(output,context){return node_modules_tslib_tslib_es6_awaiter(void 0,void 0,void 0,(function(){var contents;return node_modules_tslib_tslib_es6_generator(this,(function(_a){switch(_a.label){case 0:return 200!==output.statusCode&&output.statusCode>=300?[2,Aws_restJson1_deserializeAws_restJson1PutEventsCommandError(output,context)]:(contents={$metadata:Aws_restJson1_deserializeMetadata(output)},[4,Aws_restJson1_collectBody(output.body,context)]);case 1:return _a.sent(),[2,Promise.resolve(contents)]}}))}))}(output,context)},PutEventsCommand}(dist_es.b),client_personalize_events_dist_es_package=__webpack_require__(319),dist_es_endpoints_AWS_REGIONS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),dist_es_endpoints_AWS_CN_REGIONS=new Set(["cn-north-1","cn-northwest-1"]),dist_es_endpoints_AWS_ISO_REGIONS=new Set(["us-iso-east-1"]),dist_es_endpoints_AWS_ISO_B_REGIONS=new Set(["us-isob-east-1"]),dist_es_endpoints_AWS_US_GOV_REGIONS=new Set(["us-gov-east-1","us-gov-west-1"]),dist_es_runtimeConfig_shared_ClientSharedValues={apiVersion:"2018-03-22",disableHostPrefix:!1,logger:{},regionInfoProvider:function(region,options){var regionInfo=void 0;return dist_es_endpoints_AWS_REGIONS.has(region)&&(regionInfo={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",region),partition:"aws"}),dist_es_endpoints_AWS_CN_REGIONS.has(region)&&(regionInfo={hostname:"personalize-events.{region}.amazonaws.com.cn".replace("{region}",region),partition:"aws-cn"}),dist_es_endpoints_AWS_ISO_REGIONS.has(region)&&(regionInfo={hostname:"personalize-events.{region}.c2s.ic.gov".replace("{region}",region),partition:"aws-iso"}),dist_es_endpoints_AWS_ISO_B_REGIONS.has(region)&&(regionInfo={hostname:"personalize-events.{region}.sc2s.sgov.gov".replace("{region}",region),partition:"aws-iso-b"}),dist_es_endpoints_AWS_US_GOV_REGIONS.has(region)&&(regionInfo={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",region),partition:"aws-us-gov"}),void 0===regionInfo&&(regionInfo={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",region),partition:"aws"}),Promise.resolve(node_modules_tslib_tslib_es6_assign({signingService:"personalize"},regionInfo))},serviceId:"Personalize Events",urlParser:url_parser_dist_es.a},dist_es_runtimeConfig_browser_ClientDefaultValues=node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign({},dist_es_runtimeConfig_shared_ClientSharedValues),{runtime:"browser",base64Decoder:util_base64_browser_dist_es.a,base64Encoder:util_base64_browser_dist_es.b,bodyLengthChecker:util_body_length_browser_dist_es.a,credentialDefaultProvider:function(_){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(util_user_agent_browser_dist_es.a)({serviceId:dist_es_runtimeConfig_shared_ClientSharedValues.serviceId,clientVersion:client_personalize_events_dist_es_package.version}),maxAttempts:middleware_retry_dist_es.a,region:Object(invalid_dependency_dist_es.a)("Region is missing"),requestHandler:new fetch_http_handler_dist_es.a,sha256:build.Sha256,streamCollector:fetch_http_handler_dist_es.b,utf8Decoder:util_utf8_browser_dist_es.fromUtf8,utf8Encoder:util_utf8_browser_dist_es.toUtf8}),PersonalizeEventsClient_PersonalizeEventsClient=function(_super){function PersonalizeEventsClient(configuration){var _this=this,_config_0=node_modules_tslib_tslib_es6_assign(node_modules_tslib_tslib_es6_assign({},dist_es_runtimeConfig_browser_ClientDefaultValues),configuration),_config_1=Object(config_resolver_dist_es.b)(_config_0),_config_2=Object(config_resolver_dist_es.a)(_config_1),_config_3=Object(middleware_signing_dist_es.b)(_config_2),_config_4=Object(middleware_retry_dist_es.c)(_config_3),_config_5=Object(middleware_host_header_dist_es.b)(_config_4),_config_6=Object(middleware_user_agent_dist_es.b)(_config_5);return(_this=_super.call(this,_config_6)||this).config=_config_6,_this.middlewareStack.use(Object(middleware_signing_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_retry_dist_es.b)(_this.config)),_this.middlewareStack.use(Object(middleware_content_length_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_host_header_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_logger_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_user_agent_dist_es.a)(_this.config)),_this}return node_modules_tslib_tslib_es6_extends(PersonalizeEventsClient,_super),PersonalizeEventsClient.prototype.destroy=function(){_super.prototype.destroy.call(this)},PersonalizeEventsClient}(dist_es.a),isEmpty=__webpack_require__(53),isEmpty_default=__webpack_require__.n(isEmpty),isEqual=__webpack_require__(188),isEqual_default=__webpack_require__.n(isEqual),SessionInfoManager_SessionInfoManager=(new ConsoleLogger.a("AmazonPersonalizeProvider"),function(){function SessionInfoManager(prefixKey){void 0===prefixKey&&(prefixKey=""),this._isBrowser=JS.a.browserOrNode().isBrowser,this._timerKey=Object(uuid.v1)().substr(0,15),this._refreshTimer()}return SessionInfoManager.prototype._refreshTimer=function(){this._timer&&clearInterval(this._timer);var that=this;this._timer=setInterval((function(){that._timerKey=Object(uuid.v1)().substr(0,15)}),3e4)},SessionInfoManager.prototype.storeValue=function(key,value){var today=new Date,expire=new Date;expire.setTime(today.getTime()+6048e5),lib_esm.a.setItem(this._getCachePrefix(key),value,{expires:expire.getTime()})},SessionInfoManager.prototype.retrieveValue=function(key){return lib_esm.a.getItem(this._getCachePrefix(key))},SessionInfoManager.prototype._getCachePrefix=function(key){return this._isBrowser?key+"."+window.location.host:"peronslize"},SessionInfoManager.prototype.getTimerKey=function(){return this._timerKey},SessionInfoManager.prototype.updateSessionInfo=function(userId,sessionInfo){var existUserId=sessionInfo.userId,existSessionId=sessionInfo.sessionId;if(this._isRequireNewSession(userId,existUserId,existSessionId)){var newSessionId=Object(uuid.v1)();this.storeValue("_awsct_uid",userId),this.storeValue("_awsct_sid",newSessionId),sessionInfo.sessionId=newSessionId}else this._isRequireUpdateSessionInfo(userId,existUserId,existSessionId)&&this.storeValue("_awsct_uid",userId);sessionInfo.userId=userId},SessionInfoManager.prototype._isRequireUpdateSessionInfo=function(userId,cachedSessionUserId,cachedSessionSessionId){return!isEmpty_default()(cachedSessionSessionId)&&isEmpty_default()(cachedSessionUserId)&&!isEmpty_default()(userId)},SessionInfoManager.prototype.retrieveSessionInfo=function(trackingId){var sessionInfo={};return sessionInfo.trackingId=trackingId,sessionInfo.sessionId=this.retrieveValue("_awsct_sid"),sessionInfo.userId=this.retrieveValue("_awsct_uid"),isEmpty_default()(sessionInfo.sessionId)&&(sessionInfo.sessionId=Object(uuid.v1)(),this.storeValue("_awsct_sid",sessionInfo.sessionId)),this.storeValue("_awsct",trackingId),sessionInfo},SessionInfoManager.prototype._isRequireNewSession=function(userId,cachedSessionUserId,cachedSessionSessionId){var isNoCachedSession=isEmpty_default()(cachedSessionSessionId),isSignoutCase=isEmpty_default()(userId)&&!isEmpty_default()(cachedSessionUserId),isSwitchUserCase=!isEmpty_default()(userId)&&!isEmpty_default()(cachedSessionUserId)&&!isEqual_default()(userId,cachedSessionUserId);return isNoCachedSession||isSignoutCase||isSwitchUserCase},SessionInfoManager}());!function(HTML5_MEDIA_EVENT){HTML5_MEDIA_EVENT.PLAY="play",HTML5_MEDIA_EVENT.PAUSE="pause",HTML5_MEDIA_EVENT.ENDED="Ended"}(HTML5_MEDIA_EVENT||(HTML5_MEDIA_EVENT={})),function(MEDIA_TYPE){MEDIA_TYPE.IFRAME="IFRAME",MEDIA_TYPE.VIDEO="VIDEO",MEDIA_TYPE.AUDIO="AUDIO"}(MEDIA_TYPE||(MEDIA_TYPE={})),function(EVENT_TYPE){EVENT_TYPE.PLAY="Play",EVENT_TYPE.ENDED="Ended",EVENT_TYPE.PAUSE="Pause",EVENT_TYPE.TIME_WATCHED="TimeWatched"}(EVENT_TYPE||(EVENT_TYPE={}));var MediaAutoTrack=function(){function MediaAutoTrack(params,provider){var _a;this.eventActionMapping=((_a={})[EVENT_TYPE.ENDED]=this.endedEventAction.bind(this),_a[EVENT_TYPE.PLAY]=this.playEventAction.bind(this),_a[EVENT_TYPE.PAUSE]=this.pauseEventAction.bind(this),_a);var eventData=params.eventData;this._params=params,this._mediaElement=document.getElementById(eventData.properties.domElementId),this._started=!1,this._provider=provider,{IFRAME:this._iframeMediaTracker,VIDEO:this._html5MediaTracker,AUDIO:this._html5MediaTracker}[this._mediaElement.tagName].bind(this)(),this._initYoutubeFrame()}return MediaAutoTrack.prototype._initYoutubeFrame=function(){this._youTubeIframeLoader={src:"https://www.youtube.com/iframe_api",loading:!1,loaded:!1,listeners:[],load:function(callback){var _this=this;if(this.listeners.push(callback),this.loaded)setTimeout((function(){_this.done()}));else if(!this.loading){this.loading=!0,window.onYouTubeIframeAPIReady=function(){_this.loaded=!0,_this.done()};var script=document.createElement("script");script.type="text/javascript",script.src=this.src,document.body.appendChild(script)}},done:function(){for(delete window.onYouTubeIframeAPIReady;this.listeners.length;)this.listeners.pop()(window.YT)}}},MediaAutoTrack.prototype._iframeMediaTracker=function(){var that=this;setInterval((function(){that._started&&that.recordEvent(MEDIA_TYPE.IFRAME,EVENT_TYPE.TIME_WATCHED)}),3e3),this._youTubeIframeLoader.load((function(YT){that._iframePlayer=new YT.Player(that._mediaElement.id,{events:{onStateChange:that._onPlayerStateChange.bind(that)}})}))},MediaAutoTrack.prototype._onPlayerStateChange=function(event){var eventType={0:EVENT_TYPE.ENDED,1:EVENT_TYPE.PLAY,2:EVENT_TYPE.PAUSE}[event.data];eventType&&this.eventActionMapping[eventType](MEDIA_TYPE.IFRAME)},MediaAutoTrack.prototype._html5MediaTracker=function(){var that=this;setInterval((function(){that._started&&that.recordEvent(MEDIA_TYPE.VIDEO,EVENT_TYPE.TIME_WATCHED)}),3e3),this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PLAY,(function(){that.eventActionMapping[EVENT_TYPE.PLAY](MEDIA_TYPE.VIDEO)}),!1),this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PAUSE,(function(){that.eventActionMapping[EVENT_TYPE.PAUSE](MEDIA_TYPE.VIDEO)}),!1),this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.ENDED,(function(){that.eventActionMapping[EVENT_TYPE.ENDED](MEDIA_TYPE.VIDEO)}),!1)},MediaAutoTrack.prototype.playEventAction=function(mediaType){this._started=!0,this.recordEvent(mediaType,EVENT_TYPE.PLAY)},MediaAutoTrack.prototype.pauseEventAction=function(mediaType){this._started=!1,this.recordEvent(mediaType,EVENT_TYPE.PAUSE)},MediaAutoTrack.prototype.endedEventAction=function(mediaType){this._started=!1,this.recordEvent(mediaType,EVENT_TYPE.ENDED)},MediaAutoTrack.prototype.recordEvent=function(mediaType,eventType){var newParams=Object.assign({},this._params),eventData=newParams.eventData;eventData.eventType=eventType,mediaType===MEDIA_TYPE.VIDEO?(eventData.properties.timestamp=this._mediaElement.currentTime,eventData.properties.duration=this._mediaElement.duration):(eventData.properties.timestamp=this._financial(this._iframePlayer.getCurrentTime()),eventData.properties.duration=this._financial(this._iframePlayer.getDuration()));var percentage=parseFloat(eventData.properties.timestamp)/parseFloat(eventData.properties.duration);eventData.properties.eventValue=Number(percentage.toFixed(4)),delete eventData.properties.domElementId,this._provider.putToBuffer(newParams)},MediaAutoTrack.prototype._financial=function(x){return Number.parseFloat(x).toFixed(4)},MediaAutoTrack}(),get=__webpack_require__(318),get_default=__webpack_require__.n(get),AmazonPersonalizeProvider_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AmazonPersonalizeProvider_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},AmazonPersonalizeProvider_logger=new ConsoleLogger.a("AmazonPersonalizeProvider"),AmazonPersonalizeProvider_AmazonPersonalizeProvider=function(){function AmazonPersonalizeProvider(config){this._buffer=[],this._config=config||{},this._config.flushSize=this._config.flushSize>0&&this._config.flushSize<=10?this._config.flushSize:5,this._config.flushInterval=this._config.flushInterval||5e3,this._sessionManager=new SessionInfoManager_SessionInfoManager,isEmpty_default()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._isBrowser=JS.a.browserOrNode().isBrowser,this._setupTimer()}return AmazonPersonalizeProvider.prototype._setupTimer=function(){this._timer&&clearInterval(this._timer);var flushInterval=this._config.flushInterval,that=this;this._timer=setInterval((function(){that._sendFromBuffer()}),flushInterval)},AmazonPersonalizeProvider.prototype.record=function(params){return AmazonPersonalizeProvider_awaiter(this,void 0,void 0,(function(){var credentials,_a,eventType,properties,requestParams;return AmazonPersonalizeProvider_generator(this,(function(_b){switch(_b.label){case 0:return[4,this._getCredentials()];case 1:return(credentials=_b.sent())?(Object.assign(params,{config:this._config,credentials:credentials,sentAt:new Date}),_a=params.event,eventType=_a.eventType,properties=_a.properties,"Identify"===eventType?(this._sessionManager.updateSessionInfo(properties&&properties.userId?properties.userId:"",this._sessionInfo),[2]):(isEmpty_default()(params.event.userId)||this._sessionManager.updateSessionInfo(params.event.userId,this._sessionInfo),requestParams=this.generateRequestParams(params,this._sessionInfo),"MediaAutoTrack"!==eventType?[3,7]:this._isBrowser?isEmpty_default()(get_default()(requestParams,"eventData.properties.domElementId",null))?[3,3]:[4,this.isElementFullyLoaded(this.loadElement,requestParams.eventData.properties.domElementId,500,5)]:[3,5])):[2,Promise.resolve(!1)];case 2:return _b.sent()?new MediaAutoTrack(requestParams,this):AmazonPersonalizeProvider_logger.debug("Cannot find the media element."),[3,4];case 3:AmazonPersonalizeProvider_logger.debug("Missing domElementId field in 'properties' for MediaAutoTrack event type."),_b.label=4;case 4:return[3,6];case 5:AmazonPersonalizeProvider_logger.debug("MediaAutoTrack only for browser"),_b.label=6;case 6:return[2];case 7:return[2,this.putToBuffer(requestParams)]}}))}))},AmazonPersonalizeProvider.prototype.loadElement=function(domId){return new Promise((function(resolve,reject){return document.getElementById(domId)&&document.getElementById(domId).clientHeight?resolve(!0):reject(!0)}))},AmazonPersonalizeProvider.prototype.isElementFullyLoaded=function(operation,params,delay,times){var _this=this;return new Promise((function(resolve,reject){return operation(params).then(resolve).catch((function(reason){return times-1>0?(ms=delay,new Promise((function(r){return setTimeout(r,ms)}))).then(_this.isElementFullyLoaded.bind(null,operation,params,delay,times-1)).then(resolve).catch(reject):reject(reason);var ms}))}))},AmazonPersonalizeProvider.prototype.getCategory=function(){return"Analytics"},AmazonPersonalizeProvider.prototype.getProviderName=function(){return"AmazonPersonalize"},AmazonPersonalizeProvider.prototype.configure=function(config){AmazonPersonalizeProvider_logger.debug("configure Analytics",config);var conf=config||{};return this._config=Object.assign({},this._config,conf),isEmpty_default()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._setupTimer(),this._config},AmazonPersonalizeProvider.prototype.generateRequestParams=function(params,sessionInfo){var requestParams={},_a=params.event,eventType=_a.eventType,properties=_a.properties;return requestParams.eventData={eventType:eventType,properties:properties},requestParams.sessionInfo=sessionInfo,requestParams.sentAt=params.sentAt,requestParams.credentials=params.credentials,requestParams.config=params.config,requestParams},AmazonPersonalizeProvider.prototype._sendEvents=function(group){var groupLen=group.length;if(0!==groupLen){var _a=group[0],config=_a.config,credentials=_a.credentials,sessionInfo=_a.sessionInfo;if(!this._init(config,credentials))return!1;if(groupLen>0){for(var events=[],i=0;i<groupLen;i+=1){var params=group.shift(),eventPayload=this._generateSingleRecordPayload(params,sessionInfo);events.push(eventPayload)}var payload_1={};payload_1.trackingId=sessionInfo.trackingId,payload_1.sessionId=sessionInfo.sessionId,payload_1.userId=sessionInfo.userId,payload_1.eventList=[],events.forEach((function(event){payload_1.eventList.push(event)}));var command=new commands_PutEventsCommand_PutEventsCommand(payload_1);this._personalize.send(command,(function(err){err?AmazonPersonalizeProvider_logger.debug("Failed to call putEvents in Personalize",err):AmazonPersonalizeProvider_logger.debug("Put events")}))}}else AmazonPersonalizeProvider_logger.debug("events array is empty, directly return")},AmazonPersonalizeProvider.prototype.putToBuffer=function(params){return this._buffer.length<this._config.flushSize?this._buffer.push(params):(this._buffer.push(params),this._sendFromBuffer()),Promise.resolve(!0)},AmazonPersonalizeProvider.prototype._sendFromBuffer=function(){var _this=this,size=this._buffer.length;if(!(size<=0)){for(var eventsGroups=[],preCred=null,group=[],i=0;i<size;i+=1){var currRequestParams=this._buffer.shift(),cred=currRequestParams.credentials,sessionInfo=currRequestParams.sessionInfo;0===i?(group.push(currRequestParams),preCred=cred):isEqual_default()(sessionInfo,this._sessionInfo)&&cred.sessionToken===preCred.sessionToken&&cred.identityId===preCred.identityId?(AmazonPersonalizeProvider_logger.debug("no change for cred, put event in the same group"),group.push(currRequestParams)):(eventsGroups.push(group),(group=[]).push(currRequestParams),preCred=cred,this._sessionInfo=sessionInfo)}eventsGroups.push(group),eventsGroups.map((function(group){_this._sendEvents(group)}))}},AmazonPersonalizeProvider.prototype._generateSingleRecordPayload=function(params,sessionInfo){var eventData=params.eventData,sentAt=params.sentAt,trackPayload={};return trackPayload.sentAt=sentAt,trackPayload.properties=eventData.properties&&JSON.stringify(eventData.properties),trackPayload.eventId=this._sessionManager.getTimerKey()+sessionInfo.sessionId,trackPayload.eventType=eventData.eventType,trackPayload},AmazonPersonalizeProvider.prototype._init=function(config,credentials){if(AmazonPersonalizeProvider_logger.debug("init clients"),this._personalize&&this._config.credentials&&this._config.credentials.sessionToken===credentials.sessionToken&&this._config.credentials.identityId===credentials.identityId)return AmazonPersonalizeProvider_logger.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=credentials;var region=config.region;return AmazonPersonalizeProvider_logger.debug("initialize personalize with credentials",credentials),this._personalize=new PersonalizeEventsClient_PersonalizeEventsClient({region:region,credentials:credentials,customUserAgent:Object(Platform.b)()}),!0},AmazonPersonalizeProvider.prototype._getCredentials=function(){var that=this;return Credentials.a.get().then((function(credentials){return credentials?(AmazonPersonalizeProvider_logger.debug("set credentials for analytics",that._config.credentials),Credentials.a.shear(credentials)):null})).catch((function(err){return AmazonPersonalizeProvider_logger.debug("ensure credentials error",err),null}))},AmazonPersonalizeProvider}();__webpack_require__.d(__webpack_exports__,"e",(function(){return Analytics})),__webpack_require__.d(__webpack_exports__,"c",(function(){return AWSPinpointProvider_AWSPinpointProvider})),__webpack_require__.d(__webpack_exports__,"b",(function(){return AWSKinesisProvider_AWSKinesisProvider})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AWSKinesisFirehoseProvider_AWSKinesisFirehoseProvider})),__webpack_require__.d(__webpack_exports__,"d",(function(){return AmazonPersonalizeProvider_AmazonPersonalizeProvider}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return refCount}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Subscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4);function refCount(){return function(source){return source.lift(new RefCountOperator(source))}}var RefCountOperator=function(){function RefCountOperator(connectable){this.connectable=connectable}return RefCountOperator.prototype.call=function(subscriber,source){var connectable=this.connectable;connectable._refCount++;var refCounter=new RefCountSubscriber(subscriber,connectable),subscription=source.subscribe(refCounter);return refCounter.closed||(refCounter.connection=connectable.connect()),subscription},RefCountOperator}(),RefCountSubscriber=function(_super){function RefCountSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;return _this.connectable=connectable,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(RefCountSubscriber,_super),RefCountSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(connectable){this.connectable=null;var refCount=connectable._refCount;if(refCount<=0)this.connection=null;else if(connectable._refCount=refCount-1,refCount>1)this.connection=null;else{var connection=this.connection,sharedConnection=connectable._connection;this.connection=null,!sharedConnection||connection&&sharedConnection!==connection||sharedConnection.unsubscribe()}}else this.connection=null},RefCountSubscriber}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ReplaySubject}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Subject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19),_scheduler_queue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(176),_Subscription__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_operators_observeOn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(169),_util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(74),_SubjectSubscription__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(178),ReplaySubject=function(_super){function ReplaySubject(bufferSize,windowTime,scheduler){void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY);var _this=_super.call(this)||this;return _this.scheduler=scheduler,_this._events=[],_this._infiniteTimeWindow=!1,_this._bufferSize=bufferSize<1?1:bufferSize,_this._windowTime=windowTime<1?1:windowTime,windowTime===Number.POSITIVE_INFINITY?(_this._infiniteTimeWindow=!0,_this.next=_this.nextInfiniteTimeWindow):_this.next=_this.nextTimeWindow,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(ReplaySubject,_super),ReplaySubject.prototype.nextInfiniteTimeWindow=function(value){var _events=this._events;_events.push(value),_events.length>this._bufferSize&&_events.shift(),_super.prototype.next.call(this,value)},ReplaySubject.prototype.nextTimeWindow=function(value){this._events.push(new ReplayEvent(this._getNow(),value)),this._trimBufferThenGetEvents(),_super.prototype.next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){var subscription,_infiniteTimeWindow=this._infiniteTimeWindow,_events=_infiniteTimeWindow?this._events:this._trimBufferThenGetEvents(),scheduler=this.scheduler,len=_events.length;if(this.closed)throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_5__.a;if(this.isStopped||this.hasError?subscription=_Subscription__WEBPACK_IMPORTED_MODULE_3__.a.EMPTY:(this.observers.push(subscriber),subscription=new _SubjectSubscription__WEBPACK_IMPORTED_MODULE_6__.a(this,subscriber)),scheduler&&subscriber.add(subscriber=new _operators_observeOn__WEBPACK_IMPORTED_MODULE_4__.a(subscriber,scheduler)),_infiniteTimeWindow)for(var i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i]);else for(i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i].value);return this.hasError?subscriber.error(this.thrownError):this.isStopped&&subscriber.complete(),subscription},ReplaySubject.prototype._getNow=function(){return(this.scheduler||_scheduler_queue__WEBPACK_IMPORTED_MODULE_2__.a).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(){for(var now=this._getNow(),_bufferSize=this._bufferSize,_windowTime=this._windowTime,_events=this._events,eventsCount=_events.length,spliceCount=0;spliceCount<eventsCount&&!(now-_events[spliceCount].time<_windowTime);)spliceCount++;return eventsCount>_bufferSize&&(spliceCount=Math.max(spliceCount,eventsCount-_bufferSize)),spliceCount>0&&_events.splice(0,spliceCount),_events},ReplaySubject}(_Subject__WEBPACK_IMPORTED_MODULE_1__.a),ReplayEvent=function(){return function(time,value){this.time=time,this.value=value}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return of}));var _util_isScheduler__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),_fromArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47),_empty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(23),_scalar__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(125);function of(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=args[args.length-1];switch(Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_0__.a)(scheduler)?args.pop():scheduler=void 0,args.length){case 0:return Object(_empty__WEBPACK_IMPORTED_MODULE_2__.b)(scheduler);case 1:return scheduler?Object(_fromArray__WEBPACK_IMPORTED_MODULE_1__.a)(args,scheduler):Object(_scalar__WEBPACK_IMPORTED_MODULE_3__.a)(args[0]);default:return Object(_fromArray__WEBPACK_IMPORTED_MODULE_1__.a)(args,scheduler)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return throwError}));var _Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);function throwError(error,scheduler){return scheduler?new _Observable__WEBPACK_IMPORTED_MODULE_0__.a((function(subscriber){return scheduler.schedule(dispatch,0,{error:error,subscriber:subscriber})})):new _Observable__WEBPACK_IMPORTED_MODULE_0__.a((function(subscriber){return subscriber.error(error)}))}function dispatch(_a){var error=_a.error;_a.subscriber.error(error)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return combineLatest})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CombineLatestOperator}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_util_isScheduler__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26),_util_isArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25),_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9),_fromArray__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(47),NONE={};function combineLatest(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];var resultSelector=null,scheduler=null;return Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_1__.a)(observables[observables.length-1])&&(scheduler=observables.pop()),"function"==typeof observables[observables.length-1]&&(resultSelector=observables.pop()),1===observables.length&&Object(_util_isArray__WEBPACK_IMPORTED_MODULE_2__.a)(observables[0])&&(observables=observables[0]),Object(_fromArray__WEBPACK_IMPORTED_MODULE_5__.a)(observables,scheduler).lift(new CombineLatestOperator(resultSelector))}var CombineLatestOperator=function(){function CombineLatestOperator(resultSelector){this.resultSelector=resultSelector}return CombineLatestOperator.prototype.call=function(subscriber,source){return source.subscribe(new CombineLatestSubscriber(subscriber,this.resultSelector))},CombineLatestOperator}(),CombineLatestSubscriber=function(_super){function CombineLatestSubscriber(destination,resultSelector){var _this=_super.call(this,destination)||this;return _this.resultSelector=resultSelector,_this.active=0,_this.values=[],_this.observables=[],_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(CombineLatestSubscriber,_super),CombineLatestSubscriber.prototype._next=function(observable){this.values.push(NONE),this.observables.push(observable)},CombineLatestSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{this.active=len,this.toRespond=len;for(var i=0;i<len;i++){var observable=observables[i];this.add(Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__.a)(this,observable,observable,i))}}},CombineLatestSubscriber.prototype.notifyComplete=function(unused){0==(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){var values=this.values,oldVal=values[outerIndex],toRespond=this.toRespond?oldVal===NONE?--this.toRespond:this.toRespond:0;values[outerIndex]=innerValue,0===toRespond&&(this.resultSelector?this._tryResultSelector(values):this.destination.next(values.slice()))},CombineLatestSubscriber.prototype._tryResultSelector=function(values){var result;try{result=this.resultSelector.apply(this,values)}catch(err){return void this.destination.error(err)}this.destination.next(result)},CombineLatestSubscriber}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return mergeAll}));var _mergeMap__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(79),_util_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68);function mergeAll(concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),Object(_mergeMap__WEBPACK_IMPORTED_MODULE_0__.a)(_util_identity__WEBPACK_IMPORTED_MODULE_1__.a,concurrent)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return defer}));var _Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_from__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39),_empty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(23);function defer(observableFactory){return new _Observable__WEBPACK_IMPORTED_MODULE_0__.a((function(subscriber){var input;try{input=observableFactory()}catch(err){return void subscriber.error(err)}return(input?Object(_from__WEBPACK_IMPORTED_MODULE_1__.a)(input):Object(_empty__WEBPACK_IMPORTED_MODULE_2__.b)()).subscribe(subscriber)}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return zip})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ZipOperator}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_fromArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47),_util_isArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25),_Subscriber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_OuterSubscriber__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9),_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(70);function zip(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];var resultSelector=observables[observables.length-1];return"function"==typeof resultSelector&&observables.pop(),Object(_fromArray__WEBPACK_IMPORTED_MODULE_1__.a)(observables,void 0).lift(new ZipOperator(resultSelector))}var ZipOperator=function(){function ZipOperator(resultSelector){this.resultSelector=resultSelector}return ZipOperator.prototype.call=function(subscriber,source){return source.subscribe(new ZipSubscriber(subscriber,this.resultSelector))},ZipOperator}(),ZipSubscriber=function(_super){function ZipSubscriber(destination,resultSelector,values){void 0===values&&(values=Object.create(null));var _this=_super.call(this,destination)||this;return _this.iterators=[],_this.active=0,_this.resultSelector="function"==typeof resultSelector?resultSelector:null,_this.values=values,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(ZipSubscriber,_super),ZipSubscriber.prototype._next=function(value){var iterators=this.iterators;Object(_util_isArray__WEBPACK_IMPORTED_MODULE_2__.a)(value)?iterators.push(new StaticArrayIterator(value)):"function"==typeof value[_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_6__.a]?iterators.push(new StaticIterator(value[_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_6__.a]())):iterators.push(new ZipBufferIterator(this.destination,this,value))},ZipSubscriber.prototype._complete=function(){var iterators=this.iterators,len=iterators.length;if(0!==len){this.active=len;for(var i=0;i<len;i++){var iterator=iterators[i];iterator.stillUnsubscribed?this.add(iterator.subscribe(iterator,i)):this.active--}}else this.destination.complete()},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var iterators=this.iterators,len=iterators.length,destination=this.destination,i=0;i<len;i++){if("function"==typeof(iterator=iterators[i]).hasValue&&!iterator.hasValue())return}var shouldComplete=!1,args=[];for(i=0;i<len;i++){var iterator,result=(iterator=iterators[i]).next();if(iterator.hasCompleted()&&(shouldComplete=!0),result.done)return void destination.complete();args.push(result.value)}this.resultSelector?this._tryresultSelector(args):destination.next(args),shouldComplete&&destination.complete()},ZipSubscriber.prototype._tryresultSelector=function(args){var result;try{result=this.resultSelector.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},ZipSubscriber}(_Subscriber__WEBPACK_IMPORTED_MODULE_3__.a),StaticIterator=function(){function StaticIterator(iterator){this.iterator=iterator,this.nextResult=iterator.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var result=this.nextResult;return this.nextResult=this.iterator.next(),result},StaticIterator.prototype.hasCompleted=function(){var nextResult=this.nextResult;return nextResult&&nextResult.done},StaticIterator}(),StaticArrayIterator=function(){function StaticArrayIterator(array){this.array=array,this.index=0,this.length=0,this.length=array.length}return StaticArrayIterator.prototype[_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_6__.a]=function(){return this},StaticArrayIterator.prototype.next=function(value){var i=this.index++,array=this.array;return i<this.length?{value:array[i],done:!1}:{value:null,done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),ZipBufferIterator=function(_super){function ZipBufferIterator(destination,parent,observable){var _this=_super.call(this,destination)||this;return _this.parent=parent,_this.observable=observable,_this.stillUnsubscribed=!0,_this.buffer=[],_this.isComplete=!1,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(ZipBufferIterator,_super),ZipBufferIterator.prototype[_internal_symbol_iterator__WEBPACK_IMPORTED_MODULE_6__.a]=function(){return this},ZipBufferIterator.prototype.next=function(){var buffer=this.buffer;return 0===buffer.length&&this.isComplete?{value:null,done:!0}:{value:buffer.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.buffer.push(innerValue),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(value,index){return Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_5__.a)(this,this.observable,this,index)},ZipBufferIterator}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_4__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var ConsoleLogger=__webpack_require__(84),JS=__webpack_require__(57),Retry=__webpack_require__(620),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},logger=new ConsoleLogger.a("CognitoCredentials"),waitForInit=new Promise((function(res,rej){return Object(JS.b)().isBrowser?(window.gapi&&window.gapi.auth2?window.gapi.auth2:null)?(logger.debug("google api already loaded"),res()):void setTimeout((function(){return res()}),2e3):(logger.debug("not in the browser, directly resolved"),res())})),GoogleOAuth_GoogleOAuth=function(){function GoogleOAuth(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return GoogleOAuth.prototype.refreshGoogleToken=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return this.initialized?[3,2]:(logger.debug("need to wait for the Google SDK loaded"),[4,waitForInit]);case 1:_a.sent(),this.initialized=!0,logger.debug("finish waiting"),_a.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}}))}))},GoogleOAuth.prototype._refreshGoogleTokenImpl=function(){var ga=null;return Object(JS.b)().isBrowser&&(ga=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),ga?new Promise((function(res,rej){ga.getAuthInstance().then((function(googleAuth){googleAuth||(logger.debug("google Auth undefined"),rej(new Retry.a("google Auth undefined")));var googleUser=googleAuth.currentUser.get();googleUser.isSignedIn()?(logger.debug("refreshing the google access token"),googleUser.reloadAuthResponse().then((function(authResponse){var id_token=authResponse.id_token,expires_at=authResponse.expires_at;res({token:id_token,expires_at:expires_at})})).catch((function(err){err&&"network_error"===err.error?rej("Network error reloading google auth response"):rej(new Retry.a("Failed to reload google auth response"))}))):rej(new Retry.a("User is not signed in with Google"))})).catch((function(err){logger.debug("Failed to refresh google token",err),rej(new Retry.a("Failed to refresh google token"))}))})):(logger.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},GoogleOAuth}(),FacebookOAuth_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},FacebookOAuth_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},FacebookOAuth_logger=new ConsoleLogger.a("CognitoCredentials"),FacebookOAuth_waitForInit=new Promise((function(res,rej){return Object(JS.b)().isBrowser?window.FB?(FacebookOAuth_logger.debug("FB SDK already loaded"),res()):void setTimeout((function(){return res()}),2e3):(FacebookOAuth_logger.debug("not in the browser, directly resolved"),res())})),FacebookOAuth_FacebookOAuth=function(){function FacebookOAuth(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return FacebookOAuth.prototype.refreshFacebookToken=function(){return FacebookOAuth_awaiter(this,void 0,void 0,(function(){return FacebookOAuth_generator(this,(function(_a){switch(_a.label){case 0:return this.initialized?[3,2]:(FacebookOAuth_logger.debug("need to wait for the Facebook SDK loaded"),[4,FacebookOAuth_waitForInit]);case 1:_a.sent(),this.initialized=!0,FacebookOAuth_logger.debug("finish waiting"),_a.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}}))}))},FacebookOAuth.prototype._refreshFacebookTokenImpl=function(){var fb=null;if(Object(JS.b)().isBrowser&&(fb=window.FB),!fb){return FacebookOAuth_logger.debug("no fb sdk available"),Promise.reject(new Retry.a("no fb sdk available"))}return new Promise((function(res,rej){fb.getLoginStatus((function(fbResponse){if(fbResponse&&fbResponse.authResponse){var response=fbResponse.authResponse,accessToken=response.accessToken,expires_at=1e3*response.expiresIn+(new Date).getTime();if(!accessToken){errorMessage="the jwtToken is undefined";FacebookOAuth_logger.debug(errorMessage),rej(new Retry.a(errorMessage))}res({token:accessToken,expires_at:expires_at})}else{var errorMessage="no response from facebook when refreshing the jwt token";FacebookOAuth_logger.debug(errorMessage),rej(new Retry.a(errorMessage))}}),{scope:"public_profile,email"})}))},FacebookOAuth}();__webpack_require__.d(__webpack_exports__,"b",(function(){return lib_esm_OAuthHelper_GoogleOAuth})),__webpack_require__.d(__webpack_exports__,"a",(function(){return lib_esm_OAuthHelper_FacebookOAuth}));var lib_esm_OAuthHelper_GoogleOAuth=new GoogleOAuth_GoogleOAuth,lib_esm_OAuthHelper_FacebookOAuth=new FacebookOAuth_FacebookOAuth},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return scalar}));var _Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);function scalar(value){var result=new _Observable__WEBPACK_IMPORTED_MODULE_0__.a((function(subscriber){subscriber.next(value),subscriber.complete()}));return result._isScalar=!0,result.value=value,result}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return buildQueryString}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_aws_sdk_util_uri_escape__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(100);function buildQueryString(query){var e_1,_a,parts=[];try{for(var _b=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(Object.keys(query).sort()),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,value=query[key];if(key=Object(_aws_sdk_util_uri_escape__WEBPACK_IMPORTED_MODULE_1__.a)(key),Array.isArray(value))for(var i=0,iLen=value.length;i<iLen;i++)parts.push(key+"="+Object(_aws_sdk_util_uri_escape__WEBPACK_IMPORTED_MODULE_1__.a)(value[i]));else{var qsEntry=key;(value||"string"==typeof value)&&(qsEntry+="="+Object(_aws_sdk_util_uri_escape__WEBPACK_IMPORTED_MODULE_1__.a)(value)),parts.push(qsEntry)}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return parts.join("&")}},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),nextHandle=1,tasksByHandle={};var Immediate_setImmediate=function(cb){var handle=nextHandle++;return tasksByHandle[handle]=cb,Promise.resolve().then((function(){return function(handle){var cb=tasksByHandle[handle];cb&&cb()}(handle)})),handle},Immediate_clearImmediate=function(handle){delete tasksByHandle[handle]},AsapAction_AsapAction=function(_super){function AsapAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this}return tslib_es6.__extends(AsapAction,_super),AsapAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&delay>0?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):(scheduler.actions.push(this),scheduler.scheduled||(scheduler.scheduled=Immediate_setImmediate(scheduler.flush.bind(scheduler,null))))},AsapAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(void 0===delay&&(delay=0),null!==delay&&delay>0||null===delay&&this.delay>0)return _super.prototype.recycleAsyncId.call(this,scheduler,id,delay);0===scheduler.actions.length&&(Immediate_clearImmediate(id),scheduler.scheduled=void 0)},AsapAction}(__webpack_require__(90).a),AsapScheduler_AsapScheduler=function(_super){function AsapScheduler(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.__extends(AsapScheduler,_super),AsapScheduler.prototype.flush=function(action){this.active=!0,this.scheduled=void 0;var error,actions=this.actions,index=-1,count=actions.length;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay))break}while(++index<count&&(action=actions.shift()));if(this.active=!1,error){for(;++index<count&&(action=actions.shift());)action.unsubscribe();throw error}},AsapScheduler}(__webpack_require__(88).a);__webpack_require__.d(__webpack_exports__,"a",(function(){return asap}));var asap=new AsapScheduler_AsapScheduler(AsapAction_AsapAction)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return empty}));var _config__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(49),_util_hostReportError__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(98),empty={closed:!0,next:function(value){},error:function(err){if(_config__WEBPACK_IMPORTED_MODULE_0__.a.useDeprecatedSynchronousErrorHandling)throw err;Object(_util_hostReportError__WEBPACK_IMPORTED_MODULE_1__.a)(err)},complete:function(){}}},function(module,exports,__webpack_require__){var CryptoJS;module.exports=(CryptoJS=__webpack_require__(48),__webpack_require__(148),__webpack_require__(391),CryptoJS.HmacSHA256)},function(module,exports,__webpack_require__){"use strict";exports.parse=function(str,options){if("string"!=typeof str)throw new TypeError("argument str must be a string");for(var obj={},opt=options||{},pairs=str.split(pairSplitRegExp),dec=opt.decode||decode,i=0;i<pairs.length;i++){var pair=pairs[i],eq_idx=pair.indexOf("=");if(!(eq_idx<0)){var key=pair.substr(0,eq_idx).trim(),val=pair.substr(++eq_idx,pair.length).trim();'"'==val[0]&&(val=val.slice(1,-1)),null==obj[key]&&(obj[key]=tryDecode(val,dec))}}return obj},exports.serialize=function(name,val,options){var opt=options||{},enc=opt.encode||encode;if("function"!=typeof enc)throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(name))throw new TypeError("argument name is invalid");var value=enc(val);if(value&&!fieldContentRegExp.test(value))throw new TypeError("argument val is invalid");var str=name+"="+value;if(null!=opt.maxAge){var maxAge=opt.maxAge-0;if(isNaN(maxAge)||!isFinite(maxAge))throw new TypeError("option maxAge is invalid");str+="; Max-Age="+Math.floor(maxAge)}if(opt.domain){if(!fieldContentRegExp.test(opt.domain))throw new TypeError("option domain is invalid");str+="; Domain="+opt.domain}if(opt.path){if(!fieldContentRegExp.test(opt.path))throw new TypeError("option path is invalid");str+="; Path="+opt.path}if(opt.expires){if("function"!=typeof opt.expires.toUTCString)throw new TypeError("option expires is invalid");str+="; Expires="+opt.expires.toUTCString()}opt.httpOnly&&(str+="; HttpOnly");opt.secure&&(str+="; Secure");if(opt.sameSite){switch("string"==typeof opt.sameSite?opt.sameSite.toLowerCase():opt.sameSite){case!0:str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"strict":str+="; SameSite=Strict";break;case"none":str+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return str};var decode=decodeURIComponent,encode=encodeURIComponent,pairSplitRegExp=/; */,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function tryDecode(str,decode){try{return decode(str)}catch(e){return str}}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){__webpack_require__.d(__webpack_exports__,"c",(function(){return serializeAws_restJson1PostContentCommand})),__webpack_require__.d(__webpack_exports__,"d",(function(){return serializeAws_restJson1PostTextCommand})),__webpack_require__.d(__webpack_exports__,"a",(function(){return deserializeAws_restJson1PostContentCommand})),__webpack_require__.d(__webpack_exports__,"b",(function(){return deserializeAws_restJson1PostTextCommand}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_aws_sdk_protocol_http__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),serializeAws_restJson1PostContentCommand=function(input,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,body,_a,hostname,_b,protocol,port;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_c){switch(_c.label){case 0:if(headers=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({"content-type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},isSerializableHeaderValue(input.sessionAttributes)&&{"x-amz-lex-session-attributes":Buffer.from(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.c.fromObject(input.sessionAttributes)).toString("base64")}),isSerializableHeaderValue(input.requestAttributes)&&{"x-amz-lex-request-attributes":Buffer.from(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.c.fromObject(input.requestAttributes)).toString("base64")}),isSerializableHeaderValue(input.contentType)&&{"content-type":input.contentType}),isSerializableHeaderValue(input.accept)&&{accept:input.accept}),isSerializableHeaderValue(input.activeContexts)&&{"x-amz-lex-active-contexts":Buffer.from(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.c.fromObject(input.activeContexts)).toString("base64")}),resolvedPath="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===input.botName)throw new Error("No value provided for input HTTP label: botName.");if((labelValue=input.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(resolvedPath=resolvedPath.replace("{botName}",Object(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.f)(labelValue)),void 0===input.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((labelValue=input.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(resolvedPath=resolvedPath.replace("{botAlias}",Object(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.f)(labelValue)),void 0===input.userId)throw new Error("No value provided for input HTTP label: userId.");if((labelValue=input.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return resolvedPath=resolvedPath.replace("{userId}",Object(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.f)(labelValue)),void 0!==input.inputStream&&(body=input.inputStream),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new _aws_sdk_protocol_http__WEBPACK_IMPORTED_MODULE_1__.a({protocol:protocol,hostname:hostname,port:port,method:"POST",headers:headers,path:resolvedPath,body:body})]}}))}))},serializeAws_restJson1PostTextCommand=function(input,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,body,_a,hostname,_b,protocol,port;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_c){switch(_c.label){case 0:if(headers={"content-type":"application/json"},resolvedPath="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===input.botName)throw new Error("No value provided for input HTTP label: botName.");if((labelValue=input.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(resolvedPath=resolvedPath.replace("{botName}",Object(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.f)(labelValue)),void 0===input.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((labelValue=input.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(resolvedPath=resolvedPath.replace("{botAlias}",Object(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.f)(labelValue)),void 0===input.userId)throw new Error("No value provided for input HTTP label: userId.");if((labelValue=input.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return resolvedPath=resolvedPath.replace("{userId}",Object(_aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.f)(labelValue)),body=JSON.stringify(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},void 0!==input.activeContexts&&null!==input.activeContexts&&{activeContexts:serializeAws_restJson1ActiveContextsList(input.activeContexts,context)}),void 0!==input.inputText&&null!==input.inputText&&{inputText:input.inputText}),void 0!==input.requestAttributes&&null!==input.requestAttributes&&{requestAttributes:serializeAws_restJson1StringMap(input.requestAttributes,context)}),void 0!==input.sessionAttributes&&null!==input.sessionAttributes&&{sessionAttributes:serializeAws_restJson1StringMap(input.sessionAttributes,context)})),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new _aws_sdk_protocol_http__WEBPACK_IMPORTED_MODULE_1__.a({protocol:protocol,hostname:hostname,port:port,method:"POST",headers:headers,path:resolvedPath,body:body})]}}))}))},deserializeAws_restJson1PostContentCommand=function(output,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restJson1PostContentCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),activeContexts:void 0,alternativeIntents:void 0,audioStream:void 0,botVersion:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==output.headers["content-type"]&&(contents.contentType=output.headers["content-type"]),void 0!==output.headers["x-amz-lex-intent-name"]&&(contents.intentName=output.headers["x-amz-lex-intent-name"]),void 0!==output.headers["x-amz-lex-nlu-intent-confidence"]&&(contents.nluIntentConfidence=new _aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.c(Buffer.from(output.headers["x-amz-lex-nlu-intent-confidence"],"base64").toString("ascii"))),void 0!==output.headers["x-amz-lex-alternative-intents"]&&(contents.alternativeIntents=new _aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.c(Buffer.from(output.headers["x-amz-lex-alternative-intents"],"base64").toString("ascii"))),void 0!==output.headers["x-amz-lex-slots"]&&(contents.slots=new _aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.c(Buffer.from(output.headers["x-amz-lex-slots"],"base64").toString("ascii"))),void 0!==output.headers["x-amz-lex-session-attributes"]&&(contents.sessionAttributes=new _aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.c(Buffer.from(output.headers["x-amz-lex-session-attributes"],"base64").toString("ascii"))),void 0!==output.headers["x-amz-lex-sentiment"]&&(contents.sentimentResponse=output.headers["x-amz-lex-sentiment"]),void 0!==output.headers["x-amz-lex-message"]&&(contents.message=output.headers["x-amz-lex-message"]),void 0!==output.headers["x-amz-lex-message-format"]&&(contents.messageFormat=output.headers["x-amz-lex-message-format"]),void 0!==output.headers["x-amz-lex-dialog-state"]&&(contents.dialogState=output.headers["x-amz-lex-dialog-state"]),void 0!==output.headers["x-amz-lex-slot-to-elicit"]&&(contents.slotToElicit=output.headers["x-amz-lex-slot-to-elicit"]),void 0!==output.headers["x-amz-lex-input-transcript"]&&(contents.inputTranscript=output.headers["x-amz-lex-input-transcript"]),void 0!==output.headers["x-amz-lex-bot-version"]&&(contents.botVersion=output.headers["x-amz-lex-bot-version"]),void 0!==output.headers["x-amz-lex-session-id"]&&(contents.sessionId=output.headers["x-amz-lex-session-id"]),void 0!==output.headers["x-amz-lex-active-contexts"]&&(contents.activeContexts=new _aws_sdk_smithy_client__WEBPACK_IMPORTED_MODULE_2__.c(Buffer.from(output.headers["x-amz-lex-active-contexts"],"base64").toString("ascii"))),data=output.body,contents.audioStream=data,[2,Promise.resolve(contents)])}))}))},deserializeAws_restJson1PostContentCommandError=function(output,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,parsedBody,message,_p;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_q){switch(_q.label){case 0:return _a=[Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},output)],_p={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_a.concat([(_p.body=_q.sent(),_p)])),errorCode="UnknownError",errorCode=loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return _c=[{}],[4,deserializeAws_restJson1BadGatewayExceptionResponse(parsedOutput,context)];case 3:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_c.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 4:return _d=[{}],[4,deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput,context)];case 5:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_d.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 6:return _e=[{}],[4,deserializeAws_restJson1ConflictExceptionResponse(parsedOutput,context)];case 7:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_e.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 8:return _f=[{}],[4,deserializeAws_restJson1DependencyFailedExceptionResponse(parsedOutput,context)];case 9:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_f.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 10:return _g=[{}],[4,deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput,context)];case 11:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_g.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 12:return _h=[{}],[4,deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput,context)];case 13:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_h.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 14:return _j=[{}],[4,deserializeAws_restJson1LoopDetectedExceptionResponse(parsedOutput,context)];case 15:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_j.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 16:return _k=[{}],[4,deserializeAws_restJson1NotAcceptableExceptionResponse(parsedOutput,context)];case 17:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_k.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 18:return _l=[{}],[4,deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput,context)];case 19:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_l.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 20:return _m=[{}],[4,deserializeAws_restJson1RequestTimeoutExceptionResponse(parsedOutput,context)];case 21:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_m.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 22:return _o=[{}],[4,deserializeAws_restJson1UnsupportedMediaTypeExceptionResponse(parsedOutput,context)];case 23:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_o.concat([_q.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,25];case 24:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_q.label=25;case 25:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restJson1PostTextCommand=function(output,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){switch(_a.label){case 0:return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restJson1PostTextCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),activeContexts:void 0,alternativeIntents:void 0,botVersion:void 0,dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,parseBody(output.body,context)]);case 1:return void 0!==(data=_a.sent()).activeContexts&&null!==data.activeContexts&&(contents.activeContexts=deserializeAws_restJson1ActiveContextsList(data.activeContexts,context)),void 0!==data.alternativeIntents&&null!==data.alternativeIntents&&(contents.alternativeIntents=deserializeAws_restJson1IntentList(data.alternativeIntents,context)),void 0!==data.botVersion&&null!==data.botVersion&&(contents.botVersion=data.botVersion),void 0!==data.dialogState&&null!==data.dialogState&&(contents.dialogState=data.dialogState),void 0!==data.intentName&&null!==data.intentName&&(contents.intentName=data.intentName),void 0!==data.message&&null!==data.message&&(contents.message=data.message),void 0!==data.messageFormat&&null!==data.messageFormat&&(contents.messageFormat=data.messageFormat),void 0!==data.nluIntentConfidence&&null!==data.nluIntentConfidence&&(contents.nluIntentConfidence=deserializeAws_restJson1IntentConfidence(data.nluIntentConfidence,context)),void 0!==data.responseCard&&null!==data.responseCard&&(contents.responseCard=deserializeAws_restJson1ResponseCard(data.responseCard,context)),void 0!==data.sentimentResponse&&null!==data.sentimentResponse&&(contents.sentimentResponse=deserializeAws_restJson1SentimentResponse(data.sentimentResponse,context)),void 0!==data.sessionAttributes&&null!==data.sessionAttributes&&(contents.sessionAttributes=deserializeAws_restJson1StringMap(data.sessionAttributes,context)),void 0!==data.sessionId&&null!==data.sessionId&&(contents.sessionId=data.sessionId),void 0!==data.slotToElicit&&null!==data.slotToElicit&&(contents.slotToElicit=data.slotToElicit),void 0!==data.slots&&null!==data.slots&&(contents.slots=deserializeAws_restJson1StringMap(data.slots,context)),[2,Promise.resolve(contents)]}}))}))},deserializeAws_restJson1PostTextCommandError=function(output,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,_e,_f,_g,_h,_j,_k,parsedBody,message,_l;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_m){switch(_m.label){case 0:return _a=[Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},output)],_l={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_a.concat([(_l.body=_m.sent(),_l)])),errorCode="UnknownError",errorCode=loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return _c=[{}],[4,deserializeAws_restJson1BadGatewayExceptionResponse(parsedOutput,context)];case 3:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_c.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 4:return _d=[{}],[4,deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput,context)];case 5:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_d.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 6:return _e=[{}],[4,deserializeAws_restJson1ConflictExceptionResponse(parsedOutput,context)];case 7:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_e.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 8:return _f=[{}],[4,deserializeAws_restJson1DependencyFailedExceptionResponse(parsedOutput,context)];case 9:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_f.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 10:return _g=[{}],[4,deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput,context)];case 11:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_g.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 12:return _h=[{}],[4,deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput,context)];case 13:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_h.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 14:return _j=[{}],[4,deserializeAws_restJson1LoopDetectedExceptionResponse(parsedOutput,context)];case 15:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_j.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 16:return _k=[{}],[4,deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput,context)];case 17:return response=tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,[tslib__WEBPACK_IMPORTED_MODULE_0__.a.apply(void 0,_k.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 18:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_m.label=19;case 19:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restJson1BadGatewayExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"BadGatewayException",$fault:"server",$metadata:deserializeMetadata(parsedOutput),Message:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),[2,contents]}))}))},deserializeAws_restJson1BadRequestExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"BadRequestException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),message:void 0},void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},deserializeAws_restJson1ConflictExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"ConflictException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),message:void 0},void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},deserializeAws_restJson1DependencyFailedExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"DependencyFailedException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),Message:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),[2,contents]}))}))},deserializeAws_restJson1InternalFailureExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"InternalFailureException",$fault:"server",$metadata:deserializeMetadata(parsedOutput),message:void 0},void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},deserializeAws_restJson1LimitExceededExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"LimitExceededException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),message:void 0,retryAfterSeconds:void 0},void 0!==parsedOutput.headers["retry-after"]&&(contents.retryAfterSeconds=parsedOutput.headers["retry-after"]),void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},deserializeAws_restJson1LoopDetectedExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"LoopDetectedException",$fault:"server",$metadata:deserializeMetadata(parsedOutput),Message:void 0},void 0!==(data=parsedOutput.body).Message&&null!==data.Message&&(contents.Message=data.Message),[2,contents]}))}))},deserializeAws_restJson1NotAcceptableExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"NotAcceptableException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),message:void 0},void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},deserializeAws_restJson1NotFoundExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"NotFoundException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),message:void 0},void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},deserializeAws_restJson1RequestTimeoutExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"RequestTimeoutException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),message:void 0},void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},deserializeAws_restJson1UnsupportedMediaTypeExceptionResponse=function(parsedOutput,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)(void 0,void 0,void 0,(function(){var contents,data;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(this,(function(_a){return contents={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:deserializeMetadata(parsedOutput),message:void 0},void 0!==(data=parsedOutput.body).message&&null!==data.message&&(contents.message=data.message),[2,contents]}))}))},serializeAws_restJson1ActiveContextParametersMap=function(input,context){return Object.entries(input).reduce((function(acc,_a){var _b,_c=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.e)(_a,2),key=_c[0],value=_c[1];return null===value?acc:Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},acc),((_b={})[key]=value,_b))}),{})},serializeAws_restJson1ActiveContextsList=function(input,context){return input.filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(input,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},void 0!==input.name&&null!==input.name&&{name:input.name}),void 0!==input.parameters&&null!==input.parameters&&{parameters:serializeAws_restJson1ActiveContextParametersMap(input.parameters,context)}),void 0!==input.timeToLive&&null!==input.timeToLive&&{timeToLive:serializeAws_restJson1ActiveContextTimeToLive(input.timeToLive,context)})}(entry,context)}))},serializeAws_restJson1ActiveContextTimeToLive=function(input,context){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},void 0!==input.timeToLiveInSeconds&&null!==input.timeToLiveInSeconds&&{timeToLiveInSeconds:input.timeToLiveInSeconds}),void 0!==input.turnsToLive&&null!==input.turnsToLive&&{turnsToLive:input.turnsToLive})},serializeAws_restJson1StringMap=function(input,context){return Object.entries(input).reduce((function(acc,_a){var _b,_c=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.e)(_a,2),key=_c[0],value=_c[1];return null===value?acc:Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},acc),((_b={})[key]=value,_b))}),{})},deserializeAws_restJson1ActiveContextParametersMap=function(output,context){return Object.entries(output).reduce((function(acc,_a){var _b,_c=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.e)(_a,2),key=_c[0],value=_c[1];return null===value?acc:Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},acc),((_b={})[key]=value,_b))}),{})},deserializeAws_restJson1ActiveContextsList=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(output,context){return{name:void 0!==output.name&&null!==output.name?output.name:void 0,parameters:void 0!==output.parameters&&null!==output.parameters?deserializeAws_restJson1ActiveContextParametersMap(output.parameters,context):void 0,timeToLive:void 0!==output.timeToLive&&null!==output.timeToLive?deserializeAws_restJson1ActiveContextTimeToLive(output.timeToLive,context):void 0}}(entry,context)}))},deserializeAws_restJson1ActiveContextTimeToLive=function(output,context){return{timeToLiveInSeconds:void 0!==output.timeToLiveInSeconds&&null!==output.timeToLiveInSeconds?output.timeToLiveInSeconds:void 0,turnsToLive:void 0!==output.turnsToLive&&null!==output.turnsToLive?output.turnsToLive:void 0}},deserializeAws_restJson1genericAttachmentList=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(output,context){return{attachmentLinkUrl:void 0!==output.attachmentLinkUrl&&null!==output.attachmentLinkUrl?output.attachmentLinkUrl:void 0,buttons:void 0!==output.buttons&&null!==output.buttons?deserializeAws_restJson1listOfButtons(output.buttons,context):void 0,imageUrl:void 0!==output.imageUrl&&null!==output.imageUrl?output.imageUrl:void 0,subTitle:void 0!==output.subTitle&&null!==output.subTitle?output.subTitle:void 0,title:void 0!==output.title&&null!==output.title?output.title:void 0}}(entry,context)}))},deserializeAws_restJson1IntentConfidence=function(output,context){return{score:void 0!==output.score&&null!==output.score?output.score:void 0}},deserializeAws_restJson1IntentList=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:deserializeAws_restJson1PredictedIntent(entry,context)}))},deserializeAws_restJson1listOfButtons=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(output,context){return{text:void 0!==output.text&&null!==output.text?output.text:void 0,value:void 0!==output.value&&null!==output.value?output.value:void 0}}(entry)}))},deserializeAws_restJson1PredictedIntent=function(output,context){return{intentName:void 0!==output.intentName&&null!==output.intentName?output.intentName:void 0,nluIntentConfidence:void 0!==output.nluIntentConfidence&&null!==output.nluIntentConfidence?deserializeAws_restJson1IntentConfidence(output.nluIntentConfidence,context):void 0,slots:void 0!==output.slots&&null!==output.slots?deserializeAws_restJson1StringMap(output.slots,context):void 0}},deserializeAws_restJson1ResponseCard=function(output,context){return{contentType:void 0!==output.contentType&&null!==output.contentType?output.contentType:void 0,genericAttachments:void 0!==output.genericAttachments&&null!==output.genericAttachments?deserializeAws_restJson1genericAttachmentList(output.genericAttachments,context):void 0,version:void 0!==output.version&&null!==output.version?output.version:void 0}},deserializeAws_restJson1SentimentResponse=function(output,context){return{sentimentLabel:void 0!==output.sentimentLabel&&null!==output.sentimentLabel?output.sentimentLabel:void 0,sentimentScore:void 0!==output.sentimentScore&&null!==output.sentimentScore?output.sentimentScore:void 0}},deserializeAws_restJson1StringMap=function(output,context){return Object.entries(output).reduce((function(acc,_a){var _b,_c=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.e)(_a,2),key=_c[0],value=_c[1];return null===value?acc:Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)({},acc),((_b={})[key]=value,_b))}),{})},deserializeMetadata=function(output){var _a;return{httpStatusCode:output.statusCode,requestId:null!==(_a=output.headers["x-amzn-requestid"])&&void 0!==_a?_a:output.headers["x-amzn-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}},collectBodyString=function(streamBody,context){return function(streamBody,context){return void 0===streamBody&&(streamBody=new Uint8Array),streamBody instanceof Uint8Array?Promise.resolve(streamBody):context.streamCollector(streamBody)||Promise.resolve(new Uint8Array)}(streamBody,context).then((function(body){return context.utf8Encoder(body)}))},isSerializableHeaderValue=function(value){return!(null==value||""===value||Object.getOwnPropertyNames(value).includes("length")&&0==value.length||Object.getOwnPropertyNames(value).includes("size")&&0==value.size)},parseBody=function(streamBody,context){return collectBodyString(streamBody,context).then((function(encoded){return encoded.length?JSON.parse(encoded):{}}))},loadRestJsonErrorCode=function(output,data){var object,key,sanitizeErrorCode=function(rawValue){var cleanValue=rawValue;return cleanValue.indexOf(":")>=0&&(cleanValue=cleanValue.split(":")[0]),cleanValue.indexOf("#")>=0&&(cleanValue=cleanValue.split("#")[1]),cleanValue},headerKey=(object=output.headers,key="x-amzn-errortype",Object.keys(object).find((function(k){return k.toLowerCase()===key.toLowerCase()})));return void 0!==headerKey?sanitizeErrorCode(output.headers[headerKey]):void 0!==data.code?sanitizeErrorCode(data.code):void 0!==data.__type?sanitizeErrorCode(data.__type):""}}).call(this,__webpack_require__(11).Buffer)},function(module,__webpack_exports__,__webpack_require__){"use strict";var Auth=__webpack_require__(20),ConsoleLogger=__webpack_require__(84),Hub=__webpack_require__(186),Credentials=__webpack_require__(175),Parser=__webpack_require__(285),UniversalStorage=__webpack_require__(218),StorageHelper=__webpack_require__(145),JS=__webpack_require__(57);var extendStatics,Amplify=__webpack_require__(40),es=__webpack_require__(46),url_url=__webpack_require__(33),launchUri=function(url){var windowProxy=window.open(url,"_self");return windowProxy?Promise.resolve(windowProxy):Promise.reject()},sha256=__webpack_require__(148),sha256_default=__webpack_require__.n(sha256),enc_base64=__webpack_require__(149),enc_base64_default=__webpack_require__.n(enc_base64),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},AMPLIFY_SYMBOL="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",dispatchAuthEvent=function(event,data,message){Hub.a.dispatch("auth",{event:event,data:data,message:message},"Auth",AMPLIFY_SYMBOL)},logger=new ConsoleLogger.a("OAuth"),lib_esm_OAuth_OAuth=function(){function OAuth(_a){var config=_a.config,cognitoClientId=_a.cognitoClientId,_b=_a.scopes,scopes=void 0===_b?[]:_b;if(this._urlOpener=config.urlOpener||launchUri,this._config=config,this._cognitoClientId=cognitoClientId,!this.isValidScopes(scopes))throw Error("scopes must be a String Array");this._scopes=scopes}return OAuth.prototype.isValidScopes=function(scopes){return Array.isArray(scopes)&&scopes.every((function(scope){return"string"==typeof scope}))},OAuth.prototype.oauthSignIn=function(responseType,domain,redirectSignIn,clientId,provider,customState){void 0===responseType&&(responseType="code"),void 0===provider&&(provider=Auth.b.Cognito);var generatedState=this._generateState(32),state=customState?generatedState+"-"+customState.split("").map((function(char){return char.charCodeAt(0).toString(16).padStart(2,"0")})).join(""):generatedState;!function(state){window.sessionStorage.setItem("oauth_state",state)}(state);var private_key,pkce_key=this._generateRandom(128);private_key=pkce_key,window.sessionStorage.setItem("ouath_pkce_key",private_key);var code_challenge=this._generateChallenge(pkce_key),scopesString=this._scopes.join(" "),URL="https://"+domain+"/oauth2/authorize?"+Object.entries(__assign(__assign({redirect_uri:redirectSignIn,response_type:responseType,client_id:clientId,identity_provider:provider,scope:scopesString,state:state},"code"===responseType?{code_challenge:code_challenge}:{}),"code"===responseType?{code_challenge_method:"S256"}:{})).map((function(_a){var _b=__read(_a,2),k=_b[0],v=_b[1];return encodeURIComponent(k)+"="+encodeURIComponent(v)})).join("&");logger.debug("Redirecting to "+URL),this._urlOpener(URL,redirectSignIn)},OAuth.prototype._handleCodeFlow=function(currentUrl){return __awaiter(this,void 0,void 0,(function(){var code,oAuthTokenEndpoint,client_id,redirect_uri,code_verifier,oAuthTokenBody,body,_a,access_token,refresh_token,id_token,error;return __generator(this,(function(_b){switch(_b.label){case 0:return(code=(Object(url_url.parse)(currentUrl).query||"").split("&").map((function(pairings){return pairings.split("=")})).reduce((function(accum,_a){var _b,_c=__read(_a,2),k=_c[0],v=_c[1];return __assign(__assign({},accum),((_b={})[k]=v,_b))}),{code:void 0}).code)&&Object(url_url.parse)(currentUrl).pathname===Object(url_url.parse)(this._config.redirectSignIn).pathname?(oAuthTokenEndpoint="https://"+this._config.domain+"/oauth2/token",dispatchAuthEvent("codeFlow",{},"Retrieving tokens from "+oAuthTokenEndpoint),client_id=Object(Auth.d)(this._config)?this._cognitoClientId:this._config.clientID,redirect_uri=Object(Auth.d)(this._config)?this._config.redirectSignIn:this._config.redirectUri,ouath_pkce_key=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),oAuthTokenBody=__assign({grant_type:"authorization_code",code:code,client_id:client_id,redirect_uri:redirect_uri},(code_verifier=ouath_pkce_key)?{code_verifier:code_verifier}:{}),logger.debug("Calling token endpoint: "+oAuthTokenEndpoint+" with",oAuthTokenBody),body=Object.entries(oAuthTokenBody).map((function(_a){var _b=__read(_a,2),k=_b[0],v=_b[1];return encodeURIComponent(k)+"="+encodeURIComponent(v)})).join("&"),[4,fetch(oAuthTokenEndpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:body})]):[2];case 1:return[4,_b.sent().json()];case 2:if(_a=_b.sent(),access_token=_a.access_token,refresh_token=_a.refresh_token,id_token=_a.id_token,error=_a.error)throw new Error(error);return[2,{accessToken:access_token,refreshToken:refresh_token,idToken:id_token}]}var ouath_pkce_key}))}))},OAuth.prototype._handleImplicitFlow=function(currentUrl){return __awaiter(this,void 0,void 0,(function(){var _a,id_token,access_token;return __generator(this,(function(_b){return _a=(Object(url_url.parse)(currentUrl).hash||"#").substr(1).split("&").map((function(pairings){return pairings.split("=")})).reduce((function(accum,_a){var _b,_c=__read(_a,2),k=_c[0],v=_c[1];return __assign(__assign({},accum),((_b={})[k]=v,_b))}),{id_token:void 0,access_token:void 0}),id_token=_a.id_token,access_token=_a.access_token,dispatchAuthEvent("implicitFlow",{},"Got tokens from "+currentUrl),logger.debug("Retrieving implicit tokens from "+currentUrl+" with"),[2,{accessToken:access_token,idToken:id_token,refreshToken:null}]}))}))},OAuth.prototype.handleAuthResponse=function(currentUrl){return __awaiter(this,void 0,void 0,(function(){var urlParams,error,error_description,state,_a,_b,e_1;return __generator(this,(function(_c){switch(_c.label){case 0:if(_c.trys.push([0,5,,6]),urlParams=currentUrl?__assign(__assign({},(Object(url_url.parse)(currentUrl).hash||"#").substr(1).split("&").map((function(entry){return entry.split("=")})).reduce((function(acc,_a){var _b=__read(_a,2),k=_b[0],v=_b[1];return acc[k]=v,acc}),{})),(Object(url_url.parse)(currentUrl).query||"").split("&").map((function(entry){return entry.split("=")})).reduce((function(acc,_a){var _b=__read(_a,2),k=_b[0],v=_b[1];return acc[k]=v,acc}),{})):{},error=urlParams.error,error_description=urlParams.error_description,error)throw new Error(error_description);return state=this._validateState(urlParams),logger.debug("Starting "+this._config.responseType+" flow with "+currentUrl),"code"!==this._config.responseType?[3,2]:(_a=[{}],[4,this._handleCodeFlow(currentUrl)]);case 1:return[2,__assign.apply(void 0,[__assign.apply(void 0,_a.concat([_c.sent()])),{state:state}])];case 2:return _b=[{}],[4,this._handleImplicitFlow(currentUrl)];case 3:return[2,__assign.apply(void 0,[__assign.apply(void 0,_b.concat([_c.sent()])),{state:state}])];case 4:return[3,6];case 5:throw e_1=_c.sent(),logger.error("Error handling auth response.",e_1),e_1;case 6:return[2]}}))}))},OAuth.prototype._validateState=function(urlParams){if(urlParams){var oauth_state,savedState=(oauth_state=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),oauth_state),returnedState=urlParams.state;if(savedState&&savedState!==returnedState)throw new Error("Invalid state in OAuth flow");return returnedState}},OAuth.prototype.signOut=function(){return __awaiter(this,void 0,void 0,(function(){var oAuthLogoutEndpoint,client_id,signout_uri;return __generator(this,(function(_a){return oAuthLogoutEndpoint="https://"+this._config.domain+"/logout?",client_id=Object(Auth.d)(this._config)?this._cognitoClientId:this._config.oauth.clientID,signout_uri=Object(Auth.d)(this._config)?this._config.redirectSignOut:this._config.returnTo,oAuthLogoutEndpoint+=Object.entries({client_id:client_id,logout_uri:encodeURIComponent(signout_uri)}).map((function(_a){var _b=__read(_a,2);return _b[0]+"="+_b[1]})).join("&"),dispatchAuthEvent("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+oAuthLogoutEndpoint),logger.debug("Signing out from "+oAuthLogoutEndpoint),[2,this._urlOpener(oAuthLogoutEndpoint)]}))}))},OAuth.prototype._generateState=function(length){for(var result="",i=length,chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";i>0;--i)result+=chars[Math.round(Math.random()*(chars.length-1))];return result},OAuth.prototype._generateChallenge=function(code){return this._base64URL(sha256_default()(code))},OAuth.prototype._base64URL=function(string){return string.toString(enc_base64_default.a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},OAuth.prototype._generateRandom=function(size){var buffer=new Uint8Array(size);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(buffer);else for(var i=0;i<size;i+=1)buffer[i]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(buffer)},OAuth.prototype._bufferToString=function(buffer){for(var CHARSET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",state=[],i=0;i<buffer.byteLength;i+=1){var index=buffer[i]%CHARSET.length;state.push(CHARSET[index])}return state.join("")},OAuth}(),AuthErrorStrings=__webpack_require__(52),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),Errors_logger=new ConsoleLogger.a("AuthError"),AuthError=function(_super){function AuthError(type){var _this=this,_a=authErrorMessages[type],message=_a.message,log=_a.log;return(_this=_super.call(this,message)||this).constructor=AuthError,Object.setPrototypeOf(_this,AuthError.prototype),_this.name="AuthError",_this.log=log||message,Errors_logger.error(_this.log),_this}return __extends(AuthError,_super),AuthError}(Error),NoUserPoolError=function(_super){function NoUserPoolError(type){var _this=_super.call(this,type)||this;return _this.constructor=NoUserPoolError,Object.setPrototypeOf(_this,NoUserPoolError.prototype),_this.name="NoUserPoolError",_this}return __extends(NoUserPoolError,_super),NoUserPoolError}(AuthError),authErrorMessages={noConfig:{message:AuthErrorStrings.a.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:AuthErrorStrings.a.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:AuthErrorStrings.a.EMPTY_USERNAME},invalidUsername:{message:AuthErrorStrings.a.INVALID_USERNAME},emptyPassword:{message:AuthErrorStrings.a.EMPTY_PASSWORD},emptyCode:{message:AuthErrorStrings.a.EMPTY_CODE},signUpError:{message:AuthErrorStrings.a.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:AuthErrorStrings.a.NO_MFA},invalidMFA:{message:AuthErrorStrings.a.INVALID_MFA},emptyChallengeResponse:{message:AuthErrorStrings.a.EMPTY_CHALLENGE},noUserSession:{message:AuthErrorStrings.a.NO_USER_SESSION},default:{message:AuthErrorStrings.a.DEFAULT_MSG}};__webpack_require__.d(__webpack_exports__,"a",(function(){return Auth_Auth}));var Auth_assign=function(){return(Auth_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Auth_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Auth_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},Auth_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},Auth_logger=new ConsoleLogger.a("AuthClass"),Auth_AMPLIFY_SYMBOL="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Auth_dispatchAuthEvent=function(event,data,message){Hub.a.dispatch("auth",{event:event,data:data,message:message},"Auth",Auth_AMPLIFY_SYMBOL)},Auth_Auth=new(function(){function AuthClass(config){var _this=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=Credentials.a,this.wrapRefreshSessionCallback=function(callback){return function(error,data){return data?Auth_dispatchAuthEvent("tokenRefresh",void 0,"New token retrieved"):Auth_dispatchAuthEvent("tokenRefresh_failure",error,"Failed to retrieve new token"),callback(error,data)}},this.configure(config),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),Hub.a.listen("auth",(function(_a){switch(_a.payload.event){case"signIn":_this._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":_this._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":_this._storage.setItem("amplify-signin-with-hostedUI","true")}}))}return AuthClass.prototype.getModuleName=function(){return"Auth"},AuthClass.prototype.configure=function(config){var _this=this;if(!config)return this._config||{};Auth_logger.debug("configure Auth");var conf=Object.assign({},this._config,Parser.a.parseMobilehubConfig(config).Auth,config);this._config=conf;var _a=this._config,userPoolId=_a.userPoolId,userPoolWebClientId=_a.userPoolWebClientId,cookieStorage=_a.cookieStorage,oauth=_a.oauth,region=_a.region,identityPoolId=_a.identityPoolId,mandatorySignIn=_a.mandatorySignIn,refreshHandlers=_a.refreshHandlers,identityPoolRegion=_a.identityPoolRegion,clientMetadata=_a.clientMetadata,endpoint=_a.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Auth_logger.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=cookieStorage?new es.i(cookieStorage):config.ssr?new UniversalStorage.a:(new StorageHelper.a).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),userPoolId){var userPoolData={UserPoolId:userPoolId,ClientId:userPoolWebClientId,endpoint:endpoint};userPoolData.Storage=this._storage,this.userPool=new es.g(userPoolData,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:mandatorySignIn,region:identityPoolRegion||region,userPoolId:userPoolId,identityPoolId:identityPoolId,refreshHandlers:refreshHandlers,storage:this._storage});var cognitoHostedUIConfig=oauth?Object(Auth.d)(this._config.oauth)?oauth:oauth.awsCognito:void 0;if(cognitoHostedUIConfig){var cognitoAuthParams=Object.assign({cognitoClientId:userPoolWebClientId,UserPoolId:userPoolId,domain:cognitoHostedUIConfig.domain,scopes:cognitoHostedUIConfig.scope,redirectSignIn:cognitoHostedUIConfig.redirectSignIn,redirectSignOut:cognitoHostedUIConfig.redirectSignOut,responseType:cognitoHostedUIConfig.responseType,Storage:this._storage,urlOpener:cognitoHostedUIConfig.urlOpener,clientMetadata:clientMetadata},cognitoHostedUIConfig.options);this._oAuthHandler=new lib_esm_OAuth_OAuth({scopes:cognitoAuthParams.scopes,config:cognitoAuthParams,cognitoClientId:cognitoAuthParams.cognitoClientId});var usedResponseUrls_1={};!function(callback){if(JS.a.browserOrNode().isBrowser&&window.location)callback({url:window.location.href});else if(!JS.a.browserOrNode().isNode)throw new Error("Not supported")}((function(_a){var url=_a.url;usedResponseUrls_1[url]||(usedResponseUrls_1[url]=!0,_this._handleAuthResponse(url))}))}return Auth_dispatchAuthEvent("configured",null,"The Auth category has been configured successfully"),this._config},AuthClass.prototype.signUp=function(params){for(var _this=this,restOfAttrs=[],_i=1;_i<arguments.length;_i++)restOfAttrs[_i-1]=arguments[_i];if(!this.userPool)return this.rejectNoUserPool();var clientMetadata,username=null,password=null,attributes=[],validationData=null;if(params&&"string"==typeof params){username=params,password=restOfAttrs?restOfAttrs[0]:null;var email=restOfAttrs?restOfAttrs[1]:null,phone_number=restOfAttrs?restOfAttrs[2]:null;email&&attributes.push(new es.f({Name:"email",Value:email})),phone_number&&attributes.push(new es.f({Name:"phone_number",Value:phone_number}))}else{if(!params||"object"!=typeof params)return this.rejectAuthError(Auth.a.SignUpError);username=params.username,password=params.password,params&&params.clientMetadata?clientMetadata=params.clientMetadata:this._config.clientMetadata&&(clientMetadata=this._config.clientMetadata);var attrs_1=params.attributes;attrs_1&&Object.keys(attrs_1).map((function(key){attributes.push(new es.f({Name:key,Value:attrs_1[key]}))}));var validationDataObject=params.validationData;validationDataObject&&(validationData=[],Object.keys(validationDataObject).map((function(key){validationData.push(new es.f({Name:key,Value:attrs_1[key]}))})))}return username?password?(Auth_logger.debug("signUp attrs:",attributes),Auth_logger.debug("signUp validation data:",validationData),new Promise((function(resolve,reject){_this.userPool.signUp(username,password,attributes,validationData,(function(err,data){err?(Auth_dispatchAuthEvent("signUp_failure",err,username+" failed to signup"),reject(err)):(Auth_dispatchAuthEvent("signUp",data,username+" has signed up successfully"),resolve(data))}),clientMetadata)}))):this.rejectAuthError(Auth.a.EmptyPassword):this.rejectAuthError(Auth.a.EmptyUsername)},AuthClass.prototype.confirmSignUp=function(username,code,options){if(!this.userPool)return this.rejectNoUserPool();if(!username)return this.rejectAuthError(Auth.a.EmptyUsername);if(!code)return this.rejectAuthError(Auth.a.EmptyCode);var clientMetadata,user=this.createCognitoUser(username),forceAliasCreation=!options||"boolean"!=typeof options.forceAliasCreation||options.forceAliasCreation;return options&&options.clientMetadata?clientMetadata=options.clientMetadata:this._config.clientMetadata&&(clientMetadata=this._config.clientMetadata),new Promise((function(resolve,reject){user.confirmRegistration(code,forceAliasCreation,(function(err,data){err?reject(err):resolve(data)}),clientMetadata)}))},AuthClass.prototype.resendSignUp=function(username,clientMetadata){if(void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!username)return this.rejectAuthError(Auth.a.EmptyUsername);var user=this.createCognitoUser(username);return new Promise((function(resolve,reject){user.resendConfirmationCode((function(err,data){err?reject(err):resolve(data)}),clientMetadata)}))},AuthClass.prototype.signIn=function(usernameOrSignInOpts,pw,clientMetadata){if(void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var username=null,password=null,validationData={};if("string"==typeof usernameOrSignInOpts)username=usernameOrSignInOpts,password=pw;else{if(!Object(Auth.g)(usernameOrSignInOpts))return this.rejectAuthError(Auth.a.InvalidUsername);void 0!==pw&&Auth_logger.warn("The password should be defined under the first parameter object!"),username=usernameOrSignInOpts.username,password=usernameOrSignInOpts.password,validationData=usernameOrSignInOpts.validationData}if(!username)return this.rejectAuthError(Auth.a.EmptyUsername);var authDetails=new es.a({Username:username,Password:password,ValidationData:validationData,ClientMetadata:clientMetadata});return password?this.signInWithPassword(authDetails):this.signInWithoutPassword(authDetails)},AuthClass.prototype.authCallbacks=function(user,resolve,reject){var _this=this,that=this;return{onSuccess:function(session){return Auth_awaiter(_this,void 0,void 0,(function(){var cred,e_1,currentUser,e_2;return Auth_generator(this,(function(_a){switch(_a.label){case 0:Auth_logger.debug(session),delete user.challengeName,delete user.challengeParam,_a.label=1;case 1:return _a.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return _a.sent(),[4,this.Credentials.set(session,"session")];case 3:return cred=_a.sent(),Auth_logger.debug("succeed to get cognito credentials",cred),[3,9];case 4:return e_1=_a.sent(),Auth_logger.debug("cannot get cognito credentials",e_1),[3,9];case 5:return _a.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return currentUser=_a.sent(),that.user=currentUser,Auth_dispatchAuthEvent("signIn",currentUser,"A user "+user.getUsername()+" has been signed in"),resolve(currentUser),[3,8];case 7:return e_2=_a.sent(),Auth_logger.error("Failed to get the signed in user",e_2),reject(e_2),[3,8];case 8:return[7];case 9:return[2]}}))}))},onFailure:function(err){Auth_logger.debug("signIn failure",err),Auth_dispatchAuthEvent("signIn_failure",err,user.getUsername()+" failed to signin"),reject(err)},customChallenge:function(challengeParam){Auth_logger.debug("signIn custom challenge answer required"),user.challengeName="CUSTOM_CHALLENGE",user.challengeParam=challengeParam,resolve(user)},mfaRequired:function(challengeName,challengeParam){Auth_logger.debug("signIn MFA required"),user.challengeName=challengeName,user.challengeParam=challengeParam,resolve(user)},mfaSetup:function(challengeName,challengeParam){Auth_logger.debug("signIn mfa setup",challengeName),user.challengeName=challengeName,user.challengeParam=challengeParam,resolve(user)},newPasswordRequired:function(userAttributes,requiredAttributes){Auth_logger.debug("signIn new password"),user.challengeName="NEW_PASSWORD_REQUIRED",user.challengeParam={userAttributes:userAttributes,requiredAttributes:requiredAttributes},resolve(user)},totpRequired:function(challengeName,challengeParam){Auth_logger.debug("signIn totpRequired"),user.challengeName=challengeName,user.challengeParam=challengeParam,resolve(user)},selectMFAType:function(challengeName,challengeParam){Auth_logger.debug("signIn selectMFAType",challengeName),user.challengeName=challengeName,user.challengeParam=challengeParam,resolve(user)}}},AuthClass.prototype.signInWithPassword=function(authDetails){var _this=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var user=this.createCognitoUser(authDetails.getUsername());return this.pendingSignIn=new Promise((function(resolve,reject){user.authenticateUser(authDetails,_this.authCallbacks(user,(function(value){_this.pendingSignIn=null,resolve(value)}),(function(error){_this.pendingSignIn=null,reject(error)})))})),this.pendingSignIn},AuthClass.prototype.signInWithoutPassword=function(authDetails){var _this=this,user=this.createCognitoUser(authDetails.getUsername());return user.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise((function(resolve,reject){user.initiateAuth(authDetails,_this.authCallbacks(user,resolve,reject))}))},AuthClass.prototype.getMFAOptions=function(user){return new Promise((function(res,rej){user.getMFAOptions((function(err,mfaOptions){if(err)return Auth_logger.debug("get MFA Options failed",err),void rej(err);Auth_logger.debug("get MFA options success",mfaOptions),res(mfaOptions)}))}))},AuthClass.prototype.getPreferredMFA=function(user,params){var _this=this,that=this;return new Promise((function(res,rej){var clientMetadata=_this._config.clientMetadata,bypassCache=!!params&&params.bypassCache;user.getUserData((function(err,data){if(err)return Auth_logger.debug("getting preferred mfa failed",err),void rej(err);var mfaType=that._getMfaTypeFromUserData(data);return mfaType?void res(mfaType):void rej("invalid MFA Type")}),{bypassCache:bypassCache,clientMetadata:clientMetadata})}))},AuthClass.prototype._getMfaTypeFromUserData=function(data){var ret=null,preferredMFA=data.PreferredMfaSetting;if(preferredMFA)ret=preferredMFA;else{var mfaList=data.UserMFASettingList;if(mfaList)0===mfaList.length?ret="NOMFA":Auth_logger.debug("invalid case for getPreferredMFA",data);else ret=data.MFAOptions?"SMS_MFA":"NOMFA"}return ret},AuthClass.prototype._getUserData=function(user,params){return new Promise((function(res,rej){user.getUserData((function(err,data){return err?(Auth_logger.debug("getting user data failed",err),void rej(err)):void res(data)}),params)}))},AuthClass.prototype.setPreferredMFA=function(user,mfaMethod){return Auth_awaiter(this,void 0,void 0,(function(){var clientMetadata,userData,smsMfaSettings,totpMfaSettings,mfaList,currentMFAType;return Auth_generator(this,(function(_b){switch(_b.label){case 0:return clientMetadata=this._config.clientMetadata,[4,this._getUserData(user,{bypassCache:!0,clientMetadata:clientMetadata})];case 1:switch(userData=_b.sent(),smsMfaSettings=null,totpMfaSettings=null,mfaMethod){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return totpMfaSettings={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return smsMfaSettings={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return mfaList=userData.UserMFASettingList,[4,this._getMfaTypeFromUserData(userData)];case 5:if("NOMFA"===(currentMFAType=_b.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===currentMFAType)smsMfaSettings={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==currentMFAType)return[2,this.rejectAuthError(Auth.a.InvalidMFA)];totpMfaSettings={PreferredMfa:!1,Enabled:!1}}return mfaList&&0!==mfaList.length&&mfaList.forEach((function(mfaType){"SMS_MFA"===mfaType?smsMfaSettings={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===mfaType&&(totpMfaSettings={PreferredMfa:!1,Enabled:!1})})),[3,7];case 6:return Auth_logger.debug("no validmfa method provided"),[2,this.rejectAuthError(Auth.a.NoMFA)];case 7:return this,[2,new Promise((function(res,rej){user.setUserMfaPreference(smsMfaSettings,totpMfaSettings,(function(err,result){if(err)return Auth_logger.debug("Set user mfa preference error",err),rej(err);Auth_logger.debug("Set user mfa success",result),Auth_logger.debug("Caching the latest user data into local"),user.getUserData((function(err,data){return err?(Auth_logger.debug("getting user data failed",err),rej(err)):res(result)}),{bypassCache:!0,clientMetadata:clientMetadata})}))}))]}}))}))},AuthClass.prototype.disableSMS=function(user){return new Promise((function(res,rej){user.disableMFA((function(err,data){if(err)return Auth_logger.debug("disable mfa failed",err),void rej(err);Auth_logger.debug("disable mfa succeed",data),res(data)}))}))},AuthClass.prototype.enableSMS=function(user){return new Promise((function(res,rej){user.enableMFA((function(err,data){if(err)return Auth_logger.debug("enable mfa failed",err),void rej(err);Auth_logger.debug("enable mfa succeed",data),res(data)}))}))},AuthClass.prototype.setupTOTP=function(user){return new Promise((function(res,rej){user.associateSoftwareToken({onFailure:function(err){Auth_logger.debug("associateSoftwareToken failed",err),rej(err)},associateSecretCode:function(secretCode){Auth_logger.debug("associateSoftwareToken sucess",secretCode),res(secretCode)}})}))},AuthClass.prototype.verifyTotpToken=function(user,challengeAnswer){return Auth_logger.debug("verification totp token",user,challengeAnswer),new Promise((function(res,rej){user.verifySoftwareToken(challengeAnswer,"My TOTP device",{onFailure:function(err){Auth_logger.debug("verifyTotpToken failed",err),rej(err)},onSuccess:function(data){Auth_dispatchAuthEvent("signIn",user,"A user "+user.getUsername()+" has been signed in"),Auth_logger.debug("verifyTotpToken success",data),res(data)}})}))},AuthClass.prototype.confirmSignIn=function(user,code,mfaType,clientMetadata){var _this=this;if(void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),!code)return this.rejectAuthError(Auth.a.EmptyCode);var that=this;return new Promise((function(resolve,reject){user.sendMFACode(code,{onSuccess:function(session){return Auth_awaiter(_this,void 0,void 0,(function(){var cred,e_3;return Auth_generator(this,(function(_a){switch(_a.label){case 0:Auth_logger.debug(session),_a.label=1;case 1:return _a.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return _a.sent(),[4,this.Credentials.set(session,"session")];case 3:return cred=_a.sent(),Auth_logger.debug("succeed to get cognito credentials",cred),[3,6];case 4:return e_3=_a.sent(),Auth_logger.debug("cannot get cognito credentials",e_3),[3,6];case 5:return that.user=user,Auth_dispatchAuthEvent("signIn",user,"A user "+user.getUsername()+" has been signed in"),resolve(user),[7];case 6:return[2]}}))}))},onFailure:function(err){Auth_logger.debug("confirm signIn failure",err),reject(err)}},mfaType,clientMetadata)}))},AuthClass.prototype.completeNewPassword=function(user,password,requiredAttributes,clientMetadata){var _this=this;if(void 0===requiredAttributes&&(requiredAttributes={}),void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),!password)return this.rejectAuthError(Auth.a.EmptyPassword);var that=this;return new Promise((function(resolve,reject){user.completeNewPasswordChallenge(password,requiredAttributes,{onSuccess:function(session){return Auth_awaiter(_this,void 0,void 0,(function(){var cred,e_4;return Auth_generator(this,(function(_a){switch(_a.label){case 0:Auth_logger.debug(session),_a.label=1;case 1:return _a.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return _a.sent(),[4,this.Credentials.set(session,"session")];case 3:return cred=_a.sent(),Auth_logger.debug("succeed to get cognito credentials",cred),[3,6];case 4:return e_4=_a.sent(),Auth_logger.debug("cannot get cognito credentials",e_4),[3,6];case 5:return that.user=user,Auth_dispatchAuthEvent("signIn",user,"A user "+user.getUsername()+" has been signed in"),resolve(user),[7];case 6:return[2]}}))}))},onFailure:function(err){Auth_logger.debug("completeNewPassword failure",err),Auth_dispatchAuthEvent("completeNewPassword_failure",err,_this.user+" failed to complete the new password flow"),reject(err)},mfaRequired:function(challengeName,challengeParam){Auth_logger.debug("signIn MFA required"),user.challengeName=challengeName,user.challengeParam=challengeParam,resolve(user)},mfaSetup:function(challengeName,challengeParam){Auth_logger.debug("signIn mfa setup",challengeName),user.challengeName=challengeName,user.challengeParam=challengeParam,resolve(user)},totpRequired:function(challengeName,challengeParam){Auth_logger.debug("signIn mfa setup",challengeName),user.challengeName=challengeName,user.challengeParam=challengeParam,resolve(user)}},clientMetadata)}))},AuthClass.prototype.sendCustomChallengeAnswer=function(user,challengeResponses,clientMetadata){var _this=this;if(void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!challengeResponses)return this.rejectAuthError(Auth.a.EmptyChallengeResponse);return new Promise((function(resolve,reject){user.sendCustomChallengeAnswer(challengeResponses,_this.authCallbacks(user,resolve,reject),clientMetadata)}))},AuthClass.prototype.updateUserAttributes=function(user,attributes,clientMetadata){void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata);var attributeList=[],that=this;return new Promise((function(resolve,reject){that.userSession(user).then((function(session){for(var key in attributes)if("sub"!==key&&key.indexOf("_verified")<0){var attr={Name:key,Value:attributes[key]};attributeList.push(attr)}user.updateAttributes(attributeList,(function(err,result){return err?reject(err):resolve(result)}),clientMetadata)}))}))},AuthClass.prototype.userAttributes=function(user){var _this=this;return new Promise((function(resolve,reject){_this.userSession(user).then((function(session){user.getUserAttributes((function(err,attributes){err?reject(err):resolve(attributes)}))}))}))},AuthClass.prototype.verifiedContact=function(user){var that=this;return this.userAttributes(user).then((function(attributes){var attrs=that.attributesToObject(attributes),unverified={},verified={};return attrs.email&&(attrs.email_verified?verified.email=attrs.email:unverified.email=attrs.email),attrs.phone_number&&(attrs.phone_number_verified?verified.phone_number=attrs.phone_number:unverified.phone_number=attrs.phone_number),{verified:verified,unverified:unverified}}))},AuthClass.prototype.currentUserPoolUser=function(params){var _this=this;return this.userPool?new Promise((function(res,rej){_this._storageSync.then((function(){return Auth_awaiter(_this,void 0,void 0,(function(){var user,clientMetadata,_this=this;return Auth_generator(this,(function(_a){switch(_a.label){case 0:return this.isOAuthInProgress()?(Auth_logger.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise((function(res){var timeoutId=setTimeout((function(){Auth_logger.debug("OAuth signIn in progress timeout"),Hub.a.remove("auth",hostedUISignCallback),res()}),1e4);function hostedUISignCallback(_a){var event=_a.payload.event;"cognitoHostedUI"!==event&&"cognitoHostedUI_failure"!==event||(Auth_logger.debug("OAuth signIn resolved: "+event),clearTimeout(timeoutId),Hub.a.remove("auth",hostedUISignCallback),res())}Hub.a.listen("auth",hostedUISignCallback)}))]):[3,2];case 1:_a.sent(),_a.label=2;case 2:return(user=this.userPool.getCurrentUser())?(clientMetadata=this._config.clientMetadata,user.getSession((function(err,session){return Auth_awaiter(_this,void 0,void 0,(function(){var bypassCache,clientMetadata,_a,_this=this;return Auth_generator(this,(function(_b){switch(_b.label){case 0:return err?(Auth_logger.debug("Failed to get the user session",err),rej(err),[2]):(bypassCache=!!params&&params.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:_b.sent(),_b.label=2;case 2:return clientMetadata=this._config.clientMetadata,_a=session.getAccessToken().decodePayload().scope,(void 0===_a?"":_a).split(" ").includes("aws.cognito.signin.user.admin")?(user.getUserData((function(err,data){if(err)return Auth_logger.debug("getting user data failed",err),void("User is disabled."===err.message||"User does not exist."===err.message||"Access Token has been revoked"===err.message?rej(err):res(user));for(var preferredMFA=data.PreferredMfaSetting||"NOMFA",attributeList=[],i=0;i<data.UserAttributes.length;i++){var attribute={Name:data.UserAttributes[i].Name,Value:data.UserAttributes[i].Value},userAttribute=new es.f(attribute);attributeList.push(userAttribute)}var attributes=_this.attributesToObject(attributeList);return Object.assign(user,{attributes:attributes,preferredMFA:preferredMFA}),res(user)}),{bypassCache:bypassCache,clientMetadata:clientMetadata}),[2]):(Auth_logger.debug("Unable to get the user data because the aws.cognito.signin.user.admin is not in the scopes of the access token"),[2,res(user)])}}))}))}),{clientMetadata:clientMetadata}),[2]):(Auth_logger.debug("Failed to get user from user pool"),rej("No current user"),[2])}}))}))})).catch((function(e){return Auth_logger.debug("Failed to sync cache info into memory",e),rej(e)}))})):this.rejectNoUserPool()},AuthClass.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},AuthClass.prototype.currentAuthenticatedUser=function(params){return Auth_awaiter(this,void 0,void 0,(function(){var federatedUser,e_5,federatedInfo,user,e_6;return Auth_generator(this,(function(_a){switch(_a.label){case 0:Auth_logger.debug("getting current authenticated user"),federatedUser=null,_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this._storageSync];case 2:return _a.sent(),[3,4];case 3:throw e_5=_a.sent(),Auth_logger.debug("Failed to sync cache info into memory",e_5),e_5;case 4:try{(federatedInfo=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(federatedUser=Auth_assign(Auth_assign({},federatedInfo.user),{token:federatedInfo.token}))}catch(e){Auth_logger.debug("cannot load federated user from auth storage")}return federatedUser?(this.user=federatedUser,Auth_logger.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Auth_logger.debug("get current authenticated userpool user"),user=null,_a.label=6;case 6:return _a.trys.push([6,8,,9]),[4,this.currentUserPoolUser(params)];case 7:return user=_a.sent(),[3,9];case 8:return"No userPool"===(e_6=_a.sent())&&Auth_logger.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Auth_logger.debug("The user is not authenticated by the error",e_6),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=user,[2,this.user]}}))}))},AuthClass.prototype.currentSession=function(){var that=this;return Auth_logger.debug("Getting current session"),this.userPool?new Promise((function(res,rej){that.currentUserPoolUser().then((function(user){that.userSession(user).then((function(session){res(session)})).catch((function(e){Auth_logger.debug("Failed to get the current session",e),rej(e)}))})).catch((function(e){Auth_logger.debug("Failed to get the current user",e),rej(e)}))})):Promise.reject()},AuthClass.prototype.userSession=function(user){if(!user)return Auth_logger.debug("the user is null"),this.rejectAuthError(Auth.a.NoUserSession);var clientMetadata=this._config.clientMetadata;return new Promise((function(resolve,reject){Auth_logger.debug("Getting the session from this user:",user),user.getSession((function(err,session){return err?(Auth_logger.debug("Failed to get the session from user",user),void reject(err)):(Auth_logger.debug("Succeed to get the user session",session),void resolve(session))}),{clientMetadata:clientMetadata})}))},AuthClass.prototype.currentUserCredentials=function(){return Auth_awaiter(this,void 0,void 0,(function(){var e_7,federatedInfo,_this=this;return Auth_generator(this,(function(_a){switch(_a.label){case 0:Auth_logger.debug("Getting current user credentials"),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this._storageSync];case 2:return _a.sent(),[3,4];case 3:throw e_7=_a.sent(),Auth_logger.debug("Failed to sync cache info into memory",e_7),e_7;case 4:federatedInfo=null;try{federatedInfo=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Auth_logger.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return federatedInfo?[2,this.Credentials.refreshFederatedToken(federatedInfo)]:[2,this.currentSession().then((function(session){return Auth_logger.debug("getting session success",session),_this.Credentials.set(session,"session")})).catch((function(error){return Auth_logger.debug("getting session failed",error),_this.Credentials.set(null,"guest")}))]}}))}))},AuthClass.prototype.currentCredentials=function(){return Auth_logger.debug("getting current credentials"),this.Credentials.get()},AuthClass.prototype.verifyUserAttribute=function(user,attr,clientMetadata){return void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),new Promise((function(resolve,reject){user.getAttributeVerificationCode(attr,{onSuccess:function(){return resolve()},onFailure:function(err){return reject(err)}},clientMetadata)}))},AuthClass.prototype.verifyUserAttributeSubmit=function(user,attr,code){return code?new Promise((function(resolve,reject){user.verifyAttribute(attr,code,{onSuccess:function(data){resolve(data)},onFailure:function(err){reject(err)}})})):this.rejectAuthError(Auth.a.EmptyCode)},AuthClass.prototype.verifyCurrentUserAttribute=function(attr){var that=this;return that.currentUserPoolUser().then((function(user){return that.verifyUserAttribute(user,attr)}))},AuthClass.prototype.verifyCurrentUserAttributeSubmit=function(attr,code){var that=this;return that.currentUserPoolUser().then((function(user){return that.verifyUserAttributeSubmit(user,attr,code)}))},AuthClass.prototype.cognitoIdentitySignOut=function(opts,user){return Auth_awaiter(this,void 0,void 0,(function(){var e_8,isSignedInHostedUI,_this=this;return Auth_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,this._storageSync];case 1:return _a.sent(),[3,3];case 2:throw e_8=_a.sent(),Auth_logger.debug("Failed to sync cache info into memory",e_8),e_8;case 3:return isSignedInHostedUI=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(res,rej){if(opts&&opts.global){Auth_logger.debug("user global sign out",user);var clientMetadata=_this._config.clientMetadata;user.getSession((function(err,result){if(err)return Auth_logger.debug("failed to get the user session",err),rej(err);user.globalSignOut({onSuccess:function(data){if(Auth_logger.debug("global sign out success"),!isSignedInHostedUI)return res();_this.oAuthSignOutRedirect(res,rej)},onFailure:function(err){return Auth_logger.debug("global sign out failed",err),rej(err)}})}),{clientMetadata:clientMetadata})}else{if(Auth_logger.debug("user sign out",user),user.signOut(),!isSignedInHostedUI)return res();_this.oAuthSignOutRedirect(res,rej)}}))]}}))}))},AuthClass.prototype.oAuthSignOutRedirect=function(resolve,reject){JS.a.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(reject):this.oAuthSignOutAndResolve(resolve)},AuthClass.prototype.oAuthSignOutAndResolve=function(resolve){this._oAuthHandler.signOut(),resolve()},AuthClass.prototype.oAuthSignOutRedirectOrReject=function(reject){this._oAuthHandler.signOut(),setTimeout((function(){return reject("Signout timeout fail")}),3e3)},AuthClass.prototype.signOut=function(opts){return Auth_awaiter(this,void 0,void 0,(function(){var user;return Auth_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return _a.sent(),[3,3];case 2:return _a.sent(),Auth_logger.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(user=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(opts,user)]:[3,5]:[3,7];case 4:return _a.sent(),[3,6];case 5:Auth_logger.debug("no current Cognito user"),_a.label=6;case 6:return[3,8];case 7:Auth_logger.debug("no Congito User pool"),_a.label=8;case 8:return Auth_dispatchAuthEvent("signOut",this.user,"A user has been signed out"),this.user=null,[2]}}))}))},AuthClass.prototype.cleanCachedItems=function(){return Auth_awaiter(this,void 0,void 0,(function(){return Auth_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.Credentials.clear()];case 1:return _a.sent(),[2]}}))}))},AuthClass.prototype.changePassword=function(user,oldPassword,newPassword,clientMetadata){var _this=this;return void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),new Promise((function(resolve,reject){_this.userSession(user).then((function(session){user.changePassword(oldPassword,newPassword,(function(err,data){return err?(Auth_logger.debug("change password failure",err),reject(err)):resolve(data)}),clientMetadata)}))}))},AuthClass.prototype.forgotPassword=function(username,clientMetadata){if(void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!username)return this.rejectAuthError(Auth.a.EmptyUsername);var user=this.createCognitoUser(username);return new Promise((function(resolve,reject){user.forgotPassword({onSuccess:function(){resolve()},onFailure:function(err){Auth_logger.debug("forgot password failure",err),Auth_dispatchAuthEvent("forgotPassword_failure",err,username+" forgotPassword failed"),reject(err)},inputVerificationCode:function(data){Auth_dispatchAuthEvent("forgotPassword",user,username+" has initiated forgot password flow"),resolve(data)}},clientMetadata)}))},AuthClass.prototype.forgotPasswordSubmit=function(username,code,password,clientMetadata){if(void 0===clientMetadata&&(clientMetadata=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!username)return this.rejectAuthError(Auth.a.EmptyUsername);if(!code)return this.rejectAuthError(Auth.a.EmptyCode);if(!password)return this.rejectAuthError(Auth.a.EmptyPassword);var user=this.createCognitoUser(username);return new Promise((function(resolve,reject){user.confirmPassword(code,password,{onSuccess:function(){Auth_dispatchAuthEvent("forgotPasswordSubmit",user,username+" forgotPasswordSubmit successful"),resolve()},onFailure:function(err){Auth_dispatchAuthEvent("forgotPasswordSubmit_failure",err,username+" forgotPasswordSubmit failed"),reject(err)}},clientMetadata)}))},AuthClass.prototype.currentUserInfo=function(){return Auth_awaiter(this,void 0,void 0,(function(){var source,attributes,userAttrs,credentials,e_10,err_1,user;return Auth_generator(this,(function(_a){switch(_a.label){case 0:return(source=this.Credentials.getCredSource())&&"aws"!==source&&"userPool"!==source?[3,9]:[4,this.currentUserPoolUser().catch((function(err){return Auth_logger.debug(err)}))];case 1:if(!(user=_a.sent()))return[2,null];_a.label=2;case 2:return _a.trys.push([2,8,,9]),[4,this.userAttributes(user)];case 3:attributes=_a.sent(),userAttrs=this.attributesToObject(attributes),credentials=null,_a.label=4;case 4:return _a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return credentials=_a.sent(),[3,7];case 6:return e_10=_a.sent(),Auth_logger.debug("Failed to retrieve credentials while getting current user info",e_10),[3,7];case 7:return[2,{id:credentials?credentials.identityId:void 0,username:user.getUsername(),attributes:userAttrs}];case 8:return err_1=_a.sent(),Auth_logger.debug("currentUserInfo error",err_1),[2,{}];case 9:return"federated"===source?[2,(user=this.user)||{}]:[2]}}))}))},AuthClass.prototype.federatedSignIn=function(providerOrOptions,response,user){return Auth_awaiter(this,void 0,void 0,(function(){var options,customState,client_id,redirect_uri,provider,loggedInUser,token,identity_id,expires_at,credentials,currentUser;return Auth_generator(this,(function(_a){switch(_a.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===providerOrOptions&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Object(Auth.e)(providerOrOptions)||Object(Auth.f)(providerOrOptions)||Object(Auth.c)(providerOrOptions)||void 0===providerOrOptions?(options=providerOrOptions||{provider:Auth.b.Cognito},provider=Object(Auth.e)(options)?options.provider:options.customProvider,Object(Auth.e)(options),customState=options.customState,this._config.userPoolId&&(client_id=Object(Auth.d)(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,redirect_uri=Object(Auth.d)(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,redirect_uri,client_id,provider,customState)),[3,4]):[3,1];case 1:provider=providerOrOptions;try{(loggedInUser=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Auth_logger.warn("There is already a signed in user: "+loggedInUser+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return token=response.token,identity_id=response.identity_id,expires_at=response.expires_at,[4,this.Credentials.set({provider:provider,token:token,identity_id:identity_id,user:user,expires_at:expires_at},"federation")];case 2:return credentials=_a.sent(),[4,this.currentAuthenticatedUser()];case 3:return currentUser=_a.sent(),Auth_dispatchAuthEvent("signIn",currentUser,"A user "+currentUser.username+" has been signed in"),Auth_logger.debug("federated sign in credentials",credentials),[2,credentials];case 4:return[2]}}))}))},AuthClass.prototype._handleAuthResponse=function(URL){return Auth_awaiter(this,void 0,void 0,(function(){var currentUrl,hasCodeOrError,hasTokenOrError,_a,accessToken,idToken,refreshToken,state,session,credentials,isCustomStateIncluded,currentUser,customState,err_2;return Auth_generator(this,(function(_b){switch(_b.label){case 0:if(this.oAuthFlowInProgress)return Auth_logger.debug("Skipping URL "+URL+" current flow in progress"),[2];_b.label=1;case 1:if(_b.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Auth_dispatchAuthEvent("parsingCallbackUrl",{url:URL},"The callback url is being parsed"),currentUrl=URL||(JS.a.browserOrNode().isBrowser?window.location.href:""),hasCodeOrError=!!(Object(url_url.parse)(currentUrl).query||"").split("&").map((function(entry){return entry.split("=")})).find((function(_a){var k=Auth_read(_a,1)[0];return"code"===k||"error"===k})),hasTokenOrError=!!(Object(url_url.parse)(currentUrl).hash||"#").substr(1).split("&").map((function(entry){return entry.split("=")})).find((function(_a){var k=Auth_read(_a,1)[0];return"access_token"===k||"error"===k})),!hasCodeOrError&&!hasTokenOrError)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),_b.label=2;case 2:return _b.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(currentUrl)];case 3:return _a=_b.sent(),accessToken=_a.accessToken,idToken=_a.idToken,refreshToken=_a.refreshToken,state=_a.state,session=new es.h({IdToken:new es.c({IdToken:idToken}),RefreshToken:new es.d({RefreshToken:refreshToken}),AccessToken:new es.b({AccessToken:accessToken})}),credentials=void 0,this._config.identityPoolId?[4,this.Credentials.set(session,"session")]:[3,5];case 4:credentials=_b.sent(),Auth_logger.debug("AWS credentials",credentials),_b.label=5;case 5:return isCustomStateIncluded=/-/.test(state),(currentUser=this.createCognitoUser(session.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(session),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Auth_dispatchAuthEvent("signIn",currentUser,"A user "+currentUser.getUsername()+" has been signed in"),Auth_dispatchAuthEvent("cognitoHostedUI",currentUser,"A user "+currentUser.getUsername()+" has been signed in via Cognito Hosted UI"),isCustomStateIncluded&&(customState=state.split("-").splice(1).join("-"),Auth_dispatchAuthEvent("customOAuthState",customState.match(/.{2}/g).map((function(char){return String.fromCharCode(parseInt(char,16))})).join(""),"State for user "+currentUser.getUsername())),[2,credentials];case 6:return err_2=_b.sent(),Auth_logger.debug("Error in cognito hosted auth response",err_2),Auth_dispatchAuthEvent("signIn_failure",err_2,"The OAuth response flow failed"),Auth_dispatchAuthEvent("cognitoHostedUI_failure",err_2,"A failure occurred when returning to the Cognito Hosted UI"),Auth_dispatchAuthEvent("customState_failure",err_2,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}}))}))},AuthClass.prototype.essentialCredentials=function(credentials){return{accessKeyId:credentials.accessKeyId,sessionToken:credentials.sessionToken,secretAccessKey:credentials.secretAccessKey,identityId:credentials.identityId,authenticated:credentials.authenticated}},AuthClass.prototype.attributesToObject=function(attributes){var obj={};return attributes&&attributes.map((function(attribute){"email_verified"===attribute.Name||"phone_number_verified"===attribute.Name?obj[attribute.Name]="true"===attribute.Value||!0===attribute.Value:obj[attribute.Name]=attribute.Value})),obj},AuthClass.prototype.createCognitoUser=function(username){var userData={Username:username,Pool:this.userPool};userData.Storage=this._storage;var authenticationFlowType=this._config.authenticationFlowType,user=new es.e(userData);return authenticationFlowType&&user.setAuthenticationFlowType(authenticationFlowType),user},AuthClass.prototype._isValidAuthStorage=function(obj){return!!obj&&"function"==typeof obj.getItem&&"function"==typeof obj.setItem&&"function"==typeof obj.removeItem&&"function"==typeof obj.clear},AuthClass.prototype.noUserPoolErrorHandler=function(config){return!config||config.userPoolId&&config.identityPoolId?Auth.a.NoConfig:Auth.a.MissingAuthConfig},AuthClass.prototype.rejectAuthError=function(type){return Promise.reject(new AuthError(type))},AuthClass.prototype.rejectNoUserPool=function(){var type=this.noUserPoolErrorHandler(this._config);return Promise.reject(new NoUserPoolError(type))},AuthClass}())(null);Amplify.a.register(Auth_Auth)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(66);function getServiceIdentifierAsString(serviceIdentifier){return"function"==typeof serviceIdentifier?serviceIdentifier.name:"symbol"==typeof serviceIdentifier?serviceIdentifier.toString():serviceIdentifier}function alreadyDependencyChain(request,serviceIdentifier){return null!==request.parentRequest&&(request.parentRequest.serviceIdentifier===serviceIdentifier||alreadyDependencyChain(request.parentRequest,serviceIdentifier))}function getFunctionName(v){if(v.name)return v.name;var name_1=v.toString(),match=name_1.match(/^function\s*([^\s(]+)/);return match?match[1]:"Anonymous function: "+name_1}exports.getServiceIdentifierAsString=getServiceIdentifierAsString,exports.listRegisteredBindingsForServiceIdentifier=function(container,serviceIdentifier,getBindings){var registeredBindingsList="",registeredBindings=getBindings(container,serviceIdentifier);return 0!==registeredBindings.length&&(registeredBindingsList="\nRegistered bindings:",registeredBindings.forEach((function(binding){var name="Object";null!==binding.implementationType&&(name=getFunctionName(binding.implementationType)),registeredBindingsList=registeredBindingsList+"\n "+name,binding.constraint.metaData&&(registeredBindingsList=registeredBindingsList+" - "+binding.constraint.metaData)}))),registeredBindingsList},exports.circularDependencyToException=function circularDependencyToException(request){request.childRequests.forEach((function(childRequest){if(alreadyDependencyChain(childRequest,childRequest.serviceIdentifier)){var services=function(request){return function _createStringArr(req,result){void 0===result&&(result=[]);var serviceIdentifier=getServiceIdentifierAsString(req.serviceIdentifier);return result.push(serviceIdentifier),null!==req.parentRequest?_createStringArr(req.parentRequest,result):result}(request).reverse().join(" --\x3e ")}(childRequest);throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY+" "+services)}circularDependencyToException(childRequest)}))},exports.listMetadataForTarget=function(serviceIdentifierString,target){if(target.isTagged()||target.isNamed()){var m_1="",namedTag=target.getNamedTag(),otherTags=target.getCustomTags();return null!==namedTag&&(m_1+=namedTag.toString()+"\n"),null!==otherTags&&otherTags.forEach((function(tag){m_1+=tag.toString()+"\n"}))," "+serviceIdentifierString+"\n "+serviceIdentifierString+" - "+m_1}return" "+serviceIdentifierString},exports.getFunctionName=getFunctionName},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.UtilsService=void 0;var UtilsService=function(){function UtilsService(){}return UtilsService.sGet=function(obj,path,defValue){if(void 0===defValue&&(defValue=void 0),path)return(Array.isArray(path)?path:path.match(/([^[.\]])+/g)).reduce((function(prevObj,key){return prevObj&&prevObj[key]}),obj)||defValue},UtilsService.sSet=function(obj,path,value){var path_array=Array.isArray(path)?path:path.match(/([^[.\]])+/g);return path_array.reduce((function(acc,key,i){return void 0===acc[key]&&(acc[key]={}),i===path_array.length-1&&(acc[key]=value),acc[key]}),obj),obj},UtilsService.sIsEmpty=function(obj){return[Object,Array].includes((obj||{}).constructor)&&!Object.entries(obj||{}).length},UtilsService}();exports.UtilsService=UtilsService},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(15),MD5=__webpack_require__(194),RIPEMD160=__webpack_require__(199),sha=__webpack_require__(200),Base=__webpack_require__(102);function Hash(hash){Base.call(this,"digest"),this._hash=hash}inherits(Hash,Base),Hash.prototype._update=function(data){this._hash.update(data)},Hash.prototype._final=function(){return this._hash.digest()},module.exports=function(alg){return"md5"===(alg=alg.toLowerCase())?new MD5:"rmd160"===alg||"ripemd160"===alg?new RIPEMD160:new Hash(sha(alg))}},function(module,exports,__webpack_require__){(function(Buffer){function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=function(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)},exports.isBoolean=function(arg){return"boolean"==typeof arg},exports.isNull=function(arg){return null===arg},exports.isNullOrUndefined=function(arg){return null==arg},exports.isNumber=function(arg){return"number"==typeof arg},exports.isString=function(arg){return"string"==typeof arg},exports.isSymbol=function(arg){return"symbol"==typeof arg},exports.isUndefined=function(arg){return void 0===arg},exports.isRegExp=function(re){return"[object RegExp]"===objectToString(re)},exports.isObject=function(arg){return"object"==typeof arg&&null!==arg},exports.isDate=function(d){return"[object Date]"===objectToString(d)},exports.isError=function(e){return"[object Error]"===objectToString(e)||e instanceof Error},exports.isFunction=function(arg){return"function"==typeof arg},exports.isPrimitive=function(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=Buffer.isBuffer}).call(this,__webpack_require__(11).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){module.exports=function(a,b){for(var length=Math.min(a.length,b.length),buffer=new Buffer(length),i=0;i<length;++i)buffer[i]=a[i]^b[i];return buffer}}).call(this,__webpack_require__(11).Buffer)},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(85),assert=__webpack_require__(72);function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}exports.BlockHash=BlockHash,BlockHash.prototype.update=function(msg,enc){if(msg=utils.toArray(msg,enc),this.pending?this.pending=this.pending.concat(msg):this.pending=msg,this.pendingTotal+=msg.length,this.pending.length>=this._delta8){var r=(msg=this.pending).length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length),0===this.pending.length&&(this.pending=null),msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32)}return this},BlockHash.prototype.digest=function(enc){return this.update(this._pad()),assert(null===this.pending),this._digest(enc)},BlockHash.prototype._pad=function(){var len=this.pendingTotal,bytes=this._delta8,k=bytes-(len+this.padLength)%bytes,res=new Array(k+this.padLength);res[0]=128;for(var i=1;i<k;i++)res[i]=0;if(len<<=3,"big"===this.endian){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=len>>>24&255,res[i++]=len>>>16&255,res[i++]=len>>>8&255,res[i++]=255&len}else for(res[i++]=255&len,res[i++]=len>>>8&255,res[i++]=len>>>16&255,res[i++]=len>>>24&255,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,t=8;t<this.padLength;t++)res[i++]=0;return res}},function(module,exports,__webpack_require__){var asn1=exports;asn1.bignum=__webpack_require__(38),asn1.define=__webpack_require__(457).define,asn1.base=__webpack_require__(142),asn1.constants=__webpack_require__(271),asn1.decoders=__webpack_require__(463),asn1.encoders=__webpack_require__(465)},function(module,exports,__webpack_require__){var base=exports;base.Reporter=__webpack_require__(460).Reporter,base.DecoderBuffer=__webpack_require__(270).DecoderBuffer,base.EncoderBuffer=__webpack_require__(270).EncoderBuffer,base.Node=__webpack_require__(461)},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(160),getRawTag=__webpack_require__(501),objectToString=__webpack_require__(502),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports){module.exports=function(value){return null!=value&&"object"==typeof value}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return StorageHelper}));var dataMemory={},MemoryStorage=function(){function MemoryStorage(){}return MemoryStorage.setItem=function(key,value){return dataMemory[key]=value,dataMemory[key]},MemoryStorage.getItem=function(key){return Object.prototype.hasOwnProperty.call(dataMemory,key)?dataMemory[key]:void 0},MemoryStorage.removeItem=function(key){return delete dataMemory[key]},MemoryStorage.clear=function(){return dataMemory={}},MemoryStorage}(),StorageHelper=function(){function StorageHelper(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(exception){this.storageWindow=MemoryStorage}}return StorageHelper.prototype.getStorage=function(){return this.storageWindow},StorageHelper}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var ConsoleLogger=__webpack_require__(84),JS=__webpack_require__(57),Hub=__webpack_require__(186),Amplify=__webpack_require__(40);function t(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(t){return!!t&&!!t[Q]}function immer_esm_r(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var n=Object.getPrototypeOf(t);return!n||n===Object.prototype}(t)||Array.isArray(t)||!!t[L]||!!t.constructor[L]||immer_esm_s(t)||immer_esm_v(t))}function i(t,n,r){void 0===r&&(r=!1),0===o(t)?(r?Object.keys:Z)(t).forEach((function(e){r&&"symbol"==typeof e||n(e,t[e],t)})):t.forEach((function(r,e){return n(e,r,t)}))}function o(t){var n=t[Q];return n?n.i>3?n.i-4:n.i:Array.isArray(t)?1:immer_esm_s(t)?2:immer_esm_v(t)?3:0}function u(t,n){return 2===o(t)?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function a(t,n){return 2===o(t)?t.get(n):t[n]}function f(t,n,r){var e=o(t);2===e?t.set(n,r):3===e?(t.delete(n),t.add(r)):t[n]=r}function c(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}function immer_esm_s(t){return X&&t instanceof Map}function immer_esm_v(t){return q&&t instanceof Set}function p(t){return t.o||t.t}function l(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var n=tt(t);delete n[Q];for(var r=Z(n),e=0;e<r.length;e++){var i=r[e],o=n[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),n)}function d(t,e){return void 0===e&&(e=!1),y(t)||n(t)||!immer_esm_r(t)||(o(t)>1&&(t.set=t.add=t.clear=t.delete=h),Object.freeze(t),e&&i(t,(function(t,n){return d(n,!0)}),!0)),t}function h(){t(2)}function y(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function b(n){var r=nt[n];return r||t(18,n),r}function m(t,n){nt[t]||(nt[t]=n)}function _(){return U}function j(t,n){n&&(b("Patches"),t.u=[],t.s=[],t.v=n)}function g(t){w(t),t.p.forEach(S),t.p=null}function w(t){t===U&&(U=t.l)}function O(t){return U={p:[],l:U,h:t,m:!0,_:0}}function S(t){var n=t[Q];0===n.i||1===n.i?n.j():n.g=!0}function P(n,e){e._=e.p.length;var i=e.p[0],o=void 0!==n&&n!==i;return e.h.O||b("ES5").S(e,n,o),o?(i[Q].P&&(g(e),t(4)),immer_esm_r(n)&&(n=M(e,n),e.l||x(e,n)),e.u&&b("Patches").M(i[Q],n,e.u,e.s)):n=M(e,i,[]),g(e),e.u&&e.v(e.u,e.s),n!==H?n:void 0}function M(t,n,r){if(y(n))return n;var e=n[Q];if(!e)return i(n,(function(i,o){return A(t,e,n,i,o,r)}),!0),n;if(e.A!==t)return n;if(!e.P)return x(t,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(n,i){return A(t,e,o,n,i,r)})),x(t,o,!1),r&&t.u&&b("Patches").R(e,r,t.u,t.s)}return e.o}function A(e,i,o,a,c,s){if(n(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!n(v))return;e.m=!1}if(immer_esm_r(c)&&!y(c)){if(!e.h.N&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(t,n,r){void 0===r&&(r=!1),t.h.N&&t.m&&d(n,r)}function z(t,n){var r=t[Q];return(r?p(r):t)[n]}function I(t,n){if(n in t)for(var r=Object.getPrototypeOf(t);r;){var e=Object.getOwnPropertyDescriptor(r,n);if(e)return e;r=Object.getPrototypeOf(r)}}function immer_esm_k(t){t.P||(t.P=!0,t.l&&immer_esm_k(t.l))}function E(t){t.o||(t.o=l(t.t))}function R(t,n,r){var e=immer_esm_s(n)?b("MapSet").T(n,r):immer_esm_v(n)?b("MapSet").F(n,r):t.O?function(t,n){var r=Array.isArray(t),e={i:r?1:0,A:n?n.A:_(),P:!1,I:!1,D:{},l:n,t:t,k:null,o:null,j:null,C:!1},i=e,o=rt;r&&(i=[e],o=et);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(n,r):b("ES5").J(n,r);return(r?r.A:_()).p.push(e),e}function D(e){return n(e)||t(22,e),function t(n){if(!immer_esm_r(n))return n;var e,u=n[Q],c=o(n);if(u){if(!u.P&&(u.i<4||!b("ES5").K(u)))return u.t;u.I=!0,e=N(n,c),u.I=!1}else e=N(n,c);return i(e,(function(n,r){u&&a(u.t,n)===r||f(e,n,t(r))})),3===c?new Set(e):e}(e)}function N(t,n){switch(n){case 2:return new Map(t);case 3:return Array.from(t)}return l(t)}function F(){function e(t){if(!immer_esm_r(t))return t;if(Array.isArray(t))return t.map(e);if(immer_esm_s(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(immer_esm_v(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var i in t)n[i]=e(t[i]);return n}function f(t){return n(t)?e(t):t}var c="add";m("Patches",{$:function(n,r){return r.forEach((function(r){for(var i=r.path,u=r.op,f=n,s=0;s<i.length-1;s++){var v=o(f),p=i[s];0!==v&&1!==v||"__proto__"!==p&&"constructor"!==p||t(24),"function"==typeof f&&"prototype"===p&&t(24),"object"!=typeof(f=a(f,p))&&t(15,i.join("/"))}var l=o(f),d=e(r.value),h=i[i.length-1];switch(u){case"replace":switch(l){case 2:return f.set(h,d);case 3:t(16);default:return f[h]=d}case c:switch(l){case 1:return f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case"remove":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(r.value);default:return delete f[h]}default:t(17,u)}})),n},R:function(t,n,r,e){switch(t.i){case 0:case 4:case 2:return function(t,n,r,e){var o=t.t,s=t.o;i(t.D,(function(t,i){var v=a(o,t),p=a(s,t),l=i?u(o,t)?"replace":c:"remove";if(v!==p||"replace"!==l){var d=n.concat(t);r.push("remove"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:"remove",path:d}:"remove"===l?{op:c,path:d,value:f(v)}:{op:"replace",path:d,value:f(v)})}}))}(t,n,r,e);case 5:case 1:return function(t,n,r,e){var i=t.t,o=t.D,u=t.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,r];r=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=n.concat([v]);r.push({op:"replace",path:p,value:f(u[v])}),e.push({op:"replace",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=n.concat([l]);r.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:"replace",path:n.concat(["length"]),value:i.length})}(t,n,r,e);case 3:return function(t,n,r,e){var i=t.t,o=t.o,u=0;i.forEach((function(t){if(!o.has(t)){var i=n.concat([u]);r.push({op:"remove",path:i,value:t}),e.unshift({op:c,path:i,value:t})}u++})),u=0,o.forEach((function(t){if(!i.has(t)){var o=n.concat([u]);r.push({op:c,path:o,value:t}),e.unshift({op:"remove",path:o,value:t})}u++}))}(t,n,r,e)}},M:function(t,n,r,e){r.push({op:"replace",path:[],value:n}),e.push({op:"replace",path:[],value:t.t})}})}var G,U,W="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),X="undefined"!=typeof Map,q="undefined"!=typeof Set,B="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",Z=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames),tt=Object.getOwnPropertyDescriptors||function(t){var n={};return Z(t).forEach((function(r){n[r]=Object.getOwnPropertyDescriptor(t,r)})),n},nt={},rt={get:function(t,n){if(n===Q)return t;var e=p(t);if(!u(e,n))return function(t,n,r){var e,i=I(n,r);return i?"value"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(t.k):void 0}(t,e,n);var i=e[n];return t.I||!immer_esm_r(i)?i:i===z(t.t,n)?(E(t),t.o[n]=R(t.A.h,i,t)):i},has:function(t,n){return n in p(t)},ownKeys:function(t){return Reflect.ownKeys(p(t))},set:function(t,n,r){var e=I(p(t),n);if(null==e?void 0:e.set)return e.set.call(t.k,r),!0;if(!t.P){var i=z(p(t),n),o=null==i?void 0:i[Q];if(o&&o.t===r)return t.o[n]=r,t.D[n]=!1,!0;if(c(r,i)&&(void 0!==r||u(t.t,n)))return!0;E(t),immer_esm_k(t)}return t.o[n]=r,t.D[n]=!0,!0},deleteProperty:function(t,n){return void 0!==z(t.t,n)||n in t.t?(t.D[n]=!1,E(t),immer_esm_k(t)):delete t.D[n],t.o&&delete t.o[n],!0},getOwnPropertyDescriptor:function(t,n){var r=p(t),e=Reflect.getOwnPropertyDescriptor(r,n);return e?{writable:!0,configurable:1!==t.i||"length"!==n,enumerable:e.enumerable,value:r[n]}:e},defineProperty:function(){t(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){t(12)}},et={};i(rt,(function(t,n){et[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),et.deleteProperty=function(n,r){return rt.deleteProperty.call(this,n[0],r)},et.set=function(n,r,e){return rt.set.call(this,n[0],r,e,n[0])};var ControlMessage,ot=new(function(){function e(t){this.O=B,this.N=!0,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=e.prototype;return i.produce=function(n,e,i){if("function"==typeof n&&"function"!=typeof e){var o=e;e=n;var u=this;return function(t){var n=this;void 0===t&&(t=o);for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return u.produce(t,(function(t){var r;return(r=e).call.apply(r,[n,t].concat(i))}))}}var a;if("function"!=typeof e&&t(6),void 0!==i&&"function"!=typeof i&&t(7),immer_esm_r(n)){var f=O(this),c=R(this,n,void 0),s=!0;try{a=e(c),s=!1}finally{s?g(f):w(f)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return j(f,i),P(t,f)}),(function(t){throw g(f),t})):(j(f,i),P(a,f))}if(!n||"object"!=typeof n){if((a=e(n))===H)return;return void 0===a&&(a=n),this.N&&d(a,!0),a}t(21,n)},i.produceWithPatches=function(t,n){var r,e,i=this;return"function"==typeof t?function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return i.produceWithPatches(n,(function(n){return t.apply(void 0,[n].concat(e))}))}:[this.produce(t,n,(function(t,n){r=t,e=n})),r,e]},i.createDraft=function(e){immer_esm_r(e)||t(8),n(e)&&(e=D(e));var i=O(this),o=R(this,e,void 0);return o[Q].C=!0,w(i),o},i.finishDraft=function(n,r){var i=(n&&n[Q]).A;return j(i,r),P(void 0,i)},i.setAutoFreeze=function(t){this.N=t},i.setUseProxies=function(n){n&&!B&&t(20),this.O=n},i.applyPatches=function(t,r){var e;for(e=r.length-1;e>=0;e--){var i=r[e];if(0===i.path.length&&"replace"===i.op){t=i.value;break}}var o=b("Patches").$;return n(t)?o(t,r):this.produce(t,(function(t){return o(t,r.slice(e+1))}))},e}()),ft=(ot.produce,ot.produceWithPatches.bind(ot),ot.setAutoFreeze.bind(ot)),bundle_esm=(ot.setUseProxies.bind(ot),ot.applyPatches.bind(ot),ot.createDraft.bind(ot),ot.finishDraft.bind(ot),__webpack_require__(30),__webpack_require__(27)),lib_esm_predicates=__webpack_require__(14),predicates_sort=__webpack_require__(300),Util_Mutex=function(){function Mutex(){this._queue=[],this._pending=!1}return Mutex.prototype.isLocked=function(){return this._pending},Mutex.prototype.acquire=function(){var _this=this,ticket=new Promise((function(resolve){return _this._queue.push(resolve)}));return this._pending||this._dispatchNext(),ticket},Mutex.prototype.runExclusive=function(callback){return this.acquire().then((function(release){var result;try{result=callback()}catch(e){throw release(),e}return Promise.resolve(result).then((function(x){return release(),x}),(function(e){throw release(),e}))}))},Mutex.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},Mutex}(),zen_push=__webpack_require__(324),zen_push_default=__webpack_require__.n(zen_push),types=__webpack_require__(8),util=__webpack_require__(5),adapter_getDefaultAdapter=function(){return Object(JS.b)().isBrowser&&window.indexedDB||Object(JS.c)()&&self.indexedDB?__webpack_require__(607).default:new(0,__webpack_require__(606).AsyncStorageAdapter)},__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},logger=new ConsoleLogger.a("DataStore"),storage_StorageClass=function(){function StorageClass(schema,namespaceResolver,getModelConstructorByModelName,modelInstanceCreator,adapter,sessionId){this.schema=schema,this.namespaceResolver=namespaceResolver,this.getModelConstructorByModelName=getModelConstructorByModelName,this.modelInstanceCreator=modelInstanceCreator,this.adapter=adapter,this.sessionId=sessionId,this.adapter=adapter_getDefaultAdapter(),this.pushStream=new zen_push_default.a}return StorageClass.getNamespace=function(){return{name:util.b,relationships:{},enums:{},models:{},nonModels:{}}},StorageClass.prototype.init=function(){return __awaiter(this,void 0,void 0,(function(){var resolve,reject;return __generator(this,(function(_a){switch(_a.label){case 0:return void 0===this.initialized?[3,2]:[4,this.initialized];case 1:return _a.sent(),[2];case 2:return logger.debug("Starting Storage"),this.initialized=new Promise((function(res,rej){resolve=res,reject=rej})),this.adapter.setUp(this.schema,this.namespaceResolver,this.modelInstanceCreator,this.getModelConstructorByModelName,this.sessionId).then(resolve,reject),[4,this.initialized];case 3:return _a.sent(),[2]}}))}))},StorageClass.prototype.save=function(model,condition,mutator,patches){return __awaiter(this,void 0,void 0,(function(){var result,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.init()];case 1:return _a.sent(),[4,this.adapter.save(model,condition)];case 2:return(result=_a.sent()).forEach((function(r){var updatedElement,_a=__read(r,2),originalElement=_a[0],opType=_a[1];if(opType===types.c.UPDATE&&patches&&patches.length){updatedElement={},patches.map((function(patch){return patch.path&&patch.path[0]})).forEach((function(field){updatedElement[field]=originalElement[field]}));var id=originalElement.id,_version=originalElement._version,_lastChangedAt=originalElement._lastChangedAt,_deleted=originalElement._deleted;updatedElement=__assign(__assign({},updatedElement),{id:id,_version:_version,_lastChangedAt:_lastChangedAt,_deleted:_deleted})}var element=updatedElement||originalElement,modelConstructor=Object.getPrototypeOf(originalElement).constructor;_this.pushStream.next({model:modelConstructor,opType:opType,element:element,mutator:mutator,condition:lib_esm_predicates.a.getPredicates(condition,!1)})})),[2,result]}}))}))},StorageClass.prototype.delete=function(modelOrModelConstructor,condition,mutator){return __awaiter(this,void 0,void 0,(function(){var deleted,models,modelIds,_a,_this=this;return __generator(this,(function(_b){switch(_b.label){case 0:return[4,this.init()];case 1:return _b.sent(),[4,this.adapter.delete(modelOrModelConstructor,condition)];case 2:return _a=__read.apply(void 0,[_b.sent(),2]),models=_a[0],deleted=_a[1],modelIds=new Set(models.map((function(_a){return _a.id}))),Object(util.s)(modelOrModelConstructor)||Array.isArray(deleted)||(deleted=[deleted]),deleted.forEach((function(model){var theCondition,modelConstructor=Object.getPrototypeOf(model).constructor;Object(util.s)(modelOrModelConstructor)||(theCondition=modelIds.has(model.id)?lib_esm_predicates.a.getPredicates(condition,!1):void 0),_this.pushStream.next({model:modelConstructor,opType:types.c.DELETE,element:model,mutator:mutator,condition:theCondition})})),[2,[models,deleted]]}}))}))},StorageClass.prototype.query=function(modelConstructor,predicate,pagination){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.init()];case 1:return _a.sent(),[4,this.adapter.query(modelConstructor,predicate,pagination)];case 2:return[2,_a.sent()]}}))}))},StorageClass.prototype.queryOne=function(modelConstructor,firstOrLast){return void 0===firstOrLast&&(firstOrLast=types.d.FIRST),__awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.init()];case 1:return _a.sent(),[4,this.adapter.queryOne(modelConstructor,firstOrLast)];case 2:return[2,_a.sent()]}}))}))},StorageClass.prototype.observe=function(modelConstructor,predicate,skipOwn){var listenToAll=!modelConstructor,_a=lib_esm_predicates.a.getPredicates(predicate,!1)||{},predicates=_a.predicates,type=_a.type,hasPredicate=!!predicates,result=this.pushStream.observable.filter((function(_a){var mutator=_a.mutator;return!skipOwn||mutator!==skipOwn})).map((function(_a){_a.mutator;return __rest(_a,["mutator"])}));return listenToAll||(result=result.filter((function(_a){var model=_a.model,element=_a.element;return modelConstructor===model&&(!hasPredicate||Object(util.y)(element,type,predicates))}))),result},StorageClass.prototype.clear=function(completeObservable){return void 0===completeObservable&&(completeObservable=!0),__awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return this.initialized=void 0,[4,this.adapter.clear()];case 1:return _a.sent(),completeObservable&&this.pushStream.complete(),[2]}}))}))},StorageClass.prototype.batchSave=function(modelConstructor,items,mutator){return __awaiter(this,void 0,void 0,(function(){var result,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.init()];case 1:return _a.sent(),[4,this.adapter.batchSave(modelConstructor,items)];case 2:return(result=_a.sent()).forEach((function(_a){var _b=__read(_a,2),element=_b[0],opType=_b[1];_this.pushStream.next({model:modelConstructor,opType:opType,element:element,mutator:mutator,condition:void 0})})),[2,result]}}))}))},StorageClass}(),storage_ExclusiveStorage=function(){function ExclusiveStorage(schema,namespaceResolver,getModelConstructorByModelName,modelInstanceCreator,adapter,sessionId){this.mutex=new Util_Mutex,this.storage=new storage_StorageClass(schema,namespaceResolver,getModelConstructorByModelName,modelInstanceCreator,adapter,sessionId)}return ExclusiveStorage.prototype.runExclusive=function(fn){return this.mutex.runExclusive(fn.bind(this,this.storage))},ExclusiveStorage.prototype.save=function(model,condition,mutator,patches){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.runExclusive((function(storage){return storage.save(model,condition,mutator,patches)}))]}))}))},ExclusiveStorage.prototype.delete=function(modelOrModelConstructor,condition,mutator){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.runExclusive((function(storage){if(Object(util.s)(modelOrModelConstructor)){var modelConstructor=modelOrModelConstructor;return storage.delete(modelConstructor,condition,mutator)}var model=modelOrModelConstructor;return storage.delete(model,condition,mutator)}))]}))}))},ExclusiveStorage.prototype.query=function(modelConstructor,predicate,pagination){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.runExclusive((function(storage){return storage.query(modelConstructor,predicate,pagination)}))]}))}))},ExclusiveStorage.prototype.queryOne=function(modelConstructor,firstOrLast){return void 0===firstOrLast&&(firstOrLast=types.d.FIRST),__awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.runExclusive((function(storage){return storage.queryOne(modelConstructor,firstOrLast)}))]}))}))},ExclusiveStorage.getNamespace=function(){return storage_StorageClass.getNamespace()},ExclusiveStorage.prototype.observe=function(modelConstructor,predicate,skipOwn){return this.storage.observe(modelConstructor,predicate,skipOwn)},ExclusiveStorage.prototype.clear=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.storage.clear()];case 1:return _a.sent(),[2]}}))}))},ExclusiveStorage.prototype.batchSave=function(modelConstructor,items){return this.storage.batchSave(modelConstructor,items)},ExclusiveStorage.prototype.init=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.storage.init()]}))}))},ExclusiveStorage}(),lib_esm=__webpack_require__(82),__values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ReachabilityMonitor=(new(function(){function ReachabilityNavigator(){}return ReachabilityNavigator.prototype.networkMonitor=function(netInfo){if(Object(JS.b)().isNode)return bundle_esm.a.from([{online:!0}]);var globalObj=Object(JS.c)()?self:window;return new bundle_esm.a((function(observer){observer.next({online:globalObj.navigator.onLine});var notifyOnline=function(){return observer.next({online:!0})},notifyOffline=function(){return observer.next({online:!1})};return globalObj.addEventListener("online",notifyOnline),globalObj.addEventListener("offline",notifyOffline),ReachabilityNavigator._observers.push(observer),function(){globalObj.removeEventListener("online",notifyOnline),globalObj.removeEventListener("offline",notifyOffline),ReachabilityNavigator._observers=ReachabilityNavigator._observers.filter((function(_observer){return _observer!==observer}))}}))},ReachabilityNavigator._observerOverride=function(status){var e_1,_a,_loop_1=function(observer){if(observer.closed)return ReachabilityNavigator._observers=ReachabilityNavigator._observers.filter((function(_observer){return _observer!==observer})),"continue";observer.next(status)};try{for(var _b=__values(ReachabilityNavigator._observers),_c=_b.next();!_c.done;_c=_b.next()){_loop_1(_c.value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},ReachabilityNavigator._observers=[],ReachabilityNavigator}())).networkMonitor(),datastoreConnectivity_assign=function(){return(datastoreConnectivity_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},datastoreConnectivity=(new ConsoleLogger.a("DataStore"),function(){function DataStoreConnectivity(){this.connectionStatus={online:!1}}return DataStoreConnectivity.prototype.status=function(){var _this=this;if(this.observer)throw new Error("Subscriber already exists");return new bundle_esm.a((function(observer){return _this.observer=observer,_this.subscription=ReachabilityMonitor.subscribe((function(_a){var online=_a.online;_this.connectionStatus.online=online;var observerResult=datastoreConnectivity_assign({},_this.connectionStatus);observer.next(observerResult)})),function(){_this.unsubscribe()}}))},DataStoreConnectivity.prototype.unsubscribe=function(){this.subscription&&this.subscription.unsubscribe()},DataStoreConnectivity.prototype.socketDisconnected=function(){var _this=this;this.observer&&"function"==typeof this.observer.next&&(this.observer.next({online:!1}),setTimeout((function(){var observerResult=datastoreConnectivity_assign({},_this.connectionStatus);_this.observer.next(observerResult)}),5e3))},DataStoreConnectivity}()),merger_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},merger_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},merger_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},merger_ModelMerger=function(){function ModelMerger(outbox,ownSymbol){this.outbox=outbox,this.ownSymbol=ownSymbol}return ModelMerger.prototype.merge=function(storage,model){return merger_awaiter(this,void 0,void 0,(function(){var result,mutationsForModel,isDelete,_a,_b;return merger_generator(this,(function(_c){switch(_c.label){case 0:return[4,this.outbox.getForModel(storage,model)];case 1:return mutationsForModel=_c.sent(),isDelete=model._deleted,0!==mutationsForModel.length?[3,5]:isDelete?(result=types.c.DELETE,[4,storage.delete(model,void 0,this.ownSymbol)]):[3,3];case 2:return _c.sent(),[3,5];case 3:return[4,storage.save(model,void 0,this.ownSymbol)];case 4:_a=merger_read.apply(void 0,[_c.sent(),1]),_b=merger_read(_a[0],2),result=_b[1],_c.label=5;case 5:return[2,result]}}))}))},ModelMerger.prototype.mergePage=function(storage,modelConstructor,items){return merger_awaiter(this,void 0,void 0,(function(){return merger_generator(this,(function(_a){switch(_a.label){case 0:return[4,storage.batchSave(modelConstructor,items,this.ownSymbol)];case 1:return[2,_a.sent()]}}))}))},ModelMerger}(),utils=__webpack_require__(22),outbox_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},outbox_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},outbox_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},outbox_MutationEventOutbox=function(){function MutationEventOutbox(schema,namespaceResolver,MutationEvent,ownSymbol){this.schema=schema,this.namespaceResolver=namespaceResolver,this.MutationEvent=MutationEvent,this.ownSymbol=ownSymbol}return MutationEventOutbox.prototype.enqueue=function(storage,mutationEvent){return outbox_awaiter(this,void 0,void 0,(function(){var _this=this;return outbox_generator(this,(function(_a){return storage.runExclusive((function(s){return outbox_awaiter(_this,void 0,void 0,(function(){var mutationEventModelDefinition,predicate,_a,first,incomingMutationType,incomingConditionJSON,incomingCondition,_this=this;return outbox_generator(this,(function(_b){switch(_b.label){case 0:return mutationEventModelDefinition=this.schema.namespaces[util.c].models.MutationEvent,predicate=lib_esm_predicates.a.createFromExisting(mutationEventModelDefinition,(function(c){return c.modelId("eq",mutationEvent.modelId).id("ne",_this.inProgressMutationEventId)})),[4,s.query(this.MutationEvent,predicate)];case 1:return _a=outbox_read.apply(void 0,[_b.sent(),1]),void 0!==(first=_a[0])?[3,3]:[4,s.save(mutationEvent,void 0,this.ownSymbol)];case 2:return _b.sent(),[2];case 3:return incomingMutationType=mutationEvent.operation,first.operation!==utils.a.CREATE?[3,8]:incomingMutationType!==utils.a.DELETE?[3,5]:[4,s.delete(this.MutationEvent,predicate)];case 4:return _b.sent(),[3,7];case 5:return[4,s.save(this.MutationEvent.copyOf(first,(function(draft){draft.data=mutationEvent.data})),void 0,this.ownSymbol)];case 6:_b.sent(),_b.label=7;case 7:return[3,12];case 8:return incomingConditionJSON=mutationEvent.condition,incomingCondition=JSON.parse(incomingConditionJSON),0!==Object.keys(incomingCondition).length?[3,10]:[4,s.delete(this.MutationEvent,predicate)];case 9:_b.sent(),_b.label=10;case 10:return[4,s.save(mutationEvent,void 0,this.ownSymbol)];case 11:_b.sent(),_b.label=12;case 12:return[2]}}))}))})),[2]}))}))},MutationEventOutbox.prototype.dequeue=function(storage){return outbox_awaiter(this,void 0,void 0,(function(){var head;return outbox_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.peek(storage)];case 1:return head=_a.sent(),[4,storage.delete(head)];case 2:return _a.sent(),this.inProgressMutationEventId=void 0,[2,head]}}))}))},MutationEventOutbox.prototype.peek=function(storage){return outbox_awaiter(this,void 0,void 0,(function(){var head;return outbox_generator(this,(function(_a){switch(_a.label){case 0:return[4,storage.queryOne(this.MutationEvent,types.d.FIRST)];case 1:return head=_a.sent(),this.inProgressMutationEventId=head?head.id:void 0,[2,head]}}))}))},MutationEventOutbox.prototype.getForModel=function(storage,model){return outbox_awaiter(this,void 0,void 0,(function(){var mutationEventModelDefinition;return outbox_generator(this,(function(_a){switch(_a.label){case 0:return mutationEventModelDefinition=this.schema.namespaces[util.c].models.MutationEvent,[4,storage.query(this.MutationEvent,lib_esm_predicates.a.createFromExisting(mutationEventModelDefinition,(function(c){return c.modelId("eq",model.id)})))];case 1:return[2,_a.sent()]}}))}))},MutationEventOutbox.prototype.getModelIds=function(storage){return outbox_awaiter(this,void 0,void 0,(function(){var mutationEvents,result;return outbox_generator(this,(function(_a){switch(_a.label){case 0:return[4,storage.query(this.MutationEvent)];case 1:return mutationEvents=_a.sent(),result=new Set,mutationEvents.forEach((function(_a){var modelId=_a.modelId;return result.add(modelId)})),[2,result]}}))}))},MutationEventOutbox}(),api_lib_esm=__webpack_require__(67),Retry=__webpack_require__(620),mutation_assign=function(){return(mutation_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},mutation_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},mutation_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},mutation_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},mutation_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},mutation_logger=new ConsoleLogger.a("DataStore"),mutation_MutationProcessor=function(){function MutationProcessor(schema,storage,userClasses,outbox,modelInstanceCreator,MutationEvent,conflictHandler,errorHandler){this.schema=schema,this.storage=storage,this.userClasses=userClasses,this.outbox=outbox,this.modelInstanceCreator=modelInstanceCreator,this.MutationEvent=MutationEvent,this.conflictHandler=conflictHandler,this.errorHandler=errorHandler,this.typeQuery=new WeakMap,this.processing=!1,this.generateQueries()}return MutationProcessor.prototype.generateQueries=function(){var _this=this;Object.values(this.schema.namespaces).forEach((function(namespace){Object.values(namespace.models).filter((function(_a){return _a.syncable})).forEach((function(model){var createMutation=mutation_read(Object(utils.b)(namespace,model,"CREATE"),1)[0],updateMutation=mutation_read(Object(utils.b)(namespace,model,"UPDATE"),1)[0],deleteMutation=mutation_read(Object(utils.b)(namespace,model,"DELETE"),1)[0];_this.typeQuery.set(model,[createMutation,updateMutation,deleteMutation])}))}))},MutationProcessor.prototype.isReady=function(){return void 0!==this.observer},MutationProcessor.prototype.start=function(){var _this=this;return new bundle_esm.a((function(observer){return _this.observer=observer,_this.resume(),function(){_this.pause()}}))},MutationProcessor.prototype.resume=function(){return mutation_awaiter(this,void 0,void 0,(function(){var head,namespaceName,_a,model,operation,data,condition,modelConstructor,result,opName,modelDefinition,error_1,record,hasMore,_b;return mutation_generator(this,(function(_c){switch(_c.label){case 0:if(this.processing||!this.isReady())return[2];this.processing=!0,namespaceName=util.d,_c.label=1;case 1:return(_a=this.processing)?[4,this.outbox.peek(this.storage)]:[3,3];case 2:_a=void 0!==(head=_c.sent()),_c.label=3;case 3:if(!_a)return[3,12];model=head.model,operation=head.operation,data=head.data,condition=head.condition,modelConstructor=this.userClasses[model],result=void 0,opName=void 0,modelDefinition=void 0,_c.label=4;case 4:return _c.trys.push([4,6,,7]),[4,this.jitteredRetry(namespaceName,model,operation,data,condition,modelConstructor,this.MutationEvent,head)];case 5:return _b=mutation_read.apply(void 0,[_c.sent(),3]),result=_b[0],opName=_b[1],modelDefinition=_b[2],[3,7];case 6:return"Offline"===(error_1=_c.sent()).message||"RetryMutation"===error_1.message?[3,1]:[3,7];case 7:return void 0!==result?[3,9]:(mutation_logger.debug("done retrying"),[4,this.outbox.dequeue(this.storage)]);case 8:return _c.sent(),[3,1];case 9:return record=result.data[opName],[4,this.outbox.dequeue(this.storage)];case 10:return _c.sent(),[4,this.outbox.peek(this.storage)];case 11:return hasMore=void 0!==_c.sent(),this.observer.next({operation:operation,modelDefinition:modelDefinition,model:record,hasMore:hasMore}),[3,1];case 12:return this.pause(),[2]}}))}))},MutationProcessor.prototype.jitteredRetry=function(namespaceName,model,operation,data,condition,modelConstructor,MutationEvent,mutationEvent){return mutation_awaiter(this,void 0,void 0,(function(){var _this=this;return mutation_generator(this,(function(_a){switch(_a.label){case 0:return[4,Object(Retry.b)((function(model,operation,data,condition,modelConstructor,MutationEvent,mutationEvent){return mutation_awaiter(_this,void 0,void 0,(function(){var _a,query,variables,graphQLCondition,opName,modelDefinition,tryWith,attempt,opType,err_1,_b,error,retryWith,err_2,_c,_d,opName_1,query_1,namespace,updatedMutation,_e;return mutation_generator(this,(function(_f){switch(_f.label){case 0:_a=mutation_read(this.createQueryVariables(namespaceName,model,operation,data,condition),5),query=_a[0],variables=_a[1],graphQLCondition=_a[2],opName=_a[3],modelDefinition=_a[4],tryWith={query:query,variables:variables},attempt=0,opType=this.opTypeFromTransformerOperation(operation),_f.label=1;case 1:return _f.trys.push([1,3,,13]),[4,api_lib_esm.c.graphql(tryWith)];case 2:return[2,[_f.sent(),opName,modelDefinition]];case 3:if(!((err_1=_f.sent()).errors&&err_1.errors.length>0))return[3,12];if(_b=mutation_read(err_1.errors,1),"Network Error"===(error=_b[0]).message){if(!this.processing)throw new Retry.a("Offline");throw new Error("Network Error")}return"ConflictUnhandled"!==error.errorType?[3,11]:(attempt++,retryWith=void 0,attempt>10?(retryWith=types.a,[3,7]):[3,4]);case 4:return _f.trys.push([4,6,,7]),[4,this.conflictHandler({modelConstructor:modelConstructor,localModel:this.modelInstanceCreator(modelConstructor,variables.input),remoteModel:this.modelInstanceCreator(modelConstructor,error.data),operation:opType,attempts:attempt})];case 5:return retryWith=_f.sent(),[3,7];case 6:return err_2=_f.sent(),mutation_logger.warn("conflict trycatch",err_2),[3,13];case 7:return retryWith!==types.a?[3,9]:(_c=mutation_read(Object(utils.b)(this.schema.namespaces[namespaceName],modelDefinition,"GET"),1),_d=mutation_read(_c[0],3),opName_1=_d[1],query_1=_d[2],[4,api_lib_esm.c.graphql({query:query_1,variables:{id:variables.input.id}})]);case 8:return[2,[_f.sent(),opName_1,modelDefinition]];case 9:return namespace=this.schema.namespaces[namespaceName],updatedMutation=Object(utils.d)(namespace.relationships,modelDefinition,opType,modelConstructor,retryWith,graphQLCondition,MutationEvent,this.modelInstanceCreator,mutationEvent.id),[4,this.storage.save(updatedMutation)];case 10:throw _f.sent(),new Retry.a("RetryMutation");case 11:try{this.errorHandler({localModel:this.modelInstanceCreator(modelConstructor,variables.input),message:error.message,operation:operation,errorType:error.errorType,errorInfo:error.errorInfo,remoteModel:error.data?this.modelInstanceCreator(modelConstructor,error.data):null})}catch(err){mutation_logger.warn("failed to execute errorHandler",err)}finally{return[2,error.data?[{data:(_e={},_e[opName]=error.data,_e)},opName,modelDefinition]:[]]}_f.label=12;case 12:return[3,13];case 13:if(tryWith)return[3,1];_f.label=14;case 14:return[2]}}))}))}),[model,operation,data,condition,modelConstructor,MutationEvent,mutationEvent])];case 1:return[2,_a.sent()]}}))}))},MutationProcessor.prototype.createQueryVariables=function(namespaceName,model,operation,data,condition){var modelDefinition=this.schema.namespaces[namespaceName].models[model],queriesTuples=this.typeQuery.get(modelDefinition),_a=mutation_read(queriesTuples.find((function(_a){return mutation_read(_a,1)[0]===operation})),3),opName=_a[1],query=_a[2],_b=JSON.parse(data),_version=_b._version,parsedData=mutation_rest(_b,["_version"]),filteredData=operation===utils.a.DELETE?{id:parsedData.id}:Object.values(modelDefinition.fields).filter((function(_a){var name=_a.name,type=_a.type,association=_a.association;return Object(types.h)(type)?!(!Object(types.m)(association)||"BELONGS_TO"!==association.connectionType):operation!==utils.a.UPDATE||parsedData.hasOwnProperty(name)})).map((function(_a){var name=_a.name,type=_a.type,association=_a.association,fieldName=name,val=parsedData[name];return Object(types.h)(type)&&Object(types.m)(association)&&(fieldName=association.targetName,val=parsedData[fieldName]),[fieldName,val]})).reduce((function(acc,_a){var _b=mutation_read(_a,2),k=_b[0],v=_b[1];return acc[k]=v,acc}),{}),input=mutation_assign(mutation_assign({},filteredData),{_version:_version}),graphQLCondition=JSON.parse(condition);return[query,mutation_assign({input:input},operation===utils.a.CREATE?{}:{condition:Object.keys(graphQLCondition).length>0?graphQLCondition:null}),graphQLCondition,opName,modelDefinition]},MutationProcessor.prototype.opTypeFromTransformerOperation=function(operation){switch(operation){case utils.a.CREATE:return types.c.INSERT;case utils.a.DELETE:return types.c.DELETE;case utils.a.UPDATE:return types.c.UPDATE;case utils.a.GET:break;default:Object(util.f)(operation)}},MutationProcessor.prototype.pause=function(){this.processing=!1},MutationProcessor}(),subscription=__webpack_require__(220),sync_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},sync_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},sync_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},sync_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},sync_logger=new ConsoleLogger.a("DataStore"),sync_SyncProcessor=function(){function SyncProcessor(schema,maxRecordsToSync,syncPageSize,syncPredicates){void 0===maxRecordsToSync&&(maxRecordsToSync=1e4),void 0===syncPageSize&&(syncPageSize=1e3),this.schema=schema,this.maxRecordsToSync=maxRecordsToSync,this.syncPageSize=syncPageSize,this.syncPredicates=syncPredicates,this.typeQuery=new WeakMap,this.generateQueries()}return SyncProcessor.prototype.generateQueries=function(){var _this=this;Object.values(this.schema.namespaces).forEach((function(namespace){Object.values(namespace.models).filter((function(_a){return _a.syncable})).forEach((function(model){var _a=sync_read(Object(utils.b)(namespace,model,"LIST"),1),opNameQuery=sync_read(_a[0]).slice(1);_this.typeQuery.set(model,opNameQuery)}))}))},SyncProcessor.prototype.graphqlFilterFromPredicate=function(model){if(!this.syncPredicates)return null;var predicatesGroup=lib_esm_predicates.a.getPredicates(this.syncPredicates.get(model),!1);return predicatesGroup?Object(utils.h)(predicatesGroup):null},SyncProcessor.prototype.retrievePage=function(modelDefinition,lastSync,nextToken,limit,filter){return void 0===limit&&(limit=null),sync_awaiter(this,void 0,void 0,(function(){var _a,opName,query,variables,data,opResult,items,newNextToken,startedAt;return sync_generator(this,(function(_c){switch(_c.label){case 0:return _a=sync_read(this.typeQuery.get(modelDefinition),2),opName=_a[0],query=_a[1],variables={limit:limit,nextToken:nextToken,lastSync:lastSync,filter:filter},[4,this.jitteredRetry(query,variables,opName)];case 1:return data=_c.sent().data,opResult=data[opName],items=opResult.items,newNextToken=opResult.nextToken,startedAt=opResult.startedAt,[2,{nextToken:newNextToken,startedAt:startedAt,items:items}]}}))}))},SyncProcessor.prototype.jitteredRetry=function(query,variables,opName){return sync_awaiter(this,void 0,void 0,(function(){var _this=this;return sync_generator(this,(function(_a){switch(_a.label){case 0:return[4,Object(Retry.b)((function(query,variables){return sync_awaiter(_this,void 0,void 0,(function(){var error_1,result;return sync_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,api_lib_esm.c.graphql({query:query,variables:variables})];case 1:return[2,_a.sent()];case 2:if(error_1=_a.sent(),error_1.errors.some((function(err){return"Unauthorized"===err.errorType})))return(result=error_1).data[opName].items=result.data[opName].items.filter((function(item){return null!==item})),sync_logger.warn("queryError","User is unauthorized, some items could not be returned."),[2,result];throw error_1;case 3:return[2]}}))}))}),[query,variables])];case 1:return[2,_a.sent()]}}))}))},SyncProcessor.prototype.start=function(typesLastSync){var _this=this,processing=!0,maxRecordsToSync=void 0!==this.maxRecordsToSync?this.maxRecordsToSync:1e4,syncPageSize=void 0!==this.syncPageSize?this.syncPageSize:1e3,parentPromises=new Map;return new bundle_esm.a((function(observer){var sortedTypesLastSyncs=Object.values(_this.schema.namespaces).reduce((function(map,namespace){var e_1,_a;try{for(var _b=sync_values(Array.from(namespace.modelTopologicalOrdering.keys())),_c=_b.next();!_c.done;_c=_b.next()){var modelName=_c.value,typeLastSync=typesLastSync.get(namespace.models[modelName]);map.set(namespace.models[modelName],typeLastSync)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return map}),new Map),allModelsReady=Array.from(sortedTypesLastSyncs.entries()).filter((function(_a){return sync_read(_a,1)[0].syncable})).map((function(_a){var _b=sync_read(_a,2),modelDefinition=_b[0],_c=sync_read(_b[1],2),namespace=_c[0],lastSync=_c[1];return sync_awaiter(_this,void 0,void 0,(function(){var done,nextToken,startedAt,items,recordsReceived,filter,parents,promises,promise,_this=this;return sync_generator(this,(function(_d){switch(_d.label){case 0:return done=!1,nextToken=null,startedAt=null,items=null,recordsReceived=0,filter=this.graphqlFilterFromPredicate(modelDefinition),parents=this.schema.namespaces[namespace].modelTopologicalOrdering.get(modelDefinition.name),promises=parents.map((function(parent){return parentPromises.get(namespace+"_"+parent)})),promise=new Promise((function(res){return sync_awaiter(_this,void 0,void 0,(function(){var limit,_a;return sync_generator(this,(function(_b){switch(_b.label){case 0:return[4,Promise.all(promises)];case 1:_b.sent(),_b.label=2;case 2:return processing?(limit=Math.min(maxRecordsToSync-recordsReceived,syncPageSize),[4,this.retrievePage(modelDefinition,lastSync,nextToken,limit,filter)]):[2];case 3:_a=_b.sent(),items=_a.items,nextToken=_a.nextToken,startedAt=_a.startedAt,recordsReceived+=items.length,done=null===nextToken||recordsReceived>=maxRecordsToSync,observer.next({namespace:namespace,modelDefinition:modelDefinition,items:items,done:done,startedAt:startedAt,isFullSync:!lastSync}),_b.label=4;case 4:if(!done)return[3,2];_b.label=5;case 5:return res(),[2]}}))}))})),parentPromises.set(namespace+"_"+modelDefinition.name,promise),[4,promise];case 1:return _d.sent(),[2]}}))}))}));return Promise.all(allModelsReady).then((function(){observer.complete()})),function(){processing=!1}}))},SyncProcessor}(),lib_esm_sync_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},lib_esm_sync_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},lib_esm_sync_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},lib_esm_sync_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(lib_esm_sync_read(arguments[i]));return ar},isNode=Object(JS.b)().isNode,lib_esm_sync_logger=new ConsoleLogger.a("DataStore"),ownSymbol=Symbol("sync");!function(ControlMessage){ControlMessage.SYNC_ENGINE_STORAGE_SUBSCRIBED="storageSubscribed",ControlMessage.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED="subscriptionsEstablished",ControlMessage.SYNC_ENGINE_SYNC_QUERIES_STARTED="syncQueriesStarted",ControlMessage.SYNC_ENGINE_SYNC_QUERIES_READY="syncQueriesReady",ControlMessage.SYNC_ENGINE_MODEL_SYNCED="modelSynced",ControlMessage.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED="outboxMutationEnqueued",ControlMessage.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED="outboxMutationProcessed",ControlMessage.SYNC_ENGINE_OUTBOX_STATUS="outboxStatus",ControlMessage.SYNC_ENGINE_NETWORK_STATUS="networkStatus",ControlMessage.SYNC_ENGINE_READY="ready"}(ControlMessage||(ControlMessage={}));var sync_SyncEngine=function(){function SyncEngine(schema,namespaceResolver,modelClasses,userModelClasses,storage,modelInstanceCreator,maxRecordsToSync,syncPageSize,conflictHandler,errorHandler,syncPredicates,amplifyConfig){void 0===amplifyConfig&&(amplifyConfig={}),this.schema=schema,this.namespaceResolver=namespaceResolver,this.modelClasses=modelClasses,this.userModelClasses=userModelClasses,this.storage=storage,this.modelInstanceCreator=modelInstanceCreator,this.maxRecordsToSync=maxRecordsToSync,this.syncPageSize=syncPageSize,this.syncPredicates=syncPredicates,this.amplifyConfig=amplifyConfig,this.online=!1;var MutationEvent=this.modelClasses.MutationEvent;this.outbox=new outbox_MutationEventOutbox(this.schema,this.namespaceResolver,MutationEvent,ownSymbol),this.modelMerger=new merger_ModelMerger(this.outbox,ownSymbol),this.syncQueriesProcessor=new sync_SyncProcessor(this.schema,this.maxRecordsToSync,this.syncPageSize,this.syncPredicates),this.subscriptionsProcessor=new subscription.b(this.schema,this.syncPredicates,this.amplifyConfig),this.mutationsProcessor=new mutation_MutationProcessor(this.schema,this.storage,this.userModelClasses,this.outbox,this.modelInstanceCreator,MutationEvent,conflictHandler,errorHandler),this.datastoreConnectivity=new datastoreConnectivity}return SyncEngine.prototype.start=function(params){var _this=this;return new bundle_esm.a((function(observer){lib_esm_sync_logger.log("starting sync engine...");var subscriptions=[];return lib_esm_sync_awaiter(_this,void 0,void 0,(function(){var err_1,startPromise,hasMutationsInOutbox,_this=this;return lib_esm_sync_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,this.setupModels(params)];case 1:return _a.sent(),[3,3];case 2:return err_1=_a.sent(),observer.error(err_1),[2];case 3:return startPromise=new Promise((function(resolve){_this.datastoreConnectivity.status().subscribe((function(_a){var online=_a.online;return lib_esm_sync_awaiter(_this,void 0,void 0,(function(){var ctlSubsObservable_1,dataSubsObservable,err_2,error_1,_b,_this=this;return lib_esm_sync_generator(this,(function(_c){switch(_c.label){case 0:return!online||this.online?[3,10]:(this.online=online,observer.next({type:ControlMessage.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),dataSubsObservable=void 0,isNode?(lib_esm_sync_logger.warn("Realtime disabled when in a server-side environment"),[3,6]):[3,1]);case 1:_b=lib_esm_sync_read(this.subscriptionsProcessor.start(),2),ctlSubsObservable_1=_b[0],dataSubsObservable=_b[1],_c.label=2;case 2:return _c.trys.push([2,4,,5]),[4,new Promise((function(resolve,reject){var ctlSubsSubscription=ctlSubsObservable_1.subscribe({next:function(msg){msg===subscription.a.CONNECTED&&resolve()},error:function(err){reject(err),_this.disconnectionHandler()(err)}});subscriptions.push(ctlSubsSubscription)}))];case 3:return _c.sent(),[3,5];case 4:return err_2=_c.sent(),observer.error(err_2),[2];case 5:lib_esm_sync_logger.log("Realtime ready"),observer.next({type:ControlMessage.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED}),_c.label=6;case 6:return _c.trys.push([6,8,,9]),[4,new Promise((function(resolve,reject){var syncQuerySubscription=_this.syncQueriesObservable().subscribe({next:function(message){message.type===ControlMessage.SYNC_ENGINE_SYNC_QUERIES_READY&&resolve(),observer.next(message)},complete:function(){resolve()},error:function(error){reject(error)}});syncQuerySubscription&&subscriptions.push(syncQuerySubscription)}))];case 7:return _c.sent(),[3,9];case 8:return error_1=_c.sent(),observer.error(error_1),[2];case 9:return subscriptions.push(this.mutationsProcessor.start().subscribe((function(_a){var modelDefinition=_a.modelDefinition,item=_a.model,hasMore=_a.hasMore,modelConstructor=_this.userModelClasses[modelDefinition.name],model=_this.modelInstanceCreator(modelConstructor,item);_this.storage.runExclusive((function(storage){return _this.modelMerger.merge(storage,model)})),observer.next({type:ControlMessage.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED,data:{model:modelConstructor,element:model}}),observer.next({type:ControlMessage.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!hasMore}})}))),isNode||subscriptions.push(dataSubsObservable.subscribe((function(_a){var _b=lib_esm_sync_read(_a,3),modelDefinition=(_b[0],_b[1]),item=_b[2],modelConstructor=_this.userModelClasses[modelDefinition.name],model=_this.modelInstanceCreator(modelConstructor,item);_this.storage.runExclusive((function(storage){return _this.modelMerger.merge(storage,model)}))}))),[3,11];case 10:online||(this.online=online,observer.next({type:ControlMessage.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),subscriptions.forEach((function(sub){return sub.unsubscribe()})),subscriptions=[]),_c.label=11;case 11:return resolve(),[2]}}))}))}))})),this.storage.observe(null,null,ownSymbol).filter((function(_a){var model=_a.model;return!0===_this.getModelDefinition(model).syncable})).subscribe({next:function(_a){var opType=_a.opType,model=_a.model,element=_a.element,condition=_a.condition;return lib_esm_sync_awaiter(_this,void 0,void 0,(function(){var namespace,MutationEventConstructor,graphQLCondition,mutationEvent;return lib_esm_sync_generator(this,(function(_b){switch(_b.label){case 0:return namespace=this.schema.namespaces[this.namespaceResolver(model)],MutationEventConstructor=this.modelClasses.MutationEvent,graphQLCondition=Object(utils.g)(condition),mutationEvent=Object(utils.d)(namespace.relationships,this.getModelDefinition(model),opType,model,element,graphQLCondition,MutationEventConstructor,this.modelInstanceCreator),[4,this.outbox.enqueue(this.storage,mutationEvent)];case 1:return _b.sent(),observer.next({type:ControlMessage.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED,data:{model:model,element:element}}),observer.next({type:ControlMessage.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!1}}),[4,startPromise];case 2:return _b.sent(),this.online&&this.mutationsProcessor.resume(),[2]}}))}))}}),observer.next({type:ControlMessage.SYNC_ENGINE_STORAGE_SUBSCRIBED}),[4,this.outbox.peek(this.storage)];case 4:return hasMutationsInOutbox=void 0===_a.sent(),observer.next({type:ControlMessage.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:hasMutationsInOutbox}}),[4,startPromise];case 5:return _a.sent(),observer.next({type:ControlMessage.SYNC_ENGINE_READY}),[2]}}))})),function(){subscriptions.forEach((function(sub){return sub.unsubscribe()}))}}))},SyncEngine.prototype.getModelsMetadataWithNextFullSync=function(currentTimeStamp){return lib_esm_sync_awaiter(this,void 0,void 0,(function(){var _a,_this=this;return lib_esm_sync_generator(this,(function(_b){switch(_b.label){case 0:return _a=Map.bind,[4,this.getModelsMetadata()];case 1:return[2,new(_a.apply(Map,[void 0,_b.sent().map((function(_a){var namespace=_a.namespace,model=_a.model,lastSync=_a.lastSync,lastFullSync=_a.lastFullSync,fullSyncInterval=_a.fullSyncInterval,syncFrom=(_a.lastSyncPredicate,!lastFullSync||lastFullSync+fullSyncInterval<currentTimeStamp?0:lastSync);return[_this.schema.namespaces[namespace].models[model],[namespace,syncFrom]]}))]))]}}))}))},SyncEngine.prototype.syncQueriesObservable=function(){var _this=this;return this.online?new bundle_esm.a((function(observer){var syncQueriesSubscription,waitTimeoutId;return lib_esm_sync_awaiter(_this,void 0,void 0,(function(){var _loop_1,this_1,_this=this;return lib_esm_sync_generator(this,(function(_a){switch(_a.label){case 0:_loop_1=function(){var count,modelLastSync,paginatingModels,newestFullSyncStartedAt,theInterval,start,duration,newestStartedAt,msNextFullSync;return lib_esm_sync_generator(this,(function(_a){switch(_a.label){case 0:return count=new WeakMap,[4,this_1.getModelsMetadataWithNextFullSync(Date.now())];case 1:return modelLastSync=_a.sent(),paginatingModels=new Set(modelLastSync.keys()),[4,new Promise((function(resolve){syncQueriesSubscription=_this.syncQueriesProcessor.start(modelLastSync).subscribe({next:function(_a){var namespace=_a.namespace,modelDefinition=_a.modelDefinition,items=_a.items,done=_a.done,startedAt=_a.startedAt,isFullSync=_a.isFullSync;return lib_esm_sync_awaiter(_this,void 0,void 0,(function(){var modelConstructor,modelName,modelMetadata_1,lastFullSync,fullSyncInterval,counts,_this=this;return lib_esm_sync_generator(this,(function(_b){switch(_b.label){case 0:return modelConstructor=this.userModelClasses[modelDefinition.name],count.has(modelConstructor)||(count.set(modelConstructor,{new:0,updated:0,deleted:0}),start=Object(util.i)(),newestStartedAt=void 0===newestStartedAt?startedAt:Math.max(newestStartedAt,startedAt)),[4,this.storage.runExclusive((function(storage){return lib_esm_sync_awaiter(_this,void 0,void 0,(function(){var idsInOutbox,oneByOne,page,opTypeCount,oneByOne_1,oneByOne_1_1,item,opType,e_1_1,_a,_b,_c,counts,e_1,_d;return lib_esm_sync_generator(this,(function(_e){switch(_e.label){case 0:return[4,this.outbox.getModelIds(storage)];case 1:idsInOutbox=_e.sent(),oneByOne=[],page=items.filter((function(item){return!idsInOutbox.has(item.id)||(oneByOne.push(item),!1)})),opTypeCount=[],_e.label=2;case 2:_e.trys.push([2,7,8,9]),oneByOne_1=lib_esm_sync_values(oneByOne),oneByOne_1_1=oneByOne_1.next(),_e.label=3;case 3:return oneByOne_1_1.done?[3,6]:(item=oneByOne_1_1.value,[4,this.modelMerger.merge(storage,item)]);case 4:void 0!==(opType=_e.sent())&&opTypeCount.push([item,opType]),_e.label=5;case 5:return oneByOne_1_1=oneByOne_1.next(),[3,3];case 6:return[3,9];case 7:return e_1_1=_e.sent(),e_1={error:e_1_1},[3,9];case 8:try{oneByOne_1_1&&!oneByOne_1_1.done&&(_d=oneByOne_1.return)&&_d.call(oneByOne_1)}finally{if(e_1)throw e_1.error}return[7];case 9:return _b=(_a=opTypeCount.push).apply,_c=[opTypeCount],[4,this.modelMerger.mergePage(storage,modelConstructor,page)];case 10:return _b.apply(_a,_c.concat([__spread.apply(void 0,[_e.sent()])])),counts=count.get(modelConstructor),opTypeCount.forEach((function(_a){var opType=lib_esm_sync_read(_a,2)[1];switch(opType){case types.c.INSERT:counts.new++;break;case types.c.UPDATE:counts.updated++;break;case types.c.DELETE:counts.deleted++;break;default:Object(util.f)(opType)}})),[2]}}))}))}))];case 1:return _b.sent(),done?(modelName=modelDefinition.name,[4,this.getModelMetadata(namespace,modelName)]):[3,4];case 2:return modelMetadata_1=_b.sent(),lastFullSync=modelMetadata_1.lastFullSync,fullSyncInterval=modelMetadata_1.fullSyncInterval,theInterval=fullSyncInterval,newestFullSyncStartedAt=void 0===newestFullSyncStartedAt?lastFullSync:Math.max(newestFullSyncStartedAt,isFullSync?startedAt:lastFullSync),modelMetadata_1=this.modelClasses.ModelMetadata.copyOf(modelMetadata_1,(function(draft){draft.lastSync=startedAt,draft.lastFullSync=isFullSync?startedAt:modelMetadata_1.lastFullSync})),[4,this.storage.save(modelMetadata_1,void 0,ownSymbol)];case 3:_b.sent(),counts=count.get(modelConstructor),observer.next({type:ControlMessage.SYNC_ENGINE_MODEL_SYNCED,data:{model:modelConstructor,isFullSync:isFullSync,isDeltaSync:!isFullSync,counts:counts}}),paginatingModels.delete(modelDefinition),0===paginatingModels.size&&(duration=Object(util.i)()-start,resolve(),observer.next({type:ControlMessage.SYNC_ENGINE_SYNC_QUERIES_READY}),syncQueriesSubscription.unsubscribe()),_b.label=4;case 4:return[2]}}))}))},error:function(error){observer.error(error)}}),observer.next({type:ControlMessage.SYNC_ENGINE_SYNC_QUERIES_STARTED,data:{models:Array.from(paginatingModels).map((function(_a){return _a.name}))}})}))];case 2:return _a.sent(),msNextFullSync=newestFullSyncStartedAt+theInterval-(newestStartedAt+duration),lib_esm_sync_logger.debug("Next fullSync in "+msNextFullSync/1e3+" seconds. ("+new Date(Date.now()+msNextFullSync)+")"),[4,new Promise((function(res){waitTimeoutId=setTimeout(res,msNextFullSync)}))];case 3:return _a.sent(),[2]}}))},this_1=this,_a.label=1;case 1:return observer.closed?[3,3]:[5,_loop_1()];case 2:return _a.sent(),[3,1];case 3:return[2]}}))})),function(){syncQueriesSubscription&&syncQueriesSubscription.unsubscribe(),waitTimeoutId&&clearTimeout(waitTimeoutId)}})):bundle_esm.a.of()},SyncEngine.prototype.disconnectionHandler=function(){var _this=this;return function(msg){lib_esm.a.CONNECTION_CLOSED!==msg&&lib_esm.a.TIMEOUT_DISCONNECT!==msg||_this.datastoreConnectivity.socketDisconnected()}},SyncEngine.prototype.unsubscribeConnectivity=function(){this.datastoreConnectivity.unsubscribe()},SyncEngine.prototype.setupModels=function(params){return lib_esm_sync_awaiter(this,void 0,void 0,(function(){var fullSyncInterval,ModelMetadata,models,savedModel,promises,result,_a,_b,modelMetadata,modelName,e_2_1,e_2,_c,_this=this;return lib_esm_sync_generator(this,(function(_d){switch(_d.label){case 0:fullSyncInterval=params.fullSyncInterval,ModelMetadata=this.modelClasses.ModelMetadata,models=[],Object.values(this.schema.namespaces).forEach((function(namespace){Object.values(namespace.models).filter((function(_a){return _a.syncable})).forEach((function(model){models.push([namespace.name,model])}))})),promises=models.map((function(_a){var _b=lib_esm_sync_read(_a,2),namespace=_b[0],model=_b[1];return lib_esm_sync_awaiter(_this,void 0,void 0,(function(){var modelMetadata,syncPredicate,lastSyncPredicate,prevSyncPredicate,syncPredicateUpdated_1,_c,_d,_e,_f;return lib_esm_sync_generator(this,(function(_g){switch(_g.label){case 0:return[4,this.getModelMetadata(namespace,model.name)];case 1:return modelMetadata=_g.sent(),syncPredicate=lib_esm_predicates.a.getPredicates(this.syncPredicates.get(model),!1),lastSyncPredicate=syncPredicate?JSON.stringify(syncPredicate):null,void 0!==modelMetadata?[3,3]:[4,this.storage.save(this.modelInstanceCreator(ModelMetadata,{model:model.name,namespace:namespace,lastSync:null,fullSyncInterval:fullSyncInterval,lastFullSync:null,lastSyncPredicate:lastSyncPredicate}),void 0,ownSymbol)];case 2:return _c=lib_esm_sync_read.apply(void 0,[_g.sent(),1]),_d=lib_esm_sync_read(_c[0],1),savedModel=_d[0],[3,5];case 3:return prevSyncPredicate=modelMetadata.lastSyncPredicate?modelMetadata.lastSyncPredicate:null,syncPredicateUpdated_1=prevSyncPredicate!==lastSyncPredicate,[4,this.storage.save(this.modelClasses.ModelMetadata.copyOf(modelMetadata,(function(draft){draft.fullSyncInterval=fullSyncInterval,syncPredicateUpdated_1&&(draft.lastSync=null,draft.lastFullSync=null,draft.lastSyncPredicate=lastSyncPredicate)})))];case 4:_e=lib_esm_sync_read.apply(void 0,[_g.sent(),1]),_f=lib_esm_sync_read(_e[0],1),savedModel=_f[0],_g.label=5;case 5:return[2,savedModel]}}))}))})),result={},_d.label=1;case 1:return _d.trys.push([1,6,7,8]),[4,Promise.all(promises)];case 2:_a=lib_esm_sync_values.apply(void 0,[_d.sent()]),_b=_a.next(),_d.label=3;case 3:if(_b.done)return[3,5];modelMetadata=_b.value,modelName=modelMetadata.model,result[modelName]=modelMetadata,_d.label=4;case 4:return _b=_a.next(),[3,3];case 5:return[3,8];case 6:return e_2_1=_d.sent(),e_2={error:e_2_1},[3,8];case 7:try{_b&&!_b.done&&(_c=_a.return)&&_c.call(_a)}finally{if(e_2)throw e_2.error}return[7];case 8:return[2,result]}}))}))},SyncEngine.prototype.getModelsMetadata=function(){return lib_esm_sync_awaiter(this,void 0,void 0,(function(){var ModelMetadata;return lib_esm_sync_generator(this,(function(_a){switch(_a.label){case 0:return ModelMetadata=this.modelClasses.ModelMetadata,[4,this.storage.query(ModelMetadata)];case 1:return[2,_a.sent()]}}))}))},SyncEngine.prototype.getModelMetadata=function(namespace,model){return lib_esm_sync_awaiter(this,void 0,void 0,(function(){var ModelMetadata,predicate,_a;return lib_esm_sync_generator(this,(function(_b){switch(_b.label){case 0:return ModelMetadata=this.modelClasses.ModelMetadata,predicate=lib_esm_predicates.a.createFromExisting(this.schema.namespaces[util.c].models[ModelMetadata.name],(function(c){return c.namespace("eq",namespace).model("eq",model)})),[4,this.storage.query(ModelMetadata,predicate,{page:0,limit:1})];case 1:return _a=lib_esm_sync_read.apply(void 0,[_b.sent(),1]),[2,_a[0]]}}))}))},SyncEngine.prototype.getModelDefinition=function(modelConstructor){var namespaceName=this.namespaceResolver(modelConstructor);return this.schema.namespaces[namespaceName].models[modelConstructor.name]},SyncEngine.getNamespace=function(){return{name:util.c,relationships:{},enums:{OperationType:{name:"OperationType",values:["CREATE","UPDATE","DELETE"]}},nonModels:{},models:{MutationEvent:{name:"MutationEvent",pluralName:"MutationEvents",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},data:{name:"data",type:"String",isRequired:!0,isArray:!1},modelId:{name:"modelId",type:"String",isRequired:!0,isArray:!1},operation:{name:"operation",type:{enum:"Operationtype"},isArray:!1,isRequired:!0},condition:{name:"condition",type:"String",isArray:!1,isRequired:!0}}},ModelMetadata:{name:"ModelMetadata",pluralName:"ModelsMetadata",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},namespace:{name:"namespace",type:"String",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},lastSync:{name:"lastSync",type:"Int",isRequired:!1,isArray:!1},lastFullSync:{name:"lastFullSync",type:"Int",isRequired:!1,isArray:!1},fullSyncInterval:{name:"fullSyncInterval",type:"Int",isRequired:!0,isArray:!1}}}}}},SyncEngine}();__webpack_require__.d(__webpack_exports__,"a",(function(){return datastore_instance}));var datastore_assign=function(){return(datastore_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},datastore_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},datastore_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},datastore_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},datastore_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};ft(!0),F();var datastore_schema,dataStoreClasses,userClasses,syncClasses,storageClasses,datastore_logger=new ConsoleLogger.a("DataStore"),datastore_isNode=(Object(util.v)(Date.now()),JS.a.browserOrNode().isNode),modelNamespaceMap=new WeakMap,modelPatchesMap=new WeakMap,getModelDefinition=function(modelConstructor){var namespace=modelNamespaceMap.get(modelConstructor);return datastore_schema.namespaces[namespace].models[modelConstructor.name]},isValidModelConstructor=function(obj){return Object(util.s)(obj)&&modelNamespaceMap.has(obj)},datastore_namespaceResolver=function(modelConstructor){return modelNamespaceMap.get(modelConstructor)},instancesMetadata=new WeakSet;function datastore_modelInstanceCreator(modelConstructor,init){return instancesMetadata.add(init),new modelConstructor(init)}var syncSubscription;function isQueryOne(obj){return"string"==typeof obj}function defaultConflictHandler(conflictData){var localModel=conflictData.localModel,modelConstructor=conflictData.modelConstructor,_version=conflictData.remoteModel._version;return datastore_modelInstanceCreator(modelConstructor,datastore_assign(datastore_assign({},localModel),{_version:_version}))}function defaultErrorHandler(error){datastore_logger.warn(error)}function datastore_getModelConstructorByModelName(namespaceName,modelName){var result;switch(namespaceName){case util.a:result=dataStoreClasses[modelName];break;case util.d:result=userClasses[modelName];break;case util.c:result=syncClasses[modelName];break;case util.b:result=storageClasses[modelName];break;default:Object(util.f)(namespaceName)}if(isValidModelConstructor(result))return result;var msg="Model name is not valid for namespace. modelName: "+modelName+", namespace: "+namespaceName;throw datastore_logger.error(msg),new Error(msg)}function checkSchemaVersion(storage,version){return datastore_awaiter(this,void 0,void 0,(function(){var Setting,modelDefinition,_this=this;return datastore_generator(this,(function(_a){switch(_a.label){case 0:return Setting=dataStoreClasses.Setting,modelDefinition=datastore_schema.namespaces[util.a].models.Setting,[4,storage.runExclusive((function(s){return datastore_awaiter(_this,void 0,void 0,(function(){var _a,schemaVersionSetting;return datastore_generator(this,(function(_b){switch(_b.label){case 0:return[4,s.query(Setting,lib_esm_predicates.a.createFromExisting(modelDefinition,(function(c){return c.key("eq","schemaVersion")})),{page:0,limit:1})];case 1:return _a=datastore_read.apply(void 0,[_b.sent(),1]),void 0===(schemaVersionSetting=_a[0])||void 0===schemaVersionSetting.value?[3,4]:JSON.parse(schemaVersionSetting.value)===version?[3,3]:[4,s.clear(!1)];case 2:_b.sent(),_b.label=3;case 3:return[3,6];case 4:return[4,s.save(datastore_modelInstanceCreator(Setting,{key:"schemaVersion",value:JSON.stringify(version)}))];case 5:_b.sent(),_b.label=6;case 6:return[2]}}))}))}))];case 1:return _a.sent(),[2]}}))}))}var datastore_instance=new(function(){function DataStore(){var _this=this;this.amplifyConfig={},this.syncPredicates=new WeakMap,this.start=function(){return datastore_awaiter(_this,void 0,void 0,(function(){var aws_appsync_graphqlEndpoint,_a,fullSyncIntervalInMilliseconds,_this=this;return datastore_generator(this,(function(_b){switch(_b.label){case 0:return void 0!==this.initialized?[3,1]:(datastore_logger.debug("Starting DataStore"),this.initialized=new Promise((function(res,rej){_this.initResolve=res,_this.initReject=rej})),[3,3]);case 1:return[4,this.initialized];case 2:return _b.sent(),[2];case 3:return this.storage=new storage_ExclusiveStorage(datastore_schema,datastore_namespaceResolver,datastore_getModelConstructorByModelName,datastore_modelInstanceCreator,void 0,this.sessionId),[4,this.storage.init()];case 4:return _b.sent(),[4,checkSchemaVersion(this.storage,datastore_schema.version)];case 5:return _b.sent(),(aws_appsync_graphqlEndpoint=this.amplifyConfig.aws_appsync_graphqlEndpoint)?(datastore_logger.debug("GraphQL endpoint available",aws_appsync_graphqlEndpoint),_a=this,[4,this.processSyncExpressions()]):[3,7];case 6:return _a.syncPredicates=_b.sent(),this.sync=new sync_SyncEngine(datastore_schema,datastore_namespaceResolver,syncClasses,userClasses,this.storage,datastore_modelInstanceCreator,this.maxRecordsToSync,this.syncPageSize,this.conflictHandler,this.errorHandler,this.syncPredicates,this.amplifyConfig),fullSyncIntervalInMilliseconds=1e3*this.fullSyncInterval*60,syncSubscription=this.sync.start({fullSyncInterval:fullSyncIntervalInMilliseconds}).subscribe({next:function(_a){var type=_a.type,data=_a.data;type===(datastore_isNode?ControlMessage.SYNC_ENGINE_SYNC_QUERIES_READY:ControlMessage.SYNC_ENGINE_STORAGE_SUBSCRIBED)&&_this.initResolve(),Hub.a.dispatch("datastore",{event:type,data:data})},error:function(err){datastore_logger.warn("Sync error",err),_this.initReject()}}),[3,8];case 7:datastore_logger.warn("Data won't be synchronized. No GraphQL endpoint configured. Did you forget `Amplify.configure(awsconfig)`?",{config:this.amplifyConfig}),this.initResolve(),_b.label=8;case 8:return[4,this.initialized];case 9:return _b.sent(),[2]}}))}))},this.query=function(modelConstructor,idOrCriteria,paginationProducer){return datastore_awaiter(_this,void 0,void 0,(function(){var msg,modelDefinition,predicate,pagination,result;return datastore_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.start()];case 1:if(_a.sent(),!isValidModelConstructor(modelConstructor))throw msg="Constructor is not for a valid model",datastore_logger.error(msg,{modelConstructor:modelConstructor}),new Error(msg);return"string"==typeof idOrCriteria&&void 0!==paginationProducer&&datastore_logger.warn("Pagination is ignored when querying by id"),modelDefinition=getModelDefinition(modelConstructor),predicate=isQueryOne(idOrCriteria)?lib_esm_predicates.a.createForId(modelDefinition,idOrCriteria):Object(lib_esm_predicates.c)(idOrCriteria)?void 0:lib_esm_predicates.a.createFromExisting(modelDefinition,idOrCriteria),pagination=this.processPagination(modelDefinition,paginationProducer),datastore_logger.debug("params ready",{modelConstructor:modelConstructor,predicate:lib_esm_predicates.a.getPredicates(predicate,!1),pagination:datastore_assign(datastore_assign({},pagination),{sort:predicates_sort.a.getPredicates(pagination.sort,!1)})}),[4,this.storage.query(modelConstructor,predicate,pagination)];case 2:return result=_a.sent(),[2,isQueryOne(idOrCriteria)?result[0]:result]}}))}))},this.save=function(model,condition){return datastore_awaiter(_this,void 0,void 0,(function(){var patches,modelConstructor,msg,modelDefinition,producedCondition,_a,_this=this;return datastore_generator(this,(function(_b){switch(_b.label){case 0:return[4,this.start()];case 1:if(_b.sent(),patches=modelPatchesMap.get(model),modelConstructor=model?model.constructor:void 0,!isValidModelConstructor(modelConstructor))throw msg="Object is not an instance of a valid model",datastore_logger.error(msg,{model:model}),new Error(msg);return modelDefinition=getModelDefinition(modelConstructor),producedCondition=lib_esm_predicates.a.createFromExisting(modelDefinition,condition),[4,this.storage.runExclusive((function(s){return datastore_awaiter(_this,void 0,void 0,(function(){return datastore_generator(this,(function(_a){switch(_a.label){case 0:return[4,s.save(model,producedCondition,void 0,patches)];case 1:return _a.sent(),[2,s.query(modelConstructor,lib_esm_predicates.a.createForId(modelDefinition,model.id))]}}))}))}))];case 2:return _a=datastore_read.apply(void 0,[_b.sent(),1]),[2,_a[0]]}}))}))},this.setConflictHandler=function(config){var configDataStore=config.DataStore;return configDataStore?configDataStore.conflictHandler:_this.conflictHandler===defaultConflictHandler&&config.conflictHandler?config.conflictHandler:_this.conflictHandler||defaultConflictHandler},this.setErrorHandler=function(config){var configDataStore=config.DataStore;return configDataStore?configDataStore.errorHandler:_this.errorHandler===defaultErrorHandler&&config.errorHandler?config.errorHandler:_this.errorHandler||defaultErrorHandler},this.delete=function(modelOrConstructor,idOrCriteria){return datastore_awaiter(_this,void 0,void 0,(function(){var condition,_a,model,modelConstructor,modelDefinition,idPredicate,msg,_b,_c;return datastore_generator(this,(function(_d){switch(_d.label){case 0:return[4,this.start()];case 1:if(_d.sent(),!modelOrConstructor)throw msg="Model or Model Constructor required",datastore_logger.error(msg,{modelOrConstructor:modelOrConstructor}),new Error(msg);if(!isValidModelConstructor(modelOrConstructor))return[3,3];if(modelConstructor=modelOrConstructor,!idOrCriteria)throw msg="Id to delete or criteria required. Do you want to delete all? Pass Predicates.ALL",datastore_logger.error(msg,{idOrCriteria:idOrCriteria}),new Error(msg);if("string"==typeof idOrCriteria)condition=lib_esm_predicates.a.createForId(getModelDefinition(modelConstructor),idOrCriteria);else if(!(condition=lib_esm_predicates.a.createFromExisting(getModelDefinition(modelConstructor),idOrCriteria))||!lib_esm_predicates.a.isValidPredicate(condition))throw msg="Criteria required. Do you want to delete all? Pass Predicates.ALL",datastore_logger.error(msg,{condition:condition}),new Error(msg);return[4,this.storage.delete(modelConstructor,condition)];case 2:return _a=datastore_read.apply(void 0,[_d.sent(),1]),[2,_a[0]];case 3:if(model=modelOrConstructor,modelConstructor=Object.getPrototypeOf(model||{}).constructor,!isValidModelConstructor(modelConstructor))throw msg="Object is not an instance of a valid model",datastore_logger.error(msg,{model:model}),new Error(msg);if(modelDefinition=getModelDefinition(modelConstructor),idPredicate=lib_esm_predicates.a.createForId(modelDefinition,model.id),idOrCriteria){if("function"!=typeof idOrCriteria)throw msg="Invalid criteria",datastore_logger.error(msg,{idOrCriteria:idOrCriteria}),new Error(msg);condition=idOrCriteria(idPredicate)}else condition=idPredicate;return[4,this.storage.delete(model,condition)];case 4:return _b=datastore_read.apply(void 0,[_d.sent(),1]),_c=datastore_read(_b[0],1),[2,_c[0]]}}))}))},this.observe=function(modelOrConstructor,idOrCriteria){var predicate,modelConstructor=modelOrConstructor&&isValidModelConstructor(modelOrConstructor)?modelOrConstructor:void 0;if(modelOrConstructor&&void 0===modelConstructor){var model=modelOrConstructor,modelConstructor_1=model&&Object.getPrototypeOf(model).constructor;if(isValidModelConstructor(modelConstructor_1))return idOrCriteria&&datastore_logger.warn("idOrCriteria is ignored when using a model instance",{model:model,idOrCriteria:idOrCriteria}),_this.observe(modelConstructor_1,model.id);var msg="The model is not an instance of a PersistentModelConstructor";throw datastore_logger.error(msg,{model:model}),new Error(msg)}if(void 0!==idOrCriteria&&void 0===modelConstructor){msg="Cannot provide criteria without a modelConstructor";throw datastore_logger.error(msg,idOrCriteria),new Error(msg)}if(modelConstructor&&!isValidModelConstructor(modelConstructor)){msg="Constructor is not for a valid model";throw datastore_logger.error(msg,{modelConstructor:modelConstructor}),new Error(msg)}return predicate="string"==typeof idOrCriteria?lib_esm_predicates.a.createForId(getModelDefinition(modelConstructor),idOrCriteria):modelConstructor&&lib_esm_predicates.a.createFromExisting(getModelDefinition(modelConstructor),idOrCriteria),new bundle_esm.a((function(observer){var handle;return datastore_awaiter(_this,void 0,void 0,(function(){return datastore_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.start()];case 1:return _a.sent(),handle=this.storage.observe(modelConstructor,predicate).filter((function(_a){var model=_a.model;return datastore_namespaceResolver(model)===util.d})).subscribe(observer),[2]}}))})),function(){handle&&handle.unsubscribe()}}))},this.configure=function(config){void 0===config&&(config={});var configDataStore=config.DataStore,configMaxRecordsToSync=(config.conflictHandler,config.errorHandler,config.maxRecordsToSync),configSyncPageSize=config.syncPageSize,configFullSyncInterval=config.fullSyncInterval,configSyncExpressions=config.syncExpressions,configFromAmplify=datastore_rest(config,["DataStore","conflictHandler","errorHandler","maxRecordsToSync","syncPageSize","fullSyncInterval","syncExpressions"]);_this.amplifyConfig=datastore_assign(datastore_assign({},configFromAmplify),_this.amplifyConfig),_this.conflictHandler=_this.setConflictHandler(config),_this.errorHandler=_this.setErrorHandler(config),_this.syncExpressions=configDataStore&&configDataStore.syncExpressions||_this.syncExpressions||configSyncExpressions,_this.maxRecordsToSync=configDataStore&&configDataStore.maxRecordsToSync||_this.maxRecordsToSync||configMaxRecordsToSync,_this.syncPageSize=configDataStore&&configDataStore.syncPageSize||_this.syncPageSize||configSyncPageSize,_this.fullSyncInterval=configDataStore&&configDataStore.fullSyncInterval||_this.fullSyncInterval||configFullSyncInterval||1440,_this.sessionId=_this.retrieveSessionId()},this.clear=function(){return datastore_awaiter(this,void 0,void 0,(function(){return datastore_generator(this,(function(_a){switch(_a.label){case 0:return void 0===this.storage?[2]:(syncSubscription&&!syncSubscription.closed&&syncSubscription.unsubscribe(),[4,this.storage.clear()]);case 1:return _a.sent(),this.sync&&this.sync.unsubscribeConnectivity(),this.initialized=void 0,this.storage=void 0,this.sync=void 0,this.syncPredicates=new WeakMap,[2]}}))}))},this.stop=function(){return datastore_awaiter(this,void 0,void 0,(function(){return datastore_generator(this,(function(_a){switch(_a.label){case 0:return void 0===this.initialized?[3,2]:[4,this.start()];case 1:_a.sent(),_a.label=2;case 2:return syncSubscription&&!syncSubscription.closed&&syncSubscription.unsubscribe(),this.sync&&this.sync.unsubscribeConnectivity(),this.initialized=void 0,this.sync=void 0,[2]}}))}))}}return DataStore.prototype.getModuleName=function(){return"DataStore"},DataStore.prototype.processPagination=function(modelDefinition,paginationProducer){var sortPredicate,_a=paginationProducer||{},limit=_a.limit,page=_a.page,sort=_a.sort;if(void 0!==page&&void 0===limit)throw new Error("Limit is required when requesting a page");if(void 0!==page){if("number"!=typeof page)throw new Error("Page should be a number");if(page<0)throw new Error("Page can't be negative")}if(void 0!==limit){if("number"!=typeof limit)throw new Error("Limit should be a number");if(limit<0)throw new Error("Limit can't be negative")}return sort&&(sortPredicate=predicates_sort.a.createFromExisting(modelDefinition,paginationProducer.sort)),{limit:limit,page:page,sort:sortPredicate}},DataStore.prototype.processSyncExpressions=function(){return datastore_awaiter(this,void 0,void 0,(function(){var syncPredicates,_this=this;return datastore_generator(this,(function(_a){switch(_a.label){case 0:return this.syncExpressions&&this.syncExpressions.length?[4,Promise.all(this.syncExpressions.map((function(syncExpression){return datastore_awaiter(_this,void 0,void 0,(function(){var _a,modelConstructor,conditionProducer,modelDefinition,condition,predicate;return datastore_generator(this,(function(_b){switch(_b.label){case 0:return[4,syncExpression];case 1:return _a=_b.sent(),modelConstructor=_a.modelConstructor,conditionProducer=_a.conditionProducer,modelDefinition=getModelDefinition(modelConstructor),[4,this.unwrapPromise(conditionProducer)];case 2:return condition=_b.sent(),Object(lib_esm_predicates.c)(condition)?[2,[modelDefinition,null]]:(predicate=this.createFromCondition(modelDefinition,condition),[2,[modelDefinition,predicate]])}}))}))})))]:[2,new WeakMap];case 1:return syncPredicates=_a.sent(),[2,this.weakMapFromEntries(syncPredicates)]}}))}))},DataStore.prototype.createFromCondition=function(modelDefinition,condition){try{return lib_esm_predicates.a.createFromExisting(modelDefinition,condition)}catch(error){throw datastore_logger.error("Error creating Sync Predicate"),error}},DataStore.prototype.unwrapPromise=function(conditionProducer){return datastore_awaiter(this,void 0,void 0,(function(){var error_1;return datastore_generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,conditionProducer()];case 1:return[2,_a.sent()];case 2:if((error_1=_a.sent())instanceof TypeError)return[2,conditionProducer];throw error_1;case 3:return[2]}}))}))},DataStore.prototype.weakMapFromEntries=function(entries){return entries.reduce((function(map,_a){var _b=datastore_read(_a,2),modelDefinition=_b[0],predicate=_b[1];if(map.has(modelDefinition)){var name_2=modelDefinition.name;return datastore_logger.warn("You can only utilize one Sync Expression per model.\n          Subsequent sync expressions for the "+name_2+" model will be ignored."),map}return predicate&&map.set(modelDefinition,predicate),map}),new WeakMap)},DataStore.prototype.retrieveSessionId=function(){try{var sessionId=sessionStorage.getItem("datastoreSessionId");if(sessionId){var appSyncUrl=this.amplifyConfig.aws_appsync_graphqlEndpoint.split("/")[2];return sessionId+"-"+datastore_read(appSyncUrl.split("."),1)[0]}}catch(_b){return}},DataStore}());Amplify.a.register(datastore_instance)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Scheduler}));var Scheduler=function(){function Scheduler(SchedulerAction,now){void 0===now&&(now=Scheduler.now),this.SchedulerAction=SchedulerAction,this.now=now}return Scheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),new this.SchedulerAction(this,work).schedule(state,delay)},Scheduler.now=function(){return Date.now()},Scheduler}()},function(module,exports,__webpack_require__){var CryptoJS;module.exports=(CryptoJS=__webpack_require__(48),function(Math){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,Hasher=C_lib.Hasher,C_algo=C.algo,H=[],K=[];!function(){function isPrime(n){for(var sqrtN=Math.sqrt(n),factor=2;factor<=sqrtN;factor++)if(!(n%factor))return!1;return!0}function getFractionalBits(n){return 4294967296*(n-(0|n))|0}for(var n=2,nPrime=0;nPrime<64;)isPrime(n)&&(nPrime<8&&(H[nPrime]=getFractionalBits(Math.pow(n,.5))),K[nPrime]=getFractionalBits(Math.pow(n,1/3)),nPrime++),n++}();var W=[],SHA256=C_algo.SHA256=Hasher.extend({_doReset:function(){this._hash=new WordArray.init(H.slice(0))},_doProcessBlock:function(M,offset){for(var H=this._hash.words,a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],f=H[5],g=H[6],h=H[7],i=0;i<64;i++){if(i<16)W[i]=0|M[offset+i];else{var gamma0x=W[i-15],gamma0=(gamma0x<<25|gamma0x>>>7)^(gamma0x<<14|gamma0x>>>18)^gamma0x>>>3,gamma1x=W[i-2],gamma1=(gamma1x<<15|gamma1x>>>17)^(gamma1x<<13|gamma1x>>>19)^gamma1x>>>10;W[i]=gamma0+W[i-7]+gamma1+W[i-16]}var maj=a&b^a&c^b&c,sigma0=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),t1=h+((e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25))+(e&f^~e&g)+K[i]+W[i];h=g,g=f,f=e,e=d+t1|0,d=c,c=b,b=a,a=t1+(sigma0+maj)|0}H[0]=H[0]+a|0,H[1]=H[1]+b|0,H[2]=H[2]+c|0,H[3]=H[3]+d|0,H[4]=H[4]+e|0,H[5]=H[5]+f|0,H[6]=H[6]+g|0,H[7]=H[7]+h|0},_doFinalize:function(){var data=this._data,dataWords=data.words,nBitsTotal=8*this._nDataBytes,nBitsLeft=8*data.sigBytes;return dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[14+(nBitsLeft+64>>>9<<4)]=Math.floor(nBitsTotal/4294967296),dataWords[15+(nBitsLeft+64>>>9<<4)]=nBitsTotal,data.sigBytes=4*dataWords.length,this._process(),this._hash},clone:function(){var clone=Hasher.clone.call(this);return clone._hash=this._hash.clone(),clone}});C.SHA256=Hasher._createHelper(SHA256),C.HmacSHA256=Hasher._createHmacHelper(SHA256)}(Math),CryptoJS.SHA256)},function(module,exports,__webpack_require__){var CryptoJS;module.exports=(CryptoJS=__webpack_require__(48),function(){var C=CryptoJS,WordArray=C.lib.WordArray;function parseLoop(base64Str,base64StrLength,reverseMap){for(var words=[],nBytes=0,i=0;i<base64StrLength;i++)if(i%4){var bits1=reverseMap[base64Str.charCodeAt(i-1)]<<i%4*2,bits2=reverseMap[base64Str.charCodeAt(i)]>>>6-i%4*2;words[nBytes>>>2]|=(bits1|bits2)<<24-nBytes%4*8,nBytes++}return WordArray.create(words,nBytes)}C.enc.Base64={stringify:function(wordArray){var words=wordArray.words,sigBytes=wordArray.sigBytes,map=this._map;wordArray.clamp();for(var base64Chars=[],i=0;i<sigBytes;i+=3)for(var triplet=(words[i>>>2]>>>24-i%4*8&255)<<16|(words[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|words[i+2>>>2]>>>24-(i+2)%4*8&255,j=0;j<4&&i+.75*j<sigBytes;j++)base64Chars.push(map.charAt(triplet>>>6*(3-j)&63));var paddingChar=map.charAt(64);if(paddingChar)for(;base64Chars.length%4;)base64Chars.push(paddingChar);return base64Chars.join("")},parse:function(base64Str){var base64StrLength=base64Str.length,map=this._map,reverseMap=this._reverseMap;if(!reverseMap){reverseMap=this._reverseMap=[];for(var j=0;j<map.length;j++)reverseMap[map.charCodeAt(j)]=j}var paddingChar=map.charAt(64);if(paddingChar){var paddingIndex=base64Str.indexOf(paddingChar);-1!==paddingIndex&&(base64StrLength=paddingIndex)}return parseLoop(base64Str,base64StrLength,reverseMap)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),CryptoJS.enc.Base64)},function(module,__webpack_exports__,__webpack_require__){"use strict";function getLocation(source,position){for(var match,lineRegexp=/\r\n|[\n\r]/g,line=1,column=position+1;(match=lineRegexp.exec(source.body))&&match.index<position;)line+=1,column=position+1-(match.index+match[0].length);return{line:line,column:column}}function highlightSourceAtLocation(source,location){var firstLineColumnOffset=source.locationOffset.column-1,body=whitespace(firstLineColumnOffset)+source.body,lineIndex=location.line-1,lineOffset=source.locationOffset.line-1,lineNum=location.line+lineOffset,columnOffset=1===location.line?firstLineColumnOffset:0,columnNum=location.column+columnOffset,lines=body.split(/\r\n|[\n\r]/g);return"".concat(source.name," (").concat(lineNum,":").concat(columnNum,")\n")+function(lines){var existingLines=lines.filter((function(_ref){_ref[0];return void 0!==_ref[1]})),padLen=0,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=existingLines[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var prefix=_step3.value[0];padLen=Math.max(padLen,prefix.length)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return existingLines.map((function(_ref3){var str,prefix=_ref3[0],line=_ref3[1];return whitespace(padLen-(str=prefix).length)+str+line})).join("\n")}([["".concat(lineNum-1,": "),lines[lineIndex-1]],["".concat(lineNum,": "),lines[lineIndex]],["",whitespace(columnNum-1)+"^"],["".concat(lineNum+1,": "),lines[lineIndex+1]]])}function whitespace(len){return Array(len+1).join(" ")}function GraphQLError(message,nodes,source,positions,path,originalError,extensions){var _nodes=Array.isArray(nodes)?0!==nodes.length?nodes:void 0:nodes?[nodes]:void 0,_source=source;if(!_source&&_nodes){var node=_nodes[0];_source=node&&node.loc&&node.loc.source}var _locations,_positions=positions;!_positions&&_nodes&&(_positions=_nodes.reduce((function(list,node){return node.loc&&list.push(node.loc.start),list}),[])),_positions&&0===_positions.length&&(_positions=void 0),positions&&source?_locations=positions.map((function(pos){return getLocation(source,pos)})):_nodes&&(_locations=_nodes.reduce((function(list,node){return node.loc&&list.push(getLocation(node.loc.source,node.loc.start)),list}),[]));var _extensions=extensions||originalError&&originalError.extensions;Object.defineProperties(this,{message:{value:message,enumerable:!0,writable:!0},locations:{value:_locations||void 0,enumerable:Boolean(_locations)},path:{value:path||void 0,enumerable:Boolean(path)},nodes:{value:_nodes||void 0},source:{value:_source||void 0},positions:{value:_positions||void 0},originalError:{value:originalError},extensions:{value:_extensions||void 0,enumerable:Boolean(_extensions)}}),originalError&&originalError.stack?Object.defineProperty(this,"stack",{value:originalError.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,GraphQLError):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}__webpack_require__.d(__webpack_exports__,"a",(function(){return GraphQLError})),GraphQLError.prototype=Object.create(Error.prototype,{constructor:{value:GraphQLError},name:{value:"GraphQLError"},toString:{value:function(){return function(error){var printedLocations=[];if(error.nodes){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=error.nodes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var node=_step.value;node.loc&&printedLocations.push(highlightSourceAtLocation(node.loc.source,getLocation(node.loc.source,node.loc.start)))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else if(error.source&&error.locations){var source=error.source,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=error.locations[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var location=_step2.value;printedLocations.push(highlightSourceAtLocation(source,location))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}return 0===printedLocations.length?error.message:[error.message].concat(printedLocations).join("\n\n")+"\n"}(this)}}})},,function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});exports.__esModule=!0,exports.KushkiError=void 0;var KushkiError=function(_super){function KushkiError(error,message){void 0===message&&(message=null);var _this=this,code="K"+error.code.replace("E","");return(_this=_super.call(this,code)||this).code=code,_this._customMessage=message,_this._error=error,Object.setPrototypeOf(_this,KushkiError.prototype),_this}return __extends(KushkiError,_super),KushkiError.prototype.getMessage=function(){return null!==this._customMessage?this._customMessage:this._error.message},KushkiError.prototype.getStatusCode=function(){return this._error.statusCode},KushkiError}(Error);exports.KushkiError=KushkiError},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};exports.__esModule=!0,exports.KushkiGateway=void 0;var axios_1=__webpack_require__(97),AurusError_1=__webpack_require__(355),EnvironmentEnum_1=__webpack_require__(356),PathEnum_1=__webpack_require__(357),inversify_1=__webpack_require__(42);__webpack_require__(71);var rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),UtilsService_1=__webpack_require__(135),KushkiGateway=function(){function KushkiGateway(){this._publicHeader="Public-Merchant-Id",this._contentHeader="Content-Type",this._contentJSON="application/json",this._uatUrl="",this._prodUrl="",this._kshAuthorization="KSH-Authorization"}var KushkiGateway_1;return KushkiGateway_1=KushkiGateway,KushkiGateway._aurusError=function(data){return data.hasOwnProperty("response_code")},KushkiGateway.prototype.request=function(body,headers,path,testEnv,regional){var _this=this;return rxjs_1.of(this._assignChannel(regional,path)).pipe(operators_1.switchMap((function(){var _a;return axios_1.default.post(""+(testEnv?_this._uatUrl:_this._prodUrl),body,{headers:__assign(__assign({},headers),(_a={},_a[_this._contentHeader]=_this._contentJSON,_a))})})),operators_1.map((function(response){return response.data})),operators_1.catchError((function(err){if(KushkiGateway_1._aurusError(UtilsService_1.UtilsService.sGet(err,"response.data",{})))throw new AurusError_1.AurusError(UtilsService_1.UtilsService.sGet(err,"response.data.response_code"),UtilsService_1.UtilsService.sGet(err,"response.data.response_text"));return rxjs_1.throwError(err)})))},KushkiGateway.prototype.requestGet=function(path,testEnv,regional,mid){var _this=this;return rxjs_1.of(this._assignChannel(regional,path)).pipe(operators_1.switchMap((function(){var _a;return axios_1.default.get(""+(testEnv?_this._uatUrl:_this._prodUrl),{headers:(_a={},_a[_this._publicHeader]=mid,_a[_this._contentHeader]=_this._contentJSON,_a)})})),operators_1.map((function(response){return response.data})),operators_1.catchError((function(err){return rxjs_1.throwError(err)})))},KushkiGateway.prototype.requestDelete=function(path,testEnv,regional,mid,authorization){var _this=this;return rxjs_1.of(this._assignChannel(regional,path)).pipe(operators_1.switchMap((function(){var _a;return axios_1.default.delete(""+(testEnv?_this._uatUrl:_this._prodUrl),{headers:(_a={},_a[_this._contentHeader]=_this._contentJSON,_a[_this._kshAuthorization]=authorization,_a[_this._publicHeader]=mid,_a)})})),operators_1.map((function(response){return response.data})),operators_1.catchError((function(err){return rxjs_1.throwError(err)})))},KushkiGateway.prototype.requestBrandsByMerchant=function(mid,testEnv,regional){return this.requestGet(""+PathEnum_1.PathEnum.brands_by_merchant,testEnv,regional,mid)},KushkiGateway.prototype.requestToken=function(body,mid,testEnv,regional,authorization){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){var _a,_b;return rxjs_1.iif((function(){return void 0===authorization}),_this.request(body,((_a={})[_this._publicHeader]=mid,_a),PathEnum_1.PathEnum.card_tokens,testEnv,regional),_this.request(body,((_b={})[_this._kshAuthorization]=authorization,_b[_this._publicHeader]=mid,_b),PathEnum_1.PathEnum.card_tokens,testEnv,regional))})))},KushkiGateway.prototype.requestDeviceToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(body,_this._buildHeader(mid),""+PathEnum_1.PathEnum.card_token_charge+body.subscriptionId+"/tokens",testEnv,regional)})))},KushkiGateway.prototype.requestSubscriptionToken=function(body,mid,testEnv,regional,authorization){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){var _a,_b;return rxjs_1.iif((function(){return void 0===authorization}),_this.request(body,((_a={})[_this._publicHeader]=mid,_a),PathEnum_1.PathEnum.card_subscription_tokens,testEnv,regional),_this.request(body,((_b={})[_this._kshAuthorization]=authorization,_b[_this._publicHeader]=mid,_b),PathEnum_1.PathEnum.card_subscription_tokens,testEnv,regional))})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestTransferToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(body,_this._buildHeader(mid),PathEnum_1.PathEnum.transfer_tokens,testEnv,regional)})))},KushkiGateway.prototype.requestMerchantSettings=function(mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.requestGet(PathEnum_1.PathEnum.merchant_settings+"settings",testEnv,regional,mid)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestPseBankList=function(mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.requestGet(PathEnum_1.PathEnum.bank_list,testEnv,regional,mid)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestDeferredConditions=function(mid,bin,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.requestGet(""+PathEnum_1.PathEnum.deferred_options+bin,testEnv,regional,mid)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestBinInfo=function(mid,bin,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.requestGet(""+PathEnum_1.PathEnum.bin_info+bin,testEnv,regional,mid)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestCashToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(body,_this._buildHeader(mid),PathEnum_1.PathEnum.cash_tokens,testEnv,regional)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.checkStatus=function(mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.requestGet(""+PathEnum_1.PathEnum.gateway_status,testEnv,regional,mid)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestSecureServiceValidation=function(mid,request,isTest,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(request,_this._buildHeader(mid),""+PathEnum_1.PathEnum.secure_validation,isTest,regional)})))},KushkiGateway.prototype.requestCardAsyncToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(body,_this._buildHeader(mid),PathEnum_1.PathEnum.card_async_tokens,testEnv,regional)})))},KushkiGateway.prototype.requestSubscriptionCardAsyncToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(body,_this._buildHeader(mid),PathEnum_1.PathEnum.subscription_card_async_tokens,testEnv,regional)})))},KushkiGateway.prototype.multiMerchantInfo=function(request,mid,isTest,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(request,_this._buildHeader(mid),""+PathEnum_1.PathEnum.multi_merchant_commission,isTest,regional)})))},KushkiGateway.prototype.requestPayoutsCashToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(body,_this._buildHeader(mid),PathEnum_1.PathEnum.payouts_cash_tokens,testEnv,regional)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestPayoutsTransferToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(body,_this._buildHeader(mid),PathEnum_1.PathEnum.payouts_transfer_tokens,testEnv,regional)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.getCommissionConfiguration=function(request,mid,isTest,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(request,_this._buildHeader(mid),""+PathEnum_1.PathEnum.commission_configuration,isTest,regional)})))},KushkiGateway.prototype.requestTokenTransferSubscription=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.request(body,_this._buildHeader(mid),PathEnum_1.PathEnum.transfer_subscription_tokens,testEnv,regional)})))},KushkiGateway.prototype.requestBankList=function(mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return _this.requestGet(PathEnum_1.PathEnum.bank_list_transfer_subscription,testEnv,regional,mid)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestPayoutsTransferBankList=function(mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return _this.requestGet(PathEnum_1.PathEnum.bank_list_payouts_transfer,testEnv,regional,mid)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.requestMobileProcessorToken=function(body,publicCredential,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return _this.request(body,_this._buildHeader(publicCredential),PathEnum_1.PathEnum.mobile_processor_token,testEnv,regional)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.chargeMobileProcessor=function(body,publicCredential,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return _this.request(body,_this._buildHeader(publicCredential),PathEnum_1.PathEnum.mobile_processor_charge,testEnv,regional)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.deletePaymentMethod=function(body,testEnv,regional,mid,authorization){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return _this.requestDelete(PathEnum_1.PathEnum.kpay_delete_payment_method+"/"+body.walletId,testEnv,regional,mid,authorization)})),operators_1.map((function(response){return!!response})))},KushkiGateway.prototype.requestSavedPaymentMethods=function(body,testEnv,regional,mid){var _this=this;return rxjs_1.of(1).pipe(operators_1.map((function(){var email=body.email,kind=body.kind,kind_path=void 0!==kind?"?kind="+kind:"";return PathEnum_1.PathEnum.kpay_get_saved_payment_methods+"/"+email+kind_path})),operators_1.concatMap((function(path){return _this.requestGet(path,testEnv,regional,mid)})),operators_1.map((function(response){return response})))},KushkiGateway.prototype.cybersourceJwt=function(mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this.requestGet(PathEnum_1.PathEnum.cybersource_jwt,testEnv,regional,mid)})),operators_1.map((function(response){return response.jwt})))},KushkiGateway.prototype._assignChannel=function(regional,path){return regional?(this._uatUrl=""+EnvironmentEnum_1.EnvironmentEnum.regionalUat+path,this._prodUrl=""+EnvironmentEnum_1.EnvironmentEnum.regionalProd+path):(this._uatUrl=""+EnvironmentEnum_1.EnvironmentEnum.uat+path,this._prodUrl=""+EnvironmentEnum_1.EnvironmentEnum.prod+path),!0},KushkiGateway.prototype._buildHeader=function(mid){var _a;return(_a={})[this._publicHeader]=mid,_a},KushkiGateway=KushkiGateway_1=__decorate([inversify_1.injectable()],KushkiGateway)}();exports.KushkiGateway=KushkiGateway},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return groupBy})),__webpack_require__.d(__webpack_exports__,"a",(function(){return GroupedObservable}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Subscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_Subscription__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),_Observable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_Subject__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19);function groupBy(keySelector,elementSelector,durationSelector,subjectSelector){return function(source){return source.lift(new GroupByOperator(keySelector,elementSelector,durationSelector,subjectSelector))}}var GroupByOperator=function(){function GroupByOperator(keySelector,elementSelector,durationSelector,subjectSelector){this.keySelector=keySelector,this.elementSelector=elementSelector,this.durationSelector=durationSelector,this.subjectSelector=subjectSelector}return GroupByOperator.prototype.call=function(subscriber,source){return source.subscribe(new GroupBySubscriber(subscriber,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},GroupByOperator}(),GroupBySubscriber=function(_super){function GroupBySubscriber(destination,keySelector,elementSelector,durationSelector,subjectSelector){var _this=_super.call(this,destination)||this;return _this.keySelector=keySelector,_this.elementSelector=elementSelector,_this.durationSelector=durationSelector,_this.subjectSelector=subjectSelector,_this.groups=null,_this.attemptedToUnsubscribe=!1,_this.count=0,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(GroupBySubscriber,_super),GroupBySubscriber.prototype._next=function(value){var key;try{key=this.keySelector(value)}catch(err){return void this.error(err)}this._group(value,key)},GroupBySubscriber.prototype._group=function(value,key){var groups=this.groups;groups||(groups=this.groups=new Map);var element,group=groups.get(key);if(this.elementSelector)try{element=this.elementSelector(value)}catch(err){this.error(err)}else element=value;if(!group){group=this.subjectSelector?this.subjectSelector():new _Subject__WEBPACK_IMPORTED_MODULE_4__.a,groups.set(key,group);var groupedObservable=new GroupedObservable(key,group,this);if(this.destination.next(groupedObservable),this.durationSelector){var duration=void 0;try{duration=this.durationSelector(new GroupedObservable(key,group))}catch(err){return void this.error(err)}this.add(duration.subscribe(new GroupDurationSubscriber(key,group,this)))}}group.closed||group.next(element)},GroupBySubscriber.prototype._error=function(err){var groups=this.groups;groups&&(groups.forEach((function(group,key){group.error(err)})),groups.clear()),this.destination.error(err)},GroupBySubscriber.prototype._complete=function(){var groups=this.groups;groups&&(groups.forEach((function(group,key){group.complete()})),groups.clear()),this.destination.complete()},GroupBySubscriber.prototype.removeGroup=function(key){this.groups.delete(key)},GroupBySubscriber.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&_super.prototype.unsubscribe.call(this))},GroupBySubscriber}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__.a),GroupDurationSubscriber=function(_super){function GroupDurationSubscriber(key,group,parent){var _this=_super.call(this,group)||this;return _this.key=key,_this.group=group,_this.parent=parent,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(GroupDurationSubscriber,_super),GroupDurationSubscriber.prototype._next=function(value){this.complete()},GroupDurationSubscriber.prototype._unsubscribe=function(){var parent=this.parent,key=this.key;this.key=this.parent=null,parent&&parent.removeGroup(key)},GroupDurationSubscriber}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__.a),GroupedObservable=function(_super){function GroupedObservable(key,groupSubject,refCountSubscription){var _this=_super.call(this)||this;return _this.key=key,_this.groupSubject=groupSubject,_this.refCountSubscription=refCountSubscription,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(GroupedObservable,_super),GroupedObservable.prototype._subscribe=function(subscriber){var subscription=new _Subscription__WEBPACK_IMPORTED_MODULE_2__.a,refCountSubscription=this.refCountSubscription,groupSubject=this.groupSubject;return refCountSubscription&&!refCountSubscription.closed&&subscription.add(new InnerRefCountSubscription(refCountSubscription)),subscription.add(groupSubject.subscribe(subscriber)),subscription},GroupedObservable}(_Observable__WEBPACK_IMPORTED_MODULE_3__.a),InnerRefCountSubscription=function(_super){function InnerRefCountSubscription(parent){var _this=_super.call(this)||this;return _this.parent=parent,parent.count++,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(InnerRefCountSubscription,_super),InnerRefCountSubscription.prototype.unsubscribe=function(){var parent=this.parent;parent.closed||this.closed||(_super.prototype.unsubscribe.call(this),parent.count-=1,0===parent.count&&parent.attemptedToUnsubscribe&&parent.unsubscribe())},InnerRefCountSubscription}(_Subscription__WEBPACK_IMPORTED_MODULE_2__.a)},function(module,exports,__webpack_require__){"use strict";(function(process){!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports={nextTick:function(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw new TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick((function(){fn.call(null,arg1)}));case 3:return process.nextTick((function(){fn.call(null,arg1,arg2)}));case 4:return process.nextTick((function(){fn.call(null,arg1,arg2,arg3)}));default:for(args=new Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick((function(){fn.apply(null,args)}))}}}:module.exports=process}).call(this,__webpack_require__(76))},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(16).Buffer;function asUInt32Array(buf){Buffer.isBuffer(buf)||(buf=Buffer.from(buf));for(var len=buf.length/4|0,out=new Array(len),i=0;i<len;i++)out[i]=buf.readUInt32BE(4*i);return out}function scrubVec(v){for(;0<v.length;v++)v[0]=0}function cryptBlock(M,keySchedule,SUB_MIX,SBOX,nRounds){for(var t0,t1,t2,t3,SUB_MIX0=SUB_MIX[0],SUB_MIX1=SUB_MIX[1],SUB_MIX2=SUB_MIX[2],SUB_MIX3=SUB_MIX[3],s0=M[0]^keySchedule[0],s1=M[1]^keySchedule[1],s2=M[2]^keySchedule[2],s3=M[3]^keySchedule[3],ksRow=4,round=1;round<nRounds;round++)t0=SUB_MIX0[s0>>>24]^SUB_MIX1[s1>>>16&255]^SUB_MIX2[s2>>>8&255]^SUB_MIX3[255&s3]^keySchedule[ksRow++],t1=SUB_MIX0[s1>>>24]^SUB_MIX1[s2>>>16&255]^SUB_MIX2[s3>>>8&255]^SUB_MIX3[255&s0]^keySchedule[ksRow++],t2=SUB_MIX0[s2>>>24]^SUB_MIX1[s3>>>16&255]^SUB_MIX2[s0>>>8&255]^SUB_MIX3[255&s1]^keySchedule[ksRow++],t3=SUB_MIX0[s3>>>24]^SUB_MIX1[s0>>>16&255]^SUB_MIX2[s1>>>8&255]^SUB_MIX3[255&s2]^keySchedule[ksRow++],s0=t0,s1=t1,s2=t2,s3=t3;return t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&255]<<16|SBOX[s2>>>8&255]<<8|SBOX[255&s3])^keySchedule[ksRow++],t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&255]<<16|SBOX[s3>>>8&255]<<8|SBOX[255&s0])^keySchedule[ksRow++],t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&255]<<16|SBOX[s0>>>8&255]<<8|SBOX[255&s1])^keySchedule[ksRow++],t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&255]<<16|SBOX[s1>>>8&255]<<8|SBOX[255&s2])^keySchedule[ksRow++],[t0>>>=0,t1>>>=0,t2>>>=0,t3>>>=0]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G=function(){for(var d=new Array(256),j=0;j<256;j++)d[j]=j<128?j<<1:j<<1^283;for(var SBOX=[],INV_SBOX=[],SUB_MIX=[[],[],[],[]],INV_SUB_MIX=[[],[],[],[]],x=0,xi=0,i=0;i<256;++i){var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^255&sx^99,SBOX[x]=sx,INV_SBOX[sx]=x;var x2=d[x],x4=d[x2],x8=d[x4],t=257*d[sx]^16843008*sx;SUB_MIX[0][x]=t<<24|t>>>8,SUB_MIX[1][x]=t<<16|t>>>16,SUB_MIX[2][x]=t<<8|t>>>24,SUB_MIX[3][x]=t,t=16843009*x8^65537*x4^257*x2^16843008*x,INV_SUB_MIX[0][sx]=t<<24|t>>>8,INV_SUB_MIX[1][sx]=t<<16|t>>>16,INV_SUB_MIX[2][sx]=t<<8|t>>>24,INV_SUB_MIX[3][sx]=t,0===x?x=xi=1:(x=x2^d[d[d[x8^x2]]],xi^=d[d[xi]])}return{SBOX:SBOX,INV_SBOX:INV_SBOX,SUB_MIX:SUB_MIX,INV_SUB_MIX:INV_SUB_MIX}}();function AES(key){this._key=asUInt32Array(key),this._reset()}AES.blockSize=16,AES.keySize=32,AES.prototype.blockSize=AES.blockSize,AES.prototype.keySize=AES.keySize,AES.prototype._reset=function(){for(var keyWords=this._key,keySize=keyWords.length,nRounds=keySize+6,ksRows=4*(nRounds+1),keySchedule=[],k=0;k<keySize;k++)keySchedule[k]=keyWords[k];for(k=keySize;k<ksRows;k++){var t=keySchedule[k-1];k%keySize==0?(t=t<<8|t>>>24,t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[255&t],t^=RCON[k/keySize|0]<<24):keySize>6&&k%keySize==4&&(t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[255&t]),keySchedule[k]=keySchedule[k-keySize]^t}for(var invKeySchedule=[],ik=0;ik<ksRows;ik++){var ksR=ksRows-ik,tt=keySchedule[ksR-(ik%4?0:4)];invKeySchedule[ik]=ik<4||ksR<=4?tt:G.INV_SUB_MIX[0][G.SBOX[tt>>>24]]^G.INV_SUB_MIX[1][G.SBOX[tt>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[tt>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[255&tt]]}this._nRounds=nRounds,this._keySchedule=keySchedule,this._invKeySchedule=invKeySchedule},AES.prototype.encryptBlockRaw=function(M){return cryptBlock(M=asUInt32Array(M),this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)},AES.prototype.encryptBlock=function(M){var out=this.encryptBlockRaw(M),buf=Buffer.allocUnsafe(16);return buf.writeUInt32BE(out[0],0),buf.writeUInt32BE(out[1],4),buf.writeUInt32BE(out[2],8),buf.writeUInt32BE(out[3],12),buf},AES.prototype.decryptBlock=function(M){var m1=(M=asUInt32Array(M))[1];M[1]=M[3],M[3]=m1;var out=cryptBlock(M,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds),buf=Buffer.allocUnsafe(16);return buf.writeUInt32BE(out[0],0),buf.writeUInt32BE(out[3],4),buf.writeUInt32BE(out[2],8),buf.writeUInt32BE(out[1],12),buf},AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)},module.exports.AES=AES},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(16).Buffer,MD5=__webpack_require__(194);module.exports=function(password,salt,keyBits,ivLen){if(Buffer.isBuffer(password)||(password=Buffer.from(password,"binary")),salt&&(Buffer.isBuffer(salt)||(salt=Buffer.from(salt,"binary")),8!==salt.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var keyLen=keyBits/8,key=Buffer.alloc(keyLen),iv=Buffer.alloc(ivLen||0),tmp=Buffer.alloc(0);keyLen>0||ivLen>0;){var hash=new MD5;hash.update(tmp),hash.update(password),salt&&hash.update(salt),tmp=hash.digest();var used=0;if(keyLen>0){var keyStart=key.length-keyLen;used=Math.min(keyLen,tmp.length),tmp.copy(key,keyStart,0,used),keyLen-=used}if(used<tmp.length&&ivLen>0){var ivStart=iv.length-ivLen,length=Math.min(ivLen,tmp.length-used);tmp.copy(iv,ivStart,used,used+length),ivLen-=length}}return tmp.fill(0),{key:key,iv:iv}}},function(module,exports,__webpack_require__){"use strict";var curve=exports;curve.base=__webpack_require__(437),curve.short=__webpack_require__(438),curve.mont=__webpack_require__(439),curve.edwards=__webpack_require__(440)},function(module,exports,__webpack_require__){var asn1=__webpack_require__(456),aesid=__webpack_require__(468),fixProc=__webpack_require__(469),ciphers=__webpack_require__(202),compat=__webpack_require__(254),Buffer=__webpack_require__(16).Buffer;function parseKeys(buffer){var password;"object"!=typeof buffer||Buffer.isBuffer(buffer)||(password=buffer.passphrase,buffer=buffer.key),"string"==typeof buffer&&(buffer=Buffer.from(buffer));var subtype,ndata,stripped=fixProc(buffer,password),type=stripped.tag,data=stripped.data;switch(type){case"CERTIFICATE":ndata=asn1.certificate.decode(data,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(ndata||(ndata=asn1.PublicKey.decode(data,"der")),subtype=ndata.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(ndata.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return ndata.subjectPrivateKey=ndata.subjectPublicKey,{type:"ec",data:ndata};case"1.2.840.10040.4.1":return ndata.algorithm.params.pub_key=asn1.DSAparam.decode(ndata.subjectPublicKey.data,"der"),{type:"dsa",data:ndata.algorithm.params};default:throw new Error("unknown key id "+subtype)}throw new Error("unknown key type "+type);case"ENCRYPTED PRIVATE KEY":data=function(data,password){var salt=data.algorithm.decrypt.kde.kdeparams.salt,iters=parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(),10),algo=aesid[data.algorithm.decrypt.cipher.algo.join(".")],iv=data.algorithm.decrypt.cipher.iv,cipherText=data.subjectPrivateKey,keylen=parseInt(algo.split("-")[1],10)/8,key=compat.pbkdf2Sync(password,salt,iters,keylen,"sha1"),cipher=ciphers.createDecipheriv(algo,key,iv),out=[];return out.push(cipher.update(cipherText)),out.push(cipher.final()),Buffer.concat(out)}(data=asn1.EncryptedPrivateKey.decode(data,"der"),password);case"PRIVATE KEY":switch(subtype=(ndata=asn1.PrivateKey.decode(data,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(ndata.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:ndata.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(ndata.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return ndata.algorithm.params.priv_key=asn1.DSAparam.decode(ndata.subjectPrivateKey,"der"),{type:"dsa",params:ndata.algorithm.params};default:throw new Error("unknown key id "+subtype)}throw new Error("unknown key type "+type);case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode(data,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode(data,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode(data,"der")};case"EC PRIVATE KEY":return{curve:(data=asn1.ECPrivateKey.decode(data,"der")).parameters.value,privateKey:data.privateKey};default:throw new Error("unknown key type "+type)}}module.exports=parseKeys,parseKeys.signature=asn1.signature},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(93).Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(112)(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(517),listCacheDelete=__webpack_require__(518),listCacheGet=__webpack_require__(519),listCacheHas=__webpack_require__(520),listCacheSet=__webpack_require__(521);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports,__webpack_require__){var eq=__webpack_require__(292);module.exports=function(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(523);module.exports=function(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,exports,__webpack_require__){"use strict";const util=__webpack_require__(94),buildOptions=__webpack_require__(94).buildOptions,xmlNode=__webpack_require__(571);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,util.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const defaultOptions={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(a,tagName){return a},attrValueProcessor:function(a,attrName){return a},stopNodes:[]};exports.defaultOptions=defaultOptions;const props=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function processTagValue(tagName,val,options){return val&&(options.trimValues&&(val=val.trim()),val=parseValue(val=options.tagValueProcessor(val,tagName),options.parseNodeValue,options.parseTrueNumberOnly)),val}function resolveNameSpace(tagname,options){if(options.ignoreNameSpace){const tags=tagname.split(":"),prefix="/"===tagname.charAt(0)?"/":"";if("xmlns"===tags[0])return"";2===tags.length&&(tagname=prefix+tags[1])}return tagname}function parseValue(val,shouldParse,parseTrueNumberOnly){if(shouldParse&&"string"==typeof val){let parsed;return""===val.trim()||isNaN(val)?parsed="true"===val||"false"!==val&&val:(-1!==val.indexOf("0x")?parsed=Number.parseInt(val,16):-1!==val.indexOf(".")?(parsed=Number.parseFloat(val),val=val.replace(/\.?0+$/,"")):parsed=Number.parseInt(val,10),parseTrueNumberOnly&&(parsed=String(parsed)===val?parsed:val)),parsed}return util.isExist(val)?val:""}exports.props=props;const attrsRegx=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function buildAttributesMap(attrStr,options){if(!options.ignoreAttributes&&"string"==typeof attrStr){attrStr=attrStr.replace(/\r?\n/g," ");const matches=util.getAllMatches(attrStr,attrsRegx),len=matches.length,attrs={};for(let i=0;i<len;i++){const attrName=resolveNameSpace(matches[i][1],options);attrName.length&&(void 0!==matches[i][4]?(options.trimValues&&(matches[i][4]=matches[i][4].trim()),matches[i][4]=options.attrValueProcessor(matches[i][4],attrName),attrs[options.attributeNamePrefix+attrName]=parseValue(matches[i][4],options.parseAttributeValue,options.parseTrueNumberOnly)):options.allowBooleanAttributes&&(attrs[options.attributeNamePrefix+attrName]=!0))}if(!Object.keys(attrs).length)return;if(options.attrNodeName){const attrCollection={};return attrCollection[options.attrNodeName]=attrs,attrCollection}return attrs}}function closingIndexForOpeningTag(data,i){let attrBoundary,tagExp="";for(let index=i;index<data.length;index++){let ch=data[index];if(attrBoundary)ch===attrBoundary&&(attrBoundary="");else if('"'===ch||"'"===ch)attrBoundary=ch;else{if(">"===ch)return{data:tagExp,index:index};"\t"===ch&&(ch=" ")}tagExp+=ch}}function findClosingIndex(xmlData,str,i,errMsg){const closingIndex=xmlData.indexOf(str,i);if(-1===closingIndex)throw new Error(errMsg);return closingIndex+str.length-1}exports.getTraversalObj=function(xmlData,options){xmlData=xmlData.replace(/\r\n?/g,"\n"),options=buildOptions(options,defaultOptions,props);const xmlObj=new xmlNode("!xml");let currentNode=xmlObj,textData="";for(let i=0;i<xmlData.length;i++){if("<"===xmlData[i])if("/"===xmlData[i+1]){const closeIndex=findClosingIndex(xmlData,">",i,"Closing Tag is not closed.");let tagName=xmlData.substring(i+2,closeIndex).trim();if(options.ignoreNameSpace){const colonIndex=tagName.indexOf(":");-1!==colonIndex&&(tagName=tagName.substr(colonIndex+1))}currentNode&&(currentNode.val?currentNode.val=util.getValue(currentNode.val)+""+processTagValue(tagName,textData,options):currentNode.val=processTagValue(tagName,textData,options)),options.stopNodes.length&&options.stopNodes.includes(currentNode.tagname)&&(currentNode.child=[],null==currentNode.attrsMap&&(currentNode.attrsMap={}),currentNode.val=xmlData.substr(currentNode.startIndex+1,i-currentNode.startIndex-1)),currentNode=currentNode.parent,textData="",i=closeIndex}else if("?"===xmlData[i+1])i=findClosingIndex(xmlData,"?>",i,"Pi Tag is not closed.");else if("!--"===xmlData.substr(i+1,3))i=findClosingIndex(xmlData,"--\x3e",i,"Comment is not closed.");else if("!D"===xmlData.substr(i+1,2)){const closeIndex=findClosingIndex(xmlData,">",i,"DOCTYPE is not closed.");i=xmlData.substring(i,closeIndex).indexOf("[")>=0?xmlData.indexOf("]>",i)+1:closeIndex}else if("!["===xmlData.substr(i+1,2)){const closeIndex=findClosingIndex(xmlData,"]]>",i,"CDATA is not closed.")-2,tagExp=xmlData.substring(i+9,closeIndex);if(textData&&(currentNode.val=util.getValue(currentNode.val)+""+processTagValue(currentNode.tagname,textData,options),textData=""),options.cdataTagName){const childNode=new xmlNode(options.cdataTagName,currentNode,tagExp);currentNode.addChild(childNode),currentNode.val=util.getValue(currentNode.val)+options.cdataPositionChar,tagExp&&(childNode.val=tagExp)}else currentNode.val=(currentNode.val||"")+(tagExp||"");i=closeIndex+2}else{const result=closingIndexForOpeningTag(xmlData,i+1);let tagExp=result.data;const closeIndex=result.index,separatorIndex=tagExp.indexOf(" ");let tagName=tagExp;if(-1!==separatorIndex&&(tagName=tagExp.substr(0,separatorIndex).replace(/\s\s*$/,""),tagExp=tagExp.substr(separatorIndex+1)),options.ignoreNameSpace){const colonIndex=tagName.indexOf(":");-1!==colonIndex&&(tagName=tagName.substr(colonIndex+1))}if(currentNode&&textData&&"!xml"!==currentNode.tagname&&(currentNode.val=util.getValue(currentNode.val)+""+processTagValue(currentNode.tagname,textData,options)),tagExp.length>0&&tagExp.lastIndexOf("/")===tagExp.length-1){"/"===tagName[tagName.length-1]?(tagName=tagName.substr(0,tagName.length-1),tagExp=tagName):tagExp=tagExp.substr(0,tagExp.length-1);const childNode=new xmlNode(tagName,currentNode,"");tagName!==tagExp&&(childNode.attrsMap=buildAttributesMap(tagExp,options)),currentNode.addChild(childNode)}else{const childNode=new xmlNode(tagName,currentNode);options.stopNodes.length&&options.stopNodes.includes(childNode.tagname)&&(childNode.startIndex=closeIndex),tagName!==tagExp&&(childNode.attrsMap=buildAttributesMap(tagExp,options)),currentNode.addChild(childNode),currentNode=childNode}textData="",i=closeIndex}else textData+=xmlData[i]}return xmlObj}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER})),__webpack_require__.d(__webpack_exports__,"b",(function(){return INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER})),__webpack_require__.d(__webpack_exports__,"c",(function(){return USER_AGENT_HEADER}));var hasSymbol="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER=hasSymbol?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER=hasSymbol?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",USER_AGENT_HEADER="x-amz-user-agent"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ConnectableObservable})),__webpack_require__.d(__webpack_exports__,"b",(function(){return connectableObservableDescriptor}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Subject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19),_Observable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6),_Subscriber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_Subscription__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_operators_refCount__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(116),ConnectableObservable=function(_super){function ConnectableObservable(source,subjectFactory){var _this=_super.call(this)||this;return _this.source=source,_this.subjectFactory=subjectFactory,_this._refCount=0,_this._isComplete=!1,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(ConnectableObservable,_super),ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber)},ConnectableObservable.prototype.getSubject=function(){var subject=this._subject;return subject&&!subject.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype.connect=function(){var connection=this._connection;return connection||(this._isComplete=!1,(connection=this._connection=new _Subscription__WEBPACK_IMPORTED_MODULE_4__.a).add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),connection.closed?(this._connection=null,connection=_Subscription__WEBPACK_IMPORTED_MODULE_4__.a.EMPTY):this._connection=connection),connection},ConnectableObservable.prototype.refCount=function(){return Object(_operators_refCount__WEBPACK_IMPORTED_MODULE_5__.a)()(this)},ConnectableObservable}(_Observable__WEBPACK_IMPORTED_MODULE_2__.a),connectableProto=ConnectableObservable.prototype,connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:!0},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}},ConnectableSubscriber=function(_super){function ConnectableSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;return _this.connectable=connectable,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(ConnectableSubscriber,_super),ConnectableSubscriber.prototype._error=function(err){this._unsubscribe(),_super.prototype._error.call(this,err)},ConnectableSubscriber.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),_super.prototype._complete.call(this)},ConnectableSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(connectable){this.connectable=null;var connection=connectable._connection;connectable._refCount=0,connectable._subject=null,connectable._connection=null,connection&&connection.unsubscribe()}},ConnectableSubscriber}(_Subject__WEBPACK_IMPORTED_MODULE_1__.b);_Subscriber__WEBPACK_IMPORTED_MODULE_3__.a},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BehaviorSubject}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Subject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19),_util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(74),BehaviorSubject=function(_super){function BehaviorSubject(_value){var _this=_super.call(this)||this;return _this._value=_value,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(BehaviorSubject,_super),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return subscription&&!subscription.closed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_2__.a;return this._value},BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)},BehaviorSubject}(_Subject__WEBPACK_IMPORTED_MODULE_1__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return observeOn})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ObserveOnSubscriber}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_Subscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_Notification__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(69);function observeOn(scheduler,delay){return void 0===delay&&(delay=0),function(source){return source.lift(new ObserveOnOperator(scheduler,delay))}}var ObserveOnOperator=function(){function ObserveOnOperator(scheduler,delay){void 0===delay&&(delay=0),this.scheduler=scheduler,this.delay=delay}return ObserveOnOperator.prototype.call=function(subscriber,source){return source.subscribe(new ObserveOnSubscriber(subscriber,this.scheduler,this.delay))},ObserveOnOperator}(),ObserveOnSubscriber=function(_super){function ObserveOnSubscriber(destination,scheduler,delay){void 0===delay&&(delay=0);var _this=_super.call(this,destination)||this;return _this.scheduler=scheduler,_this.delay=delay,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(ObserveOnSubscriber,_super),ObserveOnSubscriber.dispatch=function(arg){var notification=arg.notification,destination=arg.destination;notification.observe(destination),this.unsubscribe()},ObserveOnSubscriber.prototype.scheduleMessage=function(notification){this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)))},ObserveOnSubscriber.prototype._next=function(value){this.scheduleMessage(_Notification__WEBPACK_IMPORTED_MODULE_2__.a.createNext(value))},ObserveOnSubscriber.prototype._error=function(err){this.scheduleMessage(_Notification__WEBPACK_IMPORTED_MODULE_2__.a.createError(err))},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(_Notification__WEBPACK_IMPORTED_MODULE_2__.a.createComplete())},ObserveOnSubscriber}(_Subscriber__WEBPACK_IMPORTED_MODULE_1__.a),ObserveOnMessage=function(){return function(notification,destination){this.notification=notification,this.destination=destination}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TimeoutError}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),TimeoutError=function(_super){function TimeoutError(){var _this=_super.call(this,"Timeout has occurred")||this;return _this.name="TimeoutError",Object.setPrototypeOf(_this,TimeoutError.prototype),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(TimeoutError,_super),TimeoutError}(Error)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return concatAll}));var _mergeAll__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(121);function concatAll(){return Object(_mergeAll__WEBPACK_IMPORTED_MODULE_0__.a)(1)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return merge}));var _Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_util_isScheduler__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26),_operators_mergeAll__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(121),_fromArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(47);function merge(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];var concurrent=Number.POSITIVE_INFINITY,scheduler=null,last=observables[observables.length-1];return Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_1__.a)(last)?(scheduler=observables.pop(),observables.length>1&&"number"==typeof observables[observables.length-1]&&(concurrent=observables.pop())):"number"==typeof last&&(concurrent=observables.pop()),null===scheduler&&1===observables.length&&observables[0]instanceof _Observable__WEBPACK_IMPORTED_MODULE_0__.a?observables[0]:Object(_operators_mergeAll__WEBPACK_IMPORTED_MODULE_2__.a)(concurrent)(Object(_fromArray__WEBPACK_IMPORTED_MODULE_3__.a)(observables,scheduler))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return race}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_util_isArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25),_fromArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(47),_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9);function race(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];if(1===observables.length){if(!Object(_util_isArray__WEBPACK_IMPORTED_MODULE_1__.a)(observables[0]))return observables[0];observables=observables[0]}return Object(_fromArray__WEBPACK_IMPORTED_MODULE_2__.a)(observables,void 0).lift(new RaceOperator)}var RaceOperator=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(subscriber,source){return source.subscribe(new RaceSubscriber(subscriber))},RaceOperator}(),RaceSubscriber=function(_super){function RaceSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.hasFirst=!1,_this.observables=[],_this.subscriptions=[],_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(RaceSubscriber,_super),RaceSubscriber.prototype._next=function(observable){this.observables.push(observable)},RaceSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{for(var i=0;i<len&&!this.hasFirst;i++){var observable=observables[i],subscription=Object(_util_subscribeToResult__WEBPACK_IMPORTED_MODULE_4__.a)(this,observable,observable,i);this.subscriptions&&this.subscriptions.push(subscription),this.add(subscription)}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex,innerIndex,innerSub){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==outerIndex){var subscription=this.subscriptions[i];subscription.unsubscribe(),this.remove(subscription)}this.subscriptions=null}this.destination.next(innerValue)},RaceSubscriber}(_OuterSubscriber__WEBPACK_IMPORTED_MODULE_3__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return timer}));var _Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_scheduler_async__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_util_isNumeric__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91),_util_isScheduler__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26);function timer(dueTime,periodOrScheduler,scheduler){void 0===dueTime&&(dueTime=0);var period=-1;return Object(_util_isNumeric__WEBPACK_IMPORTED_MODULE_2__.a)(periodOrScheduler)?period=Number(periodOrScheduler)<1?1:Number(periodOrScheduler):Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_3__.a)(periodOrScheduler)&&(scheduler=periodOrScheduler),Object(_util_isScheduler__WEBPACK_IMPORTED_MODULE_3__.a)(scheduler)||(scheduler=_scheduler_async__WEBPACK_IMPORTED_MODULE_1__.a),new _Observable__WEBPACK_IMPORTED_MODULE_0__.a((function(subscriber){var due=Object(_util_isNumeric__WEBPACK_IMPORTED_MODULE_2__.a)(dueTime)?dueTime:+dueTime-scheduler.now();return scheduler.schedule(dispatch,due,{index:0,period:period,subscriber:subscriber})}))}function dispatch(state){var index=state.index,period=state.period,subscriber=state.subscriber;if(subscriber.next(index),!subscriber.closed){if(-1===period)return subscriber.complete();state.index=index+1,this.schedule(state,period)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var ConsoleLogger=__webpack_require__(84),StorageHelper=__webpack_require__(145),JS=__webpack_require__(57),OAuthHelper=__webpack_require__(124),Retry=__webpack_require__(620),Platform=__webpack_require__(96),Amplify=__webpack_require__(40),tslib_es6=__webpack_require__(0),extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.create;function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}var AmbiguousRoleResolutionType,models_0_CognitoIdentityProvider,models_0_CreateIdentityPoolInput,models_0_IdentityPool,models_0_InternalErrorException,models_0_InvalidParameterException,models_0_LimitExceededException,models_0_NotAuthorizedException,models_0_ResourceConflictException,models_0_TooManyRequestsException,models_0_DeleteIdentitiesInput,ErrorCode,models_0_UnprocessedIdentityId,models_0_DeleteIdentitiesResponse,models_0_DeleteIdentityPoolInput,models_0_ResourceNotFoundException,models_0_DescribeIdentityInput,models_0_IdentityDescription,models_0_DescribeIdentityPoolInput,models_0_ExternalServiceException,models_0_GetCredentialsForIdentityInput,models_0_Credentials,models_0_GetCredentialsForIdentityResponse,models_0_InvalidIdentityPoolConfigurationException,models_0_GetIdInput,models_0_GetIdResponse,models_0_GetIdentityPoolRolesInput,MappingRuleMatchType,models_0_MappingRule,models_0_RulesConfigurationType,RoleMappingType,models_0_RoleMapping,models_0_GetIdentityPoolRolesResponse,models_0_GetOpenIdTokenInput,models_0_GetOpenIdTokenResponse,models_0_DeveloperUserAlreadyRegisteredException,models_0_GetOpenIdTokenForDeveloperIdentityInput,models_0_GetOpenIdTokenForDeveloperIdentityResponse,models_0_ListIdentitiesInput,models_0_ListIdentitiesResponse,models_0_ListIdentityPoolsInput,models_0_IdentityPoolShortDescription,models_0_ListIdentityPoolsResponse,models_0_ListTagsForResourceInput,models_0_ListTagsForResourceResponse,models_0_LookupDeveloperIdentityInput,models_0_LookupDeveloperIdentityResponse,models_0_MergeDeveloperIdentitiesInput,models_0_MergeDeveloperIdentitiesResponse,models_0_ConcurrentModificationException,models_0_SetIdentityPoolRolesInput,models_0_TagResourceInput,models_0_TagResourceResponse,models_0_UnlinkDeveloperIdentityInput,models_0_UnlinkIdentityInput,models_0_UntagResourceInput,models_0_UntagResourceResponse;Object.create;!function(AmbiguousRoleResolutionType){AmbiguousRoleResolutionType.AUTHENTICATED_ROLE="AuthenticatedRole",AmbiguousRoleResolutionType.DENY="Deny"}(AmbiguousRoleResolutionType||(AmbiguousRoleResolutionType={})),(models_0_CognitoIdentityProvider||(models_0_CognitoIdentityProvider={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CreateIdentityPoolInput||(models_0_CreateIdentityPoolInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_IdentityPool||(models_0_IdentityPool={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_InternalErrorException||(models_0_InternalErrorException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_InvalidParameterException||(models_0_InvalidParameterException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_LimitExceededException||(models_0_LimitExceededException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_NotAuthorizedException||(models_0_NotAuthorizedException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ResourceConflictException||(models_0_ResourceConflictException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_TooManyRequestsException||(models_0_TooManyRequestsException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteIdentitiesInput||(models_0_DeleteIdentitiesInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(ErrorCode){ErrorCode.ACCESS_DENIED="AccessDenied",ErrorCode.INTERNAL_SERVER_ERROR="InternalServerError"}(ErrorCode||(ErrorCode={})),(models_0_UnprocessedIdentityId||(models_0_UnprocessedIdentityId={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteIdentitiesResponse||(models_0_DeleteIdentitiesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteIdentityPoolInput||(models_0_DeleteIdentityPoolInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ResourceNotFoundException||(models_0_ResourceNotFoundException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DescribeIdentityInput||(models_0_DescribeIdentityInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_IdentityDescription||(models_0_IdentityDescription={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DescribeIdentityPoolInput||(models_0_DescribeIdentityPoolInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ExternalServiceException||(models_0_ExternalServiceException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetCredentialsForIdentityInput||(models_0_GetCredentialsForIdentityInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Credentials||(models_0_Credentials={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetCredentialsForIdentityResponse||(models_0_GetCredentialsForIdentityResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_InvalidIdentityPoolConfigurationException||(models_0_InvalidIdentityPoolConfigurationException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetIdInput||(models_0_GetIdInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetIdResponse||(models_0_GetIdResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetIdentityPoolRolesInput||(models_0_GetIdentityPoolRolesInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(MappingRuleMatchType){MappingRuleMatchType.CONTAINS="Contains",MappingRuleMatchType.EQUALS="Equals",MappingRuleMatchType.NOT_EQUAL="NotEqual",MappingRuleMatchType.STARTS_WITH="StartsWith"}(MappingRuleMatchType||(MappingRuleMatchType={})),(models_0_MappingRule||(models_0_MappingRule={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_RulesConfigurationType||(models_0_RulesConfigurationType={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(RoleMappingType){RoleMappingType.RULES="Rules",RoleMappingType.TOKEN="Token"}(RoleMappingType||(RoleMappingType={})),(models_0_RoleMapping||(models_0_RoleMapping={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetIdentityPoolRolesResponse||(models_0_GetIdentityPoolRolesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetOpenIdTokenInput||(models_0_GetOpenIdTokenInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetOpenIdTokenResponse||(models_0_GetOpenIdTokenResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeveloperUserAlreadyRegisteredException||(models_0_DeveloperUserAlreadyRegisteredException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetOpenIdTokenForDeveloperIdentityInput||(models_0_GetOpenIdTokenForDeveloperIdentityInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetOpenIdTokenForDeveloperIdentityResponse||(models_0_GetOpenIdTokenForDeveloperIdentityResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListIdentitiesInput||(models_0_ListIdentitiesInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListIdentitiesResponse||(models_0_ListIdentitiesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListIdentityPoolsInput||(models_0_ListIdentityPoolsInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_IdentityPoolShortDescription||(models_0_IdentityPoolShortDescription={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListIdentityPoolsResponse||(models_0_ListIdentityPoolsResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListTagsForResourceInput||(models_0_ListTagsForResourceInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListTagsForResourceResponse||(models_0_ListTagsForResourceResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_LookupDeveloperIdentityInput||(models_0_LookupDeveloperIdentityInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_LookupDeveloperIdentityResponse||(models_0_LookupDeveloperIdentityResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_MergeDeveloperIdentitiesInput||(models_0_MergeDeveloperIdentitiesInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_MergeDeveloperIdentitiesResponse||(models_0_MergeDeveloperIdentitiesResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ConcurrentModificationException||(models_0_ConcurrentModificationException={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_SetIdentityPoolRolesInput||(models_0_SetIdentityPoolRolesInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_TagResourceInput||(models_0_TagResourceInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_TagResourceResponse||(models_0_TagResourceResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_UnlinkDeveloperIdentityInput||(models_0_UnlinkDeveloperIdentityInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_UnlinkIdentityInput||(models_0_UnlinkIdentityInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_UntagResourceInput||(models_0_UntagResourceInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_UntagResourceResponse||(models_0_UntagResourceResponse={})).filterSensitiveLog=function(obj){return __assign({},obj)};var es=__webpack_require__(3),deserializeAws_json1_1GetCredentialsForIdentityCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,_e,_f,_g,_h,_j,_k,parsedBody,message,_l;return __generator(this,(function(_m){switch(_m.label){case 0:return _a=[__assign({},output)],_l={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=__assign.apply(void 0,_a.concat([(_l.body=_m.sent(),_l)])),errorCode="UnknownError",errorCode=loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return _c=[{}],[4,deserializeAws_json1_1ExternalServiceExceptionResponse(parsedOutput,context)];case 3:return response=__assign.apply(void 0,[__assign.apply(void 0,_c.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 4:return _d=[{}],[4,deserializeAws_json1_1InternalErrorExceptionResponse(parsedOutput,context)];case 5:return response=__assign.apply(void 0,[__assign.apply(void 0,_d.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 6:return _e=[{}],[4,deserializeAws_json1_1InvalidIdentityPoolConfigurationExceptionResponse(parsedOutput,context)];case 7:return response=__assign.apply(void 0,[__assign.apply(void 0,_e.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 8:return _f=[{}],[4,deserializeAws_json1_1InvalidParameterExceptionResponse(parsedOutput,context)];case 9:return response=__assign.apply(void 0,[__assign.apply(void 0,_f.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 10:return _g=[{}],[4,deserializeAws_json1_1NotAuthorizedExceptionResponse(parsedOutput,context)];case 11:return response=__assign.apply(void 0,[__assign.apply(void 0,_g.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 12:return _h=[{}],[4,deserializeAws_json1_1ResourceConflictExceptionResponse(parsedOutput,context)];case 13:return response=__assign.apply(void 0,[__assign.apply(void 0,_h.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 14:return _j=[{}],[4,deserializeAws_json1_1ResourceNotFoundExceptionResponse(parsedOutput,context)];case 15:return response=__assign.apply(void 0,[__assign.apply(void 0,_j.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 16:return _k=[{}],[4,deserializeAws_json1_1TooManyRequestsExceptionResponse(parsedOutput,context)];case 17:return response=__assign.apply(void 0,[__assign.apply(void 0,_k.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 18:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_m.label=19;case 19:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_json1_1GetIdCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,_e,_f,_g,_h,_j,_k,parsedBody,message,_l;return __generator(this,(function(_m){switch(_m.label){case 0:return _a=[__assign({},output)],_l={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=__assign.apply(void 0,_a.concat([(_l.body=_m.sent(),_l)])),errorCode="UnknownError",errorCode=loadRestJsonErrorCode(output,parsedOutput.body),errorCode){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return _c=[{}],[4,deserializeAws_json1_1ExternalServiceExceptionResponse(parsedOutput,context)];case 3:return response=__assign.apply(void 0,[__assign.apply(void 0,_c.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 4:return _d=[{}],[4,deserializeAws_json1_1InternalErrorExceptionResponse(parsedOutput,context)];case 5:return response=__assign.apply(void 0,[__assign.apply(void 0,_d.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 6:return _e=[{}],[4,deserializeAws_json1_1InvalidParameterExceptionResponse(parsedOutput,context)];case 7:return response=__assign.apply(void 0,[__assign.apply(void 0,_e.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 8:return _f=[{}],[4,deserializeAws_json1_1LimitExceededExceptionResponse(parsedOutput,context)];case 9:return response=__assign.apply(void 0,[__assign.apply(void 0,_f.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 10:return _g=[{}],[4,deserializeAws_json1_1NotAuthorizedExceptionResponse(parsedOutput,context)];case 11:return response=__assign.apply(void 0,[__assign.apply(void 0,_g.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 12:return _h=[{}],[4,deserializeAws_json1_1ResourceConflictExceptionResponse(parsedOutput,context)];case 13:return response=__assign.apply(void 0,[__assign.apply(void 0,_h.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 14:return _j=[{}],[4,deserializeAws_json1_1ResourceNotFoundExceptionResponse(parsedOutput,context)];case 15:return response=__assign.apply(void 0,[__assign.apply(void 0,_j.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 16:return _k=[{}],[4,deserializeAws_json1_1TooManyRequestsExceptionResponse(parsedOutput,context)];case 17:return response=__assign.apply(void 0,[__assign.apply(void 0,_k.concat([_m.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,19];case 18:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_m.label=19;case 19:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_json1_1ExternalServiceExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1ExternalServiceException(body,context),[2,__assign({name:"ExternalServiceException",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1InternalErrorExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1InternalErrorException(body,context),[2,__assign({name:"InternalErrorException",$fault:"server",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1InvalidIdentityPoolConfigurationExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1InvalidIdentityPoolConfigurationException(body,context),[2,__assign({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1InvalidParameterExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1InvalidParameterException(body,context),[2,__assign({name:"InvalidParameterException",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1LimitExceededExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1LimitExceededException(body,context),[2,__assign({name:"LimitExceededException",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1NotAuthorizedExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1NotAuthorizedException(body,context),[2,__assign({name:"NotAuthorizedException",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1ResourceConflictExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1ResourceConflictException(body,context),[2,__assign({name:"ResourceConflictException",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1ResourceNotFoundExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1ResourceNotFoundException(body,context),[2,__assign({name:"ResourceNotFoundException",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},deserializeAws_json1_1TooManyRequestsExceptionResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var body,deserialized;return __generator(this,(function(_a){return body=parsedOutput.body,deserialized=deserializeAws_json1_1TooManyRequestsException(body,context),[2,__assign({name:"TooManyRequestsException",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},deserialized)]}))}))},serializeAws_json1_1GetCredentialsForIdentityInput=function(input,context){return __assign(__assign(__assign({},void 0!==input.CustomRoleArn&&null!==input.CustomRoleArn&&{CustomRoleArn:input.CustomRoleArn}),void 0!==input.IdentityId&&null!==input.IdentityId&&{IdentityId:input.IdentityId}),void 0!==input.Logins&&null!==input.Logins&&{Logins:serializeAws_json1_1LoginsMap(input.Logins,context)})},serializeAws_json1_1GetIdInput=function(input,context){return __assign(__assign(__assign({},void 0!==input.AccountId&&null!==input.AccountId&&{AccountId:input.AccountId}),void 0!==input.IdentityPoolId&&null!==input.IdentityPoolId&&{IdentityPoolId:input.IdentityPoolId}),void 0!==input.Logins&&null!==input.Logins&&{Logins:serializeAws_json1_1LoginsMap(input.Logins,context)})},serializeAws_json1_1LoginsMap=function(input,context){return Object.entries(input).reduce((function(acc,_a){var _b,_c=__read(_a,2),key=_c[0],value=_c[1];return null===value?acc:__assign(__assign({},acc),((_b={})[key]=value,_b))}),{})},deserializeAws_json1_1Credentials=function(output,context){return{AccessKeyId:void 0!==output.AccessKeyId&&null!==output.AccessKeyId?output.AccessKeyId:void 0,Expiration:void 0!==output.Expiration&&null!==output.Expiration?new Date(Math.round(1e3*output.Expiration)):void 0,SecretKey:void 0!==output.SecretKey&&null!==output.SecretKey?output.SecretKey:void 0,SessionToken:void 0!==output.SessionToken&&null!==output.SessionToken?output.SessionToken:void 0}},deserializeAws_json1_1ExternalServiceException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1GetCredentialsForIdentityResponse=function(output,context){return{Credentials:void 0!==output.Credentials&&null!==output.Credentials?deserializeAws_json1_1Credentials(output.Credentials):void 0,IdentityId:void 0!==output.IdentityId&&null!==output.IdentityId?output.IdentityId:void 0}},deserializeAws_json1_1GetIdResponse=function(output,context){return{IdentityId:void 0!==output.IdentityId&&null!==output.IdentityId?output.IdentityId:void 0}},deserializeAws_json1_1InternalErrorException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1InvalidIdentityPoolConfigurationException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1InvalidParameterException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1LimitExceededException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1NotAuthorizedException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1ResourceConflictException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1ResourceNotFoundException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeAws_json1_1TooManyRequestsException=function(output,context){return{message:void 0!==output.message&&null!==output.message?output.message:void 0}},deserializeMetadata=function(output){var _a;return{httpStatusCode:output.statusCode,requestId:null!==(_a=output.headers["x-amzn-requestid"])&&void 0!==_a?_a:output.headers["x-amzn-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}},collectBody=function(streamBody,context){return void 0===streamBody&&(streamBody=new Uint8Array),streamBody instanceof Uint8Array?Promise.resolve(streamBody):context.streamCollector(streamBody)||Promise.resolve(new Uint8Array)},buildHttpRpcRequest=function(context,headers,path,resolvedHostname,body){return __awaiter(void 0,void 0,void 0,(function(){var _a,hostname,_b,protocol,port,contents;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,contents={protocol:protocol,hostname:hostname,port:port,method:"POST",path:path,headers:headers},void 0!==resolvedHostname&&(contents.hostname=resolvedHostname),void 0!==body&&(contents.body=body),[2,new es.a(contents)]}}))}))},parseBody=function(streamBody,context){return function(streamBody,context){return collectBody(streamBody,context).then((function(body){return context.utf8Encoder(body)}))}(streamBody,context).then((function(encoded){return encoded.length?JSON.parse(encoded):{}}))},loadRestJsonErrorCode=function(output,data){var object,key,sanitizeErrorCode=function(rawValue){var cleanValue=rawValue;return cleanValue.indexOf(":")>=0&&(cleanValue=cleanValue.split(":")[0]),cleanValue.indexOf("#")>=0&&(cleanValue=cleanValue.split("#")[1]),cleanValue},headerKey=(object=output.headers,key="x-amzn-errortype",Object.keys(object).find((function(k){return k.toLowerCase()===key.toLowerCase()})));return void 0!==headerKey?sanitizeErrorCode(output.headers[headerKey]):void 0!==data.code?sanitizeErrorCode(data.code):void 0!==data.__type?sanitizeErrorCode(data.__type):""},dist_es=__webpack_require__(17),smithy_client_dist_es=__webpack_require__(1),GetCredentialsForIdentityCommand_GetCredentialsForIdentityCommand=function(_super){function GetCredentialsForIdentityCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(GetCredentialsForIdentityCommand,_super),GetCredentialsForIdentityCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:models_0_GetCredentialsForIdentityInput.filterSensitiveLog,outputFilterSensitiveLog:models_0_GetCredentialsForIdentityResponse.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},GetCredentialsForIdentityCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,body;return __generator(this,(function(_a){return headers={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},body=JSON.stringify(serializeAws_json1_1GetCredentialsForIdentityInput(input,context)),[2,buildHttpRpcRequest(context,headers,"/",void 0,body)]}))}))}(input,context)},GetCredentialsForIdentityCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var data,contents,response;return __generator(this,(function(_a){switch(_a.label){case 0:return output.statusCode>=300?[2,deserializeAws_json1_1GetCredentialsForIdentityCommandError(output,context)]:[4,parseBody(output.body,context)];case 1:return data=_a.sent(),contents=deserializeAws_json1_1GetCredentialsForIdentityResponse(data,context),response=__assign({$metadata:deserializeMetadata(output)},contents),[2,Promise.resolve(response)]}}))}))}(output,context)},GetCredentialsForIdentityCommand}(smithy_client_dist_es.b),ProviderError_ProviderError=function(_super){function ProviderError(message,tryNextLink){void 0===tryNextLink&&(tryNextLink=!0);var _this=_super.call(this,message)||this;return _this.tryNextLink=tryNextLink,_this}return Object(tslib_es6.__extends)(ProviderError,_super),ProviderError}(Error);function resolveLogins(logins){return Promise.all(Object.keys(logins).reduce((function(arr,name){var tokenOrProvider=logins[name];return"string"==typeof tokenOrProvider?arr.push([name,tokenOrProvider]):arr.push(tokenOrProvider().then((function(token){return[name,token]}))),arr}),[])).then((function(resolvedPairs){return resolvedPairs.reduce((function(logins,_a){var _b=Object(tslib_es6.__read)(_a,2),key=_b[0],value=_b[1];return logins[key]=value,logins}),{})}))}function fromCognitoIdentity(parameters){var _this=this;return function(){return Object(tslib_es6.__awaiter)(_this,void 0,void 0,(function(){var _a,_b,_c,AccessKeyId,Expiration,_d,SecretKey,SessionToken,_e,_f,_g,_h,_j;return Object(tslib_es6.__generator)(this,(function(_k){switch(_k.label){case 0:return _f=(_e=parameters.client).send,_g=GetCredentialsForIdentityCommand_GetCredentialsForIdentityCommand.bind,_j={CustomRoleArn:parameters.customRoleArn,IdentityId:parameters.identityId},parameters.logins?[4,resolveLogins(parameters.logins)]:[3,2];case 1:return _h=_k.sent(),[3,3];case 2:_h=void 0,_k.label=3;case 3:return[4,_f.apply(_e,[new(_g.apply(GetCredentialsForIdentityCommand_GetCredentialsForIdentityCommand,[void 0,(_j.Logins=_h,_j)]))])];case 4:return _a=_k.sent().Credentials,_b=void 0===_a?function(){throw new ProviderError_ProviderError("Response from Amazon Cognito contained no credentials")}():_a,_c=_b.AccessKeyId,AccessKeyId=void 0===_c?function(){throw new ProviderError_ProviderError("Response from Amazon Cognito contained no access key ID")}():_c,Expiration=_b.Expiration,_d=_b.SecretKey,SecretKey=void 0===_d?function(){throw new ProviderError_ProviderError("Response from Amazon Cognito contained no secret key")}():_d,SessionToken=_b.SessionToken,[2,{identityId:parameters.identityId,accessKeyId:AccessKeyId,secretAccessKey:SecretKey,sessionToken:SessionToken,expiration:Expiration}]}}))}))}}var GetIdCommand_GetIdCommand=function(_super){function GetIdCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(GetIdCommand,_super),GetIdCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:models_0_GetIdInput.filterSensitiveLog,outputFilterSensitiveLog:models_0_GetIdResponse.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},GetIdCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,body;return __generator(this,(function(_a){return headers={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},body=JSON.stringify(serializeAws_json1_1GetIdInput(input,context)),[2,buildHttpRpcRequest(context,headers,"/",void 0,body)]}))}))}(input,context)},GetIdCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var data,contents,response;return __generator(this,(function(_a){switch(_a.label){case 0:return output.statusCode>=300?[2,deserializeAws_json1_1GetIdCommandError(output,context)]:[4,parseBody(output.body,context)];case 1:return data=_a.sent(),contents=deserializeAws_json1_1GetIdResponse(data,context),response=__assign({$metadata:deserializeMetadata(output)},contents),[2,Promise.resolve(response)]}}))}))}(output,context)},GetIdCommand}(smithy_client_dist_es.b),IndexedDbStorage=function(){function IndexedDbStorage(dbName){void 0===dbName&&(dbName="aws:cognito-identity-ids"),this.dbName=dbName}return IndexedDbStorage.prototype.getItem=function(key){return this.withObjectStore("readonly",(function(store){var req=store.get(key);return new Promise((function(resolve){req.onerror=function(){return resolve(null)},req.onsuccess=function(){return resolve(req.result?req.result.value:null)}}))})).catch((function(){return null}))},IndexedDbStorage.prototype.removeItem=function(key){return this.withObjectStore("readwrite",(function(store){var req=store.delete(key);return new Promise((function(resolve,reject){req.onerror=function(){return reject(req.error)},req.onsuccess=function(){return resolve()}}))}))},IndexedDbStorage.prototype.setItem=function(id,value){return this.withObjectStore("readwrite",(function(store){var req=store.put({id:id,value:value});return new Promise((function(resolve,reject){req.onerror=function(){return reject(req.error)},req.onsuccess=function(){return resolve()}}))}))},IndexedDbStorage.prototype.getDb=function(){var openDbRequest=self.indexedDB.open(this.dbName,1);return new Promise((function(resolve,reject){openDbRequest.onsuccess=function(){resolve(openDbRequest.result)},openDbRequest.onerror=function(){reject(openDbRequest.error)},openDbRequest.onblocked=function(){reject(new Error("Unable to access DB"))},openDbRequest.onupgradeneeded=function(){var db=openDbRequest.result;db.onerror=function(){reject(new Error("Failed to create object store"))},db.createObjectStore("IdentityIds",{keyPath:"id"})}}))},IndexedDbStorage.prototype.withObjectStore=function(mode,action){return this.getDb().then((function(db){var tx=db.transaction("IdentityIds",mode);return tx.oncomplete=function(){return db.close()},new Promise((function(resolve,reject){tx.onerror=function(){return reject(tx.error)},resolve(action(tx.objectStore("IdentityIds")))})).catch((function(err){throw db.close(),err}))}))},IndexedDbStorage}(),inMemoryStorage=new(function(){function InMemoryStorage(store){void 0===store&&(store={}),this.store=store}return InMemoryStorage.prototype.getItem=function(key){return key in this.store?this.store[key]:null},InMemoryStorage.prototype.removeItem=function(key){delete this.store[key]},InMemoryStorage.prototype.setItem=function(key,value){this.store[key]=value},InMemoryStorage}());function fromCognitoIdentityPool(_a){var _this=this,accountId=_a.accountId,_b=_a.cache,cache=void 0===_b?"object"==typeof self&&self.indexedDB?new IndexedDbStorage:"object"==typeof window&&window.localStorage?window.localStorage:inMemoryStorage:_b,client=_a.client,customRoleArn=_a.customRoleArn,identityPoolId=_a.identityPoolId,logins=_a.logins,_c=_a.userIdentifier,userIdentifier=void 0===_c?logins&&0!==Object.keys(logins).length?void 0:"ANONYMOUS":_c,cacheKey=userIdentifier?"aws:cognito-identity-credentials:"+identityPoolId+":"+userIdentifier:void 0,provider=function(){return Object(tslib_es6.__awaiter)(_this,void 0,void 0,(function(){var identityId,_a,_b,IdentityId,_c,_d,_e,_f,_g;return Object(tslib_es6.__generator)(this,(function(_h){switch(_h.label){case 0:return(_a=cacheKey)?[4,cache.getItem(cacheKey)]:[3,2];case 1:_a=_h.sent(),_h.label=2;case 2:return(identityId=_a)?[3,7]:(_d=(_c=client).send,_e=GetIdCommand_GetIdCommand.bind,_g={AccountId:accountId,IdentityPoolId:identityPoolId},logins?[4,resolveLogins(logins)]:[3,4]);case 3:return _f=_h.sent(),[3,5];case 4:_f=void 0,_h.label=5;case 5:return[4,_d.apply(_c,[new(_e.apply(GetIdCommand_GetIdCommand,[void 0,(_g.Logins=_f,_g)]))])];case 6:_b=_h.sent().IdentityId,IdentityId=void 0===_b?function(){throw new ProviderError_ProviderError("Response from Amazon Cognito contained no identity ID")}():_b,identityId=IdentityId,cacheKey&&Promise.resolve(cache.setItem(cacheKey,identityId)).catch((function(){})),_h.label=7;case 7:return[2,(provider=fromCognitoIdentity({client:client,customRoleArn:customRoleArn,logins:logins,identityId:identityId}))()]}}))}))};return function(){return provider().catch((function(err){return Object(tslib_es6.__awaiter)(_this,void 0,void 0,(function(){return Object(tslib_es6.__generator)(this,(function(_a){throw cacheKey&&Promise.resolve(cache.removeItem(cacheKey)).catch((function(){})),err}))}))}))}}var es_package=__webpack_require__(314),build=__webpack_require__(59),fetch_http_handler_dist_es=__webpack_require__(32),invalid_dependency_dist_es=__webpack_require__(62),middleware_retry_dist_es=__webpack_require__(18),util_base64_browser_dist_es=__webpack_require__(31),util_body_length_browser_dist_es=__webpack_require__(60),util_user_agent_browser_dist_es=__webpack_require__(61),util_utf8_browser_dist_es=__webpack_require__(21),AWS_TEMPLATE="cognito-identity.{region}.amazonaws.com",AWS_REGIONS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),AWS_CN_REGIONS=new Set(["cn-north-1","cn-northwest-1"]),AWS_ISO_REGIONS=new Set(["us-iso-east-1"]),AWS_ISO_B_REGIONS=new Set(["us-isob-east-1"]),AWS_US_GOV_REGIONS=new Set(["us-gov-east-1","us-gov-west-1"]),ClientSharedValues={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(region,options){var regionInfo=void 0;switch(region){case"ap-northeast-1":regionInfo={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":regionInfo={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":regionInfo={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":regionInfo={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":regionInfo={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":regionInfo={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":regionInfo={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":regionInfo={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":regionInfo={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":regionInfo={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":regionInfo={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":regionInfo={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":regionInfo={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":regionInfo={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":regionInfo={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":regionInfo={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":regionInfo={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":regionInfo={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":regionInfo={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":regionInfo={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":regionInfo={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":regionInfo={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:AWS_REGIONS.has(region)&&(regionInfo={hostname:AWS_TEMPLATE.replace("{region}",region),partition:"aws"}),AWS_CN_REGIONS.has(region)&&(regionInfo={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",region),partition:"aws-cn"}),AWS_ISO_REGIONS.has(region)&&(regionInfo={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",region),partition:"aws-iso"}),AWS_ISO_B_REGIONS.has(region)&&(regionInfo={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",region),partition:"aws-iso-b"}),AWS_US_GOV_REGIONS.has(region)&&(regionInfo={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",region),partition:"aws-us-gov"}),void 0===regionInfo&&(regionInfo={hostname:AWS_TEMPLATE.replace("{region}",region),partition:"aws"})}return Promise.resolve(__assign({signingService:"cognito-identity"},regionInfo))},serviceId:"Cognito Identity",urlParser:__webpack_require__(64).a},ClientDefaultValues=__assign(__assign({},ClientSharedValues),{runtime:"browser",base64Decoder:util_base64_browser_dist_es.a,base64Encoder:util_base64_browser_dist_es.b,bodyLengthChecker:util_body_length_browser_dist_es.a,credentialDefaultProvider:function(_){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(util_user_agent_browser_dist_es.a)({serviceId:ClientSharedValues.serviceId,clientVersion:es_package.version}),maxAttempts:middleware_retry_dist_es.a,region:Object(invalid_dependency_dist_es.a)("Region is missing"),requestHandler:new fetch_http_handler_dist_es.a,sha256:build.Sha256,streamCollector:fetch_http_handler_dist_es.b,utf8Decoder:util_utf8_browser_dist_es.fromUtf8,utf8Encoder:util_utf8_browser_dist_es.toUtf8}),config_resolver_dist_es=__webpack_require__(36),middleware_content_length_dist_es=__webpack_require__(58),middleware_host_header_dist_es=__webpack_require__(34),middleware_logger_dist_es=__webpack_require__(63),middleware_signing_dist_es=__webpack_require__(41),middleware_user_agent_dist_es=__webpack_require__(35),CognitoIdentityClient_CognitoIdentityClient=function(_super){function CognitoIdentityClient(configuration){var _this=this,_config_0=__assign(__assign({},ClientDefaultValues),configuration),_config_1=Object(config_resolver_dist_es.b)(_config_0),_config_2=Object(config_resolver_dist_es.a)(_config_1),_config_3=Object(middleware_signing_dist_es.b)(_config_2),_config_4=Object(middleware_retry_dist_es.c)(_config_3),_config_5=Object(middleware_host_header_dist_es.b)(_config_4),_config_6=Object(middleware_user_agent_dist_es.b)(_config_5);return(_this=_super.call(this,_config_6)||this).config=_config_6,_this.middlewareStack.use(Object(middleware_retry_dist_es.b)(_this.config)),_this.middlewareStack.use(Object(middleware_content_length_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_host_header_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_logger_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_user_agent_dist_es.a)(_this.config)),_this}return __extends(CognitoIdentityClient,_super),CognitoIdentityClient.prototype.destroy=function(){_super.prototype.destroy.call(this)},CognitoIdentityClient}(smithy_client_dist_es.a);__webpack_require__.d(__webpack_exports__,"a",(function(){return Credentials_Credentials}));var Credentials_assign=function(){return(Credentials_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Credentials_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Credentials_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},Credentials_logger=new ConsoleLogger.a("Credentials"),Credentials_Credentials=new(function(){function CredentialsClass(config){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(config),this._refreshHandlers.google=OAuthHelper.b.refreshGoogleToken,this._refreshHandlers.facebook=OAuthHelper.a.refreshFacebookToken}return CredentialsClass.prototype.getModuleName=function(){return"Credentials"},CredentialsClass.prototype.getCredSource=function(){return this._credentials_source},CredentialsClass.prototype.configure=function(config){if(!config)return this._config||{};this._config=Object.assign({},this._config,config);var refreshHandlers=this._config.refreshHandlers;return refreshHandlers&&(this._refreshHandlers=Credentials_assign(Credentials_assign({},this._refreshHandlers),refreshHandlers)),this._storage=this._config.storage,this._storage||(this._storage=(new StorageHelper.a).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},CredentialsClass.prototype.get=function(){return Credentials_logger.debug("getting credentials"),this._pickupCredentials()},CredentialsClass.prototype._pickupCredentials=function(){return Credentials_logger.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?Credentials_logger.debug("getting old cred promise"):(Credentials_logger.debug("getting new cred promise"),this._gettingCredPromise=Object(JS.d)(this._keepAlive())),this._gettingCredPromise},CredentialsClass.prototype._keepAlive=function(){return Credentials_awaiter(this,void 0,void 0,(function(){var cred,_a,Auth,user_1,session,refreshToken_1,err_1;return Credentials_generator(this,(function(_b){switch(_b.label){case 0:if(Credentials_logger.debug("checking if credentials exists and not expired"),(cred=this._credentials)&&!this._isExpired(cred)&&!this._isPastTTL())return Credentials_logger.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(cred)];if(Credentials_logger.debug("need to get a new credential or refresh the existing one"),_a=this.Auth,!(Auth=void 0===_a?Amplify.a.Auth:_a)||"function"!=typeof Auth.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(cred)||!this._isPastTTL())return[3,6];Credentials_logger.debug("ttl has passed but token is not yet expired"),_b.label=1;case 1:return _b.trys.push([1,5,,6]),[4,Auth.currentUserPoolUser()];case 2:return user_1=_b.sent(),[4,Auth.currentSession()];case 3:return session=_b.sent(),refreshToken_1=session.refreshToken,[4,new Promise((function(res,rej){user_1.refreshSession(refreshToken_1,(function(err,data){return err?rej(err):res(data)}))}))];case 4:return _b.sent(),[3,6];case 5:return err_1=_b.sent(),Credentials_logger.debug("Error attempting to refreshing the session",err_1),[3,6];case 6:return[2,Auth.currentUserCredentials()]}}))}))},CredentialsClass.prototype.refreshFederatedToken=function(federatedInfo){Credentials_logger.debug("Getting federated credentials");var provider=federatedInfo.provider,user=federatedInfo.user,token=federatedInfo.token,identity_id=federatedInfo.identity_id,expires_at=federatedInfo.expires_at;expires_at=1970===new Date(expires_at).getFullYear()?1e3*expires_at:expires_at;return Credentials_logger.debug("checking if federated jwt token expired"),expires_at>(new Date).getTime()?(Credentials_logger.debug("token not expired"),this._setCredentialsFromFederation({provider:provider,token:token,user:user,identity_id:identity_id,expires_at:expires_at})):this._refreshHandlers[provider]&&"function"==typeof this._refreshHandlers[provider]?(Credentials_logger.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:this._refreshHandlers[provider],provider:provider,user:user})):(Credentials_logger.debug("no refresh handler for provider:",provider),this.clear(),Promise.reject("no refresh handler for provider"))},CredentialsClass.prototype._providerRefreshWithRetry=function(_a){var _this=this,refreshHandler=_a.refreshHandler,provider=_a.provider,user=_a.user;return Object(Retry.b)(refreshHandler,[],1e4).then((function(data){return Credentials_logger.debug("refresh federated token sucessfully",data),_this._setCredentialsFromFederation({provider:provider,token:data.token,user:user,identity_id:data.identity_id,expires_at:data.expires_at})})).catch((function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||_this.clear(),Credentials_logger.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)}))},CredentialsClass.prototype._isExpired=function(credentials){if(!credentials)return Credentials_logger.debug("no credentials for expiration check"),!0;Credentials_logger.debug("are these credentials expired?",credentials);var ts=Date.now();return credentials.expiration.getTime()<=ts},CredentialsClass.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},CredentialsClass.prototype._setCredentialsForGuest=function(){return Credentials_awaiter(this,void 0,void 0,(function(){var _a,identityPoolId,region,identityId,e_1,cognitoClient,credentials,_this=this;return Credentials_generator(this,(function(_b){switch(_b.label){case 0:if(Credentials_logger.debug("setting credentials for guest"),_a=this._config,identityPoolId=_a.identityPoolId,region=_a.region,_a.mandatorySignIn)return[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")];if(!identityPoolId)return Credentials_logger.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")];if(!region)return Credentials_logger.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")];identityId=void 0,_b.label=1;case 1:return _b.trys.push([1,3,,4]),[4,this._storageSync];case 2:return _b.sent(),identityId=this._storage.getItem("CognitoIdentityId-"+identityPoolId),this._identityId=identityId,[3,4];case 3:return e_1=_b.sent(),Credentials_logger.debug("Failed to get the cached identityId",e_1),[3,4];case 4:return cognitoClient=new CognitoIdentityClient_CognitoIdentityClient({region:region,customUserAgent:Object(Platform.b)()}),credentials=void 0,credentials=identityId?fromCognitoIdentity({identityId:identityId,client:cognitoClient})():function(){return Credentials_awaiter(_this,void 0,void 0,(function(){var IdentityId;return Credentials_generator(this,(function(_a){switch(_a.label){case 0:return[4,cognitoClient.send(new GetIdCommand_GetIdCommand({IdentityPoolId:identityPoolId}))];case 1:return IdentityId=_a.sent().IdentityId,this._identityId=IdentityId,[2,fromCognitoIdentity({client:cognitoClient,identityId:IdentityId})()]}}))}))}().catch((function(err){return Credentials_awaiter(_this,void 0,void 0,(function(){return Credentials_generator(this,(function(_a){throw err}))}))})),[2,this._loadCredentials(credentials,"guest",!1,null).then((function(res){return res})).catch((function(e){return Credentials_awaiter(_this,void 0,void 0,(function(){var _this=this;return Credentials_generator(this,(function(_a){return"ResourceNotFoundException"===e.name&&e.message==="Identity '"+identityId+"' not found."?(Credentials_logger.debug("Failed to load guest credentials"),this._storage.removeItem("CognitoIdentityId-"+identityPoolId),credentials=function(){return Credentials_awaiter(_this,void 0,void 0,(function(){var IdentityId;return Credentials_generator(this,(function(_a){switch(_a.label){case 0:return[4,cognitoClient.send(new GetIdCommand_GetIdCommand({IdentityPoolId:identityPoolId}))];case 1:return IdentityId=_a.sent().IdentityId,this._identityId=IdentityId,[2,fromCognitoIdentity({client:cognitoClient,identityId:IdentityId})()]}}))}))}().catch((function(err){return Credentials_awaiter(_this,void 0,void 0,(function(){return Credentials_generator(this,(function(_a){throw err}))}))})),[2,this._loadCredentials(credentials,"guest",!1,null)]):[2,e]}))}))}))]}}))}))},CredentialsClass.prototype._setCredentialsFromFederation=function(params){var provider=params.provider,token=params.token,identity_id=params.identity_id,domain={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[provider]||provider;if(!domain)return Promise.reject("You must specify a federated provider");var logins={};logins[domain]=token;var _a=this._config,identityPoolId=_a.identityPoolId,region=_a.region;if(!identityPoolId)return Credentials_logger.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!region)return Credentials_logger.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var cognitoClient=new CognitoIdentityClient_CognitoIdentityClient({region:region,customUserAgent:Object(Platform.b)()}),credentials=void 0;identity_id?credentials=fromCognitoIdentity({identityId:identity_id,logins:logins,client:cognitoClient})():credentials=fromCognitoIdentityPool({logins:logins,identityPoolId:identityPoolId,client:cognitoClient})();return this._loadCredentials(credentials,"federated",!0,params)},CredentialsClass.prototype._setCredentialsFromSession=function(session){var _this=this;Credentials_logger.debug("set credentials from session");var idToken=session.getIdToken().getJwtToken(),_a=this._config,region=_a.region,userPoolId=_a.userPoolId,identityPoolId=_a.identityPoolId;if(!identityPoolId)return Credentials_logger.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!region)return Credentials_logger.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var logins={};logins["cognito-idp."+region+".amazonaws.com/"+userPoolId]=idToken;var cognitoClient=new CognitoIdentityClient_CognitoIdentityClient({region:region,customUserAgent:Object(Platform.b)()}),credentials=Credentials_awaiter(_this,void 0,void 0,(function(){var IdentityId;return Credentials_generator(this,(function(_a){switch(_a.label){case 0:return[4,cognitoClient.send(new GetIdCommand_GetIdCommand({IdentityPoolId:identityPoolId,Logins:logins}))];case 1:return IdentityId=_a.sent().IdentityId,this._identityId=IdentityId,[2,fromCognitoIdentity({client:cognitoClient,logins:logins,identityId:IdentityId})()]}}))})).catch((function(err){return Credentials_awaiter(_this,void 0,void 0,(function(){return Credentials_generator(this,(function(_a){throw err}))}))}));return this._loadCredentials(credentials,"userPool",!0,null)},CredentialsClass.prototype._loadCredentials=function(credentials,source,authenticated,info){var _this=this,that=this,identityPoolId=this._config.identityPoolId;return new Promise((function(res,rej){credentials.then((function(credentials){return Credentials_awaiter(_this,void 0,void 0,(function(){var user,provider,token,expires_at,identity_id,e_2;return Credentials_generator(this,(function(_a){switch(_a.label){case 0:if(Credentials_logger.debug("Load credentials successfully",credentials),this._identityId&&!credentials.identityId&&(credentials.identityId=this._identityId),that._credentials=credentials,that._credentials.authenticated=authenticated,that._credentials_source=source,that._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===source){user=Object.assign({id:this._credentials.identityId},info.user),provider=info.provider,token=info.token,expires_at=info.expires_at,identity_id=info.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:provider,token:token,user:user,expires_at:expires_at,identity_id:identity_id}))}catch(e){Credentials_logger.debug("Failed to put federated info into auth storage",e)}}if("guest"!==source)return[3,4];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this._storageSync];case 2:return _a.sent(),this._storage.setItem("CognitoIdentityId-"+identityPoolId,credentials.identityId),[3,4];case 3:return e_2=_a.sent(),Credentials_logger.debug("Failed to cache identityId",e_2),[3,4];case 4:return res(that._credentials),[2]}}))}))})).catch((function(err){if(err)return Credentials_logger.debug("Failed to load credentials",credentials),Credentials_logger.debug("Error loading credentials",err),void rej(err)}))}))},CredentialsClass.prototype.set=function(params,source){return"session"===source?this._setCredentialsFromSession(params):"federation"===source?this._setCredentialsFromFederation(params):"guest"===source?this._setCredentialsForGuest():(Credentials_logger.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},CredentialsClass.prototype.clear=function(){return Credentials_awaiter(this,void 0,void 0,(function(){return Credentials_generator(this,(function(_a){return this._credentials=null,this._credentials_source=null,Credentials_logger.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]}))}))},CredentialsClass.prototype.shear=function(credentials){return{accessKeyId:credentials.accessKeyId,sessionToken:credentials.sessionToken,secretAccessKey:credentials.secretAccessKey,identityId:credentials.identityId,authenticated:credentials.authenticated}},CredentialsClass}())(null);Amplify.a.register(Credentials_Credentials)},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),QueueAction_QueueAction=function(_super){function QueueAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this}return tslib_es6.__extends(QueueAction,_super),QueueAction.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),delay>0?_super.prototype.schedule.call(this,state,delay):(this.delay=delay,this.state=state,this.scheduler.flush(this),this)},QueueAction.prototype.execute=function(state,delay){return delay>0||this.closed?_super.prototype.execute.call(this,state,delay):this._execute(state,delay)},QueueAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&delay>0||null===delay&&this.delay>0?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):scheduler.flush(this)},QueueAction}(__webpack_require__(90).a),QueueScheduler_QueueScheduler=function(_super){function QueueScheduler(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.__extends(QueueScheduler,_super),QueueScheduler}(__webpack_require__(88).a);__webpack_require__.d(__webpack_exports__,"a",(function(){return queue}));var queue=new QueueScheduler_QueueScheduler(QueueAction_QueueAction)},function(module,__webpack_exports__,__webpack_require__){"use strict";function isObject(x){return null!=x&&"object"==typeof x}__webpack_require__.d(__webpack_exports__,"a",(function(){return isObject}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubjectSubscription}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),SubjectSubscription=function(_super){function SubjectSubscription(subject,subscriber){var _this=_super.call(this)||this;return _this.subject=subject,_this.subscriber=subscriber,_this.closed=!1,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.__extends(SubjectSubscription,_super),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var subject=this.subject,observers=subject.observers;if(this.subject=null,observers&&0!==observers.length&&!subject.isStopped&&!subject.closed){var subscriberIndex=observers.indexOf(this.subscriber);-1!==subscriberIndex&&observers.splice(subscriberIndex,1)}}},SubjectSubscription}(__webpack_require__(12).a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return subscribeToArray}));var subscribeToArray=function(array){return function(subscriber){for(var i=0,len=array.length;i<len&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.closed||subscriber.complete()}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return subscribeTo}));var _Observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_subscribeToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(179),_subscribeToPromise__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(184),_subscribeToIterable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(185),_subscribeToObservable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(181),_isArrayLike__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(182),_isPromise__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(183),_isObject__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(177),_symbol_iterator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(70),_symbol_observable__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(73),subscribeTo=function(result){if(result instanceof _Observable__WEBPACK_IMPORTED_MODULE_0__.a)return function(subscriber){return result._isScalar?(subscriber.next(result.value),void subscriber.complete()):result.subscribe(subscriber)};if(result&&"function"==typeof result[_symbol_observable__WEBPACK_IMPORTED_MODULE_9__.a])return Object(_subscribeToObservable__WEBPACK_IMPORTED_MODULE_4__.a)(result);if(Object(_isArrayLike__WEBPACK_IMPORTED_MODULE_5__.a)(result))return Object(_subscribeToArray__WEBPACK_IMPORTED_MODULE_1__.a)(result);if(Object(_isPromise__WEBPACK_IMPORTED_MODULE_6__.a)(result))return Object(_subscribeToPromise__WEBPACK_IMPORTED_MODULE_2__.a)(result);if(result&&"function"==typeof result[_symbol_iterator__WEBPACK_IMPORTED_MODULE_8__.a])return Object(_subscribeToIterable__WEBPACK_IMPORTED_MODULE_3__.a)(result);var value=Object(_isObject__WEBPACK_IMPORTED_MODULE_7__.a)(result)?"an invalid object":"'"+result+"'";throw new TypeError("You provided "+value+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return subscribeToObservable}));var _symbol_observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(73),subscribeToObservable=function(obj){return function(subscriber){var obs=obj[_symbol_observable__WEBPACK_IMPORTED_MODULE_0__.a]();if("function"!=typeof obs.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return obs.subscribe(subscriber)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isArrayLike}));var isArrayLike=function(x){return x&&"number"==typeof x.length&&"function"!=typeof x}},function(module,__webpack_exports__,__webpack_require__){"use strict";function isPromise(value){return value&&"function"!=typeof value.subscribe&&"function"==typeof value.then}__webpack_require__.d(__webpack_exports__,"a",(function(){return isPromise}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return subscribeToPromise}));var _hostReportError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(98),subscribeToPromise=function(promise){return function(subscriber){return promise.then((function(value){subscriber.closed||(subscriber.next(value),subscriber.complete())}),(function(err){return subscriber.error(err)})).then(null,_hostReportError__WEBPACK_IMPORTED_MODULE_0__.a),subscriber}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return subscribeToIterable}));var _symbol_iterator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(70),subscribeToIterable=function(iterable){return function(subscriber){for(var iterator=iterable[_symbol_iterator__WEBPACK_IMPORTED_MODULE_0__.a]();;){var item=iterator.next();if(item.done){subscriber.complete();break}if(subscriber.next(item.value),subscriber.closed)break}return"function"==typeof iterator.return&&subscriber.add((function(){iterator.return&&iterator.return()})),subscriber}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Hub}));var _Logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(84),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},logger=new _Logger__WEBPACK_IMPORTED_MODULE_0__.a("Hub"),AMPLIFY_SYMBOL="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";var Hub=new(function(){function HubClass(name){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","xr"],this.name=name}return HubClass.prototype.remove=function(channel,listener){if(channel instanceof RegExp){var pattern_1=this.patterns.find((function(_a){return _a.pattern.source===channel.source}));if(!pattern_1)return void logger.warn("No listeners for "+channel);this.patterns=__spread(this.patterns.filter((function(x){return x!==pattern_1})))}else{var holder=this.listeners[channel];if(!holder)return void logger.warn("No listeners for "+channel);this.listeners[channel]=__spread(holder.filter((function(_a){return _a.callback!==listener})))}},HubClass.prototype.dispatch=function(channel,payload,source,ampSymbol){(void 0===source&&(source=""),this.protectedChannels.indexOf(channel)>-1)&&(ampSymbol===AMPLIFY_SYMBOL||logger.warn("WARNING: "+channel+" is protected and dispatching on it can have unintended consequences"));var capsule={channel:channel,payload:__assign({},payload),source:source,patternInfo:[]};try{this._toListeners(capsule)}catch(e){logger.error(e)}},HubClass.prototype.listen=function(channel,callback,listenerName){var cb,_this=this;if(void 0===listenerName&&(listenerName="noname"),function(callback){return void 0!==callback.onHubCapsule}(callback))logger.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),cb=callback.onHubCapsule.bind(callback);else{if("function"!=typeof callback)throw new Error("No callback supplied to Hub");cb=callback}if(channel instanceof RegExp)this.patterns.push({pattern:channel,callback:cb});else{var holder=this.listeners[channel];holder||(holder=[],this.listeners[channel]=holder),holder.push({name:listenerName,callback:cb})}return function(){_this.remove(channel,cb)}},HubClass.prototype._toListeners=function(capsule){var channel=capsule.channel,payload=capsule.payload,holder=this.listeners[channel];if(holder&&holder.forEach((function(listener){logger.debug("Dispatching to "+channel+" with ",payload);try{listener.callback(capsule)}catch(e){logger.error(e)}})),this.patterns.length>0){if(!payload.message)return void logger.warn("Cannot perform pattern matching without a message key");var payloadStr_1=payload.message;this.patterns.forEach((function(pattern){var match=payloadStr_1.match(pattern.pattern);if(match){var groups=__read(match).slice(1),dispatchingCapsule=__assign(__assign({},capsule),{patternInfo:groups});try{pattern.callback(dispatchingCapsule)}catch(e){logger.error(e)}}}))}},HubClass}())("__default__")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Crc32=exports.crc32=void 0;var tslib_1=__webpack_require__(497);exports.crc32=function(data){return(new Crc32).update(data).digest()};var Crc32=function(){function Crc32(){this.checksum=4294967295}return Crc32.prototype.update=function(data){var e_1,_a;try{for(var data_1=tslib_1.__values(data),data_1_1=data_1.next();!data_1_1.done;data_1_1=data_1.next()){var byte=data_1_1.value;this.checksum=this.checksum>>>8^lookupTable[255&(this.checksum^byte)]}}catch(e_1_1){e_1={error:e_1_1}}finally{try{data_1_1&&!data_1_1.done&&(_a=data_1.return)&&_a.call(data_1)}finally{if(e_1)throw e_1.error}}return this},Crc32.prototype.digest=function(){return(4294967295^this.checksum)>>>0},Crc32}();exports.Crc32=Crc32;var lookupTable=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(542);module.exports=function(value,other){return baseIsEqual(value,other)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var build=__webpack_require__(187),tslib_es6=__webpack_require__(0),es=__webpack_require__(37),Int64_Int64=function(){function Int64(bytes){if(this.bytes=bytes,8!==bytes.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return Int64.fromNumber=function(number){if(number>0x8000000000000000||number<-0x8000000000000000)throw new Error(number+" is too large (or, if negative, too small) to represent as an Int64");for(var bytes=new Uint8Array(8),i=7,remaining=Math.abs(Math.round(number));i>-1&&remaining>0;i--,remaining/=256)bytes[i]=remaining;return number<0&&negate(bytes),new Int64(bytes)},Int64.prototype.valueOf=function(){var bytes=this.bytes.slice(0),negative=128&bytes[0];return negative&&negate(bytes),parseInt(Object(es.b)(bytes),16)*(negative?-1:1)},Int64.prototype.toString=function(){return String(this.valueOf())},Int64}();function negate(bytes){for(var i=0;i<8;i++)bytes[i]^=255;for(i=7;i>-1&&(bytes[i]++,0===bytes[i]);i--);}var HEADER_VALUE_TYPE,HeaderMarshaller_HeaderMarshaller=function(){function HeaderMarshaller(toUtf8,fromUtf8){this.toUtf8=toUtf8,this.fromUtf8=fromUtf8}return HeaderMarshaller.prototype.format=function(headers){var e_1,_a,e_2,_b,chunks=[];try{for(var _c=Object(tslib_es6.__values)(Object.keys(headers)),_d=_c.next();!_d.done;_d=_c.next()){var headerName=_d.value,bytes=this.fromUtf8(headerName);chunks.push(Uint8Array.from([bytes.byteLength]),bytes,this.formatHeaderValue(headers[headerName]))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}var out=new Uint8Array(chunks.reduce((function(carry,bytes){return carry+bytes.byteLength}),0)),position=0;try{for(var chunks_1=Object(tslib_es6.__values)(chunks),chunks_1_1=chunks_1.next();!chunks_1_1.done;chunks_1_1=chunks_1.next()){var chunk=chunks_1_1.value;out.set(chunk,position),position+=chunk.byteLength}}catch(e_2_1){e_2={error:e_2_1}}finally{try{chunks_1_1&&!chunks_1_1.done&&(_b=chunks_1.return)&&_b.call(chunks_1)}finally{if(e_2)throw e_2.error}}return out},HeaderMarshaller.prototype.formatHeaderValue=function(header){switch(header.type){case"boolean":return Uint8Array.from([header.value?0:1]);case"byte":return Uint8Array.from([2,header.value]);case"short":var shortView=new DataView(new ArrayBuffer(3));return shortView.setUint8(0,3),shortView.setInt16(1,header.value,!1),new Uint8Array(shortView.buffer);case"integer":var intView=new DataView(new ArrayBuffer(5));return intView.setUint8(0,4),intView.setInt32(1,header.value,!1),new Uint8Array(intView.buffer);case"long":var longBytes=new Uint8Array(9);return longBytes[0]=5,longBytes.set(header.value.bytes,1),longBytes;case"binary":var binView=new DataView(new ArrayBuffer(3+header.value.byteLength));binView.setUint8(0,6),binView.setUint16(1,header.value.byteLength,!1);var binBytes=new Uint8Array(binView.buffer);return binBytes.set(header.value,3),binBytes;case"string":var utf8Bytes=this.fromUtf8(header.value),strView=new DataView(new ArrayBuffer(3+utf8Bytes.byteLength));strView.setUint8(0,7),strView.setUint16(1,utf8Bytes.byteLength,!1);var strBytes=new Uint8Array(strView.buffer);return strBytes.set(utf8Bytes,3),strBytes;case"timestamp":var tsBytes=new Uint8Array(9);return tsBytes[0]=8,tsBytes.set(Int64_Int64.fromNumber(header.value.valueOf()).bytes,1),tsBytes;case"uuid":if(!UUID_PATTERN.test(header.value))throw new Error("Invalid UUID received: "+header.value);var uuidBytes=new Uint8Array(17);return uuidBytes[0]=9,uuidBytes.set(Object(es.a)(header.value.replace(/\-/g,"")),1),uuidBytes}},HeaderMarshaller.prototype.parse=function(headers){for(var out={},position=0;position<headers.byteLength;){var nameLength=headers.getUint8(position++),name=this.toUtf8(new Uint8Array(headers.buffer,headers.byteOffset+position,nameLength));switch(position+=nameLength,headers.getUint8(position++)){case 0:out[name]={type:BOOLEAN_TAG,value:!0};break;case 1:out[name]={type:BOOLEAN_TAG,value:!1};break;case 2:out[name]={type:BYTE_TAG,value:headers.getInt8(position++)};break;case 3:out[name]={type:SHORT_TAG,value:headers.getInt16(position,!1)},position+=2;break;case 4:out[name]={type:INT_TAG,value:headers.getInt32(position,!1)},position+=4;break;case 5:out[name]={type:LONG_TAG,value:new Int64_Int64(new Uint8Array(headers.buffer,headers.byteOffset+position,8))},position+=8;break;case 6:var binaryLength=headers.getUint16(position,!1);position+=2,out[name]={type:BINARY_TAG,value:new Uint8Array(headers.buffer,headers.byteOffset+position,binaryLength)},position+=binaryLength;break;case 7:var stringLength=headers.getUint16(position,!1);position+=2,out[name]={type:STRING_TAG,value:this.toUtf8(new Uint8Array(headers.buffer,headers.byteOffset+position,stringLength))},position+=stringLength;break;case 8:out[name]={type:TIMESTAMP_TAG,value:new Date(new Int64_Int64(new Uint8Array(headers.buffer,headers.byteOffset+position,8)).valueOf())},position+=8;break;case 9:var uuidBytes=new Uint8Array(headers.buffer,headers.byteOffset+position,16);position+=16,out[name]={type:UUID_TAG,value:Object(es.b)(uuidBytes.subarray(0,4))+"-"+Object(es.b)(uuidBytes.subarray(4,6))+"-"+Object(es.b)(uuidBytes.subarray(6,8))+"-"+Object(es.b)(uuidBytes.subarray(8,10))+"-"+Object(es.b)(uuidBytes.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return out},HeaderMarshaller}();!function(HEADER_VALUE_TYPE){HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.boolTrue=0]="boolTrue",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.boolFalse=1]="boolFalse",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.byte=2]="byte",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.short=3]="short",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.integer=4]="integer",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.long=5]="long",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.byteArray=6]="byteArray",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.string=7]="string",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.timestamp=8]="timestamp",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.uuid=9]="uuid"}(HEADER_VALUE_TYPE||(HEADER_VALUE_TYPE={}));var BOOLEAN_TAG="boolean",BYTE_TAG="byte",SHORT_TAG="short",INT_TAG="integer",LONG_TAG="long",BINARY_TAG="binary",STRING_TAG="string",TIMESTAMP_TAG="timestamp",UUID_TAG="uuid",UUID_PATTERN=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var EventStreamMarshaller_EventStreamMarshaller=function(){function EventStreamMarshaller(toUtf8,fromUtf8){this.headerMarshaller=new HeaderMarshaller_HeaderMarshaller(toUtf8,fromUtf8)}return EventStreamMarshaller.prototype.marshall=function(_a){var rawHeaders=_a.headers,body=_a.body,headers=this.headerMarshaller.format(rawHeaders),length=headers.byteLength+body.byteLength+16,out=new Uint8Array(length),view=new DataView(out.buffer,out.byteOffset,out.byteLength),checksum=new build.Crc32;return view.setUint32(0,length,!1),view.setUint32(4,headers.byteLength,!1),view.setUint32(8,checksum.update(out.subarray(0,8)).digest(),!1),out.set(headers,12),out.set(body,headers.byteLength+12),view.setUint32(length-4,checksum.update(out.subarray(8,length-4)).digest(),!1),out},EventStreamMarshaller.prototype.unmarshall=function(message){var _a=function(_a){var byteLength=_a.byteLength,byteOffset=_a.byteOffset,buffer=_a.buffer;if(byteLength<16)throw new Error("Provided message too short to accommodate event stream message overhead");var view=new DataView(buffer,byteOffset,byteLength),messageLength=view.getUint32(0,!1);if(byteLength!==messageLength)throw new Error("Reported message length does not match received message length");var headerLength=view.getUint32(4,!1),expectedPreludeChecksum=view.getUint32(8,!1),expectedMessageChecksum=view.getUint32(byteLength-4,!1),checksummer=(new build.Crc32).update(new Uint8Array(buffer,byteOffset,8));if(expectedPreludeChecksum!==checksummer.digest())throw new Error("The prelude checksum specified in the message ("+expectedPreludeChecksum+") does not match the calculated CRC32 checksum ("+checksummer.digest()+")");if(checksummer.update(new Uint8Array(buffer,byteOffset+8,byteLength-12)),expectedMessageChecksum!==checksummer.digest())throw new Error("The message checksum ("+checksummer.digest()+") did not match the expected value of "+expectedMessageChecksum);return{headers:new DataView(buffer,byteOffset+8+4,headerLength),body:new Uint8Array(buffer,byteOffset+8+4+headerLength,messageLength-headerLength-16)}}(message),headers=_a.headers,body=_a.body;return{headers:this.headerMarshaller.parse(headers),body:body}},EventStreamMarshaller.prototype.formatHeaders=function(rawHeaders){return this.headerMarshaller.format(rawHeaders)},EventStreamMarshaller}();var es_EventStreamMarshaller_EventStreamMarshaller=function(){function EventStreamMarshaller(_a){var utf8Encoder=_a.utf8Encoder,utf8Decoder=_a.utf8Decoder;this.eventMarshaller=new EventStreamMarshaller_EventStreamMarshaller(utf8Encoder,utf8Decoder),this.utfEncoder=utf8Encoder}return EventStreamMarshaller.prototype.deserialize=function(body,deserializer){var source,_a,currentMessageTotalLength,currentMessagePendingLength,currentMessage,messageLengthBuffer,allocateMessage;return function(source,options){var _a;return(_a={})[Symbol.asyncIterator]=function(){return Object(tslib_es6.__asyncGenerator)(this,arguments,(function(){var source_1,source_1_1,chunk,message,messageType,unmodeledError,code,exception,deserializedException,error,event,deserialized,e_1_1,_a,_b,e_1,_c;return Object(tslib_es6.__generator)(this,(function(_d){switch(_d.label){case 0:_d.trys.push([0,12,13,18]),source_1=Object(tslib_es6.__asyncValues)(source),_d.label=1;case 1:return[4,Object(tslib_es6.__await)(source_1.next())];case 2:if((source_1_1=_d.sent()).done)return[3,11];if(chunk=source_1_1.value,message=options.eventMarshaller.unmarshall(chunk),"error"!==(messageType=message.headers[":message-type"].value))return[3,3];throw(unmodeledError=new Error(message.headers[":error-message"].value||"UnknownError")).name=message.headers[":error-code"].value,unmodeledError;case 3:return"exception"!==messageType?[3,5]:(code=message.headers[":exception-type"].value,(_a={})[code]=message,exception=_a,[4,Object(tslib_es6.__await)(options.deserializer(exception))]);case 4:if((deserializedException=_d.sent()).$unknown)throw(error=new Error(options.toUtf8(message.body))).name=code,error;throw deserializedException[code];case 5:return"event"!==messageType?[3,9]:((_b={})[message.headers[":event-type"].value]=message,event=_b,[4,Object(tslib_es6.__await)(options.deserializer(event))]);case 6:return(deserialized=_d.sent()).$unknown?[3,10]:[4,Object(tslib_es6.__await)(deserialized)];case 7:return[4,_d.sent()];case 8:return _d.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+message.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return e_1_1=_d.sent(),e_1={error:e_1_1},[3,18];case 13:return _d.trys.push([13,,16,17]),source_1_1&&!source_1_1.done&&(_c=source_1.return)?[4,Object(tslib_es6.__await)(_c.call(source_1))]:[3,15];case 14:_d.sent(),_d.label=15;case 15:return[3,17];case 16:if(e_1)throw e_1.error;return[7];case 17:return[7];case 18:return[2]}}))}))},_a}((source=body,currentMessageTotalLength=0,currentMessagePendingLength=0,currentMessage=null,messageLengthBuffer=null,allocateMessage=function(size){if("number"!=typeof size)throw new Error("Attempted to allocate an event message where size was not a number: "+size);currentMessageTotalLength=size,currentMessagePendingLength=4,currentMessage=new Uint8Array(size),new DataView(currentMessage.buffer).setUint32(0,size,!1)},(_a={})[Symbol.asyncIterator]=function(){return Object(tslib_es6.__asyncGenerator)(this,arguments,(function(){var sourceIterator,_a,value,chunkLength,currentOffset,bytesRemaining,numBytesForTotal,numBytesToWrite;return Object(tslib_es6.__generator)(this,(function(_b){switch(_b.label){case 0:sourceIterator=source[Symbol.asyncIterator](),_b.label=1;case 1:return[4,Object(tslib_es6.__await)(sourceIterator.next())];case 2:return _a=_b.sent(),value=_a.value,_a.done?currentMessageTotalLength?[3,4]:[4,Object(tslib_es6.__await)(void 0)]:[3,10];case 3:return[2,_b.sent()];case 4:return currentMessageTotalLength!==currentMessagePendingLength?[3,7]:[4,Object(tslib_es6.__await)(currentMessage)];case 5:return[4,_b.sent()];case 6:return _b.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Object(tslib_es6.__await)(void 0)];case 9:return[2,_b.sent()];case 10:chunkLength=value.length,currentOffset=0,_b.label=11;case 11:if(!(currentOffset<chunkLength))return[3,15];if(!currentMessage){if(bytesRemaining=chunkLength-currentOffset,messageLengthBuffer||(messageLengthBuffer=new Uint8Array(4)),numBytesForTotal=Math.min(4-currentMessagePendingLength,bytesRemaining),messageLengthBuffer.set(value.slice(currentOffset,currentOffset+numBytesForTotal),currentMessagePendingLength),currentOffset+=numBytesForTotal,(currentMessagePendingLength+=numBytesForTotal)<4)return[3,15];allocateMessage(new DataView(messageLengthBuffer.buffer).getUint32(0,!1)),messageLengthBuffer=null}return numBytesToWrite=Math.min(currentMessageTotalLength-currentMessagePendingLength,chunkLength-currentOffset),currentMessage.set(value.slice(currentOffset,currentOffset+numBytesToWrite),currentMessagePendingLength),currentMessagePendingLength+=numBytesToWrite,currentOffset+=numBytesToWrite,currentMessageTotalLength&&currentMessageTotalLength===currentMessagePendingLength?[4,Object(tslib_es6.__await)(currentMessage)]:[3,14];case 12:return[4,_b.sent()];case 13:_b.sent(),currentMessage=null,currentMessageTotalLength=0,currentMessagePendingLength=0,_b.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},_a),{eventMarshaller:this.eventMarshaller,deserializer:deserializer,toUtf8:this.utfEncoder})},EventStreamMarshaller.prototype.serialize=function(input,serializer){var _a,self=this;return(_a={})[Symbol.asyncIterator]=function(){return Object(tslib_es6.__asyncGenerator)(this,arguments,(function(){var input_1,input_1_1,chunk,payloadBuf,e_1_1,e_1,_a;return Object(tslib_es6.__generator)(this,(function(_b){switch(_b.label){case 0:_b.trys.push([0,7,8,13]),input_1=Object(tslib_es6.__asyncValues)(input),_b.label=1;case 1:return[4,Object(tslib_es6.__await)(input_1.next())];case 2:return(input_1_1=_b.sent()).done?[3,6]:(chunk=input_1_1.value,payloadBuf=self.eventMarshaller.marshall(serializer(chunk)),[4,Object(tslib_es6.__await)(payloadBuf)]);case 3:return[4,_b.sent()];case 4:_b.sent(),_b.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return e_1_1=_b.sent(),e_1={error:e_1_1},[3,13];case 8:return _b.trys.push([8,,11,12]),input_1_1&&!input_1_1.done&&(_a=input_1.return)?[4,Object(tslib_es6.__await)(_a.call(input_1))]:[3,10];case 9:_b.sent(),_b.label=10;case 10:return[3,12];case 11:if(e_1)throw e_1.error;return[7];case 12:return[7];case 13:return[4,Object(tslib_es6.__await)(new Uint8Array(0))];case 14:return[4,_b.sent()];case 15:return _b.sent(),[2]}}))}))},_a},EventStreamMarshaller}(),dist_es_EventStreamMarshaller_EventStreamMarshaller=function(){function EventStreamMarshaller(_a){var utf8Encoder=_a.utf8Encoder,utf8Decoder=_a.utf8Decoder;this.eventMarshaller=new EventStreamMarshaller_EventStreamMarshaller(utf8Encoder,utf8Decoder),this.universalMarshaller=new es_EventStreamMarshaller_EventStreamMarshaller({utf8Decoder:utf8Decoder,utf8Encoder:utf8Encoder})}return EventStreamMarshaller.prototype.deserialize=function(body,deserializer){var readableStream,_a,bodyIterable=isReadableStream(body)?(readableStream=body,(_a={})[Symbol.asyncIterator]=function(){return Object(tslib_es6.__asyncGenerator)(this,arguments,(function(){var reader,_a,done,value;return Object(tslib_es6.__generator)(this,(function(_b){switch(_b.label){case 0:reader=readableStream.getReader(),_b.label=1;case 1:_b.trys.push([1,,9,10]),_b.label=2;case 2:return[4,Object(tslib_es6.__await)(reader.read())];case 3:return _a=_b.sent(),done=_a.done,value=_a.value,done?[4,Object(tslib_es6.__await)(void 0)]:[3,5];case 4:return[2,_b.sent()];case 5:return[4,Object(tslib_es6.__await)(value)];case 6:return[4,_b.sent()];case 7:return _b.sent(),[3,2];case 8:return[3,10];case 9:return reader.releaseLock(),[7];case 10:return[2]}}))}))},_a):body;return this.universalMarshaller.deserialize(bodyIterable,deserializer)},EventStreamMarshaller.prototype.serialize=function(input,serializer){var iterator,serialziedIterable=this.universalMarshaller.serialize(input,serializer);return"function"==typeof ReadableStream?(iterator=serialziedIterable[Symbol.asyncIterator](),new ReadableStream({pull:function(controller){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var _a,done,value;return Object(tslib_es6.__generator)(this,(function(_b){switch(_b.label){case 0:return[4,iterator.next()];case 1:return _a=_b.sent(),done=_a.done,value=_a.value,done?[2,controller.close()]:(controller.enqueue(value),[2])}}))}))}})):serialziedIterable},EventStreamMarshaller}(),isReadableStream=function(body){return"function"==typeof ReadableStream&&body instanceof ReadableStream},provider_eventStreamSerdeProvider=function(options){return new dist_es_EventStreamMarshaller_EventStreamMarshaller(options)};__webpack_require__.d(__webpack_exports__,"a",(function(){return provider_eventStreamSerdeProvider}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),es=__webpack_require__(37),AMZ_DATE_HEADER="X-Amz-Date".toLowerCase(),GENERATED_HEADERS=["authorization",AMZ_DATE_HEADER,"date"],SIGNATURE_HEADER="X-Amz-Signature".toLowerCase(),TOKEN_HEADER="X-Amz-Security-Token".toLowerCase(),ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},PROXY_HEADER_PATTERN=/^proxy-/,SEC_HEADER_PATTERN=/^sec-/,EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD",signingKeyCache={},cacheQueue=[];function createScope(shortDate,region,service){return shortDate+"/"+region+"/"+service+"/aws4_request"}function hmac(ctor,secret,data){var hash=new ctor(secret);return hash.update(data),hash.digest()}function getCanonicalHeaders(_a,unsignableHeaders,signableHeaders){var e_1,_b,headers=_a.headers,canonical={};try{for(var _c=Object(tslib_es6.__values)(Object.keys(headers).sort()),_d=_c.next();!_d.done;_d=_c.next()){var headerName=_d.value,canonicalHeaderName=headerName.toLowerCase();(canonicalHeaderName in ALWAYS_UNSIGNABLE_HEADERS||(null==unsignableHeaders?void 0:unsignableHeaders.has(canonicalHeaderName))||PROXY_HEADER_PATTERN.test(canonicalHeaderName)||SEC_HEADER_PATTERN.test(canonicalHeaderName))&&(!signableHeaders||signableHeaders&&!signableHeaders.has(canonicalHeaderName))||(canonical[canonicalHeaderName]=headers[headerName].trim().replace(/\s+/g," "))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_1)throw e_1.error}}return canonical}var dist_es=__webpack_require__(100);var is_array_buffer_dist_es=__webpack_require__(312);function getPayloadHash(_a,hashConstructor){var headers=_a.headers,body=_a.body;return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var _b,_c,headerName,hashCtor,_d,e_1,_e;return Object(tslib_es6.__generator)(this,(function(_f){switch(_f.label){case 0:try{for(_b=Object(tslib_es6.__values)(Object.keys(headers)),_c=_b.next();!_c.done;_c=_b.next())if("x-amz-content-sha256"===(headerName=_c.value).toLowerCase())return[2,headers[headerName]]}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_e=_b.return)&&_e.call(_b)}finally{if(e_1)throw e_1.error}}return null!=body?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof body||ArrayBuffer.isView(body)||Object(is_array_buffer_dist_es.a)(body)?((hashCtor=new hashConstructor).update(body),_d=es.b,[4,hashCtor.digest()]):[3,3];case 2:return[2,_d.apply(void 0,[_f.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function cloneRequest(_a){var headers=_a.headers,query=_a.query,rest=Object(tslib_es6.__rest)(_a,["headers","query"]);return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},rest),{headers:Object(tslib_es6.__assign)({},headers),query:query?cloneQuery(query):void 0})}function cloneQuery(query){return Object.keys(query).reduce((function(carry,paramName){var _a,param=query[paramName];return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},carry),((_a={})[paramName]=Array.isArray(param)?Object(tslib_es6.__spread)(param):param,_a))}),{})}function prepareRequest(request){var e_1,_a;request="function"==typeof request.clone?request.clone():cloneRequest(request);try{for(var _b=Object(tslib_es6.__values)(Object.keys(request.headers)),_c=_b.next();!_c.done;_c=_b.next()){var headerName=_c.value;GENERATED_HEADERS.indexOf(headerName.toLowerCase())>-1&&delete request.headers[headerName]}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return request}function iso8601(time){return function(time){if("number"==typeof time)return new Date(1e3*time);if("string"==typeof time)return Number(time)?new Date(1e3*Number(time)):new Date(time);return time}(time).toISOString().replace(/\.\d{3}Z$/,"Z")}var SignatureV4_SignatureV4=function(){function SignatureV4(_a){var applyChecksum=_a.applyChecksum,credentials=_a.credentials,region=_a.region,service=_a.service,sha256=_a.sha256,_b=_a.uriEscapePath,uriEscapePath=void 0===_b||_b;this.service=service,this.sha256=sha256,this.uriEscapePath=uriEscapePath,this.applyChecksum="boolean"!=typeof applyChecksum||applyChecksum,this.regionProvider=normalizeRegionProvider(region),this.credentialProvider=normalizeCredentialsProvider(credentials)}return SignatureV4.prototype.presign=function(originalRequest,options){return void 0===options&&(options={}),Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var _a,signingDate,_b,expiresIn,unsignableHeaders,unhoistableHeaders,signableHeaders,signingRegion,signingService,credentials,region,_c,_d,longDate,shortDate,scope,request,canonicalHeaders,_e,_f,_g,_h,_j,_k;return Object(tslib_es6.__generator)(this,(function(_l){switch(_l.label){case 0:return _a=options.signingDate,signingDate=void 0===_a?new Date:_a,_b=options.expiresIn,expiresIn=void 0===_b?3600:_b,unsignableHeaders=options.unsignableHeaders,unhoistableHeaders=options.unhoistableHeaders,signableHeaders=options.signableHeaders,signingRegion=options.signingRegion,signingService=options.signingService,[4,this.credentialProvider()];case 1:return credentials=_l.sent(),null==signingRegion?[3,2]:(_c=signingRegion,[3,4]);case 2:return[4,this.regionProvider()];case 3:_c=_l.sent(),_l.label=4;case 4:return region=_c,_d=formatDate(signingDate),longDate=_d.longDate,shortDate=_d.shortDate,expiresIn>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(scope=createScope(shortDate,region,null!=signingService?signingService:this.service),request=function(request,options){var e_1,_a,_b;void 0===options&&(options={});var _c="function"==typeof request.clone?request.clone():cloneRequest(request),headers=_c.headers,_d=_c.query,query=void 0===_d?{}:_d;try{for(var _e=Object(tslib_es6.__values)(Object.keys(headers)),_f=_e.next();!_f.done;_f=_e.next()){var name=_f.value,lname=name.toLowerCase();"x-amz-"!==lname.substr(0,6)||(null===(_b=options.unhoistableHeaders)||void 0===_b?void 0:_b.has(lname))||(query[name]=headers[name],delete headers[name])}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_f&&!_f.done&&(_a=_e.return)&&_a.call(_e)}finally{if(e_1)throw e_1.error}}return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},request),{headers:headers,query:query})}(prepareRequest(originalRequest),{unhoistableHeaders:unhoistableHeaders}),credentials.sessionToken&&(request.query["X-Amz-Security-Token"]=credentials.sessionToken),request.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",request.query["X-Amz-Credential"]=credentials.accessKeyId+"/"+scope,request.query["X-Amz-Date"]=longDate,request.query["X-Amz-Expires"]=expiresIn.toString(10),canonicalHeaders=getCanonicalHeaders(request,unsignableHeaders,signableHeaders),request.query["X-Amz-SignedHeaders"]=getCanonicalHeaderList(canonicalHeaders),_e=request.query,_f="X-Amz-Signature",_g=this.getSignature,_h=[longDate,scope,this.getSigningKey(credentials,region,shortDate,signingService)],_j=this.createCanonicalRequest,_k=[request,canonicalHeaders],[4,getPayloadHash(originalRequest,this.sha256)]);case 5:return[4,_g.apply(this,_h.concat([_j.apply(this,_k.concat([_l.sent()]))]))];case 6:return _e[_f]=_l.sent(),[2,request]}}))}))},SignatureV4.prototype.sign=function(toSign,options){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){return Object(tslib_es6.__generator)(this,(function(_a){return"string"==typeof toSign?[2,this.signString(toSign,options)]:toSign.headers&&toSign.payload?[2,this.signEvent(toSign,options)]:[2,this.signRequest(toSign,options)]}))}))},SignatureV4.prototype.signEvent=function(_a,_b){var headers=_a.headers,payload=_a.payload,_c=_b.signingDate,signingDate=void 0===_c?new Date:_c,priorSignature=_b.priorSignature,signingRegion=_b.signingRegion,signingService=_b.signingService;return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var region,_d,_e,shortDate,longDate,scope,hashedPayload,hash,hashedHeaders,_f,stringToSign;return Object(tslib_es6.__generator)(this,(function(_g){switch(_g.label){case 0:return null==signingRegion?[3,1]:(_d=signingRegion,[3,3]);case 1:return[4,this.regionProvider()];case 2:_d=_g.sent(),_g.label=3;case 3:return region=_d,_e=formatDate(signingDate),shortDate=_e.shortDate,longDate=_e.longDate,scope=createScope(shortDate,region,null!=signingService?signingService:this.service),[4,getPayloadHash({headers:{},body:payload},this.sha256)];case 4:return hashedPayload=_g.sent(),(hash=new this.sha256).update(headers),_f=es.b,[4,hash.digest()];case 5:return hashedHeaders=_f.apply(void 0,[_g.sent()]),stringToSign=[EVENT_ALGORITHM_IDENTIFIER,longDate,scope,priorSignature,hashedHeaders,hashedPayload].join("\n"),[2,this.signString(stringToSign,{signingDate:signingDate,signingRegion:region,signingService:signingService})]}}))}))},SignatureV4.prototype.signString=function(stringToSign,_a){var _b=void 0===_a?{}:_a,_c=_b.signingDate,signingDate=void 0===_c?new Date:_c,signingRegion=_b.signingRegion,signingService=_b.signingService;return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var credentials,region,_d,shortDate,hash,_e,_f,_g;return Object(tslib_es6.__generator)(this,(function(_h){switch(_h.label){case 0:return[4,this.credentialProvider()];case 1:return credentials=_h.sent(),null==signingRegion?[3,2]:(_d=signingRegion,[3,4]);case 2:return[4,this.regionProvider()];case 3:_d=_h.sent(),_h.label=4;case 4:return region=_d,shortDate=formatDate(signingDate).shortDate,_f=(_e=this.sha256).bind,[4,this.getSigningKey(credentials,region,shortDate,signingService)];case 5:return(hash=new(_f.apply(_e,[void 0,_h.sent()]))).update(stringToSign),_g=es.b,[4,hash.digest()];case 6:return[2,_g.apply(void 0,[_h.sent()])]}}))}))},SignatureV4.prototype.signRequest=function(requestToSign,_a){var _b=void 0===_a?{}:_a,_c=_b.signingDate,signingDate=void 0===_c?new Date:_c,signableHeaders=_b.signableHeaders,unsignableHeaders=_b.unsignableHeaders,signingRegion=_b.signingRegion,signingService=_b.signingService;return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var credentials,region,_d,request,_e,longDate,shortDate,scope,payloadHash,canonicalHeaders,signature;return Object(tslib_es6.__generator)(this,(function(_f){switch(_f.label){case 0:return[4,this.credentialProvider()];case 1:return credentials=_f.sent(),null==signingRegion?[3,2]:(_d=signingRegion,[3,4]);case 2:return[4,this.regionProvider()];case 3:_d=_f.sent(),_f.label=4;case 4:return region=_d,request=prepareRequest(requestToSign),_e=formatDate(signingDate),longDate=_e.longDate,shortDate=_e.shortDate,scope=createScope(shortDate,region,null!=signingService?signingService:this.service),request.headers[AMZ_DATE_HEADER]=longDate,credentials.sessionToken&&(request.headers[TOKEN_HEADER]=credentials.sessionToken),[4,getPayloadHash(request,this.sha256)];case 5:return payloadHash=_f.sent(),!function(soughtHeader,headers){var e_1,_a;soughtHeader=soughtHeader.toLowerCase();try{for(var _b=Object(tslib_es6.__values)(Object.keys(headers)),_c=_b.next();!_c.done;_c=_b.next())if(soughtHeader===_c.value.toLowerCase())return!0}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return!1}("x-amz-content-sha256",request.headers)&&this.applyChecksum&&(request.headers["x-amz-content-sha256"]=payloadHash),canonicalHeaders=getCanonicalHeaders(request,unsignableHeaders,signableHeaders),[4,this.getSignature(longDate,scope,this.getSigningKey(credentials,region,shortDate,signingService),this.createCanonicalRequest(request,canonicalHeaders,payloadHash))];case 6:return signature=_f.sent(),request.headers.authorization="AWS4-HMAC-SHA256 Credential="+credentials.accessKeyId+"/"+scope+", SignedHeaders="+getCanonicalHeaderList(canonicalHeaders)+", Signature="+signature,[2,request]}}))}))},SignatureV4.prototype.createCanonicalRequest=function(request,canonicalHeaders,payloadHash){var sortedHeaders=Object.keys(canonicalHeaders).sort();return request.method+"\n"+this.getCanonicalPath(request)+"\n"+function(_a){var e_1,_b,_c=_a.query,query=void 0===_c?{}:_c,keys=[],serialized={},_loop_1=function(key){if(key.toLowerCase()===SIGNATURE_HEADER)return"continue";keys.push(key);var value=query[key];"string"==typeof value?serialized[key]=Object(dist_es.a)(key)+"="+Object(dist_es.a)(value):Array.isArray(value)&&(serialized[key]=value.slice(0).sort().reduce((function(encoded,value){return encoded.concat([Object(dist_es.a)(key)+"="+Object(dist_es.a)(value)])}),[]).join("&"))};try{for(var _d=Object(tslib_es6.__values)(Object.keys(query).sort()),_e=_d.next();!_e.done;_e=_d.next())_loop_1(_e.value)}catch(e_1_1){e_1={error:e_1_1}}finally{try{_e&&!_e.done&&(_b=_d.return)&&_b.call(_d)}finally{if(e_1)throw e_1.error}}return keys.map((function(key){return serialized[key]})).filter((function(serialized){return serialized})).join("&")}(request)+"\n"+sortedHeaders.map((function(name){return name+":"+canonicalHeaders[name]})).join("\n")+"\n\n"+sortedHeaders.join(";")+"\n"+payloadHash},SignatureV4.prototype.createStringToSign=function(longDate,credentialScope,canonicalRequest){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var hash,hashedRequest;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return(hash=new this.sha256).update(canonicalRequest),[4,hash.digest()];case 1:return hashedRequest=_a.sent(),[2,"AWS4-HMAC-SHA256\n"+longDate+"\n"+credentialScope+"\n"+Object(es.b)(hashedRequest)]}}))}))},SignatureV4.prototype.getCanonicalPath=function(_a){var path=_a.path;return this.uriEscapePath?"/"+encodeURIComponent(path.replace(/^\//,"")).replace(/%2F/g,"/"):path},SignatureV4.prototype.getSignature=function(longDate,credentialScope,keyPromise,canonicalRequest){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var stringToSign,hash,_a,_b,_c;return Object(tslib_es6.__generator)(this,(function(_d){switch(_d.label){case 0:return[4,this.createStringToSign(longDate,credentialScope,canonicalRequest)];case 1:return stringToSign=_d.sent(),_b=(_a=this.sha256).bind,[4,keyPromise];case 2:return(hash=new(_b.apply(_a,[void 0,_d.sent()]))).update(stringToSign),_c=es.b,[4,hash.digest()];case 3:return[2,_c.apply(void 0,[_d.sent()])]}}))}))},SignatureV4.prototype.getSigningKey=function(credentials,region,shortDate,service){return function(sha256Constructor,credentials,shortDate,region,service){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var credsHash,cacheKey,key,_a,_b,signable,e_1_1,e_1,_c;return Object(tslib_es6.__generator)(this,(function(_d){switch(_d.label){case 0:return[4,hmac(sha256Constructor,credentials.secretAccessKey,credentials.accessKeyId)];case 1:if(credsHash=_d.sent(),(cacheKey=shortDate+":"+region+":"+service+":"+Object(es.b)(credsHash)+":"+credentials.sessionToken)in signingKeyCache)return[2,signingKeyCache[cacheKey]];for(cacheQueue.push(cacheKey);cacheQueue.length>50;)delete signingKeyCache[cacheQueue.shift()];key="AWS4"+credentials.secretAccessKey,_d.label=2;case 2:_d.trys.push([2,7,8,9]),_a=Object(tslib_es6.__values)([shortDate,region,service,"aws4_request"]),_b=_a.next(),_d.label=3;case 3:return _b.done?[3,6]:(signable=_b.value,[4,hmac(sha256Constructor,key,signable)]);case 4:key=_d.sent(),_d.label=5;case 5:return _b=_a.next(),[3,3];case 6:return[3,9];case 7:return e_1_1=_d.sent(),e_1={error:e_1_1},[3,9];case 8:try{_b&&!_b.done&&(_c=_a.return)&&_c.call(_a)}finally{if(e_1)throw e_1.error}return[7];case 9:return[2,signingKeyCache[cacheKey]=key]}}))}))}(this.sha256,credentials,shortDate,region,service||this.service)},SignatureV4}(),formatDate=function(now){var longDate=iso8601(now).replace(/[\-:]/g,"");return{longDate:longDate,shortDate:longDate.substr(0,8)}},getCanonicalHeaderList=function(headers){return Object.keys(headers).sort().join(";")},normalizeRegionProvider=function(region){if("string"==typeof region){var promisified_1=Promise.resolve(region);return function(){return promisified_1}}return region},normalizeCredentialsProvider=function(credentials){if("object"==typeof credentials){var promisified_2=Promise.resolve(credentials);return function(){return promisified_2}}return credentials};__webpack_require__.d(__webpack_exports__,"a",(function(){return SignatureV4_SignatureV4}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),resolveEventStreamSerdeConfig=function(input){return Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},input),{eventStreamMarshaller:input.eventStreamSerdeProvider(input)})};__webpack_require__.d(__webpack_exports__,"a",(function(){return resolveEventStreamSerdeConfig}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_when_syntax_1=__webpack_require__(193),BindingOnSyntax=function(){function BindingOnSyntax(binding){this._binding=binding}return BindingOnSyntax.prototype.onActivation=function(handler){return this._binding.onActivation=handler,new binding_when_syntax_1.BindingWhenSyntax(this._binding)},BindingOnSyntax}();exports.BindingOnSyntax=BindingOnSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_on_syntax_1=__webpack_require__(192),constraint_helpers_1=__webpack_require__(238),BindingWhenSyntax=function(){function BindingWhenSyntax(binding){this._binding=binding}return BindingWhenSyntax.prototype.when=function(constraint){return this._binding.constraint=constraint,new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetNamed=function(name){return this._binding.constraint=constraint_helpers_1.namedConstraint(name),new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(request){return null!==request.target&&!request.target.isNamed()&&!request.target.isTagged()},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetTagged=function(tag,value){return this._binding.constraint=constraint_helpers_1.taggedConstraint(tag)(value),new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenInjectedInto=function(parent){return this._binding.constraint=function(request){return constraint_helpers_1.typeConstraint(parent)(request.parentRequest)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenParentNamed=function(name){return this._binding.constraint=function(request){return constraint_helpers_1.namedConstraint(name)(request.parentRequest)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenParentTagged=function(tag,value){return this._binding.constraint=function(request){return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorIs=function(ancestor){return this._binding.constraint=function(request){return constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.typeConstraint(ancestor))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorIs=function(ancestor){return this._binding.constraint=function(request){return!constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.typeConstraint(ancestor))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorNamed=function(name){return this._binding.constraint=function(request){return constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.namedConstraint(name))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorNamed=function(name){return this._binding.constraint=function(request){return!constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.namedConstraint(name))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorTagged=function(tag,value){return this._binding.constraint=function(request){return constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.taggedConstraint(tag)(value))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorTagged=function(tag,value){return this._binding.constraint=function(request){return!constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.taggedConstraint(tag)(value))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorMatches=function(constraint){return this._binding.constraint=function(request){return constraint_helpers_1.traverseAncerstors(request,constraint)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorMatches=function(constraint){return this._binding.constraint=function(request){return!constraint_helpers_1.traverseAncerstors(request,constraint)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax}();exports.BindingWhenSyntax=BindingWhenSyntax},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(15),HashBase=__webpack_require__(244),Buffer=__webpack_require__(16).Buffer,ARRAY16=new Array(16);function MD5(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function rotl(x,n){return x<<n|x>>>32-n}function fnF(a,b,c,d,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+b|0}function fnG(a,b,c,d,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+b|0}function fnH(a,b,c,d,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+b|0}function fnI(a,b,c,d,m,k,s){return rotl(a+(c^(b|~d))+m+k|0,s)+b|0}inherits(MD5,HashBase),MD5.prototype._update=function(){for(var M=ARRAY16,i=0;i<16;++i)M[i]=this._block.readInt32LE(4*i);var a=this._a,b=this._b,c=this._c,d=this._d;a=fnF(a,b,c,d,M[0],3614090360,7),d=fnF(d,a,b,c,M[1],3905402710,12),c=fnF(c,d,a,b,M[2],606105819,17),b=fnF(b,c,d,a,M[3],3250441966,22),a=fnF(a,b,c,d,M[4],4118548399,7),d=fnF(d,a,b,c,M[5],1200080426,12),c=fnF(c,d,a,b,M[6],2821735955,17),b=fnF(b,c,d,a,M[7],4249261313,22),a=fnF(a,b,c,d,M[8],1770035416,7),d=fnF(d,a,b,c,M[9],2336552879,12),c=fnF(c,d,a,b,M[10],4294925233,17),b=fnF(b,c,d,a,M[11],2304563134,22),a=fnF(a,b,c,d,M[12],1804603682,7),d=fnF(d,a,b,c,M[13],4254626195,12),c=fnF(c,d,a,b,M[14],2792965006,17),a=fnG(a,b=fnF(b,c,d,a,M[15],1236535329,22),c,d,M[1],4129170786,5),d=fnG(d,a,b,c,M[6],3225465664,9),c=fnG(c,d,a,b,M[11],643717713,14),b=fnG(b,c,d,a,M[0],3921069994,20),a=fnG(a,b,c,d,M[5],3593408605,5),d=fnG(d,a,b,c,M[10],38016083,9),c=fnG(c,d,a,b,M[15],3634488961,14),b=fnG(b,c,d,a,M[4],3889429448,20),a=fnG(a,b,c,d,M[9],568446438,5),d=fnG(d,a,b,c,M[14],3275163606,9),c=fnG(c,d,a,b,M[3],4107603335,14),b=fnG(b,c,d,a,M[8],1163531501,20),a=fnG(a,b,c,d,M[13],2850285829,5),d=fnG(d,a,b,c,M[2],4243563512,9),c=fnG(c,d,a,b,M[7],1735328473,14),a=fnH(a,b=fnG(b,c,d,a,M[12],2368359562,20),c,d,M[5],4294588738,4),d=fnH(d,a,b,c,M[8],2272392833,11),c=fnH(c,d,a,b,M[11],1839030562,16),b=fnH(b,c,d,a,M[14],4259657740,23),a=fnH(a,b,c,d,M[1],2763975236,4),d=fnH(d,a,b,c,M[4],1272893353,11),c=fnH(c,d,a,b,M[7],4139469664,16),b=fnH(b,c,d,a,M[10],3200236656,23),a=fnH(a,b,c,d,M[13],681279174,4),d=fnH(d,a,b,c,M[0],3936430074,11),c=fnH(c,d,a,b,M[3],3572445317,16),b=fnH(b,c,d,a,M[6],76029189,23),a=fnH(a,b,c,d,M[9],3654602809,4),d=fnH(d,a,b,c,M[12],3873151461,11),c=fnH(c,d,a,b,M[15],530742520,16),a=fnI(a,b=fnH(b,c,d,a,M[2],3299628645,23),c,d,M[0],4096336452,6),d=fnI(d,a,b,c,M[7],1126891415,10),c=fnI(c,d,a,b,M[14],2878612391,15),b=fnI(b,c,d,a,M[5],4237533241,21),a=fnI(a,b,c,d,M[12],1700485571,6),d=fnI(d,a,b,c,M[3],2399980690,10),c=fnI(c,d,a,b,M[10],4293915773,15),b=fnI(b,c,d,a,M[1],2240044497,21),a=fnI(a,b,c,d,M[8],1873313359,6),d=fnI(d,a,b,c,M[15],4264355552,10),c=fnI(c,d,a,b,M[6],2734768916,15),b=fnI(b,c,d,a,M[13],1309151649,21),a=fnI(a,b,c,d,M[4],4149444226,6),d=fnI(d,a,b,c,M[11],3174756917,10),c=fnI(c,d,a,b,M[2],718787259,15),b=fnI(b,c,d,a,M[9],3951481745,21),this._a=this._a+a|0,this._b=this._b+b|0,this._c=this._c+c|0,this._d=this._d+d|0},MD5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=Buffer.allocUnsafe(16);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer},module.exports=MD5},function(module,exports,__webpack_require__){module.exports=Stream;var EE=__webpack_require__(106).EventEmitter;function Stream(){EE.call(this)}__webpack_require__(15)(Stream,EE),Stream.Readable=__webpack_require__(196),Stream.Writable=__webpack_require__(400),Stream.Duplex=__webpack_require__(401),Stream.Transform=__webpack_require__(402),Stream.PassThrough=__webpack_require__(403),Stream.Stream=Stream,Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){dest.writable&&!1===dest.write(chunk)&&source.pause&&source.pause()}function ondrain(){source.readable&&source.resume&&source.resume()}source.on("data",ondata),dest.on("drain",ondrain),dest._isStdio||options&&!1===options.end||(source.on("end",onend),source.on("close",onclose));var didOnEnd=!1;function onend(){didOnEnd||(didOnEnd=!0,dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,"function"==typeof dest.destroy&&dest.destroy())}function onerror(er){if(cleanup(),0===EE.listenerCount(this,"error"))throw er}function cleanup(){source.removeListener("data",ondata),dest.removeListener("drain",ondrain),source.removeListener("end",onend),source.removeListener("close",onclose),source.removeListener("error",onerror),dest.removeListener("error",onerror),source.removeListener("end",cleanup),source.removeListener("close",cleanup),dest.removeListener("close",cleanup)}return source.on("error",onerror),dest.on("error",onerror),source.on("end",cleanup),source.on("close",cleanup),dest.on("close",cleanup),dest.emit("pipe",source),dest}},function(module,exports,__webpack_require__){(exports=module.exports=__webpack_require__(245)).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__(197),exports.Duplex=__webpack_require__(104),exports.Transform=__webpack_require__(248),exports.PassThrough=__webpack_require__(399)},function(module,exports,__webpack_require__){"use strict";(function(process,setImmediate,global){var pna=__webpack_require__(155);function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq}(_this,state)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=__webpack_require__(137);util.inherits=__webpack_require__(15);var internalUtil={deprecate:__webpack_require__(398)},Stream=__webpack_require__(246),Buffer=__webpack_require__(16).Buffer,OurUint8Array=global.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__(247);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(104),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,writableHwm=options.writableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(writableHwm||0===writableHwm)?writableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(function(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function(stream,state,sync,er,cb){--state.pendingcb,sync?(pna.nextTick(cb,er),pna.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,stream.emit("error",er)):(cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||__webpack_require__(104),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&stream.emit("error",err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(!function(stream,state){state.prefinished||state.finalCalled||("function"==typeof stream._final?(state.pendingcb++,state.finalCalled=!0,pna.nextTick(callFinal,stream,state)):(state.prefinished=!0,stream.emit("prefinish")))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"))),need}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(chunk,encoding,cb){var obj,state=this._writableState,ret=!1,isBuf=!state.objectMode&&(obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?function(stream,cb){var er=new Error("write after end");stream.emit("error",er),pna.nextTick(cb,er)}(this,cb):(isBuf||function(stream,state,chunk,cb){var valid=!0,er=!1;return null===chunk?er=new TypeError("May not write null values to stream"):"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er&&(stream.emit("error",er),pna.nextTick(cb,er),valid=!1),valid}(this,state,chunk,cb))&&(state.pendingcb++,ret=function(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||function(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?pna.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}}).call(this,__webpack_require__(76),__webpack_require__(396).setImmediate,__webpack_require__(54))},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(16).Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function(enc){var nenc=function(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function(self,buf,p){if(128!=(192&buf[0]))return self.lastNeed=0,"";if(self.lastNeed>1&&buf.length>1){if(128!=(192&buf[1]))return self.lastNeed=1,"";if(self.lastNeed>2&&buf.length>2&&128!=(192&buf[2]))return self.lastNeed=2,""}}(this,buf);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(buf.copy(this.lastChar,p,0,buf.length),void(this.lastNeed-=buf.length))}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"":r},StringDecoder.prototype.text=function(buf,i){var total=function(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0)return nb>0&&(self.lastNeed=nb-1),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(self.lastNeed=nb-2),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(2===nb?nb=0:self.lastNeed=nb-3),nb;return 0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(11).Buffer,inherits=__webpack_require__(15),HashBase=__webpack_require__(244),ARRAY16=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function rotl(x,n){return x<<n|x>>>32-n}function fn1(a,b,c,d,e,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+e|0}function fn2(a,b,c,d,e,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+e|0}function fn3(a,b,c,d,e,m,k,s){return rotl(a+((b|~c)^d)+m+k|0,s)+e|0}function fn4(a,b,c,d,e,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+e|0}function fn5(a,b,c,d,e,m,k,s){return rotl(a+(b^(c|~d))+m+k|0,s)+e|0}inherits(RIPEMD160,HashBase),RIPEMD160.prototype._update=function(){for(var words=ARRAY16,j=0;j<16;++j)words[j]=this._block.readInt32LE(4*j);for(var al=0|this._a,bl=0|this._b,cl=0|this._c,dl=0|this._d,el=0|this._e,ar=0|this._a,br=0|this._b,cr=0|this._c,dr=0|this._d,er=0|this._e,i=0;i<80;i+=1){var tl,tr;i<16?(tl=fn1(al,bl,cl,dl,el,words[zl[i]],hl[0],sl[i]),tr=fn5(ar,br,cr,dr,er,words[zr[i]],hr[0],sr[i])):i<32?(tl=fn2(al,bl,cl,dl,el,words[zl[i]],hl[1],sl[i]),tr=fn4(ar,br,cr,dr,er,words[zr[i]],hr[1],sr[i])):i<48?(tl=fn3(al,bl,cl,dl,el,words[zl[i]],hl[2],sl[i]),tr=fn3(ar,br,cr,dr,er,words[zr[i]],hr[2],sr[i])):i<64?(tl=fn4(al,bl,cl,dl,el,words[zl[i]],hl[3],sl[i]),tr=fn2(ar,br,cr,dr,er,words[zr[i]],hr[3],sr[i])):(tl=fn5(al,bl,cl,dl,el,words[zl[i]],hl[4],sl[i]),tr=fn1(ar,br,cr,dr,er,words[zr[i]],hr[4],sr[i])),al=el,el=dl,dl=rotl(cl,10),cl=bl,bl=tl,ar=er,er=dr,dr=rotl(cr,10),cr=br,br=tr}var t=this._b+cl+dr|0;this._b=this._c+dl+er|0,this._c=this._d+el+ar|0,this._d=this._e+al+br|0,this._e=this._a+bl+cr|0,this._a=t},RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=Buffer.alloc?Buffer.alloc(20):new Buffer(20);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer.writeInt32LE(this._e,16),buffer},module.exports=RIPEMD160},function(module,exports,__webpack_require__){(exports=module.exports=function(algorithm){algorithm=algorithm.toLowerCase();var Algorithm=exports[algorithm];if(!Algorithm)throw new Error(algorithm+" is not supported (we accept pull requests)");return new Algorithm}).sha=__webpack_require__(404),exports.sha1=__webpack_require__(405),exports.sha224=__webpack_require__(406),exports.sha256=__webpack_require__(249),exports.sha384=__webpack_require__(407),exports.sha512=__webpack_require__(250)},function(module,exports,__webpack_require__){"use strict";exports.utils=__webpack_require__(413),exports.Cipher=__webpack_require__(414),exports.DES=__webpack_require__(415),exports.CBC=__webpack_require__(416),exports.EDE=__webpack_require__(417)},function(module,exports,__webpack_require__){var ciphers=__webpack_require__(418),deciphers=__webpack_require__(426),modes=__webpack_require__(260);exports.createCipher=exports.Cipher=ciphers.createCipher,exports.createCipheriv=exports.Cipheriv=ciphers.createCipheriv,exports.createDecipher=exports.Decipher=deciphers.createDecipher,exports.createDecipheriv=exports.Decipheriv=deciphers.createDecipheriv,exports.listCiphers=exports.getCiphers=function(){return Object.keys(modes)}},function(module,exports,__webpack_require__){var modeModules={ECB:__webpack_require__(419),CBC:__webpack_require__(420),CFB:__webpack_require__(421),CFB8:__webpack_require__(422),CFB1:__webpack_require__(423),OFB:__webpack_require__(424),CTR:__webpack_require__(258),GCM:__webpack_require__(258)},modes=__webpack_require__(260);for(var key in modes)modes[key].module=modeModules[modes[key].mode];module.exports=modes},function(module,exports,__webpack_require__){(function(Buffer){var bn=__webpack_require__(38),randomBytes=__webpack_require__(110);function crt(msg,priv){var blinds=function(priv){var r=getr(priv);return{blinder:r.toRed(bn.mont(priv.modulus)).redPow(new bn(priv.publicExponent)).fromRed(),unblinder:r.invm(priv.modulus)}}(priv),len=priv.modulus.byteLength(),blinded=(bn.mont(priv.modulus),new bn(msg).mul(blinds.blinder).umod(priv.modulus)),c1=blinded.toRed(bn.mont(priv.prime1)),c2=blinded.toRed(bn.mont(priv.prime2)),qinv=priv.coefficient,p=priv.prime1,q=priv.prime2,m1=c1.redPow(priv.exponent1),m2=c2.redPow(priv.exponent2);m1=m1.fromRed(),m2=m2.fromRed();var h=m1.isub(m2).imul(qinv).umod(p);return h.imul(q),m2.iadd(h),new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(!1,len))}function getr(priv){for(var len=priv.modulus.byteLength(),r=new bn(randomBytes(len));r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2);)r=new bn(randomBytes(len));return r}module.exports=crt,crt.getr=getr}).call(this,__webpack_require__(11).Buffer)},function(module,exports,__webpack_require__){var hash=exports;hash.utils=__webpack_require__(85),hash.common=__webpack_require__(140),hash.sha=__webpack_require__(442),hash.ripemd=__webpack_require__(446),hash.hmac=__webpack_require__(447),hash.sha1=hash.sha.sha1,hash.sha256=hash.sha.sha256,hash.sha224=hash.sha.sha224,hash.sha384=hash.sha.sha384,hash.sha512=hash.sha.sha512,hash.ripemd160=hash.ripemd.ripemd160},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__extends",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,"__assign",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,"__rest",(function(){return __rest})),__webpack_require__.d(__webpack_exports__,"__decorate",(function(){return __decorate})),__webpack_require__.d(__webpack_exports__,"__param",(function(){return __param})),__webpack_require__.d(__webpack_exports__,"__metadata",(function(){return __metadata})),__webpack_require__.d(__webpack_exports__,"__awaiter",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,"__generator",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,"__createBinding",(function(){return __createBinding})),__webpack_require__.d(__webpack_exports__,"__exportStar",(function(){return __exportStar})),__webpack_require__.d(__webpack_exports__,"__values",(function(){return __values})),__webpack_require__.d(__webpack_exports__,"__read",(function(){return __read})),__webpack_require__.d(__webpack_exports__,"__spread",(function(){return __spread})),__webpack_require__.d(__webpack_exports__,"__spreadArrays",(function(){return __spreadArrays})),__webpack_require__.d(__webpack_exports__,"__await",(function(){return __await})),__webpack_require__.d(__webpack_exports__,"__asyncGenerator",(function(){return __asyncGenerator})),__webpack_require__.d(__webpack_exports__,"__asyncDelegator",(function(){return __asyncDelegator})),__webpack_require__.d(__webpack_exports__,"__asyncValues",(function(){return __asyncValues})),__webpack_require__.d(__webpack_exports__,"__makeTemplateObject",(function(){return __makeTemplateObject})),__webpack_require__.d(__webpack_exports__,"__importStar",(function(){return __importStar})),__webpack_require__.d(__webpack_exports__,"__importDefault",(function(){return __importDefault})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"locateWindow",(function(){return locateWindow}));var fallbackWindow={};function locateWindow(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:fallbackWindow}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(143),isObjectLike=__webpack_require__(144);module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(506),mapCacheDelete=__webpack_require__(522),mapCacheGet=__webpack_require__(524),mapCacheHas=__webpack_require__(525),mapCacheSet=__webpack_require__(526);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){var Map=__webpack_require__(112)(__webpack_require__(93),"Map");module.exports=Map},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(93),stubFalse=__webpack_require__(538),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}).call(this,__webpack_require__(139)(module))},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(539),baseUnary=__webpack_require__(540),nodeUtil=__webpack_require__(541),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports,__webpack_require__){"use strict";var _a;exports.__esModule=!0,exports.ERRORS=exports.ErrorCode=void 0;var ErrorCode,StatusCodeEnum_1=__webpack_require__(581);!function(ErrorCode){ErrorCode.E001="E001",ErrorCode.E002="E002",ErrorCode.E003="E003",ErrorCode.E004="E004",ErrorCode.E005="E005",ErrorCode.E006="E006",ErrorCode.E007="E007",ErrorCode.E008="E008",ErrorCode.E009="E009",ErrorCode.E010="E010",ErrorCode.E011="E011",ErrorCode.E012="E012"}(ErrorCode=exports.ErrorCode||(exports.ErrorCode={})),exports.ERRORS=((_a={})[ErrorCode.E001]={code:ErrorCode.E001,message:"El cuerpo de la peticin es invlido.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E002]={code:ErrorCode.E002,message:"Ha ocurrido un error inesperado.",statusCode:StatusCodeEnum_1.StatusCodeEnum.InternalServerError},_a[ErrorCode.E003]={code:ErrorCode.E003,message:"La tarjeta no permite realizar pagos diferidos.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E004]={code:ErrorCode.E004,message:"Id de comercio no vlido.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E005]={code:ErrorCode.E005,message:"El nmero de tarjeta no es vlido.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E006]={code:ErrorCode.E006,message:"Error de validacin apple pay.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E007]={code:ErrorCode.E007,message:"Error al iniciar sesin.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E008]={code:ErrorCode.E008,message:"Cdigo incorrecto, ingresar nuevamente.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E009]={code:ErrorCode.E009,message:"Error al validar sesin.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E010]={code:ErrorCode.E010,message:"Es necesaria la verificacin de autenticacin del usuario.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E011]={code:ErrorCode.E011,message:"Sesin no disponible.",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a[ErrorCode.E012]={code:ErrorCode.E012,message:"Campos 3DS invlidos",statusCode:StatusCodeEnum_1.StatusCodeEnum.BadRequest},_a)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=!function(e){function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var i=window.songbirdLoader;window.songbirdLoader=function(t,r){for(var s,a,u=0,l=[];u<t.length;u++)a=t[u],o[a]&&l.push.apply(l,o[a]),o[a]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);for(i&&i(t,r);l.length;)l.shift().call(null,n)};var t={},o={19:0};return n.e=function(e,i){if(0===o[e])return i.call(null,n);if(void 0!==o[e])o[e].push(i);else{o[e]=[i];var t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.crossOrigin="anonymous",r.src=n.p+""+e+".0a125400b09de2105a63.songbird.js",t.appendChild(r)}},n.m=e,n.c=t,n.p="https://includestest.ccdc02.com/cardinalcruise/v1/0a125400b09de2105a63/",n(0)}([function(e,n,i){e.exports=i(1)},function(e,n,i){!function(e,n){var t,o=[],r=[],s=[],a=[],u=[],l=[],p=[],c=[];t={configure:function(e){o.push({name:e,arguments:arguments})},setup:function(e){l.push({name:e,arguments:arguments})},start:function(e){p.push({name:e,arguments:arguments})},continue:function(e){r.push({name:e,arguments:arguments})},on:function(e){u.push({name:e,arguments:arguments})},trigger:function(e){c.push({name:e,arguments:arguments})},off:function(e){a.push({name:e,arguments:arguments})},complete:function(e){s.push({name:e,arguments:arguments})}},e.Cardinal=t,e.onerror!==n&&null!==e.onerror||(e.onerror=function(){return!1}),i(2).polyfill((function(s){i.e(5,(function(a){var d=i(12),f=i(14).active,g=i(23),h=i(3),m=i(24),b=i(31),y=i(32),v=i(58),w=i(67),E=i(15),N=i(63),F=i(113),O=E.getLoggerInstance("Base.Main"),S=i(14).passive,L=i(18),x=i(114),C={configurationQueue:o,onQueue:u,startQueue:p,continueQueue:r};E.addToLoggerCollection(s);try{L.on("error",(function(e){f.publish("error.fatal").then((function(){y.handleError(e,b.GENERAL.NUMBER,b.GENERAL.DESCRIPTION)}))})),O.info("Using Songbird.js v"+m.getSystemConfig().version),F.init(),t.setup=d.partial(f.publish,"setup"),t.on=S.subscribe,t.start=function(e){arguments[0]="start."+e.toUpperCase(),f.publish.apply(this,arguments)},t.continue=function(e){arguments[0]="continue."+e.toUpperCase(),f.publish.apply(this,arguments)},t.complete=d.partial(f.publish,"payments.completed"),t.trigger=f.publish,t.off=S.removeEvent,v.setupSubscriptions(),h.browser=g.getBrowserDetails(),d.each(c,(function(e){f.publish.apply(this,e.arguments)})),f.subscribe("setup",d.partial(x.processSetup,C)),l.length>0&&f.publish("setup",l[0].arguments[0],l[0].arguments[1]),h.namespace=t,h.window=e,N.initialize(e),N.captureTiming(w.getCurrentScript())}catch(e){O.error("Fatal Exception while processing: "+(e.message!==n?e.message:e)),y.handleError(e,b.GENERAL.NUMBER,b.GENERAL.DESCRIPTION)}}))}))}(window)},function(e,n,i){var t,o=i(3),s=new(i(4))("Base.Polyfiller"),a={JSON:!1,performance:!1,bind:!1,filter:!1},u={polyfill:function(e){t=e,"JSON"in o.window?(a.JSON=!0,u.isFinished()):(s.debug("Detected JSON missing, loading polyfill"),i.e(1,(function(e){i(5),s.debug("JSON polyfill loaded"),a.JSON=!0,u.isFinished()}))),"performance"in o.window&&"mark"in o.window.performance?(a.performance=!0,u.isFinished()):(s.debug("Detected performance library missing in browser - loading polyfill"),i.e(2,(function(e){i(8),s.debug("performance polyfill loaded"),a.performance=!0,u.isFinished()}))),Function.prototype.bind?(a.bind=!0,u.isFinished()):(s.debug("Detected bind is missing - loading polyfill"),i.e(3,(function(e){i(10)(),s.debug("bind polyfill loaded"),a.bind=!0,u.isFinished()}))),Array.prototype.filter?(a.filter=!0,u.isFinished()):(s.debug("Detected filter is missing - loading polyfill"),i.e(4,(function(e){i(11)(),s.debug("filter polyfill loaded"),a.filter=!0,u.isFinished()})))},isFinished:function(){for(var e in a)if(a.hasOwnProperty(e)&&!a[e])return!1;t(s)}};e.exports=u},function(e,n){var i;try{i=window}catch(e){i=this}e.exports={apiId:void 0,bin:void 0,deviceFingerprinting:{shouldRunFingerprinting:!1,urls:{base:void 0,browser:void 0,profileBin:void 0}},farnsworthLabs:{},formFields:{},jwtOrderObject:void 0,merchantJwt:void 0,songbirdPostmessageValidation:!1,message:void 0,orgUnitId:void 0,setup:{eventCompleted:!1,modulesLoaded:void 0},storage:{},tid:void 0,transactionFlow:void 0,timers:{browserRender:null},urls:{hostedFields:void 0,postMessageWhiteList:[]},window:i}},function(e,n){function i(e){this.Namespace=e,this.logQueue=[],this.log=function(e,n){e||(e="debug"),this.logQueue.push({type:e,message:n})}}i.prototype.getLogQueue=function(){return this.logQueue},i.prototype.getNamespace=function(){return this.Namespace},i.prototype.trace=function(e){this.log("trace",e)},i.prototype.debug=function(e){this.log("debug",e)},i.prototype.info=function(e){this.log("info",e)},i.prototype.warn=function(e){this.log("warn",e)},i.prototype.error=function(e){this.log("error",e)},e.exports=i}])},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=!function(e){function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var i=window.songbirdLoader;window.songbirdLoader=function(t,r){for(var s,u,a=0,l=[];a<t.length;a++)u=t[a],o[u]&&l.push.apply(l,o[u]),o[u]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);for(i&&i(t,r);l.length;)l.shift().call(null,n)};var t={},o={8:0};return n.e=function(e,i){if(0===o[e])return i.call(null,n);if(void 0!==o[e])o[e].push(i);else{o[e]=[i];var t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.crossOrigin="anonymous",r.src=n.p+""+e+".b109e0c6fd2a5b6b93b2.songbird.js",t.appendChild(r)}},n.m=e,n.c=t,n.p="https://includes.ccdc02.com/cardinalcruise/v1/b109e0c6fd2a5b6b93b2/",n(0)}({0:function(e,n,i){e.exports=i(76)},5:function(e,n){var i;try{i=window}catch(e){i=this}e.exports={apiId:void 0,bin:void 0,deviceFingerprinting:{shouldRunFingerprinting:!1,urls:{base:void 0,browser:void 0,profileBin:void 0}},farnsworthLabs:{},formFields:{},jwtOrderObject:void 0,merchantJwt:void 0,songbirdPostmessageValidation:!1,message:void 0,orgUnitId:void 0,setup:{eventCompleted:!1,modulesLoaded:void 0},storage:{},tid:void 0,transactionFlow:void 0,timers:{browserRender:null},urls:{hostedFields:void 0,postMessageWhiteList:[]},window:i}},46:function(e,n){function i(e){this.Namespace=e,this.logQueue=[],this.log=function(e,n){e||(e="debug"),this.logQueue.push({type:e,message:n})}}i.prototype.getLogQueue=function(){return this.logQueue},i.prototype.getNamespace=function(){return this.Namespace},i.prototype.trace=function(e){this.log("trace",e)},i.prototype.debug=function(e){this.log("debug",e)},i.prototype.info=function(e){this.log("info",e)},i.prototype.warn=function(e){this.log("warn",e)},i.prototype.error=function(e){this.log("error",e)},e.exports=i},54:function(e,n,i){var t,o=i(5),s=new(i(46))("Base.Polyfiller"),u={JSON:!1,performance:!1,bind:!1,filter:!1},a={polyfill:function(e){t=e,"JSON"in o.window?(u.JSON=!0,a.isFinished()):(s.debug("Detected JSON missing, loading polyfill"),i.e(0,(function(e){i(97),s.debug("JSON polyfill loaded"),u.JSON=!0,a.isFinished()}))),"performance"in o.window&&"mark"in o.window.performance?(u.performance=!0,a.isFinished()):(s.debug("Detected performance library missing in browser - loading polyfill"),i.e(2,(function(e){i(118),s.debug("performance polyfill loaded"),u.performance=!0,a.isFinished()}))),Function.prototype.bind?(u.bind=!0,a.isFinished()):(s.debug("Detected bind is missing - loading polyfill"),i.e(0,(function(e){i(119)(),s.debug("bind polyfill loaded"),u.bind=!0,a.isFinished()}))),Array.prototype.filter?(u.filter=!0,a.isFinished()):(s.debug("Detected filter is missing - loading polyfill"),i.e(0,(function(e){i(120)(),s.debug("filter polyfill loaded"),u.filter=!0,a.isFinished()})))},isFinished:function(){for(var e in u)if(u.hasOwnProperty(e)&&!u[e])return!1;t(s)}};e.exports=a},76:function(e,n,i){!function(e,n){var t,o=[],r=[],s=[],u=[],a=[],l=[],p=[],c=[];t={configure:function(e){o.push({name:e,arguments:arguments})},setup:function(e){l.push({name:e,arguments:arguments})},start:function(e){p.push({name:e,arguments:arguments})},continue:function(e){r.push({name:e,arguments:arguments})},on:function(e){a.push({name:e,arguments:arguments})},trigger:function(e){c.push({name:e,arguments:arguments})},off:function(e){u.push({name:e,arguments:arguments})},complete:function(e){s.push({name:e,arguments:arguments})}},e.Cardinal=t,e.onerror!==n&&null!==e.onerror||(e.onerror=function(){return!1}),i(54).polyfill((function(s){i.e(1,(function(u){var d=i(6),f=i(4).active,g=i(108),h=i(5),m=i(3),b=i(9),y=i(11),v=i(55),w=i(12),E=i(1),N=i(13),F=i(101),O=E.getLoggerInstance("Base.Main"),S=i(4).passive,L=i(7),x=i(100),C={configurationQueue:o,onQueue:a,startQueue:p,continueQueue:r};E.addToLoggerCollection(s);try{L.on("error",(function(e){f.publish("error.fatal").then((function(){y.handleError(e,b.GENERAL.NUMBER,b.GENERAL.DESCRIPTION)}))})),O.info("Using Songbird.js v"+m.getSystemConfig().version),F.init(),t.setup=d.partial(f.publish,"setup"),t.on=S.subscribe,t.start=function(e){arguments[0]="start."+e.toUpperCase(),f.publish.apply(this,arguments)},t.continue=function(e){arguments[0]="continue."+e.toUpperCase(),f.publish.apply(this,arguments)},t.complete=d.partial(f.publish,"payments.completed"),t.trigger=f.publish,t.off=S.removeEvent,v.setupSubscriptions(),h.browser=g.getBrowserDetails(),d.each(c,(function(e){f.publish.apply(this,e.arguments)})),f.subscribe("setup",d.partial(x.processSetup,C)),l.length>0&&f.publish("setup",l[0].arguments[0],l[0].arguments[1]),h.namespace=t,h.window=e,N.initialize(e),N.captureTiming(w.getCurrentScript())}catch(e){O.error("Fatal Exception while processing: "+(e.message!==n?e.message:e)),y.handleError(e,b.GENERAL.NUMBER,b.GENERAL.DESCRIPTION)}}))}))}(window)}})},function(module,__webpack_exports__,__webpack_require__){"use strict";var ConsoleLogger=__webpack_require__(84),Parser=__webpack_require__(285),Hub=__webpack_require__(186),Credentials=__webpack_require__(175),Platform=__webpack_require__(96),extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.create;Object.create;var models_0_AbortIncompleteMultipartUpload,models_0_AbortMultipartUploadOutput,models_0_AbortMultipartUploadRequest,models_0_NoSuchUpload,models_0_AccelerateConfiguration,models_0_Grantee,models_0_Grant,models_0_Owner,models_0_AccessControlPolicy,models_0_AccessControlTranslation,models_0_CompleteMultipartUploadOutput,models_0_CompletedPart,models_0_CompletedMultipartUpload,models_0_CompleteMultipartUploadRequest,models_0_CopyObjectResult,models_0_CopyObjectOutput,models_0_CopyObjectRequest,models_0_ObjectNotInActiveTierError,models_0_BucketAlreadyExists,models_0_BucketAlreadyOwnedByYou,models_0_CreateBucketOutput,models_0_CreateBucketConfiguration,models_0_CreateBucketRequest,models_0_CreateMultipartUploadOutput,models_0_CreateMultipartUploadRequest,models_0_DeleteBucketRequest,models_0_DeleteBucketAnalyticsConfigurationRequest,models_0_DeleteBucketCorsRequest,models_0_DeleteBucketEncryptionRequest,models_0_DeleteBucketIntelligentTieringConfigurationRequest,models_0_DeleteBucketInventoryConfigurationRequest,models_0_DeleteBucketLifecycleRequest,models_0_DeleteBucketMetricsConfigurationRequest,models_0_DeleteBucketOwnershipControlsRequest,models_0_DeleteBucketPolicyRequest,models_0_DeleteBucketReplicationRequest,models_0_DeleteBucketTaggingRequest,models_0_DeleteBucketWebsiteRequest,models_0_DeleteObjectOutput,models_0_DeleteObjectRequest,models_0_DeletedObject,models_0_Error,models_0_DeleteObjectsOutput,models_0_ObjectIdentifier,models_0_Delete,models_0_DeleteObjectsRequest,models_0_DeleteObjectTaggingOutput,models_0_DeleteObjectTaggingRequest,models_0_DeletePublicAccessBlockRequest,models_0_GetBucketAccelerateConfigurationOutput,models_0_GetBucketAccelerateConfigurationRequest,models_0_GetBucketAclOutput,models_0_GetBucketAclRequest,models_0_Tag,models_0_AnalyticsAndOperator,AnalyticsFilter,models_0_AnalyticsS3BucketDestination,models_0_AnalyticsExportDestination,models_0_StorageClassAnalysisDataExport,models_0_StorageClassAnalysis,models_0_AnalyticsConfiguration,models_0_GetBucketAnalyticsConfigurationOutput,models_0_GetBucketAnalyticsConfigurationRequest,models_0_CORSRule,models_0_GetBucketCorsOutput,models_0_GetBucketCorsRequest,models_0_ServerSideEncryptionByDefault,models_0_ServerSideEncryptionRule,models_0_ServerSideEncryptionConfiguration,models_0_GetBucketEncryptionOutput,models_0_GetBucketEncryptionRequest,models_0_IntelligentTieringAndOperator,models_0_IntelligentTieringFilter,models_0_Tiering,models_0_IntelligentTieringConfiguration,models_0_GetBucketIntelligentTieringConfigurationOutput,models_0_GetBucketIntelligentTieringConfigurationRequest,models_0_SSEKMS,models_0_SSES3,models_0_InventoryEncryption,models_0_InventoryS3BucketDestination,models_0_InventoryDestination,models_0_InventoryFilter,models_0_InventorySchedule,models_0_InventoryConfiguration,models_0_GetBucketInventoryConfigurationOutput,models_0_GetBucketInventoryConfigurationRequest,models_0_LifecycleExpiration,models_0_LifecycleRuleAndOperator,LifecycleRuleFilter,models_0_NoncurrentVersionExpiration,models_0_NoncurrentVersionTransition,models_0_Transition,models_0_LifecycleRule,models_0_GetBucketLifecycleConfigurationOutput,models_0_GetBucketLifecycleConfigurationRequest,models_0_GetBucketLocationOutput,models_0_GetBucketLocationRequest,models_0_TargetGrant,models_0_LoggingEnabled,models_0_GetBucketLoggingOutput,models_0_GetBucketLoggingRequest,models_0_MetricsAndOperator,MetricsFilter,models_0_MetricsConfiguration,models_0_GetBucketMetricsConfigurationOutput,models_0_GetBucketMetricsConfigurationRequest,models_0_GetBucketNotificationConfigurationRequest,models_0_FilterRule,models_0_S3KeyFilter,models_0_NotificationConfigurationFilter,models_0_LambdaFunctionConfiguration,models_0_QueueConfiguration,models_0_TopicConfiguration,models_0_NotificationConfiguration,models_0_OwnershipControlsRule,models_0_OwnershipControls,models_0_GetBucketOwnershipControlsOutput,models_0_GetBucketOwnershipControlsRequest,models_0_GetBucketPolicyOutput,models_0_GetBucketPolicyRequest,models_0_PolicyStatus,models_0_GetBucketPolicyStatusOutput,models_0_GetBucketPolicyStatusRequest,models_0_DeleteMarkerReplication,models_0_EncryptionConfiguration,models_0_ReplicationTimeValue,models_0_Metrics,models_0_ReplicationTime,models_0_Destination,models_0_ExistingObjectReplication,models_0_ReplicationRuleAndOperator,ReplicationRuleFilter,models_0_ReplicaModifications,models_0_SseKmsEncryptedObjects,models_0_SourceSelectionCriteria,models_0_ReplicationRule,models_0_ReplicationConfiguration,models_0_GetBucketReplicationOutput,models_0_GetBucketReplicationRequest,models_0_GetBucketRequestPaymentOutput,models_0_GetBucketRequestPaymentRequest,models_0_GetBucketTaggingOutput,models_0_GetBucketTaggingRequest,models_0_GetBucketVersioningOutput,models_0_GetBucketVersioningRequest,models_0_ErrorDocument,models_0_IndexDocument,models_0_RedirectAllRequestsTo,models_0_Condition,models_0_Redirect,models_0_RoutingRule,models_0_GetBucketWebsiteOutput,models_0_GetBucketWebsiteRequest,models_0_GetObjectOutput,models_0_GetObjectRequest,models_0_InvalidObjectState,models_0_NoSuchKey,models_0_GetObjectAclOutput,models_0_GetObjectAclRequest,models_0_ObjectLockLegalHold,models_0_GetObjectLegalHoldOutput,models_0_GetObjectLegalHoldRequest,models_0_DefaultRetention,models_0_ObjectLockRule,models_0_ObjectLockConfiguration,models_0_GetObjectLockConfigurationOutput,models_0_GetObjectLockConfigurationRequest,models_0_ObjectLockRetention,models_0_GetObjectRetentionOutput,models_0_GetObjectRetentionRequest,models_0_GetObjectTaggingOutput,models_0_GetObjectTaggingRequest,models_0_GetObjectTorrentOutput,models_0_GetObjectTorrentRequest,models_0_PublicAccessBlockConfiguration,models_0_GetPublicAccessBlockOutput,models_0_GetPublicAccessBlockRequest,models_0_HeadBucketRequest,models_0_NoSuchBucket,models_0_HeadObjectOutput,models_0_HeadObjectRequest,models_0_ListBucketAnalyticsConfigurationsOutput,models_0_ListBucketAnalyticsConfigurationsRequest,models_0_ListBucketIntelligentTieringConfigurationsOutput,models_0_ListBucketIntelligentTieringConfigurationsRequest,models_0_ListBucketInventoryConfigurationsOutput,models_0_ListBucketInventoryConfigurationsRequest,models_0_ListBucketMetricsConfigurationsOutput,models_0_ListBucketMetricsConfigurationsRequest,models_0_Bucket,models_0_ListBucketsOutput,models_0_CommonPrefix,models_0_Initiator,models_0_MultipartUpload,models_0_ListMultipartUploadsOutput,models_0_ListMultipartUploadsRequest,models_0_Object,models_0_ListObjectsOutput,models_0_ListObjectsRequest,models_0_ListObjectsV2Output,models_0_ListObjectsV2Request,models_0_DeleteMarkerEntry,models_0_ObjectVersion,models_0_ListObjectVersionsOutput,models_0_ListObjectVersionsRequest,models_0_Part,models_0_ListPartsOutput,models_0_ListPartsRequest,models_0_PutBucketAccelerateConfigurationRequest,models_0_PutBucketAclRequest,models_0_PutBucketAnalyticsConfigurationRequest,models_0_CORSConfiguration,models_0_PutBucketCorsRequest,models_0_PutBucketEncryptionRequest,models_0_PutBucketIntelligentTieringConfigurationRequest,models_0_PutBucketInventoryConfigurationRequest,models_0_BucketLifecycleConfiguration,models_0_PutBucketLifecycleConfigurationRequest,models_0_BucketLoggingStatus,models_0_PutBucketLoggingRequest,models_0_PutBucketMetricsConfigurationRequest,models_0_PutBucketNotificationConfigurationRequest,models_0_PutBucketOwnershipControlsRequest,models_0_PutBucketPolicyRequest,models_0_PutBucketReplicationRequest,models_0_RequestPaymentConfiguration,models_0_PutBucketRequestPaymentRequest,models_0_Tagging,models_0_PutBucketTaggingRequest,models_0_VersioningConfiguration,models_0_PutBucketVersioningRequest,models_0_WebsiteConfiguration,models_0_PutBucketWebsiteRequest,models_0_PutObjectOutput,models_0_PutObjectRequest,models_0_PutObjectAclOutput,models_0_PutObjectAclRequest,models_0_PutObjectLegalHoldOutput,models_0_PutObjectLegalHoldRequest,models_0_PutObjectLockConfigurationOutput,models_0_PutObjectLockConfigurationRequest,models_0_PutObjectRetentionOutput,models_0_PutObjectRetentionRequest,models_0_PutObjectTaggingOutput,models_0_PutObjectTaggingRequest,models_0_PutPublicAccessBlockRequest,models_0_ObjectAlreadyInActiveTierError,models_0_RestoreObjectOutput,models_0_GlacierJobParameters,models_0_Encryption,es=__webpack_require__(1);(models_0_AbortIncompleteMultipartUpload||(models_0_AbortIncompleteMultipartUpload={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_AbortMultipartUploadOutput||(models_0_AbortMultipartUploadOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_AbortMultipartUploadRequest||(models_0_AbortMultipartUploadRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_NoSuchUpload||(models_0_NoSuchUpload={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_AccelerateConfiguration||(models_0_AccelerateConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Grantee||(models_0_Grantee={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Grant||(models_0_Grant={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Owner||(models_0_Owner={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_AccessControlPolicy||(models_0_AccessControlPolicy={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_AccessControlTranslation||(models_0_AccessControlTranslation={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CompleteMultipartUploadOutput||(models_0_CompleteMultipartUploadOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d})},(models_0_CompletedPart||(models_0_CompletedPart={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CompletedMultipartUpload||(models_0_CompletedMultipartUpload={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CompleteMultipartUploadRequest||(models_0_CompleteMultipartUploadRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CopyObjectResult||(models_0_CopyObjectResult={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CopyObjectOutput||(models_0_CopyObjectOutput={})).filterSensitiveLog=function(obj){return __assign(__assign(__assign({},obj),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d}),obj.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:es.d})},(models_0_CopyObjectRequest||(models_0_CopyObjectRequest={})).filterSensitiveLog=function(obj){return __assign(__assign(__assign(__assign(__assign({},obj),obj.SSECustomerKey&&{SSECustomerKey:es.d}),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d}),obj.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:es.d}),obj.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:es.d})},(models_0_ObjectNotInActiveTierError||(models_0_ObjectNotInActiveTierError={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_BucketAlreadyExists||(models_0_BucketAlreadyExists={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_BucketAlreadyOwnedByYou||(models_0_BucketAlreadyOwnedByYou={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CreateBucketOutput||(models_0_CreateBucketOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CreateBucketConfiguration||(models_0_CreateBucketConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CreateBucketRequest||(models_0_CreateBucketRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CreateMultipartUploadOutput||(models_0_CreateMultipartUploadOutput={})).filterSensitiveLog=function(obj){return __assign(__assign(__assign({},obj),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d}),obj.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:es.d})},(models_0_CreateMultipartUploadRequest||(models_0_CreateMultipartUploadRequest={})).filterSensitiveLog=function(obj){return __assign(__assign(__assign(__assign({},obj),obj.SSECustomerKey&&{SSECustomerKey:es.d}),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d}),obj.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:es.d})},(models_0_DeleteBucketRequest||(models_0_DeleteBucketRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketAnalyticsConfigurationRequest||(models_0_DeleteBucketAnalyticsConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketCorsRequest||(models_0_DeleteBucketCorsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketEncryptionRequest||(models_0_DeleteBucketEncryptionRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketIntelligentTieringConfigurationRequest||(models_0_DeleteBucketIntelligentTieringConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketInventoryConfigurationRequest||(models_0_DeleteBucketInventoryConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketLifecycleRequest||(models_0_DeleteBucketLifecycleRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketMetricsConfigurationRequest||(models_0_DeleteBucketMetricsConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketOwnershipControlsRequest||(models_0_DeleteBucketOwnershipControlsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketPolicyRequest||(models_0_DeleteBucketPolicyRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketReplicationRequest||(models_0_DeleteBucketReplicationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketTaggingRequest||(models_0_DeleteBucketTaggingRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteBucketWebsiteRequest||(models_0_DeleteBucketWebsiteRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteObjectOutput||(models_0_DeleteObjectOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteObjectRequest||(models_0_DeleteObjectRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeletedObject||(models_0_DeletedObject={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Error||(models_0_Error={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteObjectsOutput||(models_0_DeleteObjectsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ObjectIdentifier||(models_0_ObjectIdentifier={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Delete||(models_0_Delete={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteObjectsRequest||(models_0_DeleteObjectsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteObjectTaggingOutput||(models_0_DeleteObjectTaggingOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteObjectTaggingRequest||(models_0_DeleteObjectTaggingRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeletePublicAccessBlockRequest||(models_0_DeletePublicAccessBlockRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketAccelerateConfigurationOutput||(models_0_GetBucketAccelerateConfigurationOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketAccelerateConfigurationRequest||(models_0_GetBucketAccelerateConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketAclOutput||(models_0_GetBucketAclOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketAclRequest||(models_0_GetBucketAclRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Tag||(models_0_Tag={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_AnalyticsAndOperator||(models_0_AnalyticsAndOperator={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(AnalyticsFilter){AnalyticsFilter.visit=function(value,visitor){return void 0!==value.Prefix?visitor.Prefix(value.Prefix):void 0!==value.Tag?visitor.Tag(value.Tag):void 0!==value.And?visitor.And(value.And):visitor._(value.$unknown[0],value.$unknown[1])},AnalyticsFilter.filterSensitiveLog=function(obj){var _a;return void 0!==obj.Prefix?{Prefix:obj.Prefix}:void 0!==obj.Tag?{Tag:models_0_Tag.filterSensitiveLog(obj.Tag)}:void 0!==obj.And?{And:models_0_AnalyticsAndOperator.filterSensitiveLog(obj.And)}:void 0!==obj.$unknown?((_a={})[obj.$unknown[0]]="UNKNOWN",_a):void 0}}(AnalyticsFilter||(AnalyticsFilter={})),(models_0_AnalyticsS3BucketDestination||(models_0_AnalyticsS3BucketDestination={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_AnalyticsExportDestination||(models_0_AnalyticsExportDestination={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_StorageClassAnalysisDataExport||(models_0_StorageClassAnalysisDataExport={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_StorageClassAnalysis||(models_0_StorageClassAnalysis={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_AnalyticsConfiguration||(models_0_AnalyticsConfiguration={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Filter&&{Filter:AnalyticsFilter.filterSensitiveLog(obj.Filter)})},(models_0_GetBucketAnalyticsConfigurationOutput||(models_0_GetBucketAnalyticsConfigurationOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.AnalyticsConfiguration&&{AnalyticsConfiguration:models_0_AnalyticsConfiguration.filterSensitiveLog(obj.AnalyticsConfiguration)})},(models_0_GetBucketAnalyticsConfigurationRequest||(models_0_GetBucketAnalyticsConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CORSRule||(models_0_CORSRule={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketCorsOutput||(models_0_GetBucketCorsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketCorsRequest||(models_0_GetBucketCorsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ServerSideEncryptionByDefault||(models_0_ServerSideEncryptionByDefault={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.KMSMasterKeyID&&{KMSMasterKeyID:es.d})},(models_0_ServerSideEncryptionRule||(models_0_ServerSideEncryptionRule={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:models_0_ServerSideEncryptionByDefault.filterSensitiveLog(obj.ApplyServerSideEncryptionByDefault)})},(models_0_ServerSideEncryptionConfiguration||(models_0_ServerSideEncryptionConfiguration={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Rules&&{Rules:obj.Rules.map((function(item){return models_0_ServerSideEncryptionRule.filterSensitiveLog(item)}))})},(models_0_GetBucketEncryptionOutput||(models_0_GetBucketEncryptionOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:models_0_ServerSideEncryptionConfiguration.filterSensitiveLog(obj.ServerSideEncryptionConfiguration)})},(models_0_GetBucketEncryptionRequest||(models_0_GetBucketEncryptionRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_IntelligentTieringAndOperator||(models_0_IntelligentTieringAndOperator={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_IntelligentTieringFilter||(models_0_IntelligentTieringFilter={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Tiering||(models_0_Tiering={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_IntelligentTieringConfiguration||(models_0_IntelligentTieringConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketIntelligentTieringConfigurationOutput||(models_0_GetBucketIntelligentTieringConfigurationOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketIntelligentTieringConfigurationRequest||(models_0_GetBucketIntelligentTieringConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_SSEKMS||(models_0_SSEKMS={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.KeyId&&{KeyId:es.d})},(models_0_SSES3||(models_0_SSES3={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_InventoryEncryption||(models_0_InventoryEncryption={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSEKMS&&{SSEKMS:models_0_SSEKMS.filterSensitiveLog(obj.SSEKMS)})},(models_0_InventoryS3BucketDestination||(models_0_InventoryS3BucketDestination={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Encryption&&{Encryption:models_0_InventoryEncryption.filterSensitiveLog(obj.Encryption)})},(models_0_InventoryDestination||(models_0_InventoryDestination={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.S3BucketDestination&&{S3BucketDestination:models_0_InventoryS3BucketDestination.filterSensitiveLog(obj.S3BucketDestination)})},(models_0_InventoryFilter||(models_0_InventoryFilter={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_InventorySchedule||(models_0_InventorySchedule={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_InventoryConfiguration||(models_0_InventoryConfiguration={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Destination&&{Destination:models_0_InventoryDestination.filterSensitiveLog(obj.Destination)})},(models_0_GetBucketInventoryConfigurationOutput||(models_0_GetBucketInventoryConfigurationOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.InventoryConfiguration&&{InventoryConfiguration:models_0_InventoryConfiguration.filterSensitiveLog(obj.InventoryConfiguration)})},(models_0_GetBucketInventoryConfigurationRequest||(models_0_GetBucketInventoryConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_LifecycleExpiration||(models_0_LifecycleExpiration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_LifecycleRuleAndOperator||(models_0_LifecycleRuleAndOperator={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(LifecycleRuleFilter){LifecycleRuleFilter.visit=function(value,visitor){return void 0!==value.Prefix?visitor.Prefix(value.Prefix):void 0!==value.Tag?visitor.Tag(value.Tag):void 0!==value.And?visitor.And(value.And):visitor._(value.$unknown[0],value.$unknown[1])},LifecycleRuleFilter.filterSensitiveLog=function(obj){var _a;return void 0!==obj.Prefix?{Prefix:obj.Prefix}:void 0!==obj.Tag?{Tag:models_0_Tag.filterSensitiveLog(obj.Tag)}:void 0!==obj.And?{And:models_0_LifecycleRuleAndOperator.filterSensitiveLog(obj.And)}:void 0!==obj.$unknown?((_a={})[obj.$unknown[0]]="UNKNOWN",_a):void 0}}(LifecycleRuleFilter||(LifecycleRuleFilter={})),(models_0_NoncurrentVersionExpiration||(models_0_NoncurrentVersionExpiration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_NoncurrentVersionTransition||(models_0_NoncurrentVersionTransition={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Transition||(models_0_Transition={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_LifecycleRule||(models_0_LifecycleRule={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Filter&&{Filter:LifecycleRuleFilter.filterSensitiveLog(obj.Filter)})},(models_0_GetBucketLifecycleConfigurationOutput||(models_0_GetBucketLifecycleConfigurationOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Rules&&{Rules:obj.Rules.map((function(item){return models_0_LifecycleRule.filterSensitiveLog(item)}))})},(models_0_GetBucketLifecycleConfigurationRequest||(models_0_GetBucketLifecycleConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketLocationOutput||(models_0_GetBucketLocationOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketLocationRequest||(models_0_GetBucketLocationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_TargetGrant||(models_0_TargetGrant={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_LoggingEnabled||(models_0_LoggingEnabled={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketLoggingOutput||(models_0_GetBucketLoggingOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketLoggingRequest||(models_0_GetBucketLoggingRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_MetricsAndOperator||(models_0_MetricsAndOperator={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(MetricsFilter){MetricsFilter.visit=function(value,visitor){return void 0!==value.Prefix?visitor.Prefix(value.Prefix):void 0!==value.Tag?visitor.Tag(value.Tag):void 0!==value.And?visitor.And(value.And):visitor._(value.$unknown[0],value.$unknown[1])},MetricsFilter.filterSensitiveLog=function(obj){var _a;return void 0!==obj.Prefix?{Prefix:obj.Prefix}:void 0!==obj.Tag?{Tag:models_0_Tag.filterSensitiveLog(obj.Tag)}:void 0!==obj.And?{And:models_0_MetricsAndOperator.filterSensitiveLog(obj.And)}:void 0!==obj.$unknown?((_a={})[obj.$unknown[0]]="UNKNOWN",_a):void 0}}(MetricsFilter||(MetricsFilter={})),(models_0_MetricsConfiguration||(models_0_MetricsConfiguration={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Filter&&{Filter:MetricsFilter.filterSensitiveLog(obj.Filter)})},(models_0_GetBucketMetricsConfigurationOutput||(models_0_GetBucketMetricsConfigurationOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.MetricsConfiguration&&{MetricsConfiguration:models_0_MetricsConfiguration.filterSensitiveLog(obj.MetricsConfiguration)})},(models_0_GetBucketMetricsConfigurationRequest||(models_0_GetBucketMetricsConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketNotificationConfigurationRequest||(models_0_GetBucketNotificationConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_FilterRule||(models_0_FilterRule={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_S3KeyFilter||(models_0_S3KeyFilter={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_NotificationConfigurationFilter||(models_0_NotificationConfigurationFilter={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_LambdaFunctionConfiguration||(models_0_LambdaFunctionConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_QueueConfiguration||(models_0_QueueConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_TopicConfiguration||(models_0_TopicConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_NotificationConfiguration||(models_0_NotificationConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_OwnershipControlsRule||(models_0_OwnershipControlsRule={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_OwnershipControls||(models_0_OwnershipControls={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketOwnershipControlsOutput||(models_0_GetBucketOwnershipControlsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketOwnershipControlsRequest||(models_0_GetBucketOwnershipControlsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketPolicyOutput||(models_0_GetBucketPolicyOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketPolicyRequest||(models_0_GetBucketPolicyRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PolicyStatus||(models_0_PolicyStatus={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketPolicyStatusOutput||(models_0_GetBucketPolicyStatusOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketPolicyStatusRequest||(models_0_GetBucketPolicyStatusRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteMarkerReplication||(models_0_DeleteMarkerReplication={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_EncryptionConfiguration||(models_0_EncryptionConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ReplicationTimeValue||(models_0_ReplicationTimeValue={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Metrics||(models_0_Metrics={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ReplicationTime||(models_0_ReplicationTime={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Destination||(models_0_Destination={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ExistingObjectReplication||(models_0_ExistingObjectReplication={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ReplicationRuleAndOperator||(models_0_ReplicationRuleAndOperator={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(ReplicationRuleFilter){ReplicationRuleFilter.visit=function(value,visitor){return void 0!==value.Prefix?visitor.Prefix(value.Prefix):void 0!==value.Tag?visitor.Tag(value.Tag):void 0!==value.And?visitor.And(value.And):visitor._(value.$unknown[0],value.$unknown[1])},ReplicationRuleFilter.filterSensitiveLog=function(obj){var _a;return void 0!==obj.Prefix?{Prefix:obj.Prefix}:void 0!==obj.Tag?{Tag:models_0_Tag.filterSensitiveLog(obj.Tag)}:void 0!==obj.And?{And:models_0_ReplicationRuleAndOperator.filterSensitiveLog(obj.And)}:void 0!==obj.$unknown?((_a={})[obj.$unknown[0]]="UNKNOWN",_a):void 0}}(ReplicationRuleFilter||(ReplicationRuleFilter={})),(models_0_ReplicaModifications||(models_0_ReplicaModifications={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_SseKmsEncryptedObjects||(models_0_SseKmsEncryptedObjects={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_SourceSelectionCriteria||(models_0_SourceSelectionCriteria={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ReplicationRule||(models_0_ReplicationRule={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Filter&&{Filter:ReplicationRuleFilter.filterSensitiveLog(obj.Filter)})},(models_0_ReplicationConfiguration||(models_0_ReplicationConfiguration={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Rules&&{Rules:obj.Rules.map((function(item){return models_0_ReplicationRule.filterSensitiveLog(item)}))})},(models_0_GetBucketReplicationOutput||(models_0_GetBucketReplicationOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.ReplicationConfiguration&&{ReplicationConfiguration:models_0_ReplicationConfiguration.filterSensitiveLog(obj.ReplicationConfiguration)})},(models_0_GetBucketReplicationRequest||(models_0_GetBucketReplicationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketRequestPaymentOutput||(models_0_GetBucketRequestPaymentOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketRequestPaymentRequest||(models_0_GetBucketRequestPaymentRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketTaggingOutput||(models_0_GetBucketTaggingOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketTaggingRequest||(models_0_GetBucketTaggingRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketVersioningOutput||(models_0_GetBucketVersioningOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketVersioningRequest||(models_0_GetBucketVersioningRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ErrorDocument||(models_0_ErrorDocument={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_IndexDocument||(models_0_IndexDocument={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_RedirectAllRequestsTo||(models_0_RedirectAllRequestsTo={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Condition||(models_0_Condition={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Redirect||(models_0_Redirect={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_RoutingRule||(models_0_RoutingRule={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketWebsiteOutput||(models_0_GetBucketWebsiteOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetBucketWebsiteRequest||(models_0_GetBucketWebsiteRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectOutput||(models_0_GetObjectOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d})},(models_0_GetObjectRequest||(models_0_GetObjectRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSECustomerKey&&{SSECustomerKey:es.d})},(models_0_InvalidObjectState||(models_0_InvalidObjectState={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_NoSuchKey||(models_0_NoSuchKey={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectAclOutput||(models_0_GetObjectAclOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectAclRequest||(models_0_GetObjectAclRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ObjectLockLegalHold||(models_0_ObjectLockLegalHold={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectLegalHoldOutput||(models_0_GetObjectLegalHoldOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectLegalHoldRequest||(models_0_GetObjectLegalHoldRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DefaultRetention||(models_0_DefaultRetention={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ObjectLockRule||(models_0_ObjectLockRule={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ObjectLockConfiguration||(models_0_ObjectLockConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectLockConfigurationOutput||(models_0_GetObjectLockConfigurationOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectLockConfigurationRequest||(models_0_GetObjectLockConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ObjectLockRetention||(models_0_ObjectLockRetention={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectRetentionOutput||(models_0_GetObjectRetentionOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectRetentionRequest||(models_0_GetObjectRetentionRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectTaggingOutput||(models_0_GetObjectTaggingOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectTaggingRequest||(models_0_GetObjectTaggingRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectTorrentOutput||(models_0_GetObjectTorrentOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetObjectTorrentRequest||(models_0_GetObjectTorrentRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PublicAccessBlockConfiguration||(models_0_PublicAccessBlockConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetPublicAccessBlockOutput||(models_0_GetPublicAccessBlockOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GetPublicAccessBlockRequest||(models_0_GetPublicAccessBlockRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_HeadBucketRequest||(models_0_HeadBucketRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_NoSuchBucket||(models_0_NoSuchBucket={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_HeadObjectOutput||(models_0_HeadObjectOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d})},(models_0_HeadObjectRequest||(models_0_HeadObjectRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSECustomerKey&&{SSECustomerKey:es.d})},(models_0_ListBucketAnalyticsConfigurationsOutput||(models_0_ListBucketAnalyticsConfigurationsOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.AnalyticsConfigurationList&&{AnalyticsConfigurationList:obj.AnalyticsConfigurationList.map((function(item){return models_0_AnalyticsConfiguration.filterSensitiveLog(item)}))})},(models_0_ListBucketAnalyticsConfigurationsRequest||(models_0_ListBucketAnalyticsConfigurationsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListBucketIntelligentTieringConfigurationsOutput||(models_0_ListBucketIntelligentTieringConfigurationsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListBucketIntelligentTieringConfigurationsRequest||(models_0_ListBucketIntelligentTieringConfigurationsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListBucketInventoryConfigurationsOutput||(models_0_ListBucketInventoryConfigurationsOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.InventoryConfigurationList&&{InventoryConfigurationList:obj.InventoryConfigurationList.map((function(item){return models_0_InventoryConfiguration.filterSensitiveLog(item)}))})},(models_0_ListBucketInventoryConfigurationsRequest||(models_0_ListBucketInventoryConfigurationsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListBucketMetricsConfigurationsOutput||(models_0_ListBucketMetricsConfigurationsOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.MetricsConfigurationList&&{MetricsConfigurationList:obj.MetricsConfigurationList.map((function(item){return models_0_MetricsConfiguration.filterSensitiveLog(item)}))})},(models_0_ListBucketMetricsConfigurationsRequest||(models_0_ListBucketMetricsConfigurationsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Bucket||(models_0_Bucket={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListBucketsOutput||(models_0_ListBucketsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_CommonPrefix||(models_0_CommonPrefix={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Initiator||(models_0_Initiator={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_MultipartUpload||(models_0_MultipartUpload={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListMultipartUploadsOutput||(models_0_ListMultipartUploadsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListMultipartUploadsRequest||(models_0_ListMultipartUploadsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Object||(models_0_Object={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListObjectsOutput||(models_0_ListObjectsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListObjectsRequest||(models_0_ListObjectsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListObjectsV2Output||(models_0_ListObjectsV2Output={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListObjectsV2Request||(models_0_ListObjectsV2Request={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_DeleteMarkerEntry||(models_0_DeleteMarkerEntry={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ObjectVersion||(models_0_ObjectVersion={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListObjectVersionsOutput||(models_0_ListObjectVersionsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListObjectVersionsRequest||(models_0_ListObjectVersionsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Part||(models_0_Part={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListPartsOutput||(models_0_ListPartsOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ListPartsRequest||(models_0_ListPartsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketAccelerateConfigurationRequest||(models_0_PutBucketAccelerateConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketAclRequest||(models_0_PutBucketAclRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketAnalyticsConfigurationRequest||(models_0_PutBucketAnalyticsConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.AnalyticsConfiguration&&{AnalyticsConfiguration:models_0_AnalyticsConfiguration.filterSensitiveLog(obj.AnalyticsConfiguration)})},(models_0_CORSConfiguration||(models_0_CORSConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketCorsRequest||(models_0_PutBucketCorsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketEncryptionRequest||(models_0_PutBucketEncryptionRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:models_0_ServerSideEncryptionConfiguration.filterSensitiveLog(obj.ServerSideEncryptionConfiguration)})},(models_0_PutBucketIntelligentTieringConfigurationRequest||(models_0_PutBucketIntelligentTieringConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketInventoryConfigurationRequest||(models_0_PutBucketInventoryConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.InventoryConfiguration&&{InventoryConfiguration:models_0_InventoryConfiguration.filterSensitiveLog(obj.InventoryConfiguration)})},(models_0_BucketLifecycleConfiguration||(models_0_BucketLifecycleConfiguration={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Rules&&{Rules:obj.Rules.map((function(item){return models_0_LifecycleRule.filterSensitiveLog(item)}))})},(models_0_PutBucketLifecycleConfigurationRequest||(models_0_PutBucketLifecycleConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.LifecycleConfiguration&&{LifecycleConfiguration:models_0_BucketLifecycleConfiguration.filterSensitiveLog(obj.LifecycleConfiguration)})},(models_0_BucketLoggingStatus||(models_0_BucketLoggingStatus={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketLoggingRequest||(models_0_PutBucketLoggingRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketMetricsConfigurationRequest||(models_0_PutBucketMetricsConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.MetricsConfiguration&&{MetricsConfiguration:models_0_MetricsConfiguration.filterSensitiveLog(obj.MetricsConfiguration)})},(models_0_PutBucketNotificationConfigurationRequest||(models_0_PutBucketNotificationConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketOwnershipControlsRequest||(models_0_PutBucketOwnershipControlsRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketPolicyRequest||(models_0_PutBucketPolicyRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketReplicationRequest||(models_0_PutBucketReplicationRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.ReplicationConfiguration&&{ReplicationConfiguration:models_0_ReplicationConfiguration.filterSensitiveLog(obj.ReplicationConfiguration)})},(models_0_RequestPaymentConfiguration||(models_0_RequestPaymentConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketRequestPaymentRequest||(models_0_PutBucketRequestPaymentRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Tagging||(models_0_Tagging={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketTaggingRequest||(models_0_PutBucketTaggingRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_VersioningConfiguration||(models_0_VersioningConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketVersioningRequest||(models_0_PutBucketVersioningRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_WebsiteConfiguration||(models_0_WebsiteConfiguration={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutBucketWebsiteRequest||(models_0_PutBucketWebsiteRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectOutput||(models_0_PutObjectOutput={})).filterSensitiveLog=function(obj){return __assign(__assign(__assign({},obj),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d}),obj.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:es.d})},(models_0_PutObjectRequest||(models_0_PutObjectRequest={})).filterSensitiveLog=function(obj){return __assign(__assign(__assign(__assign({},obj),obj.SSECustomerKey&&{SSECustomerKey:es.d}),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d}),obj.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:es.d})},(models_0_PutObjectAclOutput||(models_0_PutObjectAclOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectAclRequest||(models_0_PutObjectAclRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectLegalHoldOutput||(models_0_PutObjectLegalHoldOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectLegalHoldRequest||(models_0_PutObjectLegalHoldRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectLockConfigurationOutput||(models_0_PutObjectLockConfigurationOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectLockConfigurationRequest||(models_0_PutObjectLockConfigurationRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectRetentionOutput||(models_0_PutObjectRetentionOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectRetentionRequest||(models_0_PutObjectRetentionRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectTaggingOutput||(models_0_PutObjectTaggingOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutObjectTaggingRequest||(models_0_PutObjectTaggingRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_PutPublicAccessBlockRequest||(models_0_PutPublicAccessBlockRequest={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_ObjectAlreadyInActiveTierError||(models_0_ObjectAlreadyInActiveTierError={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_RestoreObjectOutput||(models_0_RestoreObjectOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_GlacierJobParameters||(models_0_GlacierJobParameters={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_0_Encryption||(models_0_Encryption={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.KMSKeyId&&{KMSKeyId:es.d})};var dist_es=__webpack_require__(3),tslib_es6=__webpack_require__(0);var XmlNode_XmlNode=function(){function XmlNode(name,children){void 0===children&&(children=[]),this.name=name,this.children=children,this.attributes={}}return XmlNode.prototype.withName=function(name){return this.name=name,this},XmlNode.prototype.addAttribute=function(name,value){return this.attributes[name]=value,this},XmlNode.prototype.addChildNode=function(child){return this.children.push(child),this},XmlNode.prototype.removeAttribute=function(name){return delete this.attributes[name],this},XmlNode.prototype.toString=function(){var e_1,_a,hasChildren=Boolean(this.children.length),xmlText="<"+this.name,attributes=this.attributes;try{for(var _b=Object(tslib_es6.__values)(Object.keys(attributes)),_c=_b.next();!_c.done;_c=_b.next()){var attributeName=_c.value,attribute=attributes[attributeName];null!=attribute&&(xmlText+=" "+attributeName+'="'+((""+attribute).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"'))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return xmlText+(hasChildren?">"+this.children.map((function(c){return c.toString()})).join("")+"</"+this.name+">":"/>")},XmlNode}();var XmlText_XmlText=function(){function XmlText(value){this.value=value}return XmlText.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},XmlText}(),parser=__webpack_require__(320),deserializeAws_restXmlAbortMultipartUploadCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,parsedBody,message,_d;return __generator(this,(function(_e){switch(_e.label){case 0:return _a=[__assign({},output)],_d={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=__assign.apply(void 0,_a.concat([(_d.body=_e.sent(),_d)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),errorCode){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return _c=[{}],[4,deserializeAws_restXmlNoSuchUploadResponse(parsedOutput,context)];case 3:return response=__assign.apply(void 0,[__assign.apply(void 0,_c.concat([_e.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,5];case 4:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_e.label=5;case 5:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlCompleteMultipartUploadCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,parsedBody,message,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return _a=[__assign({},output)],_b={},[4,parseBody(output.body,context)];case 1:return parsedOutput=__assign.apply(void 0,_a.concat([(_b.body=_c.sent(),_b)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlCreateMultipartUploadCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,parsedBody,message,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return _a=[__assign({},output)],_b={},[4,parseBody(output.body,context)];case 1:return parsedOutput=__assign.apply(void 0,_a.concat([(_b.body=_c.sent(),_b)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlDeleteObjectCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,parsedBody,message,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return _a=[__assign({},output)],_b={},[4,parseBody(output.body,context)];case 1:return parsedOutput=__assign.apply(void 0,_a.concat([(_b.body=_c.sent(),_b)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlGetObjectCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,_d,parsedBody,message,_e;return __generator(this,(function(_f){switch(_f.label){case 0:return _a=[__assign({},output)],_e={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=__assign.apply(void 0,_a.concat([(_e.body=_f.sent(),_e)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),errorCode){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return _c=[{}],[4,deserializeAws_restXmlInvalidObjectStateResponse(parsedOutput,context)];case 3:return response=__assign.apply(void 0,[__assign.apply(void 0,_c.concat([_f.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,7];case 4:return _d=[{}],[4,deserializeAws_restXmlNoSuchKeyResponse(parsedOutput,context)];case 5:return response=__assign.apply(void 0,[__assign.apply(void 0,_d.concat([_f.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,7];case 6:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_f.label=7;case 7:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlListObjectsCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,_c,parsedBody,message,_d;return __generator(this,(function(_e){switch(_e.label){case 0:return _a=[__assign({},output)],_d={},[4,parseBody(output.body,context)];case 1:switch(parsedOutput=__assign.apply(void 0,_a.concat([(_d.body=_e.sent(),_d)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),errorCode){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return _c=[{}],[4,deserializeAws_restXmlNoSuchBucketResponse(parsedOutput,context)];case 3:return response=__assign.apply(void 0,[__assign.apply(void 0,_c.concat([_e.sent()])),{name:errorCode,$metadata:deserializeMetadata(output)}]),[3,5];case 4:parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),_e.label=5;case 5:return message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlListPartsCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,parsedBody,message,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return _a=[__assign({},output)],_b={},[4,parseBody(output.body,context)];case 1:return parsedOutput=__assign.apply(void 0,_a.concat([(_b.body=_c.sent(),_b)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlPutObjectCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,parsedBody,message,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return _a=[__assign({},output)],_b={},[4,parseBody(output.body,context)];case 1:return parsedOutput=__assign.apply(void 0,_a.concat([(_b.body=_c.sent(),_b)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlUploadPartCommandError=function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var parsedOutput,_a,response,errorCode,parsedBody,message,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return _a=[__assign({},output)],_b={},[4,parseBody(output.body,context)];case 1:return parsedOutput=__assign.apply(void 0,_a.concat([(_b.body=_c.sent(),_b)])),errorCode="UnknownError",errorCode=loadRestXmlErrorCode(output,parsedOutput.body),parsedBody=parsedOutput.body,errorCode=parsedBody.code||parsedBody.Code||errorCode,response=__assign(__assign({},parsedBody),{name:""+errorCode,message:parsedBody.message||parsedBody.Message||errorCode,$fault:"client",$metadata:deserializeMetadata(output)}),message=response.message||response.Message||errorCode,response.message=message,delete response.Message,[2,Promise.reject(Object.assign(new Error(message),response))]}}))}))},deserializeAws_restXmlInvalidObjectStateResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return contents={name:"InvalidObjectState",$fault:"client",$metadata:deserializeMetadata(parsedOutput),AccessTier:void 0,StorageClass:void 0},void 0!==(data=parsedOutput.body).AccessTier&&(contents.AccessTier=data.AccessTier),void 0!==data.StorageClass&&(contents.StorageClass=data.StorageClass),[2,contents]}))}))},deserializeAws_restXmlNoSuchBucketResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents;return __generator(this,(function(_a){return contents={name:"NoSuchBucket",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},parsedOutput.body,[2,contents]}))}))},deserializeAws_restXmlNoSuchKeyResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents;return __generator(this,(function(_a){return contents={name:"NoSuchKey",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},parsedOutput.body,[2,contents]}))}))},deserializeAws_restXmlNoSuchUploadResponse=function(parsedOutput,context){return __awaiter(void 0,void 0,void 0,(function(){var contents;return __generator(this,(function(_a){return contents={name:"NoSuchUpload",$fault:"client",$metadata:deserializeMetadata(parsedOutput)},parsedOutput.body,[2,contents]}))}))},serializeAws_restXmlCompletedMultipartUpload=function(input,context){var bodyNode=new XmlNode_XmlNode("CompletedMultipartUpload");void 0!==input.Parts&&null!==input.Parts&&serializeAws_restXmlCompletedPartList(input.Parts,context).map((function(node){node=node.withName("Part"),bodyNode.addChildNode(node)}));return bodyNode},serializeAws_restXmlCompletedPartList=function(input,context){return input.filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(input,context){var bodyNode=new XmlNode_XmlNode("CompletedPart");if(void 0!==input.ETag&&null!==input.ETag){var node=new XmlNode_XmlNode("ETag").addChildNode(new XmlText_XmlText(input.ETag)).withName("ETag");bodyNode.addChildNode(node)}void 0!==input.PartNumber&&null!==input.PartNumber&&(node=new XmlNode_XmlNode("PartNumber").addChildNode(new XmlText_XmlText(String(input.PartNumber))).withName("PartNumber"),bodyNode.addChildNode(node));return bodyNode}(entry).withName("member")}))},deserializeAws_restXmlCommonPrefixList=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(output,context){var contents={Prefix:void 0};return void 0!==output.Prefix&&(contents.Prefix=output.Prefix),contents}(entry)}))},deserializeAws_restXmlInitiator=function(output,context){var contents={ID:void 0,DisplayName:void 0};return void 0!==output.ID&&(contents.ID=output.ID),void 0!==output.DisplayName&&(contents.DisplayName=output.DisplayName),contents},deserializeAws_restXmlObjectList=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(output,context){var contents={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==output.Key&&(contents.Key=output.Key),void 0!==output.LastModified&&(contents.LastModified=new Date(output.LastModified)),void 0!==output.ETag&&(contents.ETag=output.ETag),void 0!==output.Size&&(contents.Size=parseInt(output.Size)),void 0!==output.StorageClass&&(contents.StorageClass=output.StorageClass),void 0!==output.Owner&&(contents.Owner=deserializeAws_restXmlOwner(output.Owner,context)),contents}(entry,context)}))},deserializeAws_restXmlOwner=function(output,context){var contents={DisplayName:void 0,ID:void 0};return void 0!==output.DisplayName&&(contents.DisplayName=output.DisplayName),void 0!==output.ID&&(contents.ID=output.ID),contents},deserializeAws_restXmlParts=function(output,context){return(output||[]).filter((function(e){return null!=e})).map((function(entry){return null===entry?null:function(output,context){var contents={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==output.PartNumber&&(contents.PartNumber=parseInt(output.PartNumber)),void 0!==output.LastModified&&(contents.LastModified=new Date(output.LastModified)),void 0!==output.ETag&&(contents.ETag=output.ETag),void 0!==output.Size&&(contents.Size=parseInt(output.Size)),contents}(entry)}))},deserializeMetadata=function(output){var _a;return{httpStatusCode:output.statusCode,requestId:null!==(_a=output.headers["x-amzn-requestid"])&&void 0!==_a?_a:output.headers["x-amzn-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}},collectBody=function(streamBody,context){return void 0===streamBody&&(streamBody=new Uint8Array),streamBody instanceof Uint8Array?Promise.resolve(streamBody):context.streamCollector(streamBody)||Promise.resolve(new Uint8Array)},isSerializableHeaderValue=function(value){return!(null==value||""===value||Object.getOwnPropertyNames(value).includes("length")&&0==value.length||Object.getOwnPropertyNames(value).includes("size")&&0==value.size)},parseBody=function(streamBody,context){return function(streamBody,context){return collectBody(streamBody,context).then((function(body){return context.utf8Encoder(body)}))}(streamBody,context).then((function(encoded){if(encoded.length){var parsedObj=Object(parser.parse)(encoded,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(val,tagName){return val.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),key=Object.keys(parsedObj)[0],parsedObjToReturn=parsedObj[key];return parsedObjToReturn["#text"]&&(parsedObjToReturn[key]=parsedObjToReturn["#text"],delete parsedObjToReturn["#text"]),Object(es.h)(parsedObjToReturn)}return{}}))},loadRestXmlErrorCode=function(output,data){return void 0!==data.Code?data.Code:404==output.statusCode?"NotFound":""},validate=function(str){return"string"==typeof str&&0===str.indexOf("arn:")&&str.split(":").length>=6},DOMAIN_PATTERN=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,IP_ADDRESS_PATTERN=/(\d+\.){3}\d+/,DOTS_PATTERN=/\.\./,DOT_PATTERN=/\./,S3_HOSTNAME_PATTERN=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,S3_US_EAST_1_ALTNAME_PATTERN=/^s3(-external-1)?\.amazonaws\.com$/,getPseudoRegion=function(region){return isFipsRegion(region)?region.replace(/fips-|-fips/,""):region},getRegionalSuffix=function(hostname){var parts=hostname.match(S3_HOSTNAME_PATTERN);return[parts[2],hostname.replace(new RegExp("^"+parts[0]),"")]},isFipsRegion=function(region){return region.startsWith("fips-")||region.endsWith("-fips")},isEqualRegions=function(regionA,regionB){return regionA===regionB||getPseudoRegion(regionA)===regionB||regionA===getPseudoRegion(regionB)},validateDNSHostLabel=function(label,options){if(void 0===options&&(options={tlsCompatible:!0}),label.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(label)||/(\d+\.){3}\d+/.test(label)||/[.-]{2}/.test(label)||(null==options?void 0:options.tlsCompatible)&&DOT_PATTERN.test(label))throw new Error("Invalid DNS label "+label)},bucketHostname=function(options){var baseHostname=options.baseHostname;return S3_HOSTNAME_PATTERN.test(baseHostname)?function(options){return"string"==typeof options.bucketName}(options)?getEndpointFromBucketName(options):getEndpointFromArn(options):{bucketEndpoint:!1,hostname:baseHostname}},getEndpointFromArn=function(options){var hostname,_a=Object(tslib_es6.__read)((hostname=options.baseHostname,S3_US_EAST_1_ALTNAME_PATTERN.test(hostname)?[hostname.replace(".amazonaws.com",""),"amazonaws.com"]:getRegionalSuffix(hostname)),2),clientRegion=_a[0],hostnameSuffix=_a[1],pathStyleEndpoint=options.pathStyleEndpoint,_b=options.dualstackEndpoint,dualstackEndpoint=void 0!==_b&&_b,_c=options.accelerateEndpoint,accelerateEndpoint=void 0!==_c&&_c,_d=options.tlsCompatible,tlsCompatible=void 0===_d||_d,useArnRegion=options.useArnRegion,bucketName=options.bucketName,_e=options.clientPartition,clientPartition=void 0===_e?"aws":_e,_f=options.clientSigningRegion,clientSigningRegion=void 0===_f?clientRegion:_f;!function(options){if(options.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(options.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!options.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:pathStyleEndpoint,accelerateEndpoint:accelerateEndpoint,tlsCompatible:tlsCompatible});var service=bucketName.service,partition=bucketName.partition,accountId=bucketName.accountId,region=bucketName.region,resource=bucketName.resource;!function(service){if("s3"!==service&&"s3-outposts"!==service)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(service),function(partition,options){if(partition!==options.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+partition+'" but expected "'+options.clientPartition+'"')}(partition,{clientPartition:clientPartition}),function(accountId){if(!/[0-9]{12}/.exec(accountId))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(accountId),function(region,options){if(""===region)throw new Error("ARN region is empty");if(!options.useArnRegion&&!isEqualRegions(region,options.clientRegion)&&!isEqualRegions(region,options.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+region+" but expected "+options.clientRegion);if(options.useArnRegion&&isFipsRegion(region))throw new Error("Endpoint does not support FIPS region")}(region,{useArnRegion:useArnRegion,clientRegion:clientRegion,clientSigningRegion:clientSigningRegion});var _g=function(resource){var delimiter=resource.includes(":")?":":"/",_a=Object(tslib_es6.__read)(resource.split(delimiter)),resourceType=_a[0],rest=_a.slice(1);if("accesspoint"===resourceType){if(1!==rest.length||""===rest[0])throw new Error("Access Point ARN should have one resource accesspoint"+delimiter+"{accesspointname}");return{accesspointName:rest[0]}}if("outpost"===resourceType){if(!rest[0]||"accesspoint"!==rest[1]||!rest[2]||3!==rest.length)throw new Error("Outpost ARN should have resource outpost"+delimiter+"{outpostId}"+delimiter+"accesspoint"+delimiter+"{accesspointName}");var _b=Object(tslib_es6.__read)(rest,3),outpostId=_b[0];return _b[1],{outpostId:outpostId,accesspointName:_b[2]}}throw new Error("ARN resource should begin with 'accesspoint"+delimiter+"' or 'outpost"+delimiter+"'")}(resource),accesspointName=_g.accesspointName,outpostId=_g.outpostId;validateDNSHostLabel(accesspointName+"-"+accountId,{tlsCompatible:tlsCompatible});var endpointRegion=useArnRegion?region:clientRegion,signingRegion=useArnRegion?region:clientSigningRegion;return outpostId?(function(service){if("s3-outposts"!==service)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(service),validateDNSHostLabel(outpostId,{tlsCompatible:tlsCompatible}),function(dualstackEndpoint){if(dualstackEndpoint)throw new Error("Dualstack endpoint is not supported with Outpost")}(dualstackEndpoint),function(region){if(isFipsRegion(null!=region?region:""))throw new Error("FIPS region is not supported with Outpost, got "+region)}(endpointRegion),{bucketEndpoint:!0,hostname:accesspointName+"-"+accountId+"."+outpostId+".s3-outposts."+endpointRegion+"."+hostnameSuffix,signingRegion:signingRegion,signingService:"s3-outposts"}):(function(service){if("s3"!==service)throw new Error("Expect 's3' in Accesspoint ARN service component")}(service),{bucketEndpoint:!0,hostname:accesspointName+"-"+accountId+".s3-accesspoint"+(dualstackEndpoint?".dualstack":"")+"."+endpointRegion+"."+hostnameSuffix,signingRegion:signingRegion})},getEndpointFromBucketName=function(_a){var hostname,_b=_a.accelerateEndpoint,accelerateEndpoint=void 0!==_b&&_b,baseHostname=_a.baseHostname,bucketName=_a.bucketName,_c=_a.dualstackEndpoint,dualstackEndpoint=void 0!==_c&&_c,_d=_a.pathStyleEndpoint,pathStyleEndpoint=void 0!==_d&&_d,_e=_a.tlsCompatible,tlsCompatible=void 0===_e||_e,_f=Object(tslib_es6.__read)((hostname=baseHostname,S3_US_EAST_1_ALTNAME_PATTERN.test(hostname)?["us-east-1","amazonaws.com"]:getRegionalSuffix(hostname)),2),clientRegion=_f[0],hostnameSuffix=_f[1];return pathStyleEndpoint||!function(bucketName){return DOMAIN_PATTERN.test(bucketName)&&!IP_ADDRESS_PATTERN.test(bucketName)&&!DOTS_PATTERN.test(bucketName)}(bucketName)||tlsCompatible&&DOT_PATTERN.test(bucketName)?{bucketEndpoint:!1,hostname:dualstackEndpoint?"s3.dualstack."+clientRegion+"."+hostnameSuffix:baseHostname}:(accelerateEndpoint?baseHostname="s3-accelerate"+(dualstackEndpoint?".dualstack":"")+"."+hostnameSuffix:dualstackEndpoint&&(baseHostname="s3.dualstack."+clientRegion+"."+hostnameSuffix),{bucketEndpoint:!0,hostname:bucketName+"."+baseHostname})},bucketEndpointMiddleware=function(options){return function(next,context){return function(args){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var bucketName,replaceBucketInPath,request,bucketArn,clientRegion,_a,_b,partition,_c,signingRegion,useArnRegion,_d,modifiedSigningRegion,signingService,_e,hostname,bucketEndpoint;return Object(tslib_es6.__generator)(this,(function(_f){switch(_f.label){case 0:return bucketName=args.input.Bucket,replaceBucketInPath=options.bucketEndpoint,request=args.request,dist_es.a.isInstance(request)?options.bucketEndpoint?(request.hostname=bucketName,[3,6]):[3,1]:[3,7];case 1:return validate(bucketName)?(bucketArn=function(arn){var segments=arn.split(":");if(segments.length<6||"arn"!==segments[0])throw new Error("Malformed ARN");var _a=Object(tslib_es6.__read)(segments);return{partition:_a[1],service:_a[2],region:_a[3],accountId:_a[4],resource:_a.slice(5).join(":")}}(bucketName),_a=getPseudoRegion,[4,options.region()]):[3,5];case 2:return clientRegion=_a.apply(void 0,[_f.sent()]),[4,options.regionInfoProvider(clientRegion)];case 3:return _b=_f.sent()||{},partition=_b.partition,_c=_b.signingRegion,signingRegion=void 0===_c?clientRegion:_c,[4,options.useArnRegion()];case 4:return useArnRegion=_f.sent(),_d=bucketHostname({bucketName:bucketArn,baseHostname:request.hostname,accelerateEndpoint:options.useAccelerateEndpoint,dualstackEndpoint:options.useDualstackEndpoint,pathStyleEndpoint:options.forcePathStyle,tlsCompatible:"https:"===request.protocol,useArnRegion:useArnRegion,clientPartition:partition,clientSigningRegion:signingRegion}),hostname=_d.hostname,bucketEndpoint=_d.bucketEndpoint,modifiedSigningRegion=_d.signingRegion,signingService=_d.signingService,modifiedSigningRegion&&modifiedSigningRegion!==signingRegion&&(context.signing_region=modifiedSigningRegion),signingService&&"s3"!==signingService&&(context.signing_service=signingService),request.hostname=hostname,replaceBucketInPath=bucketEndpoint,[3,6];case 5:_e=bucketHostname({bucketName:bucketName,baseHostname:request.hostname,accelerateEndpoint:options.useAccelerateEndpoint,dualstackEndpoint:options.useDualstackEndpoint,pathStyleEndpoint:options.forcePathStyle,tlsCompatible:"https:"===request.protocol}),hostname=_e.hostname,bucketEndpoint=_e.bucketEndpoint,request.hostname=hostname,replaceBucketInPath=bucketEndpoint,_f.label=6;case 6:replaceBucketInPath&&(request.path=request.path.replace(/^(\/)?[^\/]+/,""),""===request.path&&(request.path="/")),_f.label=7;case 7:return[2,next(Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},args),{request:request}))]}}))}))}}},bucketEndpointMiddlewareOptions={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},getBucketEndpointPlugin=function(options){return{applyToStack:function(clientStack){clientStack.addRelativeTo(bucketEndpointMiddleware(options),bucketEndpointMiddlewareOptions)}}};var middleware_serde_dist_es=__webpack_require__(17);var ssecMiddlewareOptions={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},getSsecPlugin=function(config){return{applyToStack:function(clientStack){clientStack.add(function(options){var _this=this;return function(next){return function(args){return Object(tslib_es6.__awaiter)(_this,void 0,void 0,(function(){var input,properties,properties_1,properties_1_1,prop,value,valueView,encoded,hash,_a,_b,_c,_d,e_1_1,e_1,_e,_f;return Object(tslib_es6.__generator)(this,(function(_g){switch(_g.label){case 0:input=Object(tslib_es6.__assign)({},args.input),properties=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],_g.label=1;case 1:_g.trys.push([1,6,7,8]),properties_1=Object(tslib_es6.__values)(properties),properties_1_1=properties_1.next(),_g.label=2;case 2:return properties_1_1.done?[3,5]:(prop=properties_1_1.value,(value=input[prop.target])?(valueView=ArrayBuffer.isView(value)?new Uint8Array(value.buffer,value.byteOffset,value.byteLength):"string"==typeof value?options.utf8Decoder(value):new Uint8Array(value),encoded=options.base64Encoder(valueView),(hash=new options.md5).update(valueView),_a=[Object(tslib_es6.__assign)({},input)],(_f={})[prop.target]=encoded,_b=prop.hash,_d=(_c=options).base64Encoder,[4,hash.digest()]):[3,4]);case 3:input=tslib_es6.__assign.apply(void 0,_a.concat([(_f[_b]=_d.apply(_c,[_g.sent()]),_f)])),_g.label=4;case 4:return properties_1_1=properties_1.next(),[3,2];case 5:return[3,8];case 6:return e_1_1=_g.sent(),e_1={error:e_1_1},[3,8];case 7:try{properties_1_1&&!properties_1_1.done&&(_e=properties_1.return)&&_e.call(properties_1)}finally{if(e_1)throw e_1.error}return[7];case 8:return[2,next(Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},args),{input:input}))]}}))}))}}}(config),ssecMiddlewareOptions)}}},GetObjectCommand_GetObjectCommand=function(_super){function GetObjectCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(GetObjectCommand,_super),GetObjectCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getSsecPlugin(configuration)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:models_0_GetObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_GetObjectOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},GetObjectCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({},isSerializableHeaderValue(input.IfMatch)&&{"if-match":input.IfMatch}),isSerializableHeaderValue(input.IfModifiedSince)&&{"if-modified-since":Object(es.e)(input.IfModifiedSince).toString()}),isSerializableHeaderValue(input.IfNoneMatch)&&{"if-none-match":input.IfNoneMatch}),isSerializableHeaderValue(input.IfUnmodifiedSince)&&{"if-unmodified-since":Object(es.e)(input.IfUnmodifiedSince).toString()}),isSerializableHeaderValue(input.Range)&&{range:input.Range}),isSerializableHeaderValue(input.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":input.SSECustomerAlgorithm}),isSerializableHeaderValue(input.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":input.SSECustomerKey}),isSerializableHeaderValue(input.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":input.SSECustomerKeyMD5}),isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),resolvedPath="/{Bucket}/{Key+}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),void 0===input.Key)throw new Error("No value provided for input HTTP label: Key.");if((labelValue=input.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return resolvedPath=resolvedPath.replace("{Key+}",labelValue.split("/").map((function(segment){return Object(es.f)(segment)})).join("/")),query=__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({"x-id":"GetObject"},void 0!==input.ResponseCacheControl&&{"response-cache-control":input.ResponseCacheControl}),void 0!==input.ResponseContentDisposition&&{"response-content-disposition":input.ResponseContentDisposition}),void 0!==input.ResponseContentEncoding&&{"response-content-encoding":input.ResponseContentEncoding}),void 0!==input.ResponseContentLanguage&&{"response-content-language":input.ResponseContentLanguage}),void 0!==input.ResponseContentType&&{"response-content-type":input.ResponseContentType}),void 0!==input.ResponseExpires&&{"response-expires":(input.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==input.VersionId&&{versionId:input.VersionId}),void 0!==input.PartNumber&&{partNumber:input.PartNumber.toString()}),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"GET",headers:headers,path:resolvedPath,query:query,body:void 0})]}}))}))}(input,context)},GetObjectCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlGetObjectCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==output.headers["x-amz-delete-marker"]&&(contents.DeleteMarker="true"===output.headers["x-amz-delete-marker"]),void 0!==output.headers["accept-ranges"]&&(contents.AcceptRanges=output.headers["accept-ranges"]),void 0!==output.headers["x-amz-expiration"]&&(contents.Expiration=output.headers["x-amz-expiration"]),void 0!==output.headers["x-amz-restore"]&&(contents.Restore=output.headers["x-amz-restore"]),void 0!==output.headers["last-modified"]&&(contents.LastModified=new Date(output.headers["last-modified"])),void 0!==output.headers["content-length"]&&(contents.ContentLength=parseInt(output.headers["content-length"],10)),void 0!==output.headers.etag&&(contents.ETag=output.headers.etag),void 0!==output.headers["x-amz-missing-meta"]&&(contents.MissingMeta=parseInt(output.headers["x-amz-missing-meta"],10)),void 0!==output.headers["x-amz-version-id"]&&(contents.VersionId=output.headers["x-amz-version-id"]),void 0!==output.headers["cache-control"]&&(contents.CacheControl=output.headers["cache-control"]),void 0!==output.headers["content-disposition"]&&(contents.ContentDisposition=output.headers["content-disposition"]),void 0!==output.headers["content-encoding"]&&(contents.ContentEncoding=output.headers["content-encoding"]),void 0!==output.headers["content-language"]&&(contents.ContentLanguage=output.headers["content-language"]),void 0!==output.headers["content-range"]&&(contents.ContentRange=output.headers["content-range"]),void 0!==output.headers["content-type"]&&(contents.ContentType=output.headers["content-type"]),void 0!==output.headers.expires&&(contents.Expires=new Date(output.headers.expires)),void 0!==output.headers["x-amz-website-redirect-location"]&&(contents.WebsiteRedirectLocation=output.headers["x-amz-website-redirect-location"]),void 0!==output.headers["x-amz-server-side-encryption"]&&(contents.ServerSideEncryption=output.headers["x-amz-server-side-encryption"]),void 0!==output.headers["x-amz-server-side-encryption-customer-algorithm"]&&(contents.SSECustomerAlgorithm=output.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==output.headers["x-amz-server-side-encryption-customer-key-md5"]&&(contents.SSECustomerKeyMD5=output.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==output.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(contents.SSEKMSKeyId=output.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==output.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(contents.BucketKeyEnabled="true"===output.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==output.headers["x-amz-storage-class"]&&(contents.StorageClass=output.headers["x-amz-storage-class"]),void 0!==output.headers["x-amz-request-charged"]&&(contents.RequestCharged=output.headers["x-amz-request-charged"]),void 0!==output.headers["x-amz-replication-status"]&&(contents.ReplicationStatus=output.headers["x-amz-replication-status"]),void 0!==output.headers["x-amz-mp-parts-count"]&&(contents.PartsCount=parseInt(output.headers["x-amz-mp-parts-count"],10)),void 0!==output.headers["x-amz-tagging-count"]&&(contents.TagCount=parseInt(output.headers["x-amz-tagging-count"],10)),void 0!==output.headers["x-amz-object-lock-mode"]&&(contents.ObjectLockMode=output.headers["x-amz-object-lock-mode"]),void 0!==output.headers["x-amz-object-lock-retain-until-date"]&&(contents.ObjectLockRetainUntilDate=new Date(output.headers["x-amz-object-lock-retain-until-date"])),void 0!==output.headers["x-amz-object-lock-legal-hold"]&&(contents.ObjectLockLegalHoldStatus=output.headers["x-amz-object-lock-legal-hold"]),Object.keys(output.headers).forEach((function(header){void 0===contents.Metadata&&(contents.Metadata={}),header.startsWith("x-amz-meta-")&&(contents.Metadata[header.substring(11)]=output.headers[header])})),data=output.body,contents.Body=data,[2,Promise.resolve(contents)])}))}))}(output,context)},GetObjectCommand}(es.b),DeleteObjectCommand_DeleteObjectCommand=function(_super){function DeleteObjectCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(DeleteObjectCommand,_super),DeleteObjectCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:models_0_DeleteObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_DeleteObjectOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},DeleteObjectCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign(__assign(__assign({},isSerializableHeaderValue(input.MFA)&&{"x-amz-mfa":input.MFA}),isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":input.BypassGovernanceRetention.toString()}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),resolvedPath="/{Bucket}/{Key+}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),void 0===input.Key)throw new Error("No value provided for input HTTP label: Key.");if((labelValue=input.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return resolvedPath=resolvedPath.replace("{Key+}",labelValue.split("/").map((function(segment){return Object(es.f)(segment)})).join("/")),query=__assign({"x-id":"DeleteObject"},void 0!==input.VersionId&&{versionId:input.VersionId}),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"DELETE",headers:headers,path:resolvedPath,query:query,body:void 0})]}}))}))}(input,context)},DeleteObjectCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents;return __generator(this,(function(_a){switch(_a.label){case 0:return 204!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlDeleteObjectCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==output.headers["x-amz-delete-marker"]&&(contents.DeleteMarker="true"===output.headers["x-amz-delete-marker"]),void 0!==output.headers["x-amz-version-id"]&&(contents.VersionId=output.headers["x-amz-version-id"]),void 0!==output.headers["x-amz-request-charged"]&&(contents.RequestCharged=output.headers["x-amz-request-charged"]),[4,collectBody(output.body,context)]);case 1:return _a.sent(),[2,Promise.resolve(contents)]}}))}))}(output,context)},DeleteObjectCommand}(es.b),ListObjectsCommand_ListObjectsCommand=function(_super){function ListObjectsCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(ListObjectsCommand,_super),ListObjectsCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:models_0_ListObjectsRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_ListObjectsOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},ListObjectsCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign({},isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),resolvedPath="/{Bucket}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),query=__assign(__assign(__assign(__assign(__assign({},void 0!==input.Delimiter&&{delimiter:input.Delimiter}),void 0!==input.EncodingType&&{"encoding-type":input.EncodingType}),void 0!==input.Marker&&{marker:input.Marker}),void 0!==input.MaxKeys&&{"max-keys":input.MaxKeys.toString()}),void 0!==input.Prefix&&{prefix:input.Prefix}),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"GET",headers:headers,path:resolvedPath,query:query,body:void 0})]}}))}))}(input,context)},ListObjectsCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){switch(_a.label){case 0:return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlListObjectsCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,parseBody(output.body,context)]);case 1:return""===(data=_a.sent()).CommonPrefixes&&(contents.CommonPrefixes=[]),void 0!==data.CommonPrefixes&&(contents.CommonPrefixes=deserializeAws_restXmlCommonPrefixList(Object(es.g)(data.CommonPrefixes),context)),""===data.Contents&&(contents.Contents=[]),void 0!==data.Contents&&(contents.Contents=deserializeAws_restXmlObjectList(Object(es.g)(data.Contents),context)),void 0!==data.Delimiter&&(contents.Delimiter=data.Delimiter),void 0!==data.EncodingType&&(contents.EncodingType=data.EncodingType),void 0!==data.IsTruncated&&(contents.IsTruncated="true"==data.IsTruncated),void 0!==data.Marker&&(contents.Marker=data.Marker),void 0!==data.MaxKeys&&(contents.MaxKeys=parseInt(data.MaxKeys)),void 0!==data.Name&&(contents.Name=data.Name),void 0!==data.NextMarker&&(contents.NextMarker=data.NextMarker),void 0!==data.Prefix&&(contents.Prefix=data.Prefix),[2,Promise.resolve(contents)]}}))}))}(output,context)},ListObjectsCommand}(es.b),es_package=__webpack_require__(321),sha256_browser_build=__webpack_require__(59),eventstream_serde_browser_dist_es=__webpack_require__(189),fetch_http_handler_dist_es=__webpack_require__(32);function blobReader(blob,onChunk,chunkSize){return void 0===chunkSize&&(chunkSize=1048576),new Promise((function(resolve,reject){var fileReader=new FileReader;fileReader.addEventListener("error",reject),fileReader.addEventListener("abort",reject);var size=blob.size,totalBytesRead=0;function read(){totalBytesRead>=size?resolve():fileReader.readAsArrayBuffer(blob.slice(totalBytesRead,Math.min(size,totalBytesRead+chunkSize)))}fileReader.addEventListener("load",(function(event){var result=event.target.result;onChunk(new Uint8Array(result)),totalBytesRead+=result.byteLength,read()})),read()}))}var invalid_dependency_dist_es=__webpack_require__(62),util_utf8_browser_dist_es=__webpack_require__(21),INIT=[1732584193,4023233417,2562383102,271733878],es_Md5=function(){function Md5(){this.state=Uint32Array.from(INIT),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return Md5.prototype.update=function(sourceData){if(!function(data){if("string"==typeof data)return 0===data.length;return 0===data.byteLength}(sourceData)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var data=function(data){if("string"==typeof data)return Object(util_utf8_browser_dist_es.fromUtf8)(data);if(ArrayBuffer.isView(data))return new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(data)}(sourceData),position=0,byteLength=data.byteLength;for(this.bytesHashed+=byteLength;byteLength>0;)this.buffer.setUint8(this.bufferLength++,data[position++]),byteLength--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},Md5.prototype.digest=function(){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var _a,buffer,undecoratedLength,bytesHashed,bitsHashed,out,i;return Object(tslib_es6.__generator)(this,(function(_b){if(!this.finished){if(buffer=(_a=this).buffer,undecoratedLength=_a.bufferLength,bytesHashed=_a.bytesHashed,bitsHashed=8*bytesHashed,buffer.setUint8(this.bufferLength++,128),undecoratedLength%64>=56){for(i=this.bufferLength;i<64;i++)buffer.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<56;i++)buffer.setUint8(i,0);buffer.setUint32(56,bitsHashed>>>0,!0),buffer.setUint32(60,Math.floor(bitsHashed/4294967296),!0),this.hashBuffer(),this.finished=!0}for(out=new DataView(new ArrayBuffer(16)),i=0;i<4;i++)out.setUint32(4*i,this.state[i],!0);return[2,new Uint8Array(out.buffer,out.byteOffset,out.byteLength)]}))}))},Md5.prototype.hashBuffer=function(){var buffer=this.buffer,state=this.state,a=state[0],b=state[1],c=state[2],d=state[3];a=ff(a,b,c,d,buffer.getUint32(0,!0),7,3614090360),d=ff(d,a,b,c,buffer.getUint32(4,!0),12,3905402710),c=ff(c,d,a,b,buffer.getUint32(8,!0),17,606105819),b=ff(b,c,d,a,buffer.getUint32(12,!0),22,3250441966),a=ff(a,b,c,d,buffer.getUint32(16,!0),7,4118548399),d=ff(d,a,b,c,buffer.getUint32(20,!0),12,1200080426),c=ff(c,d,a,b,buffer.getUint32(24,!0),17,2821735955),b=ff(b,c,d,a,buffer.getUint32(28,!0),22,4249261313),a=ff(a,b,c,d,buffer.getUint32(32,!0),7,1770035416),d=ff(d,a,b,c,buffer.getUint32(36,!0),12,2336552879),c=ff(c,d,a,b,buffer.getUint32(40,!0),17,4294925233),b=ff(b,c,d,a,buffer.getUint32(44,!0),22,2304563134),a=ff(a,b,c,d,buffer.getUint32(48,!0),7,1804603682),d=ff(d,a,b,c,buffer.getUint32(52,!0),12,4254626195),c=ff(c,d,a,b,buffer.getUint32(56,!0),17,2792965006),a=gg(a,b=ff(b,c,d,a,buffer.getUint32(60,!0),22,1236535329),c,d,buffer.getUint32(4,!0),5,4129170786),d=gg(d,a,b,c,buffer.getUint32(24,!0),9,3225465664),c=gg(c,d,a,b,buffer.getUint32(44,!0),14,643717713),b=gg(b,c,d,a,buffer.getUint32(0,!0),20,3921069994),a=gg(a,b,c,d,buffer.getUint32(20,!0),5,3593408605),d=gg(d,a,b,c,buffer.getUint32(40,!0),9,38016083),c=gg(c,d,a,b,buffer.getUint32(60,!0),14,3634488961),b=gg(b,c,d,a,buffer.getUint32(16,!0),20,3889429448),a=gg(a,b,c,d,buffer.getUint32(36,!0),5,568446438),d=gg(d,a,b,c,buffer.getUint32(56,!0),9,3275163606),c=gg(c,d,a,b,buffer.getUint32(12,!0),14,4107603335),b=gg(b,c,d,a,buffer.getUint32(32,!0),20,1163531501),a=gg(a,b,c,d,buffer.getUint32(52,!0),5,2850285829),d=gg(d,a,b,c,buffer.getUint32(8,!0),9,4243563512),c=gg(c,d,a,b,buffer.getUint32(28,!0),14,1735328473),a=hh(a,b=gg(b,c,d,a,buffer.getUint32(48,!0),20,2368359562),c,d,buffer.getUint32(20,!0),4,4294588738),d=hh(d,a,b,c,buffer.getUint32(32,!0),11,2272392833),c=hh(c,d,a,b,buffer.getUint32(44,!0),16,1839030562),b=hh(b,c,d,a,buffer.getUint32(56,!0),23,4259657740),a=hh(a,b,c,d,buffer.getUint32(4,!0),4,2763975236),d=hh(d,a,b,c,buffer.getUint32(16,!0),11,1272893353),c=hh(c,d,a,b,buffer.getUint32(28,!0),16,4139469664),b=hh(b,c,d,a,buffer.getUint32(40,!0),23,3200236656),a=hh(a,b,c,d,buffer.getUint32(52,!0),4,681279174),d=hh(d,a,b,c,buffer.getUint32(0,!0),11,3936430074),c=hh(c,d,a,b,buffer.getUint32(12,!0),16,3572445317),b=hh(b,c,d,a,buffer.getUint32(24,!0),23,76029189),a=hh(a,b,c,d,buffer.getUint32(36,!0),4,3654602809),d=hh(d,a,b,c,buffer.getUint32(48,!0),11,3873151461),c=hh(c,d,a,b,buffer.getUint32(60,!0),16,530742520),a=ii(a,b=hh(b,c,d,a,buffer.getUint32(8,!0),23,3299628645),c,d,buffer.getUint32(0,!0),6,4096336452),d=ii(d,a,b,c,buffer.getUint32(28,!0),10,1126891415),c=ii(c,d,a,b,buffer.getUint32(56,!0),15,2878612391),b=ii(b,c,d,a,buffer.getUint32(20,!0),21,4237533241),a=ii(a,b,c,d,buffer.getUint32(48,!0),6,1700485571),d=ii(d,a,b,c,buffer.getUint32(12,!0),10,2399980690),c=ii(c,d,a,b,buffer.getUint32(40,!0),15,4293915773),b=ii(b,c,d,a,buffer.getUint32(4,!0),21,2240044497),a=ii(a,b,c,d,buffer.getUint32(32,!0),6,1873313359),d=ii(d,a,b,c,buffer.getUint32(60,!0),10,4264355552),c=ii(c,d,a,b,buffer.getUint32(24,!0),15,2734768916),b=ii(b,c,d,a,buffer.getUint32(52,!0),21,1309151649),a=ii(a,b,c,d,buffer.getUint32(16,!0),6,4149444226),d=ii(d,a,b,c,buffer.getUint32(44,!0),10,3174756917),c=ii(c,d,a,b,buffer.getUint32(8,!0),15,718787259),b=ii(b,c,d,a,buffer.getUint32(36,!0),21,3951481745),state[0]=a+state[0]&4294967295,state[1]=b+state[1]&4294967295,state[2]=c+state[2]&4294967295,state[3]=d+state[3]&4294967295},Md5}();function cmn(q,a,b,x,s,t){return((a=(a+q&4294967295)+(x+t&4294967295)&4294967295)<<s|a>>>32-s)+b&4294967295}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}var middleware_retry_dist_es=__webpack_require__(18),util_base64_browser_dist_es=__webpack_require__(31),util_body_length_browser_dist_es=__webpack_require__(60),util_user_agent_browser_dist_es=__webpack_require__(61),AWS_REGIONS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),AWS_CN_REGIONS=new Set(["cn-north-1","cn-northwest-1"]),AWS_ISO_REGIONS=new Set(["us-iso-east-1"]),AWS_ISO_B_REGIONS=new Set(["us-isob-east-1"]),AWS_US_GOV_REGIONS=new Set(["us-gov-east-1","us-gov-west-1"]),ClientSharedValues={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(region,options){var regionInfo=void 0;switch(region){case"af-south-1":regionInfo={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":regionInfo={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":regionInfo={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":regionInfo={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":regionInfo={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":regionInfo={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":regionInfo={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":regionInfo={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":regionInfo={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":regionInfo={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":regionInfo={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":regionInfo={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":regionInfo={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":regionInfo={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":regionInfo={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":regionInfo={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":regionInfo={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":regionInfo={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":regionInfo={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":regionInfo={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":regionInfo={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":regionInfo={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":regionInfo={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":regionInfo={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":regionInfo={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":regionInfo={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":regionInfo={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":regionInfo={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":regionInfo={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:AWS_REGIONS.has(region)&&(regionInfo={hostname:"s3.{region}.amazonaws.com".replace("{region}",region),partition:"aws"}),AWS_CN_REGIONS.has(region)&&(regionInfo={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",region),partition:"aws-cn"}),AWS_ISO_REGIONS.has(region)&&(regionInfo={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",region),partition:"aws-iso"}),AWS_ISO_B_REGIONS.has(region)&&(regionInfo={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",region),partition:"aws-iso-b"}),AWS_US_GOV_REGIONS.has(region)&&(regionInfo={hostname:"s3.{region}.amazonaws.com".replace("{region}",region),partition:"aws-us-gov"}),void 0===regionInfo&&(regionInfo={hostname:"s3.{region}.amazonaws.com".replace("{region}",region),partition:"aws"})}return Promise.resolve(__assign({signingService:"s3"},regionInfo))},serviceId:"S3",signingEscapePath:!1,urlParser:__webpack_require__(64).a,useArnRegion:!1},ClientDefaultValues=__assign(__assign({},ClientSharedValues),{runtime:"browser",base64Decoder:util_base64_browser_dist_es.a,base64Encoder:util_base64_browser_dist_es.b,bodyLengthChecker:util_body_length_browser_dist_es.a,credentialDefaultProvider:function(_){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(util_user_agent_browser_dist_es.a)({serviceId:ClientSharedValues.serviceId,clientVersion:es_package.version}),eventStreamSerdeProvider:eventstream_serde_browser_dist_es.a,maxAttempts:middleware_retry_dist_es.a,md5:es_Md5,region:Object(invalid_dependency_dist_es.a)("Region is missing"),requestHandler:new fetch_http_handler_dist_es.a,sha256:sha256_browser_build.Sha256,streamCollector:fetch_http_handler_dist_es.b,streamHasher:function(hashCtor,blob){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var hash;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return hash=new hashCtor,[4,blobReader(blob,(function(chunk){hash.update(chunk)}))];case 1:return _a.sent(),[2,hash.digest()]}}))}))},utf8Decoder:util_utf8_browser_dist_es.fromUtf8,utf8Encoder:util_utf8_browser_dist_es.toUtf8}),config_resolver_dist_es=__webpack_require__(36),eventstream_serde_config_resolver_dist_es=__webpack_require__(191),middleware_content_length_dist_es=__webpack_require__(58);var addExpectContinueMiddlewareOptions={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},getAddExpectContinuePlugin=function(options){return{applyToStack:function(clientStack){clientStack.add(function(options){var _this=this;return function(next){return function(args){return Object(tslib_es6.__awaiter)(_this,void 0,void 0,(function(){var request;return Object(tslib_es6.__generator)(this,(function(_a){return request=args.request,dist_es.a.isInstance(request)&&request.body&&"node"===options.runtime&&(request.headers=Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},request.headers),{Expect:"100-continue"})),[2,next(Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},args),{request:request}))]}))}))}}}(options),addExpectContinueMiddlewareOptions)}}},middleware_host_header_dist_es=__webpack_require__(34),middleware_logger_dist_es=__webpack_require__(63);var validateBucketNameMiddlewareOptions={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},getValidateBucketNamePlugin=function(unused){return{applyToStack:function(clientStack){clientStack.add(function(){var _this=this;return function(next){return function(args){return Object(tslib_es6.__awaiter)(_this,void 0,void 0,(function(){var Bucket,err;return Object(tslib_es6.__generator)(this,(function(_a){if("string"==typeof(Bucket=args.input.Bucket)&&!validate(Bucket)&&Bucket.indexOf("/")>=0)throw(err=new Error("Bucket name shouldn't contain '/', received '"+Bucket+"'")).name="InvalidBucketName",err;return[2,next(Object(tslib_es6.__assign)({},args))]}))}))}}}(),validateBucketNameMiddlewareOptions)}}},useRegionalEndpointMiddlewareOptions={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},getUseRegionalEndpointPlugin=function(config){return{applyToStack:function(clientStack){clientStack.add(function(config){return function(next){return function(args){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var request,_a;return Object(tslib_es6.__generator)(this,(function(_b){switch(_b.label){case 0:return request=args.request,!dist_es.a.isInstance(request)||config.isCustomEndpoint?[2,next(Object(tslib_es6.__assign)({},args))]:"s3.amazonaws.com"!==request.hostname?[3,1]:(request.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return _a="aws-global",[4,config.region()];case 2:_a===_b.sent()&&(request.hostname="s3.amazonaws.com"),_b.label=3;case 3:return[2,next(Object(tslib_es6.__assign)({},args))]}}))}))}}}(config),useRegionalEndpointMiddlewareOptions)}}},throw_200_exceptions_collectBody=function(streamBody,context){return void 0===streamBody&&(streamBody=new Uint8Array),streamBody instanceof Uint8Array?Promise.resolve(streamBody):context.streamCollector(streamBody)||Promise.resolve(new Uint8Array)},throw_200_exceptions_collectBodyString=function(streamBody,context){return throw_200_exceptions_collectBody(streamBody,context).then((function(body){return context.utf8Encoder(body)}))},throw200ExceptionsMiddlewareOptions={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},getThrow200ExceptionsPlugin=function(config){return{applyToStack:function(clientStack){clientStack.addRelativeTo(function(config){return function(next){return function(args){return Object(tslib_es6.__awaiter)(void 0,void 0,void 0,(function(){var result,response,statusCode,body,bodyBytes,bodyString,err;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,next(args)];case 1:return result=_a.sent(),response=result.response,dist_es.b.isInstance(response)?(statusCode=response.statusCode,body=response.body,statusCode<200&&statusCode>=300?[2,result]:[4,throw_200_exceptions_collectBody(body,config)]):[2,result];case 2:return bodyBytes=_a.sent(),[4,throw_200_exceptions_collectBodyString(bodyBytes,config)];case 3:if(bodyString=_a.sent(),0===bodyBytes.length)throw(err=new Error("S3 aborted request")).name="InternalError",err;return bodyString&&bodyString.match("<Error>")&&(response.statusCode=400),response.body=bodyBytes,[2,result]}}))}))}}}(config),throw200ExceptionsMiddlewareOptions)}}},middleware_signing_dist_es=__webpack_require__(41),middleware_user_agent_dist_es=__webpack_require__(35),S3Client_S3Client=function(_super){function S3Client(configuration){var input,_a,bucketEndpoint,_b,forcePathStyle,_c,useAccelerateEndpoint,_d,useDualstackEndpoint,_e,useArnRegion,_this=this,_config_0=__assign(__assign({},ClientDefaultValues),configuration),_config_1=Object(config_resolver_dist_es.b)(_config_0),_config_2=Object(config_resolver_dist_es.a)(_config_1),_config_3=Object(middleware_signing_dist_es.b)(_config_2),_config_4=Object(middleware_retry_dist_es.c)(_config_3),_config_5=Object(middleware_host_header_dist_es.b)(_config_4),_config_6=(_a=(input=_config_5).bucketEndpoint,bucketEndpoint=void 0!==_a&&_a,_b=input.forcePathStyle,forcePathStyle=void 0!==_b&&_b,_c=input.useAccelerateEndpoint,useAccelerateEndpoint=void 0!==_c&&_c,_d=input.useDualstackEndpoint,useDualstackEndpoint=void 0!==_d&&_d,_e=input.useArnRegion,useArnRegion=void 0!==_e&&_e,Object(tslib_es6.__assign)(Object(tslib_es6.__assign)({},input),{bucketEndpoint:bucketEndpoint,forcePathStyle:forcePathStyle,useAccelerateEndpoint:useAccelerateEndpoint,useDualstackEndpoint:useDualstackEndpoint,useArnRegion:"function"==typeof useArnRegion?useArnRegion:function(){return Promise.resolve(useArnRegion)}})),_config_7=Object(middleware_user_agent_dist_es.b)(_config_6),_config_8=Object(eventstream_serde_config_resolver_dist_es.a)(_config_7);return(_this=_super.call(this,_config_8)||this).config=_config_8,_this.middlewareStack.use(Object(middleware_signing_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_retry_dist_es.b)(_this.config)),_this.middlewareStack.use(Object(middleware_content_length_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_host_header_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_logger_dist_es.a)(_this.config)),_this.middlewareStack.use(getValidateBucketNamePlugin(_this.config)),_this.middlewareStack.use(getUseRegionalEndpointPlugin(_this.config)),_this.middlewareStack.use(getAddExpectContinuePlugin(_this.config)),_this.middlewareStack.use(Object(middleware_user_agent_dist_es.a)(_this.config)),_this}return __extends(S3Client,_super),S3Client.prototype.destroy=function(){_super.prototype.destroy.call(this)},S3Client}(es.a),querystring_builder_dist_es=__webpack_require__(126);function formatUrl(request){var port=request.port,query=request.query,protocol=request.protocol,path=request.path,hostname=request.hostname;protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),port&&(hostname+=":"+port),path&&"/"!==path.charAt(0)&&(path="/"+path);var queryString=query?Object(querystring_builder_dist_es.a)(query):"";return queryString&&"?"!==queryString[0]&&(queryString="?"+queryString),protocol+"//"+hostname+path+queryString}function createRequest(client,command){return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){var interceptMiddleware,clientStack,_this=this;return Object(tslib_es6.__generator)(this,(function(_a){switch(_a.label){case 0:return interceptMiddleware=function(next){return function(args){return Object(tslib_es6.__awaiter)(_this,void 0,void 0,(function(){return Object(tslib_es6.__generator)(this,(function(_a){return[2,{output:{request:args.request},response:void 0}]}))}))}},(clientStack=client.middlewareStack.clone()).add(interceptMiddleware,{step:"build",priority:"low"}),[4,command.resolveMiddleware(clientStack,client.config,void 0)(command).then((function(output){return output.output.request}))];case 1:return[2,_a.sent()]}}))}))}var signature_v4_dist_es=__webpack_require__(190),presigner_S3RequestPresigner=function(){function S3RequestPresigner(options){var resolvedOptions=Object(tslib_es6.__assign)({service:options.signingName||options.service||"s3",uriEscapePath:options.uriEscapePath||!1},options);this.signer=new signature_v4_dist_es.a(resolvedOptions)}return S3RequestPresigner.prototype.presign=function(requestToSign,_a){void 0===_a&&(_a={});var _b=_a.unsignableHeaders,unsignableHeaders=void 0===_b?new Set:_b,_c=_a.unhoistableHeaders,unhoistableHeaders=void 0===_c?new Set:_c,options=Object(tslib_es6.__rest)(_a,["unsignableHeaders","unhoistableHeaders"]);return Object(tslib_es6.__awaiter)(this,void 0,void 0,(function(){return Object(tslib_es6.__generator)(this,(function(_d){return unsignableHeaders.add("content-type"),Object.keys(requestToSign.headers).map((function(header){return header.toLowerCase()})).filter((function(header){return header.startsWith("x-amz-server-side-encryption")})).forEach((function(header){unhoistableHeaders.add(header)})),requestToSign.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",[2,this.signer.presign(requestToSign,Object(tslib_es6.__assign)({expiresIn:900,unsignableHeaders:unsignableHeaders,unhoistableHeaders:unhoistableHeaders},options))]}))}))},S3RequestPresigner}(),axios=__webpack_require__(97),axios_default=__webpack_require__.n(axios),axios_http_handler_logger=new ConsoleLogger.a("axios-http-handler"),axios_http_handler_AxiosHttpHandler=function(){function AxiosHttpHandler(httpOptions,emitter){void 0===httpOptions&&(httpOptions={}),this.httpOptions=httpOptions,this.emitter=emitter}return AxiosHttpHandler.prototype.destroy=function(){},AxiosHttpHandler.prototype.handle=function(request,options){var requestTimeoutInMs=this.httpOptions.requestTimeout,emitter=this.emitter,path=request.path;if(request.query){var queryString=Object(querystring_builder_dist_es.a)(request.query);queryString&&(path+="?"+queryString)}var port=request.port,url=request.protocol+"//"+request.hostname+(port?":"+port:"")+path,axiosRequest={};axiosRequest.url=url,axiosRequest.method=request.method,axiosRequest.headers=request.headers,delete axiosRequest.headers.host,request.body?axiosRequest.data=request.body:axiosRequest.headers["Content-Type"]&&(axiosRequest.data=null),emitter&&(axiosRequest.onUploadProgress=function(event){emitter.emit("sendProgress",event),axios_http_handler_logger.debug(event)}),axiosRequest.responseType="blob";var raceOfPromises=[axios_default.a.request(axiosRequest).then((function(response){return{response:new dist_es.b({headers:response.headers,statusCode:response.status,body:response.data})}})).catch((function(error){throw axios_http_handler_logger.error(error),error})),requestTimeout(requestTimeoutInMs)];return Promise.race(raceOfPromises)},AxiosHttpHandler}();function requestTimeout(timeoutInMs){return void 0===timeoutInMs&&(timeoutInMs=0),new Promise((function(resolve,reject){timeoutInMs&&setTimeout((function(){var timeoutError=new Error("Request did not complete within "+timeoutInMs+" ms");timeoutError.name="TimeoutError",reject(timeoutError)}),timeoutInMs)}))}var models_1_MetadataEntry,models_1_S3Location,models_1_OutputLocation,FileHeaderInfo,models_1_CSVInput,JSONType,models_1_JSONInput,models_1_ParquetInput,models_1_InputSerialization,QuoteFields,models_1_CSVOutput,models_1_JSONOutput,models_1_OutputSerialization,models_1_SelectParameters,RestoreRequestType,models_1_RestoreRequest,models_1_RestoreObjectRequest,models_1_ContinuationEvent,models_1_EndEvent,models_1_Progress,models_1_ProgressEvent,models_1_RecordsEvent,models_1_Stats,models_1_StatsEvent,SelectObjectContentEventStream,models_1_SelectObjectContentOutput,models_1_RequestProgress,models_1_ScanRange,models_1_SelectObjectContentRequest,models_1_UploadPartOutput,models_1_UploadPartRequest,models_1_CopyPartResult,models_1_UploadPartCopyOutput,models_1_UploadPartCopyRequest,PutObjectCommand_PutObjectCommand=function(_super){function PutObjectCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(PutObjectCommand,_super),PutObjectCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getSsecPlugin(configuration)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:models_0_PutObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_PutObjectOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},PutObjectCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,body,contents,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({"content-type":"application/octet-stream"},isSerializableHeaderValue(input.ACL)&&{"x-amz-acl":input.ACL}),isSerializableHeaderValue(input.CacheControl)&&{"cache-control":input.CacheControl}),isSerializableHeaderValue(input.ContentDisposition)&&{"content-disposition":input.ContentDisposition}),isSerializableHeaderValue(input.ContentEncoding)&&{"content-encoding":input.ContentEncoding}),isSerializableHeaderValue(input.ContentLanguage)&&{"content-language":input.ContentLanguage}),isSerializableHeaderValue(input.ContentLength)&&{"content-length":input.ContentLength.toString()}),isSerializableHeaderValue(input.ContentMD5)&&{"content-md5":input.ContentMD5}),isSerializableHeaderValue(input.ContentType)&&{"content-type":input.ContentType}),isSerializableHeaderValue(input.Expires)&&{expires:Object(es.e)(input.Expires).toString()}),isSerializableHeaderValue(input.GrantFullControl)&&{"x-amz-grant-full-control":input.GrantFullControl}),isSerializableHeaderValue(input.GrantRead)&&{"x-amz-grant-read":input.GrantRead}),isSerializableHeaderValue(input.GrantReadACP)&&{"x-amz-grant-read-acp":input.GrantReadACP}),isSerializableHeaderValue(input.GrantWriteACP)&&{"x-amz-grant-write-acp":input.GrantWriteACP}),isSerializableHeaderValue(input.ServerSideEncryption)&&{"x-amz-server-side-encryption":input.ServerSideEncryption}),isSerializableHeaderValue(input.StorageClass)&&{"x-amz-storage-class":input.StorageClass}),isSerializableHeaderValue(input.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":input.WebsiteRedirectLocation}),isSerializableHeaderValue(input.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":input.SSECustomerAlgorithm}),isSerializableHeaderValue(input.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":input.SSECustomerKey}),isSerializableHeaderValue(input.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":input.SSECustomerKeyMD5}),isSerializableHeaderValue(input.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":input.SSEKMSKeyId}),isSerializableHeaderValue(input.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":input.SSEKMSEncryptionContext}),isSerializableHeaderValue(input.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":input.BucketKeyEnabled.toString()}),isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.Tagging)&&{"x-amz-tagging":input.Tagging}),isSerializableHeaderValue(input.ObjectLockMode)&&{"x-amz-object-lock-mode":input.ObjectLockMode}),isSerializableHeaderValue(input.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(input.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),isSerializableHeaderValue(input.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":input.ObjectLockLegalHoldStatus}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),void 0!==input.Metadata&&Object.keys(input.Metadata).reduce((function(acc,suffix){var _a;return __assign(__assign({},acc),((_a={})["x-amz-meta-"+suffix.toLowerCase()]=input.Metadata[suffix],_a))}),{})),resolvedPath="/{Bucket}/{Key+}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),void 0===input.Key)throw new Error("No value provided for input HTTP label: Key.");if((labelValue=input.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return resolvedPath=resolvedPath.replace("{Key+}",labelValue.split("/").map((function(segment){return Object(es.f)(segment)})).join("/")),query={"x-id":"PutObject"},void 0!==input.Body&&(contents=input.Body,body=contents),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"PUT",headers:headers,path:resolvedPath,query:query,body:body})]}}))}))}(input,context)},PutObjectCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents;return __generator(this,(function(_a){switch(_a.label){case 0:return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlPutObjectCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==output.headers["x-amz-expiration"]&&(contents.Expiration=output.headers["x-amz-expiration"]),void 0!==output.headers.etag&&(contents.ETag=output.headers.etag),void 0!==output.headers["x-amz-server-side-encryption"]&&(contents.ServerSideEncryption=output.headers["x-amz-server-side-encryption"]),void 0!==output.headers["x-amz-version-id"]&&(contents.VersionId=output.headers["x-amz-version-id"]),void 0!==output.headers["x-amz-server-side-encryption-customer-algorithm"]&&(contents.SSECustomerAlgorithm=output.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==output.headers["x-amz-server-side-encryption-customer-key-md5"]&&(contents.SSECustomerKeyMD5=output.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==output.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(contents.SSEKMSKeyId=output.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==output.headers["x-amz-server-side-encryption-context"]&&(contents.SSEKMSEncryptionContext=output.headers["x-amz-server-side-encryption-context"]),void 0!==output.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(contents.BucketKeyEnabled="true"===output.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==output.headers["x-amz-request-charged"]&&(contents.RequestCharged=output.headers["x-amz-request-charged"]),[4,collectBody(output.body,context)]);case 1:return _a.sent(),[2,Promise.resolve(contents)]}}))}))}(output,context)},PutObjectCommand}(es.b),CreateMultipartUploadCommand_CreateMultipartUploadCommand=function(_super){function CreateMultipartUploadCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(CreateMultipartUploadCommand,_super),CreateMultipartUploadCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getSsecPlugin(configuration)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:models_0_CreateMultipartUploadRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_CreateMultipartUploadOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},CreateMultipartUploadCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign(__assign({},isSerializableHeaderValue(input.ACL)&&{"x-amz-acl":input.ACL}),isSerializableHeaderValue(input.CacheControl)&&{"cache-control":input.CacheControl}),isSerializableHeaderValue(input.ContentDisposition)&&{"content-disposition":input.ContentDisposition}),isSerializableHeaderValue(input.ContentEncoding)&&{"content-encoding":input.ContentEncoding}),isSerializableHeaderValue(input.ContentLanguage)&&{"content-language":input.ContentLanguage}),isSerializableHeaderValue(input.ContentType)&&{"content-type":input.ContentType}),isSerializableHeaderValue(input.Expires)&&{expires:Object(es.e)(input.Expires).toString()}),isSerializableHeaderValue(input.GrantFullControl)&&{"x-amz-grant-full-control":input.GrantFullControl}),isSerializableHeaderValue(input.GrantRead)&&{"x-amz-grant-read":input.GrantRead}),isSerializableHeaderValue(input.GrantReadACP)&&{"x-amz-grant-read-acp":input.GrantReadACP}),isSerializableHeaderValue(input.GrantWriteACP)&&{"x-amz-grant-write-acp":input.GrantWriteACP}),isSerializableHeaderValue(input.ServerSideEncryption)&&{"x-amz-server-side-encryption":input.ServerSideEncryption}),isSerializableHeaderValue(input.StorageClass)&&{"x-amz-storage-class":input.StorageClass}),isSerializableHeaderValue(input.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":input.WebsiteRedirectLocation}),isSerializableHeaderValue(input.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":input.SSECustomerAlgorithm}),isSerializableHeaderValue(input.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":input.SSECustomerKey}),isSerializableHeaderValue(input.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":input.SSECustomerKeyMD5}),isSerializableHeaderValue(input.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":input.SSEKMSKeyId}),isSerializableHeaderValue(input.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":input.SSEKMSEncryptionContext}),isSerializableHeaderValue(input.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":input.BucketKeyEnabled.toString()}),isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.Tagging)&&{"x-amz-tagging":input.Tagging}),isSerializableHeaderValue(input.ObjectLockMode)&&{"x-amz-object-lock-mode":input.ObjectLockMode}),isSerializableHeaderValue(input.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(input.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),isSerializableHeaderValue(input.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":input.ObjectLockLegalHoldStatus}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),void 0!==input.Metadata&&Object.keys(input.Metadata).reduce((function(acc,suffix){var _a;return __assign(__assign({},acc),((_a={})["x-amz-meta-"+suffix.toLowerCase()]=input.Metadata[suffix],_a))}),{})),resolvedPath="/{Bucket}/{Key+}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),void 0===input.Key)throw new Error("No value provided for input HTTP label: Key.");if((labelValue=input.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return resolvedPath=resolvedPath.replace("{Key+}",labelValue.split("/").map((function(segment){return Object(es.f)(segment)})).join("/")),query={uploads:""},[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"POST",headers:headers,path:resolvedPath,query:query,body:void 0})]}}))}))}(input,context)},CreateMultipartUploadCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){switch(_a.label){case 0:return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlCreateMultipartUploadCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==output.headers["x-amz-abort-date"]&&(contents.AbortDate=new Date(output.headers["x-amz-abort-date"])),void 0!==output.headers["x-amz-abort-rule-id"]&&(contents.AbortRuleId=output.headers["x-amz-abort-rule-id"]),void 0!==output.headers["x-amz-server-side-encryption"]&&(contents.ServerSideEncryption=output.headers["x-amz-server-side-encryption"]),void 0!==output.headers["x-amz-server-side-encryption-customer-algorithm"]&&(contents.SSECustomerAlgorithm=output.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==output.headers["x-amz-server-side-encryption-customer-key-md5"]&&(contents.SSECustomerKeyMD5=output.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==output.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(contents.SSEKMSKeyId=output.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==output.headers["x-amz-server-side-encryption-context"]&&(contents.SSEKMSEncryptionContext=output.headers["x-amz-server-side-encryption-context"]),void 0!==output.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(contents.BucketKeyEnabled="true"===output.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==output.headers["x-amz-request-charged"]&&(contents.RequestCharged=output.headers["x-amz-request-charged"]),[4,parseBody(output.body,context)]);case 1:return void 0!==(data=_a.sent()).Bucket&&(contents.Bucket=data.Bucket),void 0!==data.Key&&(contents.Key=data.Key),void 0!==data.UploadId&&(contents.UploadId=data.UploadId),[2,Promise.resolve(contents)]}}))}))}(output,context)},CreateMultipartUploadCommand}(es.b);(models_1_MetadataEntry||(models_1_MetadataEntry={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_S3Location||(models_1_S3Location={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Encryption&&{Encryption:models_0_Encryption.filterSensitiveLog(obj.Encryption)})},(models_1_OutputLocation||(models_1_OutputLocation={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.S3&&{S3:models_1_S3Location.filterSensitiveLog(obj.S3)})},function(FileHeaderInfo){FileHeaderInfo.IGNORE="IGNORE",FileHeaderInfo.NONE="NONE",FileHeaderInfo.USE="USE"}(FileHeaderInfo||(FileHeaderInfo={})),(models_1_CSVInput||(models_1_CSVInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(JSONType){JSONType.DOCUMENT="DOCUMENT",JSONType.LINES="LINES"}(JSONType||(JSONType={})),(models_1_JSONInput||(models_1_JSONInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ParquetInput||(models_1_ParquetInput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_InputSerialization||(models_1_InputSerialization={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(QuoteFields){QuoteFields.ALWAYS="ALWAYS",QuoteFields.ASNEEDED="ASNEEDED"}(QuoteFields||(QuoteFields={})),(models_1_CSVOutput||(models_1_CSVOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_JSONOutput||(models_1_JSONOutput={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_OutputSerialization||(models_1_OutputSerialization={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SelectParameters||(models_1_SelectParameters={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(RestoreRequestType){RestoreRequestType.SELECT="SELECT"}(RestoreRequestType||(RestoreRequestType={})),(models_1_RestoreRequest||(models_1_RestoreRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.OutputLocation&&{OutputLocation:models_1_OutputLocation.filterSensitiveLog(obj.OutputLocation)})},(models_1_RestoreObjectRequest||(models_1_RestoreObjectRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.RestoreRequest&&{RestoreRequest:models_1_RestoreRequest.filterSensitiveLog(obj.RestoreRequest)})},(models_1_ContinuationEvent||(models_1_ContinuationEvent={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_EndEvent||(models_1_EndEvent={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_Progress||(models_1_Progress={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ProgressEvent||(models_1_ProgressEvent={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_RecordsEvent||(models_1_RecordsEvent={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_Stats||(models_1_Stats={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_StatsEvent||(models_1_StatsEvent={})).filterSensitiveLog=function(obj){return __assign({},obj)},function(SelectObjectContentEventStream){SelectObjectContentEventStream.visit=function(value,visitor){return void 0!==value.Records?visitor.Records(value.Records):void 0!==value.Stats?visitor.Stats(value.Stats):void 0!==value.Progress?visitor.Progress(value.Progress):void 0!==value.Cont?visitor.Cont(value.Cont):void 0!==value.End?visitor.End(value.End):visitor._(value.$unknown[0],value.$unknown[1])},SelectObjectContentEventStream.filterSensitiveLog=function(obj){var _a;return void 0!==obj.Records?{Records:models_1_RecordsEvent.filterSensitiveLog(obj.Records)}:void 0!==obj.Stats?{Stats:models_1_StatsEvent.filterSensitiveLog(obj.Stats)}:void 0!==obj.Progress?{Progress:models_1_ProgressEvent.filterSensitiveLog(obj.Progress)}:void 0!==obj.Cont?{Cont:models_1_ContinuationEvent.filterSensitiveLog(obj.Cont)}:void 0!==obj.End?{End:models_1_EndEvent.filterSensitiveLog(obj.End)}:void 0!==obj.$unknown?((_a={})[obj.$unknown[0]]="UNKNOWN",_a):void 0}}(SelectObjectContentEventStream||(SelectObjectContentEventStream={})),(models_1_SelectObjectContentOutput||(models_1_SelectObjectContentOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.Payload&&{Payload:"STREAMING_CONTENT"})},(models_1_RequestProgress||(models_1_RequestProgress={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_ScanRange||(models_1_ScanRange={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_SelectObjectContentRequest||(models_1_SelectObjectContentRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSECustomerKey&&{SSECustomerKey:es.d})},(models_1_UploadPartOutput||(models_1_UploadPartOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d})},(models_1_UploadPartRequest||(models_1_UploadPartRequest={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSECustomerKey&&{SSECustomerKey:es.d})},(models_1_CopyPartResult||(models_1_CopyPartResult={})).filterSensitiveLog=function(obj){return __assign({},obj)},(models_1_UploadPartCopyOutput||(models_1_UploadPartCopyOutput={})).filterSensitiveLog=function(obj){return __assign(__assign({},obj),obj.SSEKMSKeyId&&{SSEKMSKeyId:es.d})},(models_1_UploadPartCopyRequest||(models_1_UploadPartCopyRequest={})).filterSensitiveLog=function(obj){return __assign(__assign(__assign({},obj),obj.SSECustomerKey&&{SSECustomerKey:es.d}),obj.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:es.d})};var UploadPartCommand_UploadPartCommand=function(_super){function UploadPartCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(UploadPartCommand,_super),UploadPartCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getSsecPlugin(configuration)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:models_1_UploadPartRequest.filterSensitiveLog,outputFilterSensitiveLog:models_1_UploadPartOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},UploadPartCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,body,contents,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign(__assign(__assign(__assign(__assign(__assign({"content-type":"application/octet-stream"},isSerializableHeaderValue(input.ContentLength)&&{"content-length":input.ContentLength.toString()}),isSerializableHeaderValue(input.ContentMD5)&&{"content-md5":input.ContentMD5}),isSerializableHeaderValue(input.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":input.SSECustomerAlgorithm}),isSerializableHeaderValue(input.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":input.SSECustomerKey}),isSerializableHeaderValue(input.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":input.SSECustomerKeyMD5}),isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),resolvedPath="/{Bucket}/{Key+}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),void 0===input.Key)throw new Error("No value provided for input HTTP label: Key.");if((labelValue=input.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return resolvedPath=resolvedPath.replace("{Key+}",labelValue.split("/").map((function(segment){return Object(es.f)(segment)})).join("/")),query=__assign(__assign({"x-id":"UploadPart"},void 0!==input.PartNumber&&{partNumber:input.PartNumber.toString()}),void 0!==input.UploadId&&{uploadId:input.UploadId}),void 0!==input.Body&&(contents=input.Body,body=contents),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"PUT",headers:headers,path:resolvedPath,query:query,body:body})]}}))}))}(input,context)},UploadPartCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents;return __generator(this,(function(_a){switch(_a.label){case 0:return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlUploadPartCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==output.headers["x-amz-server-side-encryption"]&&(contents.ServerSideEncryption=output.headers["x-amz-server-side-encryption"]),void 0!==output.headers.etag&&(contents.ETag=output.headers.etag),void 0!==output.headers["x-amz-server-side-encryption-customer-algorithm"]&&(contents.SSECustomerAlgorithm=output.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==output.headers["x-amz-server-side-encryption-customer-key-md5"]&&(contents.SSECustomerKeyMD5=output.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==output.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(contents.SSEKMSKeyId=output.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==output.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(contents.BucketKeyEnabled="true"===output.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==output.headers["x-amz-request-charged"]&&(contents.RequestCharged=output.headers["x-amz-request-charged"]),[4,collectBody(output.body,context)]);case 1:return _a.sent(),[2,Promise.resolve(contents)]}}))}))}(output,context)},UploadPartCommand}(es.b),CompleteMultipartUploadCommand_CompleteMultipartUploadCommand=function(_super){function CompleteMultipartUploadCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(CompleteMultipartUploadCommand,_super),CompleteMultipartUploadCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getThrow200ExceptionsPlugin(configuration)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:models_0_CompleteMultipartUploadRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_CompleteMultipartUploadOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},CompleteMultipartUploadCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,body,contents,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign({"content-type":"application/xml"},isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),resolvedPath="/{Bucket}/{Key+}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),void 0===input.Key)throw new Error("No value provided for input HTTP label: Key.");if((labelValue=input.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return resolvedPath=resolvedPath.replace("{Key+}",labelValue.split("/").map((function(segment){return Object(es.f)(segment)})).join("/")),query=__assign({},void 0!==input.UploadId&&{uploadId:input.UploadId}),void 0!==input.MultipartUpload&&(contents=serializeAws_restXmlCompletedMultipartUpload(input.MultipartUpload,context),body='<?xml version="1.0" encoding="UTF-8"?>',contents.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),body+=contents.toString()),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"POST",headers:headers,path:resolvedPath,query:query,body:body})]}}))}))}(input,context)},CompleteMultipartUploadCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){switch(_a.label){case 0:return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlCompleteMultipartUploadCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==output.headers["x-amz-expiration"]&&(contents.Expiration=output.headers["x-amz-expiration"]),void 0!==output.headers["x-amz-server-side-encryption"]&&(contents.ServerSideEncryption=output.headers["x-amz-server-side-encryption"]),void 0!==output.headers["x-amz-version-id"]&&(contents.VersionId=output.headers["x-amz-version-id"]),void 0!==output.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(contents.SSEKMSKeyId=output.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==output.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(contents.BucketKeyEnabled="true"===output.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==output.headers["x-amz-request-charged"]&&(contents.RequestCharged=output.headers["x-amz-request-charged"]),[4,parseBody(output.body,context)]);case 1:return void 0!==(data=_a.sent()).Bucket&&(contents.Bucket=data.Bucket),void 0!==data.ETag&&(contents.ETag=data.ETag),void 0!==data.Key&&(contents.Key=data.Key),void 0!==data.Location&&(contents.Location=data.Location),[2,Promise.resolve(contents)]}}))}))}(output,context)},CompleteMultipartUploadCommand}(es.b),AbortMultipartUploadCommand_AbortMultipartUploadCommand=function(_super){function AbortMultipartUploadCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(AbortMultipartUploadCommand,_super),AbortMultipartUploadCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:models_0_AbortMultipartUploadRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_AbortMultipartUploadOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},AbortMultipartUploadCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign({},isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),resolvedPath="/{Bucket}/{Key+}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),void 0===input.Key)throw new Error("No value provided for input HTTP label: Key.");if((labelValue=input.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return resolvedPath=resolvedPath.replace("{Key+}",labelValue.split("/").map((function(segment){return Object(es.f)(segment)})).join("/")),query=__assign({"x-id":"AbortMultipartUpload"},void 0!==input.UploadId&&{uploadId:input.UploadId}),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"DELETE",headers:headers,path:resolvedPath,query:query,body:void 0})]}}))}))}(input,context)},AbortMultipartUploadCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents;return __generator(this,(function(_a){switch(_a.label){case 0:return 204!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlAbortMultipartUploadCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),RequestCharged:void 0},void 0!==output.headers["x-amz-request-charged"]&&(contents.RequestCharged=output.headers["x-amz-request-charged"]),[4,collectBody(output.body,context)]);case 1:return _a.sent(),[2,Promise.resolve(contents)]}}))}))}(output,context)},AbortMultipartUploadCommand}(es.b),ListPartsCommand_ListPartsCommand=function(_super){function ListPartsCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return __extends(ListPartsCommand,_super),ListPartsCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize)),this.middlewareStack.use(getBucketEndpointPlugin(configuration));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:models_0_ListPartsRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_ListPartsOutput.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},ListPartsCommand.prototype.serialize=function(input,context){return function(input,context){return __awaiter(void 0,void 0,void 0,(function(){var headers,resolvedPath,labelValue,query,_a,hostname,_b,protocol,port;return __generator(this,(function(_c){switch(_c.label){case 0:if(headers=__assign(__assign({},isSerializableHeaderValue(input.RequestPayer)&&{"x-amz-request-payer":input.RequestPayer}),isSerializableHeaderValue(input.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":input.ExpectedBucketOwner}),resolvedPath="/{Bucket}/{Key+}",void 0===input.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((labelValue=input.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(resolvedPath=resolvedPath.replace("{Bucket}",Object(es.f)(labelValue)),void 0===input.Key)throw new Error("No value provided for input HTTP label: Key.");if((labelValue=input.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return resolvedPath=resolvedPath.replace("{Key+}",labelValue.split("/").map((function(segment){return Object(es.f)(segment)})).join("/")),query=__assign(__assign(__assign({"x-id":"ListParts"},void 0!==input.MaxParts&&{"max-parts":input.MaxParts.toString()}),void 0!==input.PartNumberMarker&&{"part-number-marker":input.PartNumberMarker}),void 0!==input.UploadId&&{uploadId:input.UploadId}),[4,context.endpoint()];case 1:return _a=_c.sent(),hostname=_a.hostname,_b=_a.protocol,protocol=void 0===_b?"https":_b,port=_a.port,[2,new dist_es.a({protocol:protocol,hostname:hostname,port:port,method:"GET",headers:headers,path:resolvedPath,query:query,body:void 0})]}}))}))}(input,context)},ListPartsCommand.prototype.deserialize=function(output,context){return function(output,context){return __awaiter(void 0,void 0,void 0,(function(){var contents,data;return __generator(this,(function(_a){switch(_a.label){case 0:return 200!==output.statusCode&&output.statusCode>=300?[2,deserializeAws_restXmlListPartsCommandError(output,context)]:(contents={$metadata:deserializeMetadata(output),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==output.headers["x-amz-abort-date"]&&(contents.AbortDate=new Date(output.headers["x-amz-abort-date"])),void 0!==output.headers["x-amz-abort-rule-id"]&&(contents.AbortRuleId=output.headers["x-amz-abort-rule-id"]),void 0!==output.headers["x-amz-request-charged"]&&(contents.RequestCharged=output.headers["x-amz-request-charged"]),[4,parseBody(output.body,context)]);case 1:return void 0!==(data=_a.sent()).Bucket&&(contents.Bucket=data.Bucket),void 0!==data.Initiator&&(contents.Initiator=deserializeAws_restXmlInitiator(data.Initiator,context)),void 0!==data.IsTruncated&&(contents.IsTruncated="true"==data.IsTruncated),void 0!==data.Key&&(contents.Key=data.Key),void 0!==data.MaxParts&&(contents.MaxParts=parseInt(data.MaxParts)),void 0!==data.NextPartNumberMarker&&(contents.NextPartNumberMarker=data.NextPartNumberMarker),void 0!==data.Owner&&(contents.Owner=deserializeAws_restXmlOwner(data.Owner,context)),void 0!==data.PartNumberMarker&&(contents.PartNumberMarker=data.PartNumberMarker),""===data.Part&&(contents.Parts=[]),void 0!==data.Part&&(contents.Parts=deserializeAws_restXmlParts(Object(es.g)(data.Part),context)),void 0!==data.StorageClass&&(contents.StorageClass=data.StorageClass),void 0!==data.UploadId&&(contents.UploadId=data.UploadId),[2,Promise.resolve(contents)]}}))}))}(output,context)},ListPartsCommand}(es.b),events=__webpack_require__(106),AWSS3ProviderManagedUpload_assign=function(){return(AWSS3ProviderManagedUpload_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},AWSS3ProviderManagedUpload_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AWSS3ProviderManagedUpload_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},AWSS3ProviderManagedUpload_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},AWSS3ProviderManagedUpload_logger=new ConsoleLogger.a("AWSS3ProviderManagedUpload"),AWSS3ProviderManagedUpload_AWSS3ProviderManagedUpload=function(){function AWSS3ProviderManagedUpload(params,opts,emitter){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=params,this.opts=opts,this.emitter=emitter}return AWSS3ProviderManagedUpload.prototype.upload=function(){return AWSS3ProviderManagedUpload_awaiter(this,void 0,void 0,(function(){var _a,putObjectCommand,uploadId,numberOfPartsToUpload,start,parts;return AWSS3ProviderManagedUpload_generator(this,(function(_b){switch(_b.label){case 0:return _a=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return _a.body=_b.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,putObjectCommand=new PutObjectCommand_PutObjectCommand(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,_b.sent().send(putObjectCommand)];case 3:return[4,this.createMultiPartUpload()];case 4:uploadId=_b.sent(),numberOfPartsToUpload=Math.ceil(this.totalBytesToUpload/this.minPartSize),start=0,_b.label=5;case 5:return start<numberOfPartsToUpload?[4,this.checkIfUploadCancelled(uploadId)]:[3,10];case 6:return _b.sent(),parts=this.createParts(start),[4,this.uploadParts(uploadId,parts)];case 7:return _b.sent(),[4,this.checkIfUploadCancelled(uploadId)];case 8:_b.sent(),_b.label=9;case 9:return start+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(uploadId)];case 11:return[2,_b.sent()]}}))}))},AWSS3ProviderManagedUpload.prototype.createParts=function(startPartNumber){for(var parts=[],partNumber=startPartNumber,bodyStart=startPartNumber*this.minPartSize;bodyStart<this.totalBytesToUpload&&parts.length<this.queueSize;){var bodyEnd=Math.min(bodyStart+this.minPartSize,this.totalBytesToUpload);parts.push({bodyPart:this.body.slice(bodyStart,bodyEnd),partNumber:++partNumber,emitter:new events.EventEmitter,_lastUploadedBytes:0}),bodyStart+=this.minPartSize}return parts},AWSS3ProviderManagedUpload.prototype.createMultiPartUpload=function(){return AWSS3ProviderManagedUpload_awaiter(this,void 0,void 0,(function(){var createMultiPartUploadCommand,s3,response,_this=this;return AWSS3ProviderManagedUpload_generator(this,(function(_a){switch(_a.label){case 0:return createMultiPartUploadCommand=new CreateMultipartUploadCommand_CreateMultipartUploadCommand(this.params),[4,this._createNewS3Client(this.opts)];case 1:return(s3=_a.sent()).middlewareStack.add((function(next){return function(args){return _this.params.ContentType&&args&&args.request&&args.request.headers&&(args.request.headers["Content-Type"]=_this.params.ContentType),next(args)}}),{step:"build"}),[4,s3.send(createMultiPartUploadCommand)];case 2:return response=_a.sent(),AWSS3ProviderManagedUpload_logger.debug(response.UploadId),[2,response.UploadId]}}))}))},AWSS3ProviderManagedUpload.prototype.uploadParts=function(uploadId,parts){return AWSS3ProviderManagedUpload_awaiter(this,void 0,void 0,(function(){var promises,parts_1,parts_1_1,part,uploadPartCommandInput,uploadPartCommand,s3,e_1_1,allResults,i,error_1,e_1,_a;return AWSS3ProviderManagedUpload_generator(this,(function(_b){switch(_b.label){case 0:promises=[],_b.label=1;case 1:_b.trys.push([1,6,7,8]),parts_1=AWSS3ProviderManagedUpload_values(parts),parts_1_1=parts_1.next(),_b.label=2;case 2:return parts_1_1.done?[3,5]:(part=parts_1_1.value,this.setupEventListener(part),uploadPartCommandInput={PartNumber:part.partNumber,Body:part.bodyPart,UploadId:uploadId,Key:this.params.Key,Bucket:this.params.Bucket},uploadPartCommand=new UploadPartCommand_UploadPartCommand(uploadPartCommandInput),[4,this._createNewS3Client(this.opts,part.emitter)]);case 3:s3=_b.sent(),promises.push(s3.send(uploadPartCommand)),_b.label=4;case 4:return parts_1_1=parts_1.next(),[3,2];case 5:return[3,8];case 6:return e_1_1=_b.sent(),e_1={error:e_1_1},[3,8];case 7:try{parts_1_1&&!parts_1_1.done&&(_a=parts_1.return)&&_a.call(parts_1)}finally{if(e_1)throw e_1.error}return[7];case 8:return _b.trys.push([8,10,,11]),[4,Promise.all(promises)];case 9:for(allResults=_b.sent(),i=0;i<allResults.length;i++)this.multiPartMap.push({PartNumber:parts[i].partNumber,ETag:allResults[i].ETag});return[3,11];case 10:return error_1=_b.sent(),AWSS3ProviderManagedUpload_logger.error("error happened while uploading a part. Cancelling the multipart upload",error_1),this.cancelUpload(),[2];case 11:return[2]}}))}))},AWSS3ProviderManagedUpload.prototype.finishMultiPartUpload=function(uploadId){return AWSS3ProviderManagedUpload_awaiter(this,void 0,void 0,(function(){var input,completeUploadCommand,s3,error_2;return AWSS3ProviderManagedUpload_generator(this,(function(_a){switch(_a.label){case 0:return input={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:uploadId,MultipartUpload:{Parts:this.multiPartMap}},completeUploadCommand=new CompleteMultipartUploadCommand_CompleteMultipartUploadCommand(input),[4,this._createNewS3Client(this.opts)];case 1:s3=_a.sent(),_a.label=2;case 2:return _a.trys.push([2,4,,5]),[4,s3.send(completeUploadCommand)];case 3:return[2,_a.sent().Key];case 4:return error_2=_a.sent(),AWSS3ProviderManagedUpload_logger.error("error happened while finishing the upload. Cancelling the multipart upload",error_2),this.cancelUpload(),[2];case 5:return[2]}}))}))},AWSS3ProviderManagedUpload.prototype.checkIfUploadCancelled=function(uploadId){return AWSS3ProviderManagedUpload_awaiter(this,void 0,void 0,(function(){var errorMessage,error_3;return AWSS3ProviderManagedUpload_generator(this,(function(_a){switch(_a.label){case 0:if(!this.cancel)return[3,5];errorMessage="Upload was cancelled.",_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.cleanup(uploadId)];case 2:return _a.sent(),[3,4];case 3:return error_3=_a.sent(),errorMessage+=error_3.errorMessage,[3,4];case 4:throw new Error(errorMessage);case 5:return[2]}}))}))},AWSS3ProviderManagedUpload.prototype.cancelUpload=function(){this.cancel=!0},AWSS3ProviderManagedUpload.prototype.cleanup=function(uploadId){return AWSS3ProviderManagedUpload_awaiter(this,void 0,void 0,(function(){var input,s3,data;return AWSS3ProviderManagedUpload_generator(this,(function(_a){switch(_a.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,input={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:uploadId},[4,this._createNewS3Client(this.opts)];case 1:return[4,(s3=_a.sent()).send(new AbortMultipartUploadCommand_AbortMultipartUploadCommand(input))];case 2:return _a.sent(),[4,s3.send(new ListPartsCommand_ListPartsCommand(input))];case 3:if((data=_a.sent())&&data.Parts&&data.Parts.length>0)throw new Error("Multi Part upload clean up failed");return[2]}}))}))},AWSS3ProviderManagedUpload.prototype.setupEventListener=function(part){var _this=this;part.emitter.on("sendProgress",(function(progress){_this.progressChanged(part.partNumber,progress.loaded-part._lastUploadedBytes),part._lastUploadedBytes=progress.loaded}))},AWSS3ProviderManagedUpload.prototype.progressChanged=function(partNumber,incrementalUpdate){this.bytesUploaded+=incrementalUpdate,this.emitter.emit("sendProgress",{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:partNumber,key:this.params.Key})},AWSS3ProviderManagedUpload.prototype.byteLength=function(input){if(null==input)return 0;if("number"==typeof input.byteLength)return input.byteLength;if("number"==typeof input.length)return input.length;if("number"==typeof input.size)return input.size;if("string"!=typeof input.path)throw new Error("Cannot determine length of "+input)},AWSS3ProviderManagedUpload.prototype.validateAndSanitizeBody=function(body){return AWSS3ProviderManagedUpload_awaiter(this,void 0,void 0,(function(){return AWSS3ProviderManagedUpload_generator(this,(function(_a){switch(_a.label){case 0:return this.isGenericObject(body)?[2,JSON.stringify(body)]:[3,1];case 1:return this.isBlob(body)?Platform.a.isReactNative?[4,Object(fetch_http_handler_dist_es.b)(body)]:[3,3]:[3,4];case 2:return[2,_a.sent()];case 3:case 4:return[2,body]}}))}))},AWSS3ProviderManagedUpload.prototype.isBlob=function(body){return"undefined"!=typeof Blob&&body instanceof Blob},AWSS3ProviderManagedUpload.prototype.isGenericObject=function(body){if(null!==body&&"object"==typeof body)try{return!(this.byteLength(body)>=0)}catch(error){return!0}return!1},AWSS3ProviderManagedUpload.prototype._createNewS3Client=function(config,emitter){return AWSS3ProviderManagedUpload_awaiter(this,void 0,void 0,(function(){var credentials,region,dangerouslyConnectToHttpEndpointForTesting,localTestingConfig,client;return AWSS3ProviderManagedUpload_generator(this,(function(_a){switch(_a.label){case 0:return[4,this._getCredentials()];case 1:return credentials=_a.sent(),region=config.region,dangerouslyConnectToHttpEndpointForTesting=config.dangerouslyConnectToHttpEndpointForTesting,localTestingConfig={},dangerouslyConnectToHttpEndpointForTesting&&(localTestingConfig={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),(client=new S3Client_S3Client(AWSS3ProviderManagedUpload_assign(AWSS3ProviderManagedUpload_assign({region:region,credentials:credentials},localTestingConfig),{requestHandler:new axios_http_handler_AxiosHttpHandler({},emitter),customUserAgent:Object(Platform.b)()}))).middlewareStack.remove("contentLengthMiddleware"),[2,client]}}))}))},AWSS3ProviderManagedUpload.prototype._getCredentials=function(){return Credentials.a.get().then((function(credentials){if(!credentials)return!1;var cred=Credentials.a.shear(credentials);return AWSS3ProviderManagedUpload_logger.debug("set credentials for storage",cred),cred})).catch((function(error){return AWSS3ProviderManagedUpload_logger.warn("ensure credentials error",error),!1}))},AWSS3ProviderManagedUpload}(),AWSS3Provider_assign=function(){return(AWSS3Provider_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},AWSS3Provider_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AWSS3Provider_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},AWSS3Provider_logger=new ConsoleLogger.a("AWSS3Provider"),AMPLIFY_SYMBOL="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",dispatchStorageEvent=function(track,event,attrs,metrics,message){if(track){var data={attrs:attrs};metrics&&(data.metrics=metrics),Hub.a.dispatch("storage",{event:event,data:data,message:message},"Storage",AMPLIFY_SYMBOL)}},AWSS3Provider_AWSS3Provider=function(){function AWSS3Provider(config){this._config=config||{},AWSS3Provider_logger.debug("Storage Options",this._config)}return AWSS3Provider.prototype.getCategory=function(){return AWSS3Provider.CATEGORY},AWSS3Provider.prototype.getProviderName=function(){return AWSS3Provider.PROVIDER_NAME},AWSS3Provider.prototype.configure=function(config){if(AWSS3Provider_logger.debug("configure Storage",config),!config)return this._config;var amplifyConfig=Parser.a.parseMobilehubConfig(config);return this._config=Object.assign({},this._config,amplifyConfig.Storage),this._config.bucket||AWSS3Provider_logger.debug("Do not have bucket yet"),this._config},AWSS3Provider.prototype.get=function(key,config){return AWSS3Provider_awaiter(this,void 0,void 0,(function(){var opt,bucket,download,cacheControl,contentDisposition,contentEncoding,contentLanguage,contentType,expires,track,prefix,final_key,s3,params,getObjectCommand,response,error_1,signer,request,url,_a,error_2;return AWSS3Provider_generator(this,(function(_b){switch(_b.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_b.sent())return[2,Promise.reject("No credentials")];if(opt=Object.assign({},this._config,config),bucket=opt.bucket,download=opt.download,cacheControl=opt.cacheControl,contentDisposition=opt.contentDisposition,contentEncoding=opt.contentEncoding,contentLanguage=opt.contentLanguage,contentType=opt.contentType,expires=opt.expires,track=opt.track,prefix=this._prefix(opt),final_key=prefix+key,s3=this._createNewS3Client(opt),AWSS3Provider_logger.debug("get "+key+" from "+final_key),params={Bucket:bucket,Key:final_key},cacheControl&&(params.ResponseCacheControl=cacheControl),contentDisposition&&(params.ResponseContentDisposition=contentDisposition),contentEncoding&&(params.ResponseContentEncoding=contentEncoding),contentLanguage&&(params.ResponseContentLanguage=contentLanguage),contentType&&(params.ResponseContentType=contentType),!0!==download)return[3,5];getObjectCommand=new GetObjectCommand_GetObjectCommand(params),_b.label=2;case 2:return _b.trys.push([2,4,,5]),[4,s3.send(getObjectCommand)];case 3:return response=_b.sent(),dispatchStorageEvent(track,"download",{method:"get",result:"success"},{fileSize:Number(response.Body.size||response.Body.length)},"Download success for "+key),[2,response];case 4:throw error_1=_b.sent(),dispatchStorageEvent(track,"download",{method:"get",result:"failed"},null,"Download failed with "+error_1.message),error_1;case 5:params.Expires=expires||900,_b.label=6;case 6:return _b.trys.push([6,9,,10]),signer=new presigner_S3RequestPresigner(AWSS3Provider_assign({},s3.config)),[4,createRequest(s3,new GetObjectCommand_GetObjectCommand(params))];case 7:return request=_b.sent(),_a=formatUrl,[4,signer.presign(request,{expiresIn:params.Expires})];case 8:return url=_a.apply(void 0,[_b.sent()]),dispatchStorageEvent(track,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+url),[2,url];case 9:throw error_2=_b.sent(),AWSS3Provider_logger.warn("get signed url error",error_2),dispatchStorageEvent(track,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+key),error_2;case 10:return[2]}}))}))},AWSS3Provider.prototype.put=function(key,object,config){return AWSS3Provider_awaiter(this,void 0,void 0,(function(){var opt,bucket,track,progressCallback,contentType,contentDisposition,cacheControl,expires,metadata,tagging,acl,serverSideEncryption,SSECustomerAlgorithm,SSECustomerKey,SSECustomerKeyMD5,SSEKMSKeyId,type,prefix,final_key,params,emitter,uploader,response,error_3;return AWSS3Provider_generator(this,(function(_a){switch(_a.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_a.sent())return[2,Promise.reject("No credentials")];opt=Object.assign({},this._config,config),bucket=opt.bucket,track=opt.track,progressCallback=opt.progressCallback,contentType=opt.contentType,contentDisposition=opt.contentDisposition,cacheControl=opt.cacheControl,expires=opt.expires,metadata=opt.metadata,tagging=opt.tagging,acl=opt.acl,serverSideEncryption=opt.serverSideEncryption,SSECustomerAlgorithm=opt.SSECustomerAlgorithm,SSECustomerKey=opt.SSECustomerKey,SSECustomerKeyMD5=opt.SSECustomerKeyMD5,SSEKMSKeyId=opt.SSEKMSKeyId,type=contentType||"binary/octet-stream",prefix=this._prefix(opt),final_key=prefix+key,AWSS3Provider_logger.debug("put "+key+" to "+final_key),params={Bucket:bucket,Key:final_key,Body:object,ContentType:type},cacheControl&&(params.CacheControl=cacheControl),contentDisposition&&(params.ContentDisposition=contentDisposition),expires&&(params.Expires=expires),metadata&&(params.Metadata=metadata),tagging&&(params.Tagging=tagging),serverSideEncryption&&(params.ServerSideEncryption=serverSideEncryption,SSECustomerAlgorithm&&(params.SSECustomerAlgorithm=SSECustomerAlgorithm),SSECustomerKey&&(params.SSECustomerKey=SSECustomerKey),SSECustomerKeyMD5&&(params.SSECustomerKeyMD5=SSECustomerKeyMD5),SSEKMSKeyId&&(params.SSEKMSKeyId=SSEKMSKeyId)),emitter=new events.EventEmitter,uploader=new AWSS3ProviderManagedUpload_AWSS3ProviderManagedUpload(params,opt,emitter),acl&&(params.ACL=acl),_a.label=2;case 2:return _a.trys.push([2,4,,5]),emitter.on("sendProgress",(function(progress){progressCallback&&("function"==typeof progressCallback?progressCallback(progress):AWSS3Provider_logger.warn("progressCallback should be a function, not a "+typeof progressCallback))})),[4,uploader.upload()];case 3:return response=_a.sent(),AWSS3Provider_logger.debug("upload result",response),dispatchStorageEvent(track,"upload",{method:"put",result:"success"},null,"Upload success for "+key),[2,{key:key}];case 4:throw error_3=_a.sent(),AWSS3Provider_logger.warn("error uploading",error_3),dispatchStorageEvent(track,"upload",{method:"put",result:"failed"},null,"Error uploading "+key),error_3;case 5:return[2]}}))}))},AWSS3Provider.prototype.remove=function(key,config){return AWSS3Provider_awaiter(this,void 0,void 0,(function(){var opt,bucket,track,prefix,final_key,s3,deleteObjectCommand,response,error_4;return AWSS3Provider_generator(this,(function(_a){switch(_a.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_a.sent())return[2,Promise.reject("No credentials")];opt=Object.assign({},this._config,config),bucket=opt.bucket,track=opt.track,prefix=this._prefix(opt),final_key=prefix+key,s3=this._createNewS3Client(opt),AWSS3Provider_logger.debug("remove "+key+" from "+final_key),deleteObjectCommand=new DeleteObjectCommand_DeleteObjectCommand({Bucket:bucket,Key:final_key}),_a.label=2;case 2:return _a.trys.push([2,4,,5]),[4,s3.send(deleteObjectCommand)];case 3:return response=_a.sent(),dispatchStorageEvent(track,"delete",{method:"remove",result:"success"},null,"Deleted "+key+" successfully"),[2,response];case 4:throw error_4=_a.sent(),dispatchStorageEvent(track,"delete",{method:"remove",result:"failed"},null,"Deletion of "+key+" failed with "+error_4),error_4;case 5:return[2]}}))}))},AWSS3Provider.prototype.list=function(path,config){return AWSS3Provider_awaiter(this,void 0,void 0,(function(){var opt,bucket,track,maxKeys,prefix,final_path,s3,listObjectsCommand,response,list,error_5;return AWSS3Provider_generator(this,(function(_a){switch(_a.label){case 0:return[4,this._ensureCredentials()];case 1:if(!_a.sent())return[2,Promise.reject("No credentials")];opt=Object.assign({},this._config,config),bucket=opt.bucket,track=opt.track,maxKeys=opt.maxKeys,prefix=this._prefix(opt),final_path=prefix+path,s3=this._createNewS3Client(opt),AWSS3Provider_logger.debug("list "+path+" from "+final_path),listObjectsCommand=new ListObjectsCommand_ListObjectsCommand({Bucket:bucket,Prefix:final_path,MaxKeys:maxKeys}),_a.label=2;case 2:return _a.trys.push([2,4,,5]),[4,s3.send(listObjectsCommand)];case 3:return response=_a.sent(),list=[],response&&response.Contents&&(list=response.Contents.map((function(item){return{key:item.Key.substr(prefix.length),eTag:item.ETag,lastModified:item.LastModified,size:item.Size}}))),dispatchStorageEvent(track,"list",{method:"list",result:"success"},null,list.length+" items returned from list operation"),AWSS3Provider_logger.debug("list",list),[2,list];case 4:throw error_5=_a.sent(),AWSS3Provider_logger.warn("list error",error_5),dispatchStorageEvent(track,"list",{method:"list",result:"failed"},null,"Listing items failed: "+error_5.message),error_5;case 5:return[2]}}))}))},AWSS3Provider.prototype._ensureCredentials=function(){var _this=this;return Credentials.a.get().then((function(credentials){if(!credentials)return!1;var cred=Credentials.a.shear(credentials);return AWSS3Provider_logger.debug("set credentials for storage",cred),_this._config.credentials=cred,!0})).catch((function(error){return AWSS3Provider_logger.warn("ensure credentials error",error),!1}))},AWSS3Provider.prototype._prefix=function(config){var credentials=config.credentials,level=config.level,customPrefix=config.customPrefix||{},identityId=config.identityId||credentials.identityId,privatePath=(void 0!==customPrefix.private?customPrefix.private:"private/")+identityId+"/",protectedPath=(void 0!==customPrefix.protected?customPrefix.protected:"protected/")+identityId+"/",publicPath=void 0!==customPrefix.public?customPrefix.public:"public/";switch(level){case"private":return privatePath;case"protected":return protectedPath;default:return publicPath}},AWSS3Provider.prototype._createNewS3Client=function(config,emitter){var region=config.region,credentials=config.credentials,localTestingConfig={};return config.dangerouslyConnectToHttpEndpointForTesting&&(localTestingConfig={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new S3Client_S3Client(AWSS3Provider_assign(AWSS3Provider_assign({region:region,credentials:credentials,customUserAgent:Object(Platform.b)()},localTestingConfig),{requestHandler:new axios_http_handler_AxiosHttpHandler({},emitter)}))},AWSS3Provider.CATEGORY="Storage",AWSS3Provider.PROVIDER_NAME="AWSS3",AWSS3Provider}(),Storage_assign=function(){return(Storage_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Storage_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Storage_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},Storage_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},Storage_logger=new ConsoleLogger.a("StorageClass"),Storage_Storage=function(){function Storage(){this._config={},this._pluggables=[],Storage_logger.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return Storage.prototype.getModuleName=function(){return"Storage"},Storage.prototype.addPluggable=function(pluggable){if(pluggable&&"Storage"===pluggable.getCategory()){this._pluggables.push(pluggable);return pluggable.configure(this._config[pluggable.getProviderName()])}},Storage.prototype.getPluggable=function(providerName){var pluggable=this._pluggables.find((function(pluggable){return pluggable.getProviderName()===providerName}));return void 0===pluggable?(Storage_logger.debug("No plugin found with providerName",providerName),null):pluggable},Storage.prototype.removePluggable=function(providerName){this._pluggables=this._pluggables.filter((function(pluggable){return pluggable.getProviderName()!==providerName}))},Storage.prototype.configure=function(config){var _this=this;if(Storage_logger.debug("configure Storage"),!config)return this._config;var amplifyConfig=Parser.a.parseMobilehubConfig(config),storageKeysFromConfig=Object.keys(amplifyConfig.Storage),storageArrayKeys=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],isInStorageArrayKeys=function(k){return storageArrayKeys.some((function(x){return x===k}))};return storageKeysFromConfig&&storageKeysFromConfig.find((function(k){return isInStorageArrayKeys(k)}))&&!amplifyConfig.Storage.AWSS3&&(amplifyConfig.Storage.AWSS3={}),Object.entries(amplifyConfig.Storage).map((function(_a){var _b=Storage_read(_a,2),key=_b[0],value=_b[1];key&&isInStorageArrayKeys(key)&&void 0!==value&&(amplifyConfig.Storage.AWSS3[key]=value,delete amplifyConfig.Storage[key])})),Object.keys(amplifyConfig.Storage).forEach((function(providerName){"string"!=typeof amplifyConfig.Storage[providerName]&&(_this._config[providerName]=Storage_assign(Storage_assign({},_this._config[providerName]),amplifyConfig.Storage[providerName]))})),this._pluggables.forEach((function(pluggable){pluggable.configure(_this._config[pluggable.getProviderName()])})),0===this._pluggables.length&&this.addPluggable(new AWSS3Provider_AWSS3Provider),this._config},Storage.prototype.get=function(key,config){return Storage_awaiter(this,void 0,void 0,(function(){var _a,provider,prov;return Storage_generator(this,(function(_b){return _a=(config||{}).provider,provider=void 0===_a?"AWSS3":_a,void 0===(prov=this._pluggables.find((function(pluggable){return pluggable.getProviderName()===provider})))&&(Storage_logger.debug("No plugin found with providerName",provider),Promise.reject("No plugin found in Storage for the provider")),[2,prov.get(key,config)]}))}))},Storage.prototype.put=function(key,object,config){return Storage_awaiter(this,void 0,void 0,(function(){var _a,provider,prov;return Storage_generator(this,(function(_b){return _a=(config||{}).provider,provider=void 0===_a?"AWSS3":_a,void 0===(prov=this._pluggables.find((function(pluggable){return pluggable.getProviderName()===provider})))&&(Storage_logger.debug("No plugin found with providerName",provider),Promise.reject("No plugin found in Storage for the provider")),[2,prov.put(key,object,config)]}))}))},Storage.prototype.remove=function(key,config){return Storage_awaiter(this,void 0,void 0,(function(){var _a,provider,prov;return Storage_generator(this,(function(_b){return _a=(config||{}).provider,provider=void 0===_a?"AWSS3":_a,void 0===(prov=this._pluggables.find((function(pluggable){return pluggable.getProviderName()===provider})))&&(Storage_logger.debug("No plugin found with providerName",provider),Promise.reject("No plugin found in Storage for the provider")),[2,prov.remove(key,config)]}))}))},Storage.prototype.list=function(path,config){return Storage_awaiter(this,void 0,void 0,(function(){var _a,provider,prov;return Storage_generator(this,(function(_b){return _a=(config||{}).provider,provider=void 0===_a?"AWSS3":_a,void 0===(prov=this._pluggables.find((function(pluggable){return pluggable.getProviderName()===provider})))&&(Storage_logger.debug("No plugin found with providerName",provider),Promise.reject("No plugin found in Storage for the provider")),[2,prov.list(path,config)]}))}))},Storage}(),Amplify=__webpack_require__(40);__webpack_require__.d(__webpack_exports__,"a",(function(){return storage_lib_esm_Storage})),__webpack_require__.d(__webpack_exports__,"b",(function(){return Storage_Storage}));var lib_esm_assign=function(){return(lib_esm_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},lib_esm_logger=new ConsoleLogger.a("Storage"),_instance=null,storage_lib_esm_Storage=function(){if(_instance)return _instance;lib_esm_logger.debug("Create Storage Instance, debug"),(_instance=new Storage_Storage).vault=new Storage_Storage;var old_configure=_instance.configure;return _instance.configure=function(options){lib_esm_logger.debug("storage configure called");var vaultConfig=lib_esm_assign({},old_configure.call(_instance,options));Object.keys(vaultConfig).forEach((function(providerName){"string"!=typeof vaultConfig[providerName]&&(vaultConfig[providerName]=lib_esm_assign(lib_esm_assign({},vaultConfig[providerName]),{level:"private"}))})),lib_esm_logger.debug("storage vault configure called"),_instance.vault.configure(vaultConfig)},_instance}();Amplify.a.register(storage_lib_esm_Storage)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ServiceWorkerClass}));var _Logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(84),_JS__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(57),_Amplify__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40),ServiceWorkerClass=function(){function ServiceWorkerClass(){this._logger=new _Logger__WEBPACK_IMPORTED_MODULE_0__.a("ServiceWorker")}return Object.defineProperty(ServiceWorkerClass.prototype,"serviceWorker",{get:function(){return this._serviceWorker},enumerable:!0,configurable:!0}),ServiceWorkerClass.prototype.register=function(filePath,scope){var _this=this;return void 0===filePath&&(filePath="/service-worker.js"),void 0===scope&&(scope="/"),this._logger.debug("registering "+filePath),this._logger.debug("registering service worker with scope "+scope),new Promise((function(resolve,reject){if(!navigator||!("serviceWorker"in navigator))return reject(new Error("Service Worker not available"));navigator.serviceWorker.register(filePath,{scope:scope}).then((function(registration){return registration.installing?_this._serviceWorker=registration.installing:registration.waiting?_this._serviceWorker=registration.waiting:registration.active&&(_this._serviceWorker=registration.active),_this._registration=registration,_this._setupListeners(),_this._logger.debug("Service Worker Registration Success: "+registration),resolve(registration)})).catch((function(error){return _this._logger.debug("Service Worker Registration Failed "+error),reject(error)}))}))},ServiceWorkerClass.prototype.enablePush=function(publicKey){var _this=this;if(!this._registration)throw new Error("Service Worker not registered");return this._publicKey=publicKey,new Promise((function(resolve,reject){if(!Object(_JS__WEBPACK_IMPORTED_MODULE_1__.b)().isBrowser)return reject(new Error("Service Worker not available"));_this._registration.pushManager.getSubscription().then((function(subscription){if(!subscription)return _this._logger.debug("User is NOT subscribed to push"),_this._registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_this._urlB64ToUint8Array(publicKey)}).then((function(subscription){_this._subscription=subscription,_this._logger.debug("User subscribed: "+JSON.stringify(subscription)),resolve(subscription)})).catch((function(error){_this._logger.error(error)}));_this._subscription=subscription,_this._logger.debug("User is subscribed to push: "+JSON.stringify(subscription)),resolve(subscription)}))}))},ServiceWorkerClass.prototype._urlB64ToUint8Array=function(base64String){for(var base64=(base64String+"=".repeat((4-base64String.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),rawData=window.atob(base64),outputArray=new Uint8Array(rawData.length),i=0;i<rawData.length;++i)outputArray[i]=rawData.charCodeAt(i);return outputArray},ServiceWorkerClass.prototype.send=function(message){this._serviceWorker&&this._serviceWorker.postMessage("object"==typeof message?JSON.stringify(message):message)},ServiceWorkerClass.prototype._setupListeners=function(){var _this=this;this._serviceWorker.addEventListener("statechange",(function(event){var currentState=_this._serviceWorker.state;_this._logger.debug("ServiceWorker statechange: "+currentState),_Amplify__WEBPACK_IMPORTED_MODULE_2__.a.Analytics&&"function"==typeof _Amplify__WEBPACK_IMPORTED_MODULE_2__.a.Analytics.record&&_Amplify__WEBPACK_IMPORTED_MODULE_2__.a.Analytics.record({name:"ServiceWorker",attributes:{state:currentState}})})),this._serviceWorker.addEventListener("message",(function(event){_this._logger.debug("ServiceWorker message event: "+event)}))},ServiceWorkerClass}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var cookie=__webpack_require__(130);function readCookie(value,options){void 0===options&&(options={});var cleanValue=function(value){if(value&&"j"===value[0]&&":"===value[1])return value.substr(2);return value}(value);if(function(value,doNotParse){return void 0===doNotParse&&(doNotParse=!value||"{"!==value[0]&&"["!==value[0]&&'"'!==value[0]),!doNotParse}(cleanValue,options.doNotParse))try{return JSON.parse(cleanValue)}catch(e){}return value}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},es6=function(){function Cookies(cookies,options){var _this=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(cookies,options){return"string"==typeof cookies?cookie.parse(cookies,options):"object"==typeof cookies&&null!==cookies?cookies:{}}(cookies,options),new Promise((function(){_this.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return Cookies.prototype._updateBrowserValues=function(parseOptions){this.HAS_DOCUMENT_COOKIE&&(this.cookies=cookie.parse(document.cookie,parseOptions))},Cookies.prototype._emitChange=function(params){for(var i=0;i<this.changeListeners.length;++i)this.changeListeners[i](params)},Cookies.prototype.get=function(name,options,parseOptions){return void 0===options&&(options={}),this._updateBrowserValues(parseOptions),readCookie(this.cookies[name],options)},Cookies.prototype.getAll=function(options,parseOptions){void 0===options&&(options={}),this._updateBrowserValues(parseOptions);var result={};for(var name_1 in this.cookies)result[name_1]=readCookie(this.cookies[name_1],options);return result},Cookies.prototype.set=function(name,value,options){var _a;"object"==typeof value&&(value=JSON.stringify(value)),this.cookies=__assign(__assign({},this.cookies),((_a={})[name]=value,_a)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=cookie.serialize(name,value,options)),this._emitChange({name:name,value:value,options:options})},Cookies.prototype.remove=function(name,options){var finalOptions=options=__assign(__assign({},options),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=__assign({},this.cookies),delete this.cookies[name],this.HAS_DOCUMENT_COOKIE&&(document.cookie=cookie.serialize(name,"",finalOptions)),this._emitChange({name:name,value:void 0,options:options})},Cookies.prototype.addChangeListener=function(callback){this.changeListeners.push(callback)},Cookies.prototype.removeChangeListener=function(callback){var idx=this.changeListeners.indexOf(callback);idx>=0&&this.changeListeners.splice(idx,1)},Cookies}(),JS=__webpack_require__(57);__webpack_require__.d(__webpack_exports__,"a",(function(){return UniversalStorage_UniversalStorage}));var isBrowser=Object(JS.b)().isBrowser,UniversalStorage_UniversalStorage=function(){function UniversalStorage(context){void 0===context&&(context={}),this.cookies=new es6,this.store=isBrowser?window.localStorage:Object.create(null),this.cookies=context.req?new es6(context.req.headers.cookie):new es6,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(UniversalStorage.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),UniversalStorage.prototype.clear=function(){var _this=this;Array.from(new Array(this.length)).map((function(_,i){return _this.key(i)})).forEach((function(key){return _this.removeItem(key)}))},UniversalStorage.prototype.getItem=function(key){return this.getLocalItem(key)},UniversalStorage.prototype.getLocalItem=function(key){return Object.prototype.hasOwnProperty.call(this.store,key)?this.store[key]:null},UniversalStorage.prototype.getUniversalItem=function(key){return this.cookies.get(key)},UniversalStorage.prototype.key=function(index){return Object.keys(this.store)[index]},UniversalStorage.prototype.removeItem=function(key){this.removeLocalItem(key),this.removeUniversalItem(key)},UniversalStorage.prototype.removeLocalItem=function(key){delete this.store[key]},UniversalStorage.prototype.removeUniversalItem=function(key){this.cookies.remove(key,{path:"/"})},UniversalStorage.prototype.setItem=function(key,value){switch(this.setLocalItem(key,value),key.split(".").pop()){case"LastAuthUser":case"accessToken":case"idToken":this.setUniversalItem(key,value)}},UniversalStorage.prototype.setLocalItem=function(key,value){this.store[key]=value},UniversalStorage.prototype.setUniversalItem=function(key,value){this.cookies.set(key,value,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},UniversalStorage}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).__exportStar(__webpack_require__(495),exports)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){__webpack_require__.d(__webpack_exports__,"a",(function(){return CONTROL_MSG})),__webpack_require__.d(__webpack_exports__,"b",(function(){return SubscriptionProcessor}));var CONTROL_MSG,USER_CREDENTIALS,_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(83),_aws_amplify_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67),_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(50),_aws_amplify_cache__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(186),_aws_amplify_pubsub__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82),zen_observable_ts__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(27),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),_predicates__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(14),_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},logger=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.a("DataStore");!function(CONTROL_MSG){CONTROL_MSG.CONNECTED="CONNECTED"}(CONTROL_MSG||(CONTROL_MSG={})),function(USER_CREDENTIALS){USER_CREDENTIALS[USER_CREDENTIALS.none=0]="none",USER_CREDENTIALS[USER_CREDENTIALS.unauth=1]="unauth",USER_CREDENTIALS[USER_CREDENTIALS.auth=2]="auth"}(USER_CREDENTIALS||(USER_CREDENTIALS={}));var SubscriptionProcessor=function(){function SubscriptionProcessor(schema,syncPredicates,amplifyConfig){void 0===amplifyConfig&&(amplifyConfig={}),this.schema=schema,this.syncPredicates=syncPredicates,this.amplifyConfig=amplifyConfig,this.typeQuery=new WeakMap,this.buffer=[]}return SubscriptionProcessor.prototype.buildSubscription=function(namespace,model,transformerMutationType,userCredentials,cognitoTokenPayload,oidcTokenPayload){var aws_appsync_authenticationType=this.amplifyConfig.aws_appsync_authenticationType,_a=this.getAuthorizationInfo(model,userCredentials,aws_appsync_authenticationType,cognitoTokenPayload,oidcTokenPayload)||{},authMode=_a.authMode,isOwner=_a.isOwner,ownerField=_a.ownerField,ownerValue=_a.ownerValue,_b=__read(Object(_utils__WEBPACK_IMPORTED_MODULE_8__.c)(namespace,model,transformerMutationType,isOwner,ownerField),3);return{authMode:authMode,opType:_b[0],opName:_b[1],query:_b[2],isOwner:isOwner,ownerField:ownerField,ownerValue:ownerValue}},SubscriptionProcessor.prototype.getAuthorizationInfo=function(model,userCredentials,defaultAuthType,cognitoTokenPayload,oidcTokenPayload){void 0===cognitoTokenPayload&&(cognitoTokenPayload={}),void 0===oidcTokenPayload&&(oidcTokenPayload={});var rules=Object(_utils__WEBPACK_IMPORTED_MODULE_8__.e)(model);if(defaultAuthType===_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__.a.AWS_IAM&&rules.find((function(rule){return"private"===rule.authStrategy&&"iam"===rule.provider}))&&userCredentials===USER_CREDENTIALS.unauth)return null;var ownerAuthInfo,groupAuthRules=rules.filter((function(rule){return"groups"===rule.authStrategy&&["userPools","oidc"].includes(rule.provider)}));return defaultAuthType!==_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__.a.AMAZON_COGNITO_USER_POOLS&&defaultAuthType!==_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__.a.OPENID_CONNECT||!groupAuthRules.find((function(groupAuthRule){var cognitoUserGroups=Object(_utils__WEBPACK_IMPORTED_MODULE_8__.f)(cognitoTokenPayload,groupAuthRule),oidcUserGroups=Object(_utils__WEBPACK_IMPORTED_MODULE_8__.f)(oidcTokenPayload,groupAuthRule);return __spread(cognitoUserGroups,oidcUserGroups).find((function(userGroup){return groupAuthRule.groups.find((function(group){return group===userGroup}))}))}))?((defaultAuthType===_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__.a.AMAZON_COGNITO_USER_POOLS?rules.filter((function(rule){return"owner"===rule.authStrategy&&"userPools"===rule.provider})):[]).forEach((function(ownerAuthRule){var ownerValue=cognitoTokenPayload[ownerAuthRule.identityClaim];ownerValue&&(ownerAuthInfo={authMode:_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__.a.AMAZON_COGNITO_USER_POOLS,isOwner:!ownerAuthRule.areSubscriptionsPublic,ownerField:ownerAuthRule.ownerField,ownerValue:ownerValue})})),ownerAuthInfo||((defaultAuthType===_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__.a.OPENID_CONNECT?rules.filter((function(rule){return"owner"===rule.authStrategy&&"oidc"===rule.provider})):[]).forEach((function(ownerAuthRule){var ownerValue=oidcTokenPayload[ownerAuthRule.identityClaim];ownerValue&&(ownerAuthInfo={authMode:_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__.a.OPENID_CONNECT,isOwner:!ownerAuthRule.areSubscriptionsPublic,ownerField:ownerAuthRule.ownerField,ownerValue:ownerValue})})),ownerAuthInfo||{authMode:defaultAuthType,isOwner:!1})):{authMode:defaultAuthType,isOwner:!1}},SubscriptionProcessor.prototype.hubQueryCompletionListener=function(completed,capsule){capsule.payload.event===_aws_amplify_pubsub__WEBPACK_IMPORTED_MODULE_6__.a.SUBSCRIPTION_ACK&&completed()},SubscriptionProcessor.prototype.start=function(){var _this=this;return[new zen_observable_ts__WEBPACK_IMPORTED_MODULE_7__.a((function(observer){var cognitoTokenPayload,oidcTokenPayload,promises=[],subscriptions=[],userCredentials=USER_CREDENTIALS.none;return __awaiter(_this,void 0,void 0,(function(){var credentials,session,_a,aws_cognito_region,AuthConfig,token,federatedInfo,currentUser,payload,err_3,_this=this;return __generator(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,2,,3]),[4,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__.b.currentCredentials()];case 1:return credentials=_b.sent(),userCredentials=credentials.authenticated?USER_CREDENTIALS.auth:USER_CREDENTIALS.unauth,[3,3];case 2:return _b.sent(),[3,3];case 3:return _b.trys.push([3,5,,6]),[4,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__.b.currentSession()];case 4:return session=_b.sent(),cognitoTokenPayload=session.getIdToken().decodePayload(),[3,6];case 5:return _b.sent(),[3,6];case 6:if(_b.trys.push([6,11,,12]),_a=this.amplifyConfig,aws_cognito_region=_a.aws_cognito_region,AuthConfig=_a.Auth,!aws_cognito_region||AuthConfig&&!AuthConfig.region)throw"Auth is not configured";return token=void 0,[4,_aws_amplify_cache__WEBPACK_IMPORTED_MODULE_3__.a.getItem("federatedInfo")];case 7:return(federatedInfo=_b.sent())?(token=federatedInfo.token,[3,10]):[3,8];case 8:return[4,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_2__.b.currentAuthenticatedUser()];case 9:(currentUser=_b.sent())&&(token=currentUser.token),_b.label=10;case 10:return token&&(payload=token.split(".")[1],oidcTokenPayload=JSON.parse(Buffer.from(payload,"base64").toString("utf8"))),[3,12];case 11:return err_3=_b.sent(),logger.debug("error getting OIDC JWT",err_3),[3,12];case 12:return Object.values(this.schema.namespaces).forEach((function(namespace){Object.values(namespace.models).filter((function(_a){return _a.syncable})).forEach((function(modelDefinition){return __awaiter(_this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){return[_utils__WEBPACK_IMPORTED_MODULE_8__.a.CREATE,_utils__WEBPACK_IMPORTED_MODULE_8__.a.UPDATE,_utils__WEBPACK_IMPORTED_MODULE_8__.a.DELETE].map((function(op){return _this.buildSubscription(namespace,modelDefinition,op,userCredentials,cognitoTokenPayload,oidcTokenPayload)})).forEach((function(_a){var transformerMutationType=_a.opType,opName=_a.opName,query=_a.query,isOwner=_a.isOwner,ownerField=_a.ownerField,ownerValue=_a.ownerValue,authMode=_a.authMode;return __awaiter(_this,void 0,void 0,(function(){var variables,queryObservable,subscriptionReadyCallback,_this=this;return __generator(this,(function(_b){if(variables={},isOwner){if(!ownerValue)return observer.error("Owner field required, sign in is needed in order to perform this operation"),[2];variables[ownerField]=ownerValue}return queryObservable=_aws_amplify_api__WEBPACK_IMPORTED_MODULE_1__.c.graphql(__assign({query:query,variables:variables},{authMode:authMode})),subscriptions.push(queryObservable.map((function(_a){return _a.value})).subscribe({next:function(_a){var data=_a.data,errors=_a.errors;if(Array.isArray(errors)&&errors.length>0){var messages=errors.map((function(_a){return _a.message}));return logger.warn("Skipping incoming subscription. Messages: "+messages.join("\n")),void _this.drainBuffer()}var predicatesGroup=_predicates__WEBPACK_IMPORTED_MODULE_9__.a.getPredicates(_this.syncPredicates.get(modelDefinition),!1),record=data[opName];_this.passesPredicateValidation(record,predicatesGroup)&&_this.pushToBuffer(transformerMutationType,modelDefinition,record),_this.drainBuffer()},error:function(subscriptionError){var _a=subscriptionError.error,_c=__read((void 0===_a?{errors:[]}:_a).errors,1)[0],_d=(void 0===_c?{}:_c).message,message=void 0===_d?"":_d;logger.warn("subscriptionError",message),"function"==typeof subscriptionReadyCallback&&subscriptionReadyCallback(),message.includes('"errorType":"Unauthorized"')||observer.error(message)}})),promises.push(__awaiter(_this,void 0,void 0,(function(){var boundFunction,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,new Promise((function(res){subscriptionReadyCallback=res,boundFunction=_this.hubQueryCompletionListener.bind(_this,res),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.a.listen("api",boundFunction)}))];case 1:return _a.sent(),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.a.remove("api",boundFunction),[2]}}))}))),[2]}))}))})),[2]}))}))}))})),Promise.all(promises).then((function(){return observer.next(CONTROL_MSG.CONNECTED)})),[2]}}))})),function(){subscriptions.forEach((function(subscription){return subscription.unsubscribe()}))}})),new zen_observable_ts__WEBPACK_IMPORTED_MODULE_7__.a((function(observer){return _this.dataObserver=observer,_this.drainBuffer(),function(){_this.dataObserver=null}}))]},SubscriptionProcessor.prototype.passesPredicateValidation=function(record,predicatesGroup){if(!predicatesGroup)return!0;var predicates=predicatesGroup.predicates,type=predicatesGroup.type;return Object(_util__WEBPACK_IMPORTED_MODULE_10__.y)(record,type,predicates)},SubscriptionProcessor.prototype.pushToBuffer=function(transformerMutationType,modelDefinition,data){this.buffer.push([transformerMutationType,modelDefinition,data])},SubscriptionProcessor.prototype.drainBuffer=function(){var _this=this;this.dataObserver&&(this.buffer.forEach((function(data){return _this.dataObserver.next(data)})),this.buffer=[])},SubscriptionProcessor}()}).call(this,__webpack_require__(11).Buffer)},,,,function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.Kushki=void 0;var Identifiers_1=__webpack_require__(44),KushkiError_1=__webpack_require__(152),Container_1=__webpack_require__(337);__webpack_require__(71);var UtilsService_1=__webpack_require__(135),Kushki=function(){function Kushki(body){body.inTestEnvironment=void 0!==body.inTestEnvironment&&body.inTestEnvironment,body.regional=void 0!==body.regional&&body.regional,this._merchantId=body.merchantId,this._inTestEnvironment=body.inTestEnvironment,this._regional=body.regional,this._cardService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CardService)(this._regional),this._transferService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.TransferService)(this._regional),this._cashService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CashService)(this._regional),this._multiMerchantInfoService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.MultiMerchantService)(this._regional),this._commissionService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CommissionService)(this._regional),this._kushkiService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.KushkiService)(this._regional),this._secureService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.SecureService)(),this._cardAsyncService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CardAsyncService)(),this._payoutsCashService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.PayoutsCashService)(this._regional),this._payoutsTransferService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.PayoutsTransferService)(this._regional),this._transferSubscriptionService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.TransferSubscriptionService)(this._regional),this._mobileProcessorService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.MobileProcessorService)(),this._authService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.AuthService)(),this._kPayService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.KPayService)(),this._cardDynamicService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CardDynamicService)(),this._cardSubscriptionDynamicService=Container_1.CONTAINER.get(Identifiers_1.IDENTIFIERS.CardSubscriptionDynamicService)()}return Kushki.prototype.requestToken=function(body,callback){this._resolve(this._cardService.requestToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestTokenCharge=function(body,callback){this._requestDeviceToken(body,callback)},Kushki.prototype.requestDeviceToken=function(body,callback){this._requestDeviceToken(body,callback)},Kushki.prototype.requestSubscriptionToken=function(body,callback){this._resolve(this._cardService.requestSubscriptionToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestTransferToken=function(body,callback){this._resolve(this._transferService.requestTransferToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.checkStatus=function(callback){this._resolve(this._kushkiService.checkStatus(this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestPseBankList=function(callback){this._requestBankList(callback)},Kushki.prototype.requestBankList=function(callback){this._requestBankList(callback)},Kushki.prototype.requestDeferred=function(body,callback){this._resolve(this._cardService.requestDeferred(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestBinInfo=function(body,callback){this._cardService.requestBinInfo(body,this._merchantId,this._inTestEnvironment,this._regional).subscribe({error:function(err){return Kushki.callbackError(err,callback)},next:function(response){callback(response)}})},Kushki.prototype.requestBrandsByMerchant=function(callback){this._kushkiService.requestBrandsByMerchant(this._merchantId,this._inTestEnvironment,this._regional).subscribe({error:function(err){return Kushki.callbackError(err,callback)},next:function(response){callback(response)}})},Kushki.prototype.requestCashToken=function(body,callback){this._resolve(this._cashService.requestCashToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestSecureServiceValidation=function(body,callback){this._resolve(this._secureService.requestSecureServiceValidation(this._merchantId,body,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestCardAsyncToken=function(body,callback){this._resolve(this._cardAsyncService.requestCardAsyncToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestSubscriptionCardAsyncToken=function(body,callback){this._resolve(this._cardAsyncService.requestCardSubscriptionAsyncToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.multiMerchantInfo=function(body,callback){this._resolve(this._multiMerchantInfoService.multiMerchantInfo(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestPayoutsCashToken=function(body,callback){this._resolve(this._payoutsCashService.requestPayoutsCashToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestPayoutsTransferToken=function(body,callback){this._resolve(this._payoutsTransferService.requestPayoutsTransferToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.getCommissionConfiguration=function(body,callback){this._resolve(this._commissionService.getCommissionConfiguration(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestTransferSubscriptionToken=function(body,callback){this._resolve(this._transferSubscriptionService.requestToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestTransferSubscriptionBankList=function(callback){this._resolve(this._transferSubscriptionService.requestBankList(this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestPayoutsTransferBankList=function(callback){this._resolve(this._payoutsTransferService.requestPayoutsTransferBankList(this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestMobileProcessorToken=function(body,callback){this._resolve(this._mobileProcessorService.requestToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestCardDynamicToken=function(bin,body,callback){this._resolve(this._cardDynamicService.requestCardDynamicToken(bin,body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestCardSubscriptionDynamicToken=function(bin,body,callback){this._resolve(this._cardSubscriptionDynamicService.requestCardSubscriptionDynamicToken(bin,body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestInitAuth=function(body,callback){this._resolve(this._authService.requestInitAuth(body,this._inTestEnvironment),callback)},Kushki.prototype.deletePaymentMethod=function(body,callback){this._resolve(this._kPayService.deletePaymentMethod(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestSavedPaymentMethods=function(body,callback){this._resolve(this._kPayService.requestSavedPaymentMethods(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype.requestVerifyAuth=function(body,callback){this._resolve(this._authService.requestVerifyAuth(body.code,this._inTestEnvironment),callback)},Kushki.prototype.validateSession=function(callback){this._resolve(this._authService.validateSession(this._inTestEnvironment),callback)},Kushki.prototype.requestValidate3DS=function(body,callback){this._cardService.validate3DS(body,this._merchantId,this._inTestEnvironment,this._regional,callback)},Kushki.callbackError=function(err,callback){err instanceof KushkiError_1.KushkiError?callback({code:""+err.code,error:err.code+" - "+err.getMessage(),message:""+err.getMessage()}):callback({code:""+UtilsService_1.UtilsService.sGet(err,"response.data.code","K002"),error:""+UtilsService_1.UtilsService.sGet(err,"message","Ha ocurrido un error inesperado."),message:""+UtilsService_1.UtilsService.sGet(err,"response.data.message","Ha ocurrido un error inesperado.")})},Kushki.prototype._requestBankList=function(callback){this._resolve(this._transferService.requestBankList(this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype._requestDeviceToken=function(body,callback){this._resolve(this._cardService.requestDeviceToken(body,this._merchantId,this._inTestEnvironment,this._regional),callback)},Kushki.prototype._resolve=function(observable,callback){observable.subscribe({error:function(err){return Kushki.callbackError(err,callback)},next:function(response){callback(response)}})},Kushki}();exports.Kushki=Kushki},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn,thisArg){return function(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65);function encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,(function(val,key){null!=val&&(utils.isArray(val)?key+="[]":val=[val],utils.forEach(val,(function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v)),parts.push(encode(key)+"="+encode(v))})))})),serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");-1!==hashmarkIndex&&(url=url.slice(0,hashmarkIndex)),url+=(-1===url.indexOf("?")?"?":"&")+serializedParams}return url}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!(!value||!value.__CANCEL__)}},function(module,exports,__webpack_require__){"use strict";(function(process){var utils=__webpack_require__(65),normalizeHeaderName=__webpack_require__(343),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}var adapter,defaults={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==process&&"[object process]"===Object.prototype.toString.call(process))&&(adapter=__webpack_require__(229)),adapter),transformRequest:[function(data,headers){return normalizeHeaderName(headers,"Accept"),normalizeHeaderName(headers,"Content-Type"),utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)?data:utils.isArrayBufferView(data)?data.buffer:utils.isURLSearchParams(data)?(setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8"),data.toString()):utils.isObject(data)?(setContentTypeIfUnset(headers,"application/json;charset=utf-8"),JSON.stringify(data)):data}],transformResponse:[function(data){if("string"==typeof data)try{data=JSON.parse(data)}catch(e){}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(status){return status>=200&&status<300}};defaults.headers={common:{Accept:"application/json, text/plain, */*"}},utils.forEach(["delete","get","head"],(function(method){defaults.headers[method]={}})),utils.forEach(["post","put","patch"],(function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)})),module.exports=defaults}).call(this,__webpack_require__(76))},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65),settle=__webpack_require__(344),cookies=__webpack_require__(346),buildURL=__webpack_require__(226),buildFullPath=__webpack_require__(347),parseHeaders=__webpack_require__(350),isURLSameOrigin=__webpack_require__(351),createError=__webpack_require__(230);module.exports=function(config){return new Promise((function(resolve,reject){var requestData=config.data,requestHeaders=config.headers;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"",password=config.auth.password?unescape(encodeURIComponent(config.auth.password)):"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);if(request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,request.onreadystatechange=function(){if(request&&4===request.readyState&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,response={data:config.responseType&&"text"!==config.responseType?request.response:request.responseText,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response),request=null}},request.onabort=function(){request&&(reject(createError("Request aborted",config,"ECONNABORTED",request)),request=null)},request.onerror=function(){reject(createError("Network Error",config,null,request)),request=null},request.ontimeout=function(){var timeoutErrorMessage="timeout of "+config.timeout+"ms exceeded";config.timeoutErrorMessage&&(timeoutErrorMessage=config.timeoutErrorMessage),reject(createError(timeoutErrorMessage,config,"ECONNABORTED",request)),request=null},utils.isStandardBrowserEnv()){var xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}if("setRequestHeader"in request&&utils.forEach(requestHeaders,(function(val,key){void 0===requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)})),utils.isUndefined(config.withCredentials)||(request.withCredentials=!!config.withCredentials),config.responseType)try{request.responseType=config.responseType}catch(e){if("json"!==config.responseType)throw e}"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress),config.cancelToken&&config.cancelToken.promise.then((function(cancel){request&&(request.abort(),reject(cancel),request=null)})),requestData||(requestData=null),request.send(requestData)}))}},function(module,exports,__webpack_require__){"use strict";var enhanceError=__webpack_require__(345);module.exports=function(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65);module.exports=function(config1,config2){config2=config2||{};var config={},valueFromConfig2Keys=["url","method","data"],mergeDeepPropertiesKeys=["headers","auth","proxy","params"],defaultToConfig2Keys=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],directMergeKeys=["validateStatus"];function getMergedValue(target,source){return utils.isPlainObject(target)&&utils.isPlainObject(source)?utils.merge(target,source):utils.isPlainObject(source)?utils.merge({},source):utils.isArray(source)?source.slice():source}function mergeDeepProperties(prop){utils.isUndefined(config2[prop])?utils.isUndefined(config1[prop])||(config[prop]=getMergedValue(void 0,config1[prop])):config[prop]=getMergedValue(config1[prop],config2[prop])}utils.forEach(valueFromConfig2Keys,(function(prop){utils.isUndefined(config2[prop])||(config[prop]=getMergedValue(void 0,config2[prop]))})),utils.forEach(mergeDeepPropertiesKeys,mergeDeepProperties),utils.forEach(defaultToConfig2Keys,(function(prop){utils.isUndefined(config2[prop])?utils.isUndefined(config1[prop])||(config[prop]=getMergedValue(void 0,config1[prop])):config[prop]=getMergedValue(void 0,config2[prop])})),utils.forEach(directMergeKeys,(function(prop){prop in config2?config[prop]=getMergedValue(config1[prop],config2[prop]):prop in config1&&(config[prop]=getMergedValue(void 0,config1[prop]))}));var axiosKeys=valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys).concat(directMergeKeys),otherKeys=Object.keys(config1).concat(Object.keys(config2)).filter((function(key){return-1===axiosKeys.indexOf(key)}));return utils.forEach(otherKeys,mergeDeepProperties),config}},function(module,exports,__webpack_require__){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),MetadataReader=function(){function MetadataReader(){}return MetadataReader.prototype.getConstructorMetadata=function(constructorFunc){return{compilerGeneratedMetadata:Reflect.getMetadata(METADATA_KEY.PARAM_TYPES,constructorFunc),userGeneratedMetadata:Reflect.getMetadata(METADATA_KEY.TAGGED,constructorFunc)||{}}},MetadataReader.prototype.getPropertiesMetadata=function(constructorFunc){return Reflect.getMetadata(METADATA_KEY.TAGGED_PROP,constructorFunc)||[]},MetadataReader}();exports.MetadataReader=MetadataReader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(66);exports.isStackOverflowExeption=function(error){return error instanceof RangeError||error.message===ERROR_MSGS.STACK_OVERFLOW}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var error_msgs_1=__webpack_require__(66),METADATA_KEY=__webpack_require__(45),metadata_1=__webpack_require__(77),decorator_utils_1=__webpack_require__(101),LazyServiceIdentifer=function(){function LazyServiceIdentifer(cb){this._cb=cb}return LazyServiceIdentifer.prototype.unwrap=function(){return this._cb()},LazyServiceIdentifer}();exports.LazyServiceIdentifer=LazyServiceIdentifer,exports.inject=function(serviceIdentifier){return function(target,targetKey,index){if(void 0===serviceIdentifier)throw new Error(error_msgs_1.UNDEFINED_INJECT_ANNOTATION(target.name));var metadata=new metadata_1.Metadata(METADATA_KEY.INJECT_TAG,serviceIdentifier);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),id_1=__webpack_require__(103),metadata_1=__webpack_require__(77),queryable_string_1=__webpack_require__(365),Target=function(){function Target(type,name,serviceIdentifier,namedOrTagged){this.id=id_1.id(),this.type=type,this.serviceIdentifier=serviceIdentifier,this.name=new queryable_string_1.QueryableString(name||""),this.metadata=new Array;var metadataItem=null;"string"==typeof namedOrTagged?metadataItem=new metadata_1.Metadata(METADATA_KEY.NAMED_TAG,namedOrTagged):namedOrTagged instanceof metadata_1.Metadata&&(metadataItem=namedOrTagged),null!==metadataItem&&this.metadata.push(metadataItem)}return Target.prototype.hasTag=function(key){for(var _i=0,_a=this.metadata;_i<_a.length;_i++){if(_a[_i].key===key)return!0}return!1},Target.prototype.isArray=function(){return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG)},Target.prototype.matchesArray=function(name){return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name)},Target.prototype.isNamed=function(){return this.hasTag(METADATA_KEY.NAMED_TAG)},Target.prototype.isTagged=function(){return this.metadata.some((function(m){return m.key!==METADATA_KEY.INJECT_TAG&&m.key!==METADATA_KEY.MULTI_INJECT_TAG&&m.key!==METADATA_KEY.NAME_TAG&&m.key!==METADATA_KEY.UNMANAGED_TAG&&m.key!==METADATA_KEY.NAMED_TAG}))},Target.prototype.isOptional=function(){return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(!0)},Target.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(m){return m.key===METADATA_KEY.NAMED_TAG}))[0]:null},Target.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(m){return m.key!==METADATA_KEY.INJECT_TAG&&m.key!==METADATA_KEY.MULTI_INJECT_TAG&&m.key!==METADATA_KEY.NAME_TAG&&m.key!==METADATA_KEY.UNMANAGED_TAG&&m.key!==METADATA_KEY.NAMED_TAG})):null},Target.prototype.matchesNamedTag=function(name){return this.matchesTag(METADATA_KEY.NAMED_TAG)(name)},Target.prototype.matchesTag=function(key){var _this=this;return function(value){for(var _i=0,_a=_this.metadata;_i<_a.length;_i++){var m=_a[_i];if(m.key===key&&m.value===value)return!0}return!1}},Target}();exports.Target=Target},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_on_syntax_1=__webpack_require__(192),binding_when_syntax_1=__webpack_require__(193),BindingWhenOnSyntax=function(){function BindingWhenOnSyntax(binding){this._binding=binding,this._bindingWhenSyntax=new binding_when_syntax_1.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new binding_on_syntax_1.BindingOnSyntax(this._binding)}return BindingWhenOnSyntax.prototype.when=function(constraint){return this._bindingWhenSyntax.when(constraint)},BindingWhenOnSyntax.prototype.whenTargetNamed=function(name){return this._bindingWhenSyntax.whenTargetNamed(name)},BindingWhenOnSyntax.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},BindingWhenOnSyntax.prototype.whenTargetTagged=function(tag,value){return this._bindingWhenSyntax.whenTargetTagged(tag,value)},BindingWhenOnSyntax.prototype.whenInjectedInto=function(parent){return this._bindingWhenSyntax.whenInjectedInto(parent)},BindingWhenOnSyntax.prototype.whenParentNamed=function(name){return this._bindingWhenSyntax.whenParentNamed(name)},BindingWhenOnSyntax.prototype.whenParentTagged=function(tag,value){return this._bindingWhenSyntax.whenParentTagged(tag,value)},BindingWhenOnSyntax.prototype.whenAnyAncestorIs=function(ancestor){return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor)},BindingWhenOnSyntax.prototype.whenNoAncestorIs=function(ancestor){return this._bindingWhenSyntax.whenNoAncestorIs(ancestor)},BindingWhenOnSyntax.prototype.whenAnyAncestorNamed=function(name){return this._bindingWhenSyntax.whenAnyAncestorNamed(name)},BindingWhenOnSyntax.prototype.whenAnyAncestorTagged=function(tag,value){return this._bindingWhenSyntax.whenAnyAncestorTagged(tag,value)},BindingWhenOnSyntax.prototype.whenNoAncestorNamed=function(name){return this._bindingWhenSyntax.whenNoAncestorNamed(name)},BindingWhenOnSyntax.prototype.whenNoAncestorTagged=function(tag,value){return this._bindingWhenSyntax.whenNoAncestorTagged(tag,value)},BindingWhenOnSyntax.prototype.whenAnyAncestorMatches=function(constraint){return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint)},BindingWhenOnSyntax.prototype.whenNoAncestorMatches=function(constraint){return this._bindingWhenSyntax.whenNoAncestorMatches(constraint)},BindingWhenOnSyntax.prototype.onActivation=function(handler){return this._bindingOnSyntax.onActivation(handler)},BindingWhenOnSyntax}();exports.BindingWhenOnSyntax=BindingWhenOnSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),metadata_1=__webpack_require__(77),traverseAncerstors=function(request,constraint){var parent=request.parentRequest;return null!==parent&&(!!constraint(parent)||traverseAncerstors(parent,constraint))};exports.traverseAncerstors=traverseAncerstors;var taggedConstraint=function(key){return function(value){var constraint=function(request){return null!==request&&null!==request.target&&request.target.matchesTag(key)(value)};return constraint.metaData=new metadata_1.Metadata(key,value),constraint}};exports.taggedConstraint=taggedConstraint;var namedConstraint=taggedConstraint(METADATA_KEY.NAMED_TAG);exports.namedConstraint=namedConstraint;exports.typeConstraint=function(type){return function(request){var binding=null;if(null!==request){if(binding=request.bindings[0],"string"==typeof type)return binding.serviceIdentifier===type;var constructor=request.bindings[0].implementationType;return type===constructor}return!1}}},function(module,exports){var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);module.exports=function(){for(var r,i=0;i<16;i++)0==(3&i)&&(r=4294967296*Math.random()),rnds[i]=r>>>((3&i)<<3)&255;return rnds}}},function(module,exports){for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);module.exports=function(buf,offset){var i=offset||0,bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(40),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(217),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7);__webpack_require__.d(__webpack_exports__,"Amplify",(function(){return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a}));var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(132),_aws_amplify_cache__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43),_aws_amplify_analytics__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(115);__webpack_require__.d(__webpack_exports__,"Analytics",(function(){return _aws_amplify_analytics__WEBPACK_IMPORTED_MODULE_5__.e})),__webpack_require__.d(__webpack_exports__,"AWSPinpointProvider",(function(){return _aws_amplify_analytics__WEBPACK_IMPORTED_MODULE_5__.c})),__webpack_require__.d(__webpack_exports__,"AWSKinesisProvider",(function(){return _aws_amplify_analytics__WEBPACK_IMPORTED_MODULE_5__.b})),__webpack_require__.d(__webpack_exports__,"AWSKinesisFirehoseProvider",(function(){return _aws_amplify_analytics__WEBPACK_IMPORTED_MODULE_5__.a})),__webpack_require__.d(__webpack_exports__,"AmazonPersonalizeProvider",(function(){return _aws_amplify_analytics__WEBPACK_IMPORTED_MODULE_5__.d}));var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(50);__webpack_require__.d(__webpack_exports__,"Auth",(function(){return _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.a}));var _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(216);__webpack_require__.d(__webpack_exports__,"Storage",(function(){return _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_7__.a})),__webpack_require__.d(__webpack_exports__,"StorageClass",(function(){return _aws_amplify_storage__WEBPACK_IMPORTED_MODULE_7__.b}));var _aws_amplify_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(67);__webpack_require__.d(__webpack_exports__,"API",(function(){return _aws_amplify_api__WEBPACK_IMPORTED_MODULE_8__.a})),__webpack_require__.d(__webpack_exports__,"APIClass",(function(){return _aws_amplify_api__WEBPACK_IMPORTED_MODULE_8__.b})),__webpack_require__.d(__webpack_exports__,"graphqlOperation",(function(){return _aws_amplify_api__WEBPACK_IMPORTED_MODULE_8__.d}));var _aws_amplify_datastore__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(113);__webpack_require__.d(__webpack_exports__,"DataStore",(function(){return _aws_amplify_datastore__WEBPACK_IMPORTED_MODULE_9__.a})),__webpack_require__.d(__webpack_exports__,"Predicates",(function(){return _aws_amplify_datastore__WEBPACK_IMPORTED_MODULE_9__.b})),__webpack_require__.d(__webpack_exports__,"SortDirection",(function(){return _aws_amplify_datastore__WEBPACK_IMPORTED_MODULE_9__.c})),__webpack_require__.d(__webpack_exports__,"syncExpression",(function(){return _aws_amplify_datastore__WEBPACK_IMPORTED_MODULE_9__.d}));var _aws_amplify_pubsub__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(82);__webpack_require__.d(__webpack_exports__,"PubSub",(function(){return _aws_amplify_pubsub__WEBPACK_IMPORTED_MODULE_10__.b})),__webpack_require__.d(__webpack_exports__,"Cache",(function(){return _aws_amplify_cache__WEBPACK_IMPORTED_MODULE_4__.a}));var _aws_amplify_interactions__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(307);__webpack_require__.d(__webpack_exports__,"Interactions",(function(){return _aws_amplify_interactions__WEBPACK_IMPORTED_MODULE_11__.a}));var _aws_amplify_ui__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(301);for(var __WEBPACK_IMPORT_KEY__ in _aws_amplify_ui__WEBPACK_IMPORTED_MODULE_12__)["Analytics","AWSPinpointProvider","AWSKinesisProvider","AWSKinesisFirehoseProvider","AmazonPersonalizeProvider","Auth","Storage","StorageClass","API","APIClass","graphqlOperation","DataStore","Predicates","SortDirection","syncExpression","PubSub","Cache","Interactions","XR","Predictions","Logger","Hub","JS","ClientDevice","Signer","I18n","ServiceWorker","withSSRContext","Amplify","default"].indexOf(__WEBPACK_IMPORT_KEY__)<0&&function(key){__webpack_require__.d(__webpack_exports__,key,(function(){return _aws_amplify_ui__WEBPACK_IMPORTED_MODULE_12__[key]}))}(__WEBPACK_IMPORT_KEY__);var _aws_amplify_xr__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(308);__webpack_require__.d(__webpack_exports__,"XR",(function(){return _aws_amplify_xr__WEBPACK_IMPORTED_MODULE_13__.a}));var _aws_amplify_predictions__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(310);__webpack_require__.d(__webpack_exports__,"Predictions",(function(){return _aws_amplify_predictions__WEBPACK_IMPORTED_MODULE_14__.a})),__webpack_require__.d(__webpack_exports__,"Logger",(function(){return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.c})),__webpack_require__.d(__webpack_exports__,"Hub",(function(){return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.e})),__webpack_require__.d(__webpack_exports__,"JS",(function(){return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.g})),__webpack_require__.d(__webpack_exports__,"ClientDevice",(function(){return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.b})),__webpack_require__.d(__webpack_exports__,"Signer",(function(){return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.i})),__webpack_require__.d(__webpack_exports__,"I18n",(function(){return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.f})),__webpack_require__.d(__webpack_exports__,"ServiceWorker",(function(){return _aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.h}));var _withSSRContext__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(302);__webpack_require__.d(__webpack_exports__,"withSSRContext",(function(){return _withSSRContext__WEBPACK_IMPORTED_MODULE_15__.a})),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.a.Auth=_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_3__.a,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.a.Cache=_aws_amplify_cache__WEBPACK_IMPORTED_MODULE_4__.a,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.a.ServiceWorker=_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.a,__webpack_exports__.default=_aws_amplify_core__WEBPACK_IMPORTED_MODULE_0__.a},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){var CryptoJS;module.exports=(CryptoJS=__webpack_require__(48),function(){if("function"==typeof ArrayBuffer){var WordArray=CryptoJS.lib.WordArray,superInit=WordArray.init;(WordArray.init=function(typedArray){if(typedArray instanceof ArrayBuffer&&(typedArray=new Uint8Array(typedArray)),(typedArray instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&typedArray instanceof Uint8ClampedArray||typedArray instanceof Int16Array||typedArray instanceof Uint16Array||typedArray instanceof Int32Array||typedArray instanceof Uint32Array||typedArray instanceof Float32Array||typedArray instanceof Float64Array)&&(typedArray=new Uint8Array(typedArray.buffer,typedArray.byteOffset,typedArray.byteLength)),typedArray instanceof Uint8Array){for(var typedArrayByteLength=typedArray.byteLength,words=[],i=0;i<typedArrayByteLength;i++)words[i>>>2]|=typedArray[i]<<24-i%4*8;superInit.call(this,words,typedArrayByteLength)}else superInit.apply(this,arguments)}).prototype=WordArray}}(),CryptoJS.lib.WordArray)},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(16).Buffer,Transform=__webpack_require__(195).Transform;function HashBase(blockSize){Transform.call(this),this._block=Buffer.allocUnsafe(blockSize),this._blockSize=blockSize,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}__webpack_require__(15)(HashBase,Transform),HashBase.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding)}catch(err){error=err}callback(error)},HashBase.prototype._flush=function(callback){var error=null;try{this.push(this.digest())}catch(err){error=err}callback(error)},HashBase.prototype.update=function(data,encoding){if(function(val,prefix){if(!Buffer.isBuffer(val)&&"string"!=typeof val)throw new TypeError(prefix+" must be a string or a buffer")}(data,"Data"),this._finalized)throw new Error("Digest already called");Buffer.isBuffer(data)||(data=Buffer.from(data,encoding));for(var block=this._block,offset=0;this._blockOffset+data.length-offset>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)block[i++]=data[offset++];this._update(),this._blockOffset=0}for(;offset<data.length;)block[this._blockOffset++]=data[offset++];for(var j=0,carry=8*data.length;carry>0;++j)this._length[j]+=carry,(carry=this._length[j]/4294967296|0)>0&&(this._length[j]-=4294967296*carry);return this},HashBase.prototype._update=function(){throw new Error("_update is not implemented")},HashBase.prototype.digest=function(encoding){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var digest=this._digest();void 0!==encoding&&(digest=digest.toString(encoding)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return digest},HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")},module.exports=HashBase},function(module,exports,__webpack_require__){"use strict";(function(global,process){var pna=__webpack_require__(155);module.exports=Readable;var Duplex,isArray=__webpack_require__(242);Readable.ReadableState=ReadableState;__webpack_require__(106).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__(246),Buffer=__webpack_require__(16).Buffer,OurUint8Array=global.Uint8Array||function(){};var util=__webpack_require__(137);util.inherits=__webpack_require__(15);var debugUtil=__webpack_require__(393),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=__webpack_require__(394),destroyImpl=__webpack_require__(247);util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream){options=options||{};var isDuplex=stream instanceof(Duplex=Duplex||__webpack_require__(104));this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,readableHwm=options.readableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(readableHwm||0===readableHwm)?readableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(198).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__(104),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var er,state=stream._readableState;null===chunk?(state.reading=!1,function(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}(stream,state)):(skipChunkCheck||(er=function(state,chunk){var er;obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk"));var obj;return er}(state,chunk)),er?stream.emit("error",er):state.objectMode||chunk&&chunk.length>0?("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),addToFront?state.endEmitted?stream.emit("error",new Error("stream.unshift() after end event")):addChunk(stream,state,chunk,!0):state.ended?stream.emit("error",new Error("stream.push() after EOF")):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1))):addToFront||(state.reading=!1));return function(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}(state)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__(198).StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function(n){return n>=8388608?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?pna.nextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):ret=function(n,list,hasStrings){var ret;n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):ret=n===list.head.data.length?list.shift():hasStrings?function(n,list){var p=list.head,c=1,ret=p.data;n-=ret.length;for(;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}(n,list):function(n,list){var ret=Buffer.allocUnsafe(n),p=list.head,c=1;p.data.copy(ret),n-=p.data.length;for(;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}(n,list);return ret}(n,state.buffer,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,pna.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=!0,n=0):state.length-=n,0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain())}function onend(){debug("onend"),dest.end()}state.endEmitted?pna.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;var increasedAwaitDrain=!1;function ondata(chunk){debug("ondata"),increasedAwaitDrain=!1,!1!==dest.write(chunk)||increasedAwaitDrain||((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev)!1!==this._readableState.flowing&&this.resume();else if("readable"===ev){var state=this._readableState;state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,function(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,pna.nextTick(resume_,stream,state))}(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList}).call(this,__webpack_require__(54),__webpack_require__(76))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(106).EventEmitter},function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(155);function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):!err||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,err),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?(pna.nextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(module,exports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(104),util=__webpack_require__(137);function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return this.emit("error",new Error("write callback called multiple times"));ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"==typeof this._flush?this._flush((function(er,data){done(_this,er,data)})):done(this,null,null)}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}util.inherits=__webpack_require__(15),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2),_this2.emit("close")}))}},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),Hash=__webpack_require__(111),Buffer=__webpack_require__(16).Buffer,K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W=new Array(64);function Sha256(){this.init(),this._w=W,Hash.call(this,64,56)}function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}inherits(Sha256,Hash),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(M){for(var x,W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,f=0|this._f,g=0|this._g,h=0|this._h,i=0;i<16;++i)W[i]=M.readInt32BE(4*i);for(;i<64;++i)W[i]=0|(((x=W[i-2])>>>17|x<<15)^(x>>>19|x<<13)^x>>>10)+W[i-7]+gamma0(W[i-15])+W[i-16];for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0,T2=sigma0(a)+maj(a,b,c)|0;h=g,g=f,f=e,e=d+T1|0,d=c,c=b,b=a,a=T1+T2|0}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=h+this._h|0},Sha256.prototype._hash=function(){var H=Buffer.allocUnsafe(32);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H.writeInt32BE(this._h,28),H},module.exports=Sha256},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),Hash=__webpack_require__(111),Buffer=__webpack_require__(16).Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W=new Array(160);function Sha512(){this.init(),this._w=W,Hash.call(this,128,112)}function Ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25)}function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23)}function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^x>>>7}function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25)}function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^x>>>6}function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26)}function getCarry(a,b){return a>>>0<b>>>0?1:0}inherits(Sha512,Hash),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(M){for(var W=this._w,ah=0|this._ah,bh=0|this._bh,ch=0|this._ch,dh=0|this._dh,eh=0|this._eh,fh=0|this._fh,gh=0|this._gh,hh=0|this._hh,al=0|this._al,bl=0|this._bl,cl=0|this._cl,dl=0|this._dl,el=0|this._el,fl=0|this._fl,gl=0|this._gl,hl=0|this._hl,i=0;i<32;i+=2)W[i]=M.readInt32BE(4*i),W[i+1]=M.readInt32BE(4*i+4);for(;i<160;i+=2){var xh=W[i-30],xl=W[i-30+1],gamma0=Gamma0(xh,xl),gamma0l=Gamma0l(xl,xh),gamma1=Gamma1(xh=W[i-4],xl=W[i-4+1]),gamma1l=Gamma1l(xl,xh),Wi7h=W[i-14],Wi7l=W[i-14+1],Wi16h=W[i-32],Wi16l=W[i-32+1],Wil=gamma0l+Wi7l|0,Wih=gamma0+Wi7h+getCarry(Wil,gamma0l)|0;Wih=(Wih=Wih+gamma1+getCarry(Wil=Wil+gamma1l|0,gamma1l)|0)+Wi16h+getCarry(Wil=Wil+Wi16l|0,Wi16l)|0,W[i]=Wih,W[i+1]=Wil}for(var j=0;j<160;j+=2){Wih=W[j],Wil=W[j+1];var majh=maj(ah,bh,ch),majl=maj(al,bl,cl),sigma0h=sigma0(ah,al),sigma0l=sigma0(al,ah),sigma1h=sigma1(eh,el),sigma1l=sigma1(el,eh),Kih=K[j],Kil=K[j+1],chh=Ch(eh,fh,gh),chl=Ch(el,fl,gl),t1l=hl+sigma1l|0,t1h=hh+sigma1h+getCarry(t1l,hl)|0;t1h=(t1h=(t1h=t1h+chh+getCarry(t1l=t1l+chl|0,chl)|0)+Kih+getCarry(t1l=t1l+Kil|0,Kil)|0)+Wih+getCarry(t1l=t1l+Wil|0,Wil)|0;var t2l=sigma0l+majl|0,t2h=sigma0h+majh+getCarry(t2l,sigma0l)|0;hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,eh=dh+t1h+getCarry(el=dl+t1l|0,dl)|0,dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,ah=t1h+t2h+getCarry(al=t1l+t2l|0,t1l)|0}this._al=this._al+al|0,this._bl=this._bl+bl|0,this._cl=this._cl+cl|0,this._dl=this._dl+dl|0,this._el=this._el+el|0,this._fl=this._fl+fl|0,this._gl=this._gl+gl|0,this._hl=this._hl+hl|0,this._ah=this._ah+ah+getCarry(this._al,al)|0,this._bh=this._bh+bh+getCarry(this._bl,bl)|0,this._ch=this._ch+ch+getCarry(this._cl,cl)|0,this._dh=this._dh+dh+getCarry(this._dl,dl)|0,this._eh=this._eh+eh+getCarry(this._el,el)|0,this._fh=this._fh+fh+getCarry(this._fl,fl)|0,this._gh=this._gh+gh+getCarry(this._gl,gl)|0,this._hh=this._hh+hh+getCarry(this._hl,hl)|0},Sha512.prototype._hash=function(){var H=Buffer.allocUnsafe(64);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),writeInt64BE(this._gh,this._gl,48),writeInt64BE(this._hh,this._hl,56),H},module.exports=Sha512},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(15),Legacy=__webpack_require__(408),Base=__webpack_require__(102),Buffer=__webpack_require__(16).Buffer,md5=__webpack_require__(252),RIPEMD160=__webpack_require__(199),sha=__webpack_require__(200),ZEROS=Buffer.alloc(128);function Hmac(alg,key){Base.call(this,"digest"),"string"==typeof key&&(key=Buffer.from(key));var blocksize="sha512"===alg||"sha384"===alg?128:64;(this._alg=alg,this._key=key,key.length>blocksize)?key=("rmd160"===alg?new RIPEMD160:sha(alg)).update(key).digest():key.length<blocksize&&(key=Buffer.concat([key,ZEROS],blocksize));for(var ipad=this._ipad=Buffer.allocUnsafe(blocksize),opad=this._opad=Buffer.allocUnsafe(blocksize),i=0;i<blocksize;i++)ipad[i]=54^key[i],opad[i]=92^key[i];this._hash="rmd160"===alg?new RIPEMD160:sha(alg),this._hash.update(ipad)}inherits(Hmac,Base),Hmac.prototype._update=function(data){this._hash.update(data)},Hmac.prototype._final=function(){var h=this._hash.digest();return("rmd160"===this._alg?new RIPEMD160:sha(this._alg)).update(this._opad).update(h).digest()},module.exports=function(alg,key){return"rmd160"===(alg=alg.toLowerCase())||"ripemd160"===alg?new Hmac("rmd160",key):"md5"===alg?new Legacy(md5,key):new Hmac(alg,key)}},function(module,exports,__webpack_require__){var MD5=__webpack_require__(194);module.exports=function(buffer){return(new MD5).update(buffer).digest()}},function(module){module.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},function(module,exports,__webpack_require__){exports.pbkdf2=__webpack_require__(410),exports.pbkdf2Sync=__webpack_require__(257)},function(module,exports,__webpack_require__){(function(Buffer){var MAX_ALLOC=Math.pow(2,30)-1;function checkBuffer(buf,name){if("string"!=typeof buf&&!Buffer.isBuffer(buf))throw new TypeError(name+" must be a buffer or string")}module.exports=function(password,salt,iterations,keylen){if(checkBuffer(password,"Password"),checkBuffer(salt,"Salt"),"number"!=typeof iterations)throw new TypeError("Iterations not a number");if(iterations<0)throw new TypeError("Bad iterations");if("number"!=typeof keylen)throw new TypeError("Key length not a number");if(keylen<0||keylen>MAX_ALLOC||keylen!=keylen)throw new TypeError("Bad key length")}}).call(this,__webpack_require__(11).Buffer)},function(module,exports,__webpack_require__){(function(process){var defaultEncoding;process.browser?defaultEncoding="utf-8":defaultEncoding=parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";module.exports=defaultEncoding}).call(this,__webpack_require__(76))},function(module,exports,__webpack_require__){var md5=__webpack_require__(252),RIPEMD160=__webpack_require__(199),sha=__webpack_require__(200),checkParameters=__webpack_require__(255),defaultEncoding=__webpack_require__(256),Buffer=__webpack_require__(16).Buffer,ZEROS=Buffer.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac(alg,key,saltLen){var hash=function(alg){function shaFunc(data){return sha(alg).update(data).digest()}function rmd160Func(data){return(new RIPEMD160).update(data).digest()}return"rmd160"===alg||"ripemd160"===alg?rmd160Func:"md5"===alg?md5:shaFunc}(alg),blocksize="sha512"===alg||"sha384"===alg?128:64;key.length>blocksize?key=hash(key):key.length<blocksize&&(key=Buffer.concat([key,ZEROS],blocksize));for(var ipad=Buffer.allocUnsafe(blocksize+sizes[alg]),opad=Buffer.allocUnsafe(blocksize+sizes[alg]),i=0;i<blocksize;i++)ipad[i]=54^key[i],opad[i]=92^key[i];var ipad1=Buffer.allocUnsafe(blocksize+saltLen+4);ipad.copy(ipad1,0,0,blocksize),this.ipad1=ipad1,this.ipad2=ipad,this.opad=opad,this.alg=alg,this.blocksize=blocksize,this.hash=hash,this.size=sizes[alg]}Hmac.prototype.run=function(data,ipad){return data.copy(ipad,this.blocksize),this.hash(ipad).copy(this.opad,this.blocksize),this.hash(this.opad)},module.exports=function(password,salt,iterations,keylen,digest){checkParameters(password,salt,iterations,keylen),Buffer.isBuffer(password)||(password=Buffer.from(password,defaultEncoding)),Buffer.isBuffer(salt)||(salt=Buffer.from(salt,defaultEncoding));var hmac=new Hmac(digest=digest||"sha1",password,salt.length),DK=Buffer.allocUnsafe(keylen),block1=Buffer.allocUnsafe(salt.length+4);salt.copy(block1,0,0,salt.length);for(var destPos=0,hLen=sizes[digest],l=Math.ceil(keylen/hLen),i=1;i<=l;i++){block1.writeUInt32BE(i,salt.length);for(var T=hmac.run(block1,hmac.ipad1),U=T,j=1;j<iterations;j++){U=hmac.run(U,hmac.ipad2);for(var k=0;k<hLen;k++)T[k]^=U[k]}T.copy(DK,destPos),destPos+=hLen}return DK}},function(module,exports,__webpack_require__){var xor=__webpack_require__(138),Buffer=__webpack_require__(16).Buffer,incr32=__webpack_require__(259);function getBlock(self){var out=self._cipher.encryptBlockRaw(self._prev);return incr32(self._prev),out}exports.encrypt=function(self,chunk){var chunkNum=Math.ceil(chunk.length/16),start=self._cache.length;self._cache=Buffer.concat([self._cache,Buffer.allocUnsafe(16*chunkNum)]);for(var i=0;i<chunkNum;i++){var out=getBlock(self),offset=start+16*i;self._cache.writeUInt32BE(out[0],offset+0),self._cache.writeUInt32BE(out[1],offset+4),self._cache.writeUInt32BE(out[2],offset+8),self._cache.writeUInt32BE(out[3],offset+12)}var pad=self._cache.slice(0,chunk.length);return self._cache=self._cache.slice(chunk.length),xor(chunk,pad)}},function(module,exports){module.exports=function(iv){for(var item,len=iv.length;len--;){if(255!==(item=iv.readUInt8(len))){item++,iv.writeUInt8(item,len);break}iv.writeUInt8(0,len)}}},function(module){module.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},function(module,exports,__webpack_require__){var aes=__webpack_require__(156),Buffer=__webpack_require__(16).Buffer,Transform=__webpack_require__(102),inherits=__webpack_require__(15),GHASH=__webpack_require__(425),xor=__webpack_require__(138),incr32=__webpack_require__(259);function StreamCipher(mode,key,iv,decrypt){Transform.call(this);var h=Buffer.alloc(4,0);this._cipher=new aes.AES(key);var ck=this._cipher.encryptBlock(h);this._ghash=new GHASH(ck),iv=function(self,iv,ck){if(12===iv.length)return self._finID=Buffer.concat([iv,Buffer.from([0,0,0,1])]),Buffer.concat([iv,Buffer.from([0,0,0,2])]);var ghash=new GHASH(ck),len=iv.length,toPad=len%16;ghash.update(iv),toPad&&(toPad=16-toPad,ghash.update(Buffer.alloc(toPad,0))),ghash.update(Buffer.alloc(8,0));var ivBits=8*len,tail=Buffer.alloc(8);tail.writeUIntBE(ivBits,0,8),ghash.update(tail),self._finID=ghash.state;var out=Buffer.from(self._finID);return incr32(out),out}(this,iv,ck),this._prev=Buffer.from(iv),this._cache=Buffer.allocUnsafe(0),this._secCache=Buffer.allocUnsafe(0),this._decrypt=decrypt,this._alen=0,this._len=0,this._mode=mode,this._authTag=null,this._called=!1}inherits(StreamCipher,Transform),StreamCipher.prototype._update=function(chunk){if(!this._called&&this._alen){var rump=16-this._alen%16;rump<16&&(rump=Buffer.alloc(rump,0),this._ghash.update(rump))}this._called=!0;var out=this._mode.encrypt(this,chunk);return this._decrypt?this._ghash.update(chunk):this._ghash.update(out),this._len+=chunk.length,out},StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var tag=xor(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(a,b){var out=0;a.length!==b.length&&out++;for(var len=Math.min(a.length,b.length),i=0;i<len;++i)out+=a[i]^b[i];return out}(tag,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=tag,this._cipher.scrub()},StreamCipher.prototype.getAuthTag=function(){if(this._decrypt||!Buffer.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},StreamCipher.prototype.setAuthTag=function(tag){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=tag},StreamCipher.prototype.setAAD=function(buf){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(buf),this._alen+=buf.length},module.exports=StreamCipher},function(module,exports,__webpack_require__){var aes=__webpack_require__(156),Buffer=__webpack_require__(16).Buffer,Transform=__webpack_require__(102);function StreamCipher(mode,key,iv,decrypt){Transform.call(this),this._cipher=new aes.AES(key),this._prev=Buffer.from(iv),this._cache=Buffer.allocUnsafe(0),this._secCache=Buffer.allocUnsafe(0),this._decrypt=decrypt,this._mode=mode}__webpack_require__(15)(StreamCipher,Transform),StreamCipher.prototype._update=function(chunk){return this._mode.encrypt(this,chunk,this._decrypt)},StreamCipher.prototype._final=function(){this._cipher.scrub()},module.exports=StreamCipher},function(module,exports,__webpack_require__){var randomBytes=__webpack_require__(110);module.exports=findPrime,findPrime.simpleSieve=simpleSieve,findPrime.fermatTest=fermatTest;var BN=__webpack_require__(38),TWENTYFOUR=new BN(24),millerRabin=new(__webpack_require__(264)),ONE=new BN(1),TWO=new BN(2),FIVE=new BN(5),TEN=(new BN(16),new BN(8),new BN(10)),THREE=new BN(3),ELEVEN=(new BN(7),new BN(11)),FOUR=new BN(4),primes=(new BN(12),null);function _getPrimes(){if(null!==primes)return primes;var res=[];res[0]=2;for(var i=1,k=3;k<1048576;k+=2){for(var sqrt=Math.ceil(Math.sqrt(k)),j=0;j<i&&res[j]<=sqrt&&k%res[j]!=0;j++);i!==j&&res[j]<=sqrt||(res[i++]=k)}return primes=res,res}function simpleSieve(p){for(var primes=_getPrimes(),i=0;i<primes.length;i++)if(0===p.modn(primes[i]))return 0===p.cmpn(primes[i]);return!0}function fermatTest(p){var red=BN.mont(p);return 0===TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1)}function findPrime(bits,gen){if(bits<16)return new BN(2===gen||5===gen?[140,123]:[140,39]);var num,n2;for(gen=new BN(gen);;){for(num=new BN(randomBytes(Math.ceil(bits/8)));num.bitLength()>bits;)num.ishrn(1);if(num.isEven()&&num.iadd(ONE),num.testn(1)||num.iadd(TWO),gen.cmp(TWO)){if(!gen.cmp(FIVE))for(;num.mod(TEN).cmp(THREE);)num.iadd(FOUR)}else for(;num.mod(TWENTYFOUR).cmp(ELEVEN);)num.iadd(FOUR);if(simpleSieve(n2=num.shrn(1))&&simpleSieve(num)&&fermatTest(n2)&&fermatTest(num)&&millerRabin.test(n2)&&millerRabin.test(num))return num}}},function(module,exports,__webpack_require__){var bn=__webpack_require__(38),brorand=__webpack_require__(265);function MillerRabin(rand){this.rand=rand||new brorand.Rand}module.exports=MillerRabin,MillerRabin.create=function(rand){return new MillerRabin(rand)},MillerRabin.prototype._randbelow=function(n){var len=n.bitLength(),min_bytes=Math.ceil(len/8);do{var a=new bn(this.rand.generate(min_bytes))}while(a.cmp(n)>=0);return a},MillerRabin.prototype._randrange=function(start,stop){var size=stop.sub(start);return start.add(this._randbelow(size))},MillerRabin.prototype.test=function(n,k,cb){var len=n.bitLength(),red=bn.mont(n),rone=new bn(1).toRed(red);k||(k=Math.max(1,len/48|0));for(var n1=n.subn(1),s=0;!n1.testn(s);s++);for(var d=n.shrn(s),rn1=n1.toRed(red);k>0;k--){var a=this._randrange(new bn(2),n1);cb&&cb(a);var x=a.toRed(red).redPow(d);if(0!==x.cmp(rone)&&0!==x.cmp(rn1)){for(var i=1;i<s;i++){if(0===(x=x.redSqr()).cmp(rone))return!1;if(0===x.cmp(rn1))break}if(i===s)return!1}}return!0},MillerRabin.prototype.getDivisor=function(n,k){var len=n.bitLength(),red=bn.mont(n),rone=new bn(1).toRed(red);k||(k=Math.max(1,len/48|0));for(var n1=n.subn(1),s=0;!n1.testn(s);s++);for(var d=n.shrn(s),rn1=n1.toRed(red);k>0;k--){var a=this._randrange(new bn(2),n1),g=n.gcd(a);if(0!==g.cmpn(1))return g;var x=a.toRed(red).redPow(d);if(0!==x.cmp(rone)&&0!==x.cmp(rn1)){for(var i=1;i<s;i++){if(0===(x=x.redSqr()).cmp(rone))return x.fromRed().subn(1).gcd(n);if(0===x.cmp(rn1))break}if(i===s)return(x=x.redSqr()).fromRed().subn(1).gcd(n)}}return!1}},function(module,exports,__webpack_require__){var r;function Rand(rand){this.rand=rand}if(module.exports=function(len){return r||(r=new Rand(null)),r.generate(len)},module.exports.Rand=Rand,Rand.prototype.generate=function(len){return this._rand(len)},Rand.prototype._rand=function(n){if(this.rand.getBytes)return this.rand.getBytes(n);for(var res=new Uint8Array(n),i=0;i<res.length;i++)res[i]=this.rand.getByte();return res},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(n){var arr=new Uint8Array(n);return self.crypto.getRandomValues(arr),arr}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(n){var arr=new Uint8Array(n);return self.msCrypto.getRandomValues(arr),arr}:"object"==typeof window&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto=__webpack_require__(430);if("function"!=typeof crypto.randomBytes)throw new Error("Not supported");Rand.prototype._rand=function(n){return crypto.randomBytes(n)}}catch(e){}},function(module,exports,__webpack_require__){"use strict";var utils=exports;function zero2(word){return 1===word.length?"0"+word:word}function toHex(msg){for(var res="",i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}utils.toArray=function(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if("string"!=typeof msg){for(var i=0;i<msg.length;i++)res[i]=0|msg[i];return res}if("hex"===enc){(msg=msg.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(msg="0"+msg);for(i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}else for(i=0;i<msg.length;i++){var c=msg.charCodeAt(i),hi=c>>8,lo=255&c;hi?res.push(hi,lo):res.push(lo)}return res},utils.zero2=zero2,utils.toHex=toHex,utils.encode=function(arr,enc){return"hex"===enc?toHex(arr):arr}},function(module,exports,__webpack_require__){"use strict";var rotr32=__webpack_require__(85).rotr32;function ch32(x,y,z){return x&y^~x&z}function maj32(x,y,z){return x&y^x&z^y&z}function p32(x,y,z){return x^y^z}exports.ft_1=function(s,x,y,z){return 0===s?ch32(x,y,z):1===s||3===s?p32(x,y,z):2===s?maj32(x,y,z):void 0},exports.ch32=ch32,exports.maj32=maj32,exports.p32=p32,exports.s0_256=function(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22)},exports.s1_256=function(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25)},exports.g0_256=function(x){return rotr32(x,7)^rotr32(x,18)^x>>>3},exports.g1_256=function(x){return rotr32(x,17)^rotr32(x,19)^x>>>10}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(85),common=__webpack_require__(140),shaCommon=__webpack_require__(267),assert=__webpack_require__(72),sum32=utils.sum32,sum32_4=utils.sum32_4,sum32_5=utils.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash=common.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;BlockHash.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils.inherits(SHA256,BlockHash),module.exports=SHA256,SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function(msg,start){for(var W=this.W,i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0],b=this.h[1],c=this.h[2],d=this.h[3],e=this.h[4],f=this.h[5],g=this.h[6],h=this.h[7];for(assert(this.k.length===W.length),i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]),T2=sum32(s0_256(a),maj32(a,b,c));h=g,g=f,f=e,e=sum32(d,T1),d=c,c=b,b=a,a=sum32(T1,T2)}this.h[0]=sum32(this.h[0],a),this.h[1]=sum32(this.h[1],b),this.h[2]=sum32(this.h[2],c),this.h[3]=sum32(this.h[3],d),this.h[4]=sum32(this.h[4],e),this.h[5]=sum32(this.h[5],f),this.h[6]=sum32(this.h[6],g),this.h[7]=sum32(this.h[7],h)},SHA256.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(85),common=__webpack_require__(140),assert=__webpack_require__(72),rotr64_hi=utils.rotr64_hi,rotr64_lo=utils.rotr64_lo,shr64_hi=utils.shr64_hi,shr64_lo=utils.shr64_lo,sum64=utils.sum64,sum64_hi=utils.sum64_hi,sum64_lo=utils.sum64_lo,sum64_4_hi=utils.sum64_4_hi,sum64_4_lo=utils.sum64_4_lo,sum64_5_hi=utils.sum64_5_hi,sum64_5_lo=utils.sum64_5_lo,BlockHash=common.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512(){if(!(this instanceof SHA512))return new SHA512;BlockHash.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}function ch64_hi(xh,xl,yh,yl,zh){var r=xh&yh^~xh&zh;return r<0&&(r+=4294967296),r}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;return r<0&&(r+=4294967296),r}function maj64_hi(xh,xl,yh,yl,zh){var r=xh&yh^xh&zh^yh&zh;return r<0&&(r+=4294967296),r}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;return r<0&&(r+=4294967296),r}function s0_512_hi(xh,xl){var r=rotr64_hi(xh,xl,28)^rotr64_hi(xl,xh,2)^rotr64_hi(xl,xh,7);return r<0&&(r+=4294967296),r}function s0_512_lo(xh,xl){var r=rotr64_lo(xh,xl,28)^rotr64_lo(xl,xh,2)^rotr64_lo(xl,xh,7);return r<0&&(r+=4294967296),r}function s1_512_hi(xh,xl){var r=rotr64_hi(xh,xl,14)^rotr64_hi(xh,xl,18)^rotr64_hi(xl,xh,9);return r<0&&(r+=4294967296),r}function s1_512_lo(xh,xl){var r=rotr64_lo(xh,xl,14)^rotr64_lo(xh,xl,18)^rotr64_lo(xl,xh,9);return r<0&&(r+=4294967296),r}function g0_512_hi(xh,xl){var r=rotr64_hi(xh,xl,1)^rotr64_hi(xh,xl,8)^shr64_hi(xh,xl,7);return r<0&&(r+=4294967296),r}function g0_512_lo(xh,xl){var r=rotr64_lo(xh,xl,1)^rotr64_lo(xh,xl,8)^shr64_lo(xh,xl,7);return r<0&&(r+=4294967296),r}function g1_512_hi(xh,xl){var r=rotr64_hi(xh,xl,19)^rotr64_hi(xl,xh,29)^shr64_hi(xh,xl,6);return r<0&&(r+=4294967296),r}function g1_512_lo(xh,xl){var r=rotr64_lo(xh,xl,19)^rotr64_lo(xl,xh,29)^shr64_lo(xh,xl,6);return r<0&&(r+=4294967296),r}utils.inherits(SHA512,BlockHash),module.exports=SHA512,SHA512.blockSize=1024,SHA512.outSize=512,SHA512.hmacStrength=192,SHA512.padLength=128,SHA512.prototype._prepareBlock=function(msg,start){for(var W=this.W,i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]),c0_lo=g1_512_lo(W[i-4],W[i-3]),c1_hi=W[i-14],c1_lo=W[i-13],c2_hi=g0_512_hi(W[i-30],W[i-29]),c2_lo=g0_512_lo(W[i-30],W[i-29]),c3_hi=W[i-32],c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo),W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo)}},SHA512.prototype._update=function(msg,start){this._prepareBlock(msg,start);var W=this.W,ah=this.h[0],al=this.h[1],bh=this.h[2],bl=this.h[3],ch=this.h[4],cl=this.h[5],dh=this.h[6],dl=this.h[7],eh=this.h[8],el=this.h[9],fh=this.h[10],fl=this.h[11],gh=this.h[12],gl=this.h[13],hh=this.h[14],hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh,c0_lo=hl,c1_hi=s1_512_hi(eh,el),c1_lo=s1_512_lo(eh,el),c2_hi=ch64_hi(eh,el,fh,fl,gh),c2_lo=ch64_lo(eh,el,fh,fl,gh,gl),c3_hi=this.k[i],c3_lo=this.k[i+1],c4_hi=W[i],c4_lo=W[i+1],T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo),T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al),c0_lo=s0_512_lo(ah,al),c1_hi=maj64_hi(ah,al,bh,bl,ch),c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo),T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,eh=sum64_hi(dh,dl,T1_hi,T1_lo),el=sum64_lo(dl,dl,T1_hi,T1_lo),dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo),al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo)}sum64(this.h,0,ah,al),sum64(this.h,2,bh,bl),sum64(this.h,4,ch,cl),sum64(this.h,6,dh,dl),sum64(this.h,8,eh,el),sum64(this.h,10,fh,fl),sum64(this.h,12,gh,gl),sum64(this.h,14,hh,hl)},SHA512.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")}},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),Reporter=__webpack_require__(142).Reporter,Buffer=__webpack_require__(11).Buffer;function DecoderBuffer(base,options){Reporter.call(this,options),Buffer.isBuffer(base)?(this.base=base,this.offset=0,this.length=base.length):this.error("Input not Buffer")}function EncoderBuffer(value,reporter){if(Array.isArray(value))this.length=0,this.value=value.map((function(item){return item instanceof EncoderBuffer||(item=new EncoderBuffer(item,reporter)),this.length+=item.length,item}),this);else if("number"==typeof value){if(!(0<=value&&value<=255))return reporter.error("non-byte EncoderBuffer value");this.value=value,this.length=1}else if("string"==typeof value)this.value=value,this.length=Buffer.byteLength(value);else{if(!Buffer.isBuffer(value))return reporter.error("Unsupported type: "+typeof value);this.value=value,this.length=value.length}}inherits(DecoderBuffer,Reporter),exports.DecoderBuffer=DecoderBuffer,DecoderBuffer.prototype.save=function(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)}},DecoderBuffer.prototype.restore=function(save){var res=new DecoderBuffer(this.base);return res.offset=save.offset,res.length=this.offset,this.offset=save.offset,Reporter.prototype.restore.call(this,save.reporter),res},DecoderBuffer.prototype.isEmpty=function(){return this.offset===this.length},DecoderBuffer.prototype.readUInt8=function(fail){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(fail||"DecoderBuffer overrun")},DecoderBuffer.prototype.skip=function(bytes,fail){if(!(this.offset+bytes<=this.length))return this.error(fail||"DecoderBuffer overrun");var res=new DecoderBuffer(this.base);return res._reporterState=this._reporterState,res.offset=this.offset,res.length=this.offset+bytes,this.offset+=bytes,res},DecoderBuffer.prototype.raw=function(save){return this.base.slice(save?save.offset:this.offset,this.length)},exports.EncoderBuffer=EncoderBuffer,EncoderBuffer.prototype.join=function(out,offset){return out||(out=new Buffer(this.length)),offset||(offset=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(item){item.join(out,offset),offset+=item.length})):("number"==typeof this.value?out[offset]=this.value:"string"==typeof this.value?out.write(this.value,offset):Buffer.isBuffer(this.value)&&this.value.copy(out,offset),offset+=this.length)),out}},function(module,exports,__webpack_require__){var constants=exports;constants._reverse=function(map){var res={};return Object.keys(map).forEach((function(key){(0|key)==key&&(key|=0);var value=map[key];res[value]=key})),res},constants.der=__webpack_require__(462)},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),asn1=__webpack_require__(141),base=asn1.base,bignum=asn1.bignum,der=asn1.constants.der;function DERDecoder(entity){this.enc="der",this.name=entity.name,this.entity=entity,this.tree=new DERNode,this.tree._init(entity.body)}function DERNode(parent){base.Node.call(this,"der",parent)}function derDecodeTag(buf,fail){var tag=buf.readUInt8(fail);if(buf.isError(tag))return tag;var cls=der.tagClass[tag>>6],primitive=0==(32&tag);if(31==(31&tag)){var oct=tag;for(tag=0;128==(128&oct);){if(oct=buf.readUInt8(fail),buf.isError(oct))return oct;tag<<=7,tag|=127&oct}}else tag&=31;return{cls:cls,primitive:primitive,tag:tag,tagStr:der.tag[tag]}}function derDecodeLen(buf,primitive,fail){var len=buf.readUInt8(fail);if(buf.isError(len))return len;if(!primitive&&128===len)return null;if(0==(128&len))return len;var num=127&len;if(num>4)return buf.error("length octect is too long");len=0;for(var i=0;i<num;i++){len<<=8;var j=buf.readUInt8(fail);if(buf.isError(j))return j;len|=j}return len}module.exports=DERDecoder,DERDecoder.prototype.decode=function(data,options){return data instanceof base.DecoderBuffer||(data=new base.DecoderBuffer(data,options)),this.tree._decode(data,options)},inherits(DERNode,base.Node),DERNode.prototype._peekTag=function(buffer,tag,any){if(buffer.isEmpty())return!1;var state=buffer.save(),decodedTag=derDecodeTag(buffer,'Failed to peek tag: "'+tag+'"');return buffer.isError(decodedTag)?decodedTag:(buffer.restore(state),decodedTag.tag===tag||decodedTag.tagStr===tag||decodedTag.tagStr+"of"===tag||any)},DERNode.prototype._decodeTag=function(buffer,tag,any){var decodedTag=derDecodeTag(buffer,'Failed to decode tag of "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;var len=derDecodeLen(buffer,decodedTag.primitive,'Failed to get length of "'+tag+'"');if(buffer.isError(len))return len;if(!any&&decodedTag.tag!==tag&&decodedTag.tagStr!==tag&&decodedTag.tagStr+"of"!==tag)return buffer.error('Failed to match tag: "'+tag+'"');if(decodedTag.primitive||null!==len)return buffer.skip(len,'Failed to match body of: "'+tag+'"');var state=buffer.save(),res=this._skipUntilEnd(buffer,'Failed to skip indefinite length body: "'+this.tag+'"');return buffer.isError(res)?res:(len=buffer.offset-state.offset,buffer.restore(state),buffer.skip(len,'Failed to match body of: "'+tag+'"'))},DERNode.prototype._skipUntilEnd=function(buffer,fail){for(;;){var tag=derDecodeTag(buffer,fail);if(buffer.isError(tag))return tag;var res,len=derDecodeLen(buffer,tag.primitive,fail);if(buffer.isError(len))return len;if(res=tag.primitive||null!==len?buffer.skip(len):this._skipUntilEnd(buffer,fail),buffer.isError(res))return res;if("end"===tag.tagStr)break}},DERNode.prototype._decodeList=function(buffer,tag,decoder,options){for(var result=[];!buffer.isEmpty();){var possibleEnd=this._peekTag(buffer,"end");if(buffer.isError(possibleEnd))return possibleEnd;var res=decoder.decode(buffer,"der",options);if(buffer.isError(res)&&possibleEnd)break;result.push(res)}return result},DERNode.prototype._decodeStr=function(buffer,tag){if("bitstr"===tag){var unused=buffer.readUInt8();return buffer.isError(unused)?unused:{unused:unused,data:buffer.raw()}}if("bmpstr"===tag){var raw=buffer.raw();if(raw.length%2==1)return buffer.error("Decoding of string type: bmpstr length mismatch");for(var str="",i=0;i<raw.length/2;i++)str+=String.fromCharCode(raw.readUInt16BE(2*i));return str}if("numstr"===tag){var numstr=buffer.raw().toString("ascii");return this._isNumstr(numstr)?numstr:buffer.error("Decoding of string type: numstr unsupported characters")}if("octstr"===tag)return buffer.raw();if("objDesc"===tag)return buffer.raw();if("printstr"===tag){var printstr=buffer.raw().toString("ascii");return this._isPrintstr(printstr)?printstr:buffer.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(tag)?buffer.raw().toString():buffer.error("Decoding of string type: "+tag+" unsupported")},DERNode.prototype._decodeObjid=function(buffer,values,relative){for(var result,identifiers=[],ident=0;!buffer.isEmpty();){var subident=buffer.readUInt8();ident<<=7,ident|=127&subident,0==(128&subident)&&(identifiers.push(ident),ident=0)}128&subident&&identifiers.push(ident);var first=identifiers[0]/40|0,second=identifiers[0]%40;if(result=relative?identifiers:[first,second].concat(identifiers.slice(1)),values){var tmp=values[result.join(" ")];void 0===tmp&&(tmp=values[result.join(".")]),void 0!==tmp&&(result=tmp)}return result},DERNode.prototype._decodeTime=function(buffer,tag){var str=buffer.raw().toString();if("gentime"===tag)var year=0|str.slice(0,4),mon=0|str.slice(4,6),day=0|str.slice(6,8),hour=0|str.slice(8,10),min=0|str.slice(10,12),sec=0|str.slice(12,14);else{if("utctime"!==tag)return buffer.error("Decoding "+tag+" time is not supported yet");year=0|str.slice(0,2),mon=0|str.slice(2,4),day=0|str.slice(4,6),hour=0|str.slice(6,8),min=0|str.slice(8,10),sec=0|str.slice(10,12);year=year<70?2e3+year:1900+year}return Date.UTC(year,mon-1,day,hour,min,sec,0)},DERNode.prototype._decodeNull=function(buffer){return null},DERNode.prototype._decodeBool=function(buffer){var res=buffer.readUInt8();return buffer.isError(res)?res:0!==res},DERNode.prototype._decodeInt=function(buffer,values){var raw=buffer.raw(),res=new bignum(raw);return values&&(res=values[res.toString(10)]||res),res},DERNode.prototype._use=function(entity,obj){return"function"==typeof entity&&(entity=entity(obj)),entity._getDecoder("der").tree}},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),Buffer=__webpack_require__(11).Buffer,asn1=__webpack_require__(141),base=asn1.base,der=asn1.constants.der;function DEREncoder(entity){this.enc="der",this.name=entity.name,this.entity=entity,this.tree=new DERNode,this.tree._init(entity.body)}function DERNode(parent){base.Node.call(this,"der",parent)}function two(num){return num<10?"0"+num:num}module.exports=DEREncoder,DEREncoder.prototype.encode=function(data,reporter){return this.tree._encode(data,reporter).join()},inherits(DERNode,base.Node),DERNode.prototype._encodeComposite=function(tag,primitive,cls,content){var header,encodedTag=function(tag,primitive,cls,reporter){var res;"seqof"===tag?tag="seq":"setof"===tag&&(tag="set");if(der.tagByName.hasOwnProperty(tag))res=der.tagByName[tag];else{if("number"!=typeof tag||(0|tag)!==tag)return reporter.error("Unknown tag: "+tag);res=tag}if(res>=31)return reporter.error("Multi-octet tag encoding unsupported");primitive||(res|=32);return res|=der.tagClassByName[cls||"universal"]<<6}(tag,primitive,cls,this.reporter);if(content.length<128)return(header=new Buffer(2))[0]=encodedTag,header[1]=content.length,this._createEncoderBuffer([header,content]);for(var lenOctets=1,i=content.length;i>=256;i>>=8)lenOctets++;(header=new Buffer(2+lenOctets))[0]=encodedTag,header[1]=128|lenOctets;i=1+lenOctets;for(var j=content.length;j>0;i--,j>>=8)header[i]=255&j;return this._createEncoderBuffer([header,content])},DERNode.prototype._encodeStr=function(str,tag){if("bitstr"===tag)return this._createEncoderBuffer([0|str.unused,str.data]);if("bmpstr"===tag){for(var buf=new Buffer(2*str.length),i=0;i<str.length;i++)buf.writeUInt16BE(str.charCodeAt(i),2*i);return this._createEncoderBuffer(buf)}return"numstr"===tag?this._isNumstr(str)?this._createEncoderBuffer(str):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===tag?this._isPrintstr(str)?this._createEncoderBuffer(str):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(tag)||"objDesc"===tag?this._createEncoderBuffer(str):this.reporter.error("Encoding of string type: "+tag+" unsupported")},DERNode.prototype._encodeObjid=function(id,values,relative){if("string"==typeof id){if(!values)return this.reporter.error("string objid given, but no values map found");if(!values.hasOwnProperty(id))return this.reporter.error("objid not found in values map");id=values[id].split(/[\s\.]+/g);for(var i=0;i<id.length;i++)id[i]|=0}else if(Array.isArray(id)){id=id.slice();for(i=0;i<id.length;i++)id[i]|=0}if(!Array.isArray(id))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(id));if(!relative){if(id[1]>=40)return this.reporter.error("Second objid identifier OOB");id.splice(0,2,40*id[0]+id[1])}var size=0;for(i=0;i<id.length;i++){var ident=id[i];for(size++;ident>=128;ident>>=7)size++}var objid=new Buffer(size),offset=objid.length-1;for(i=id.length-1;i>=0;i--){ident=id[i];for(objid[offset--]=127&ident;(ident>>=7)>0;)objid[offset--]=128|127&ident}return this._createEncoderBuffer(objid)},DERNode.prototype._encodeTime=function(time,tag){var str,date=new Date(time);return"gentime"===tag?str=[two(date.getFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),"Z"].join(""):"utctime"===tag?str=[two(date.getFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+tag+" time is not supported yet"),this._encodeStr(str,"octstr")},DERNode.prototype._encodeNull=function(){return this._createEncoderBuffer("")},DERNode.prototype._encodeInt=function(num,values){if("string"==typeof num){if(!values)return this.reporter.error("String int or enum given, but no values map");if(!values.hasOwnProperty(num))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(num));num=values[num]}if("number"!=typeof num&&!Buffer.isBuffer(num)){var numArray=num.toArray();!num.sign&&128&numArray[0]&&numArray.unshift(0),num=new Buffer(numArray)}if(Buffer.isBuffer(num)){var size=num.length;0===num.length&&size++;var out=new Buffer(size);return num.copy(out),0===num.length&&(out[0]=0),this._createEncoderBuffer(out)}if(num<128)return this._createEncoderBuffer(num);if(num<256)return this._createEncoderBuffer([0,num]);size=1;for(var i=num;i>=256;i>>=8)size++;for(i=(out=new Array(size)).length-1;i>=0;i--)out[i]=255&num,num>>=8;return 128&out[0]&&out.unshift(0),this._createEncoderBuffer(new Buffer(out))},DERNode.prototype._encodeBool=function(value){return this._createEncoderBuffer(value?255:0)},DERNode.prototype._use=function(entity,obj){return"function"==typeof entity&&(entity=entity(obj)),entity._getEncoder("der").tree},DERNode.prototype._skipDefault=function(dataBuffer,reporter,parent){var i,state=this._baseState;if(null===state.default)return!1;var data=dataBuffer.join();if(void 0===state.defaultBuffer&&(state.defaultBuffer=this._encodeValue(state.default,reporter,parent).join()),data.length!==state.defaultBuffer.length)return!1;for(i=0;i<data.length;i++)if(data[i]!==state.defaultBuffer[i])return!1;return!0}},function(module){module.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},function(module,exports,__webpack_require__){var createHash=__webpack_require__(136),Buffer=__webpack_require__(16).Buffer;function i2ops(c){var out=Buffer.allocUnsafe(4);return out.writeUInt32BE(c,0),out}module.exports=function(seed,len){for(var c,t=Buffer.alloc(0),i=0;t.length<len;)c=i2ops(i++),t=Buffer.concat([t,createHash("sha1").update(seed).update(c).digest()]);return t.slice(0,len)}},function(module,exports){module.exports=function(a,b){for(var len=a.length,i=-1;++i<len;)a[i]^=b[i];return a}},function(module,exports,__webpack_require__){var BN=__webpack_require__(38),Buffer=__webpack_require__(16).Buffer;module.exports=function(paddedMsg,key){return Buffer.from(paddedMsg.toRed(BN.mont(key.modulus)).redPow(new BN(key.publicExponent)).fromRed().toArray())}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=function(e,n){return n=n||{},new Promise((function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+","+t:t})),t(a())},s.onerror=r,s.withCredentials="include"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var isEmptyData_1=__webpack_require__(280),constants_1=__webpack_require__(281),util_utf8_browser_1=__webpack_require__(21),util_locate_window_1=__webpack_require__(207),Sha256=function(){function Sha256(secret){secret?(this.operation=function(secret){return new Promise((function(resolve,reject){var keyOperation=util_locate_window_1.locateWindow().msCrypto.subtle.importKey("raw",toArrayBufferView(secret),constants_1.SHA_256_HMAC_ALGO,!1,["sign"]);keyOperation.oncomplete=function(){keyOperation.result&&resolve(keyOperation.result),reject("ImportKey completed without importing key.")},keyOperation.onerror=function(){reject("ImportKey failed to import key.")}}))}(secret).then((function(keyData){return util_locate_window_1.locateWindow().msCrypto.subtle.sign(constants_1.SHA_256_HMAC_ALGO,keyData)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(util_locate_window_1.locateWindow().msCrypto.subtle.digest("SHA-256"))}return Sha256.prototype.update=function(toHash){var _this=this;isEmptyData_1.isEmptyData(toHash)||(this.operation=this.operation.then((function(operation){return operation.onerror=function(){_this.operation=Promise.reject(new Error("Error encountered updating hash"))},operation.process(toArrayBufferView(toHash)),operation})),this.operation.catch((function(){})))},Sha256.prototype.digest=function(){return this.operation.then((function(operation){return new Promise((function(resolve,reject){operation.onerror=function(){reject("Error encountered finalizing hash")},operation.oncomplete=function(){operation.result&&resolve(new Uint8Array(operation.result)),reject("Error encountered finalizing hash")},operation.finish()}))}))},Sha256}();function toArrayBufferView(data){return"string"==typeof data?util_utf8_browser_1.fromUtf8(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data)}exports.Sha256=Sha256},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmptyData=void 0,exports.isEmptyData=function(data){return"string"==typeof data?0===data.length:0===data.byteLength}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EMPTY_DATA_SHA_256=exports.SHA_256_HMAC_ALGO=exports.SHA_256_HASH=void 0,exports.SHA_256_HASH={name:"SHA-256"},exports.SHA_256_HMAC_ALGO={name:"HMAC",hash:exports.SHA_256_HASH},exports.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var util_utf8_browser_1=__webpack_require__(21),isEmptyData_1=__webpack_require__(280),constants_1=__webpack_require__(281),util_locate_window_1=__webpack_require__(207),Sha256=function(){function Sha256(secret){this.toHash=new Uint8Array(0),void 0!==secret&&(this.key=new Promise((function(resolve,reject){util_locate_window_1.locateWindow().crypto.subtle.importKey("raw",convertToBuffer(secret),constants_1.SHA_256_HMAC_ALGO,!1,["sign"]).then(resolve,reject)})),this.key.catch((function(){})))}return Sha256.prototype.update=function(data){if(!isEmptyData_1.isEmptyData(data)){var update=convertToBuffer(data),typedArray=new Uint8Array(this.toHash.byteLength+update.byteLength);typedArray.set(this.toHash,0),typedArray.set(update,this.toHash.byteLength),this.toHash=typedArray}},Sha256.prototype.digest=function(){var _this=this;return this.key?this.key.then((function(key){return util_locate_window_1.locateWindow().crypto.subtle.sign(constants_1.SHA_256_HMAC_ALGO,key,_this.toHash).then((function(data){return new Uint8Array(data)}))})):isEmptyData_1.isEmptyData(this.toHash)?Promise.resolve(constants_1.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return util_locate_window_1.locateWindow().crypto.subtle.digest(constants_1.SHA_256_HASH,_this.toHash)})).then((function(data){return Promise.resolve(new Uint8Array(data))}))},Sha256}();function convertToBuffer(data){return"string"==typeof data?util_utf8_browser_1.fromUtf8(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data)}exports.Sha256=Sha256},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_HASHABLE_LENGTH=exports.INIT=exports.KEY=exports.DIGEST_LENGTH=exports.BLOCK_SIZE=void 0,exports.BLOCK_SIZE=64,exports.DIGEST_LENGTH=32,exports.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),exports.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],exports.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__extends",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,"__assign",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,"__rest",(function(){return __rest})),__webpack_require__.d(__webpack_exports__,"__decorate",(function(){return __decorate})),__webpack_require__.d(__webpack_exports__,"__param",(function(){return __param})),__webpack_require__.d(__webpack_exports__,"__metadata",(function(){return __metadata})),__webpack_require__.d(__webpack_exports__,"__awaiter",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,"__generator",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,"__createBinding",(function(){return __createBinding})),__webpack_require__.d(__webpack_exports__,"__exportStar",(function(){return __exportStar})),__webpack_require__.d(__webpack_exports__,"__values",(function(){return __values})),__webpack_require__.d(__webpack_exports__,"__read",(function(){return __read})),__webpack_require__.d(__webpack_exports__,"__spread",(function(){return __spread})),__webpack_require__.d(__webpack_exports__,"__spreadArrays",(function(){return __spreadArrays})),__webpack_require__.d(__webpack_exports__,"__await",(function(){return __await})),__webpack_require__.d(__webpack_exports__,"__asyncGenerator",(function(){return __asyncGenerator})),__webpack_require__.d(__webpack_exports__,"__asyncDelegator",(function(){return __asyncDelegator})),__webpack_require__.d(__webpack_exports__,"__asyncValues",(function(){return __asyncValues})),__webpack_require__.d(__webpack_exports__,"__makeTemplateObject",(function(){return __makeTemplateObject})),__webpack_require__.d(__webpack_exports__,"__importStar",(function(){return __importStar})),__webpack_require__.d(__webpack_exports__,"__importDefault",(function(){return __importDefault})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Parser}));var logger=new(__webpack_require__(84).a)("Parser"),parseMobileHubConfig=function(config){var storageConfig,amplifyConfig={};if(config.aws_mobile_analytics_app_id){var Analytics={AWSPinpoint:{appId:config.aws_mobile_analytics_app_id,region:config.aws_mobile_analytics_app_region}};amplifyConfig.Analytics=Analytics}return(config.aws_cognito_identity_pool_id||config.aws_user_pools_id)&&(amplifyConfig.Auth={userPoolId:config.aws_user_pools_id,userPoolWebClientId:config.aws_user_pools_web_client_id,region:config.aws_cognito_region,identityPoolId:config.aws_cognito_identity_pool_id,identityPoolRegion:config.aws_cognito_region,mandatorySignIn:"enable"===config.aws_mandatory_sign_in}),storageConfig=config.aws_user_files_s3_bucket?{AWSS3:{bucket:config.aws_user_files_s3_bucket,region:config.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:config.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:config?config.Storage||config:{},amplifyConfig.Analytics=Object.assign({},amplifyConfig.Analytics,config.Analytics),amplifyConfig.Auth=Object.assign({},amplifyConfig.Auth,config.Auth),amplifyConfig.Storage=Object.assign({},storageConfig),logger.debug("parse config",config,"to amplifyconfig",amplifyConfig),amplifyConfig},Parser=function(){function Parser(){}return Parser.parseMobilehubConfig=parseMobileHubConfig,Parser}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Signer}));var _Logger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(84),_aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(219),_aws_sdk_util_hex_encoding__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(37),url__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(33),_Util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(326),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},logger=new _Logger__WEBPACK_IMPORTED_MODULE_0__.a("Signer"),encrypt=function(key,src){var hash=new _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_1__.Sha256(key);return hash.update(src),hash.digestSync()},hash=function(src){var arg=src||"",hash=new _aws_crypto_sha256_js__WEBPACK_IMPORTED_MODULE_1__.Sha256;return hash.update(arg),Object(_aws_sdk_util_hex_encoding__WEBPACK_IMPORTED_MODULE_2__.b)(hash.digestSync())},signed_headers=function(headers){return Object.keys(headers).map((function(key){return key.toLowerCase()})).sort().join(";")},canonical_request=function(request){var headers,query,url_info=Object(url__WEBPACK_IMPORTED_MODULE_3__.parse)(request.url);return[request.method||"/",encodeURIComponent(url_info.pathname).replace(/%2F/gi,"/"),(query=url_info.query,query&&0!==query.length?query.split("&").map((function(e){var key_val=e.split("=");if(1===key_val.length)return e;var reencoded_val=key_val[1].replace(/[!'()*]/g,(function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()}));return key_val[0]+"="+reencoded_val})).sort((function(a,b){var key_a=a.split("=")[0],key_b=b.split("=")[0];return key_a===key_b?a<b?-1:1:key_a<key_b?-1:1})).join("&"):""),(headers=request.headers,headers&&0!==Object.keys(headers).length?Object.keys(headers).map((function(key){return{key:key.toLowerCase(),value:headers[key]?headers[key].trim().replace(/\s+/g," "):""}})).sort((function(a,b){return a.key<b.key?-1:1})).map((function(item){return item.key+":"+item.value})).join("\n")+"\n":""),signed_headers(request.headers),hash(request.data)].join("\n")},parse_service_info=function(request){var parsed=(Object(url__WEBPACK_IMPORTED_MODULE_3__.parse)(request.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===parsed[1]&&(parsed=parsed.reverse()),{service:request.service||parsed[0],region:request.region||parsed[1]}},credential_scope=function(d_str,region,service){return[d_str,region,service,"aws4_request"].join("/")},string_to_sign=function(algorithm,canonical_request,dt_str,scope){return[algorithm,dt_str,scope,hash(canonical_request)].join("\n")},get_signing_key=function(secret_key,d_str,service_info){logger.debug(service_info);var k_date=encrypt("AWS4"+secret_key,d_str),k_region=encrypt(k_date,service_info.region),k_service=encrypt(k_region,service_info.service);return encrypt(k_service,"aws4_request")},get_signature=function(signing_key,str_to_sign){return Object(_aws_sdk_util_hex_encoding__WEBPACK_IMPORTED_MODULE_2__.b)(encrypt(signing_key,str_to_sign))},Signer=function(){function Signer(){}return Signer.sign=function(request,access_info,service_info){void 0===service_info&&(service_info=null),request.headers=request.headers||{};var dt_str=_Util__WEBPACK_IMPORTED_MODULE_4__.a.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),d_str=dt_str.substr(0,8),url_info=Object(url__WEBPACK_IMPORTED_MODULE_3__.parse)(request.url);request.headers.host=url_info.host,request.headers["x-amz-date"]=dt_str,access_info.session_token&&(request.headers["X-Amz-Security-Token"]=access_info.session_token);var request_str=canonical_request(request);logger.debug(request_str);var serviceInfo=service_info||parse_service_info(request),scope=credential_scope(d_str,serviceInfo.region,serviceInfo.service),str_to_sign=string_to_sign("AWS4-HMAC-SHA256",request_str,dt_str,scope),signing_key=get_signing_key(access_info.secret_key,d_str,serviceInfo),signature=get_signature(signing_key,str_to_sign),authorization_header=function(algorithm,access_key,scope,signed_headers,signature){return[algorithm+" Credential="+access_key+"/"+scope,"SignedHeaders="+signed_headers,"Signature="+signature].join(", ")}("AWS4-HMAC-SHA256",access_info.access_key,scope,signed_headers(request.headers),signature);return request.headers.Authorization=authorization_header,request},Signer.signUrl=function(urlOrRequest,accessInfo,serviceInfo,expiration){var urlToSign="object"==typeof urlOrRequest?urlOrRequest.url:urlOrRequest,method="object"==typeof urlOrRequest?urlOrRequest.method:"GET",body="object"==typeof urlOrRequest?urlOrRequest.body:void 0,now=_Util__WEBPACK_IMPORTED_MODULE_4__.a.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),today=now.substr(0,8),_a=Object(url__WEBPACK_IMPORTED_MODULE_3__.parse)(urlToSign,!0,!0),parsedUrl=(_a.search,__rest(_a,["search"])),signedHeaders={host:parsedUrl.host},_b=serviceInfo||parse_service_info({url:Object(url__WEBPACK_IMPORTED_MODULE_3__.format)(parsedUrl)}),region=_b.region,service=_b.service,credentialScope=credential_scope(today,region,service),sessionTokenRequired=accessInfo.session_token&&"iotdevicegateway"!==service,queryParams=__assign(__assign(__assign({"X-Amz-Algorithm":"AWS4-HMAC-SHA256","X-Amz-Credential":[accessInfo.access_key,credentialScope].join("/"),"X-Amz-Date":now.substr(0,16)},sessionTokenRequired?{"X-Amz-Security-Token":""+accessInfo.session_token}:{}),expiration?{"X-Amz-Expires":""+expiration}:{}),{"X-Amz-SignedHeaders":Object.keys(signedHeaders).join(",")}),canonicalRequest=canonical_request({method:method,url:Object(url__WEBPACK_IMPORTED_MODULE_3__.format)(__assign(__assign({},parsedUrl),{query:__assign(__assign({},parsedUrl.query),queryParams)})),headers:signedHeaders,data:body}),stringToSign=string_to_sign("AWS4-HMAC-SHA256",canonicalRequest,now,credentialScope),signing_key=get_signing_key(accessInfo.secret_key,today,{region:region,service:service}),signature=get_signature(signing_key,stringToSign),additionalQueryParams=__assign({"X-Amz-Signature":signature},accessInfo.session_token&&{"X-Amz-Security-Token":accessInfo.session_token});return Object(url__WEBPACK_IMPORTED_MODULE_3__.format)({protocol:parsedUrl.protocol,slashes:!0,hostname:parsedUrl.hostname,port:parsedUrl.port,pathname:parsedUrl.pathname,query:__assign(__assign(__assign({},parsedUrl.query),queryParams),additionalQueryParams)})},Signer}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BLOCK_SIZE=64,exports.DIGEST_LENGTH=32,exports.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),exports.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],exports.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(54))},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(143),isObject=__webpack_require__(290);module.exports=function(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}},function(module,exports){module.exports=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports){module.exports=function(value,other){return value===other||value!=value&&other!=other}},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(294),nativeKeys=__webpack_require__(531),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},function(module,exports){var objectProto=Object.prototype;module.exports=function(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},function(module,exports,__webpack_require__){var DataView=__webpack_require__(533),Map=__webpack_require__(210),Promise=__webpack_require__(534),Set=__webpack_require__(535),WeakMap=__webpack_require__(536),baseGetTag=__webpack_require__(143),toSource=__webpack_require__(291),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(537),isObjectLike=__webpack_require__(144),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(289),isLength=__webpack_require__(298);module.exports=function(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,exports){module.exports=function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(550),arraySome=__webpack_require__(553),cacheHas=__webpack_require__(554);module.exports=function(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ModelSortPredicateCreator}));var ModelSortPredicateCreator=function(){function ModelSortPredicateCreator(){}return ModelSortPredicateCreator.createPredicateBuilder=function(modelDefinition){var modelName=modelDefinition.name,fieldNames=new Set(Object.keys(modelDefinition.fields)),predicate=new Proxy({},{get:function(_target,propertyKey,receiver){var field=propertyKey;if(!fieldNames.has(field))throw new Error("Invalid field for model. field: "+field+", model: "+modelName);return function(sortDirection){return ModelSortPredicateCreator.sortPredicateGroupsMap.get(receiver).push({field:field,sortDirection:sortDirection}),receiver}}});return ModelSortPredicateCreator.sortPredicateGroupsMap.set(predicate,[]),predicate},ModelSortPredicateCreator.isValidPredicate=function(predicate){return ModelSortPredicateCreator.sortPredicateGroupsMap.has(predicate)},ModelSortPredicateCreator.getPredicates=function(predicate,throwOnInvalid){if(void 0===throwOnInvalid&&(throwOnInvalid=!0),throwOnInvalid&&!ModelSortPredicateCreator.isValidPredicate(predicate))throw new Error("The predicate is not valid");return ModelSortPredicateCreator.sortPredicateGroupsMap.get(predicate)},ModelSortPredicateCreator.createFromExisting=function(modelDefinition,existing){if(existing&&modelDefinition)return existing(ModelSortPredicateCreator.createPredicateBuilder(modelDefinition))},ModelSortPredicateCreator.sortPredicateGroupsMap=new WeakMap,ModelSortPredicateCreator}()},function(module,exports,__webpack_require__){module.exports=function(t){var _={};function n(o){if(_[o])return _[o].exports;var e=_[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=t,n.c=_,n.d=function(t,_,o){n.o(t,_)||Object.defineProperty(t,_,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,_){if(1&_&&(t=n(t)),8&_)return t;if(4&_&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&_&&"string"!=typeof t)for(var e in t)n.d(o,e,function(_){return t[_]}.bind(null,e));return o},n.n=function(t){var _=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(_,"a",_),_},n.o=function(t,_){return Object.prototype.hasOwnProperty.call(t,_)},n.p="",n(n.s=0)}([function(t,_,n){"use strict";function o(t){for(var n in t)_.hasOwnProperty(n)||(_[n]=t[n])}Object.defineProperty(_,"__esModule",{value:!0}),o(n(1)),o(n(2)),o(n(3)),o(n(4)),o(n(5)),o(n(6)),o(n(7)),o(n(8)),o(n(9)),o(n(10)),o(n(11)),o(n(12)),o(n(13))},function(t,_,n){t.exports={a:"Anchor__a___1_Iz8"}},function(t,_,n){t.exports={button:"Button__button___vS7Mv",signInButton:"Button__signInButton___3bUH-",googleSignInButton:"Button__googleSignInButton___1YiCu",signInButtonIcon:"Button__signInButtonIcon___ihN75",auth0SignInButton:"Button__auth0SignInButton___znnCj",facebookSignInButton:"Button__facebookSignInButton___34Txh",amazonSignInButton:"Button__amazonSignInButton___2EMtl",oAuthSignInButton:"Button__oAuthSignInButton___3UGOl",signInButtonContent:"Button__signInButtonContent___xqTXJ"}},function(t,_,n){t.exports={formContainer:"Form__formContainer___1GA3x",formSection:"Form__formSection___1PPvW",formField:"Form__formField___38Ikl",formRow:"Form__formRow___2mwRs"}},function(t,_,n){t.exports={hint:"Hint__hint___2XngB"}},function(t,_,n){t.exports={input:"Input__input___3e_bf",inputLabel:"Input__inputLabel___3VF0S",label:"Input__label___23sO8",radio:"Input__radio___2hllK"}},function(t,_,n){t.exports={navBar:"Nav__navBar___xtCFA",navRight:"Nav__navRight___1QG2J",nav:"Nav__nav___2Dx2Y",navItem:"Nav__navItem___1LtFQ"}},function(t,_,n){t.exports={photoPickerButton:"PhotoPicker__photoPickerButton___2XdVn",photoPlaceholder:"PhotoPicker__photoPlaceholder___2JXO4",photoPlaceholderIcon:"PhotoPicker__photoPlaceholderIcon___3Et71"}},function(t,_,n){t.exports={container:"Section__container___3YYTG",actionRow:"Section__actionRow___2LWSU",sectionHeader:"Section__sectionHeader___2djyg",sectionHeaderHint:"Section__sectionHeaderHint___3Wxdc",sectionBody:"Section__sectionBody___ihqqd",sectionHeaderContent:"Section__sectionHeaderContent___1UCqa",sectionFooter:"Section__sectionFooter___1T54C",sectionFooterPrimaryContent:"Section__sectionFooterPrimaryContent___2r9ZX",sectionFooterSecondaryContent:"Section__sectionFooterSecondaryContent___Nj41Q"}},function(t,_,n){t.exports={selectInput:"SelectInput__selectInput___3efO4"}},function(t,_,n){t.exports={strike:"Strike__strike___1XV1b",strikeContent:"Strike__strikeContent___10gLb"}},function(t,_,n){t.exports={toast:"Toast__toast___XXr3v",toastClose:"Toast__toastClose___18lU4"}},function(t,_,n){t.exports={totpQrcode:"Totp__totpQrcode___1crLx"}},function(t,_,n){t.exports={sumerianSceneContainer:"XR__sumerianSceneContainer___3nVMt",sumerianScene:"XR__sumerianScene___2Tt7-",loadingOverlay:"XR__loadingOverlay___IbqcI",loadingContainer:"XR__loadingContainer___2Itxb",loadingLogo:"XR__loadingLogo___Ub7xQ",loadingSceneName:"XR__loadingSceneName___3__ne",loadingBar:"XR__loadingBar___2vcke",loadingBarFill:"XR__loadingBarFill___3M-D9",sceneErrorText:"XR__sceneErrorText___2y0tp",sceneBar:"XR__sceneBar___2ShrP",sceneName:"XR__sceneName___1ApHr",sceneActions:"XR__sceneActions___7plGs",actionButton:"XR__actionButton___2poIM",tooltip:"XR__tooltip___UYyhn",actionIcon:"XR__actionIcon___2qnd2",autoShowTooltip:"XR__autoShowTooltip___V1QH7"}}])},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return withSSRContext}));var _aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67),_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(132),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(175),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(218),_aws_amplify_datastore__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(146),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},requiredModules=[_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_1__.a,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a],defaultModules=[_aws_amplify_api__WEBPACK_IMPORTED_MODULE_0__.c,_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_1__.a,_aws_amplify_datastore__WEBPACK_IMPORTED_MODULE_5__.a];function withSSRContext(context){void 0===context&&(context={});var _a=context.modules,modules=void 0===_a?defaultModules:_a,req=context.req,previousConfig=_aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__.a.configure(),amplify=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_3__.b,storage=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_4__.a({req:req});return requiredModules.forEach((function(m){modules.includes(m)||amplify.register(new m.constructor)})),modules.forEach((function(m){amplify.register(new m.constructor)})),amplify.configure(__assign(__assign({},previousConfig),{storage:storage})),amplify}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.BinCardTypeEnum=void 0,function(BinCardTypeEnum){BinCardTypeEnum.debit="debit",BinCardTypeEnum.credit="credit"}(exports.BinCardTypeEnum||(exports.BinCardTypeEnum={}))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0},function(module,__webpack_exports__,__webpack_require__){"use strict";var models_0_ActiveContextTimeToLive,models_0_ActiveContext,models_0_BadRequestException,models_0_ConflictException,models_0_DeleteSessionRequest,models_0_DeleteSessionResponse,models_0_InternalFailureException,models_0_LimitExceededException,models_0_NotFoundException,models_0_GetSessionRequest,FulfillmentState,MessageFormatType,DialogActionType,models_0_DialogAction,ConfirmationStatus,models_0_IntentSummary,models_0_GetSessionResponse,models_0_BadGatewayException,models_0_DependencyFailedException,models_0_LoopDetectedException,models_0_NotAcceptableException,models_0_PostContentRequest,DialogState,models_0_PostContentResponse,models_0_RequestTimeoutException,models_0_UnsupportedMediaTypeException,models_0_PostTextRequest,models_0_IntentConfidence,models_0_PredictedIntent,ContentType,models_0_Button,models_0_GenericAttachment,models_0_ResponseCard,models_0_SentimentResponse,models_0_PostTextResponse,models_0_PutSessionRequest,models_0_PutSessionResponse,ConsoleLogger=__webpack_require__(84),Amplify=__webpack_require__(40),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},InteractionsProvider_logger=new ConsoleLogger.a("AbstractInteractionsProvider"),AbstractInteractionsProvider=function(){function AbstractInteractionsProvider(options){void 0===options&&(options={}),this._config=options}return AbstractInteractionsProvider.prototype.configure=function(config){return void 0===config&&(config={}),this._config=__assign(__assign({},this._config),config),InteractionsProvider_logger.debug("configure "+this.getProviderName(),this._config),this.options},AbstractInteractionsProvider.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(AbstractInteractionsProvider.prototype,"options",{get:function(){return __assign({},this._config)},enumerable:!0,configurable:!0}),AbstractInteractionsProvider}(),tslib_es6=__webpack_require__(2),es_package=__webpack_require__(325),build=__webpack_require__(59),es=__webpack_require__(32),dist_es=__webpack_require__(62),middleware_retry_dist_es=__webpack_require__(18),util_base64_browser_dist_es=__webpack_require__(31),util_body_length_browser_dist_es=__webpack_require__(60),util_user_agent_browser_dist_es=__webpack_require__(61),util_utf8_browser_dist_es=__webpack_require__(21),AWS_REGIONS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),AWS_CN_REGIONS=new Set(["cn-north-1","cn-northwest-1"]),AWS_ISO_REGIONS=new Set(["us-iso-east-1"]),AWS_ISO_B_REGIONS=new Set(["us-isob-east-1"]),AWS_US_GOV_REGIONS=new Set(["us-gov-east-1","us-gov-west-1"]),ClientSharedValues={apiVersion:"2016-11-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(region,options){var regionInfo=void 0;switch(region){case"ap-northeast-1":regionInfo={hostname:"runtime.lex.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-1":regionInfo={hostname:"runtime.lex.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-2":regionInfo={hostname:"runtime.lex.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-central-1":regionInfo={hostname:"runtime.lex.eu-central-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-1":regionInfo={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-2":regionInfo={hostname:"runtime.lex.eu-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":regionInfo={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":regionInfo={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:AWS_REGIONS.has(region)&&(regionInfo={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",region),partition:"aws",signingService:"lex"}),AWS_CN_REGIONS.has(region)&&(regionInfo={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",region),partition:"aws-cn"}),AWS_ISO_REGIONS.has(region)&&(regionInfo={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",region),partition:"aws-iso"}),AWS_ISO_B_REGIONS.has(region)&&(regionInfo={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",region),partition:"aws-iso-b"}),AWS_US_GOV_REGIONS.has(region)&&(regionInfo={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",region),partition:"aws-us-gov"}),void 0===regionInfo&&(regionInfo={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",region),partition:"aws",signingService:"lex"})}return Promise.resolve(Object(tslib_es6.a)({signingService:"lex"},regionInfo))},serviceId:"Lex Runtime Service",urlParser:__webpack_require__(64).a},ClientDefaultValues=Object(tslib_es6.a)(Object(tslib_es6.a)({},ClientSharedValues),{runtime:"browser",base64Decoder:util_base64_browser_dist_es.a,base64Encoder:util_base64_browser_dist_es.b,bodyLengthChecker:util_body_length_browser_dist_es.a,credentialDefaultProvider:function(_){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:Object(util_user_agent_browser_dist_es.a)({serviceId:ClientSharedValues.serviceId,clientVersion:es_package.version}),maxAttempts:middleware_retry_dist_es.a,region:Object(dist_es.a)("Region is missing"),requestHandler:new es.a,sha256:build.Sha256,streamCollector:es.b,utf8Decoder:util_utf8_browser_dist_es.fromUtf8,utf8Encoder:util_utf8_browser_dist_es.toUtf8}),config_resolver_dist_es=__webpack_require__(36),middleware_content_length_dist_es=__webpack_require__(58),middleware_host_header_dist_es=__webpack_require__(34),middleware_logger_dist_es=__webpack_require__(63),middleware_signing_dist_es=__webpack_require__(41),middleware_user_agent_dist_es=__webpack_require__(35),smithy_client_dist_es=__webpack_require__(1),LexRuntimeServiceClient_LexRuntimeServiceClient=function(_super){function LexRuntimeServiceClient(configuration){var _this=this,_config_0=Object(tslib_es6.a)(Object(tslib_es6.a)({},ClientDefaultValues),configuration),_config_1=Object(config_resolver_dist_es.b)(_config_0),_config_2=Object(config_resolver_dist_es.a)(_config_1),_config_3=Object(middleware_signing_dist_es.b)(_config_2),_config_4=Object(middleware_retry_dist_es.c)(_config_3),_config_5=Object(middleware_host_header_dist_es.b)(_config_4),_config_6=Object(middleware_user_agent_dist_es.b)(_config_5);return(_this=_super.call(this,_config_6)||this).config=_config_6,_this.middlewareStack.use(Object(middleware_signing_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_retry_dist_es.b)(_this.config)),_this.middlewareStack.use(Object(middleware_content_length_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_host_header_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_logger_dist_es.a)(_this.config)),_this.middlewareStack.use(Object(middleware_user_agent_dist_es.a)(_this.config)),_this}return Object(tslib_es6.c)(LexRuntimeServiceClient,_super),LexRuntimeServiceClient.prototype.destroy=function(){_super.prototype.destroy.call(this)},LexRuntimeServiceClient}(smithy_client_dist_es.a);(models_0_ActiveContextTimeToLive||(models_0_ActiveContextTimeToLive={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_ActiveContext||(models_0_ActiveContext={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.parameters&&{parameters:smithy_client_dist_es.d})},(models_0_BadRequestException||(models_0_BadRequestException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_ConflictException||(models_0_ConflictException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_DeleteSessionRequest||(models_0_DeleteSessionRequest={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_DeleteSessionResponse||(models_0_DeleteSessionResponse={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_InternalFailureException||(models_0_InternalFailureException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_LimitExceededException||(models_0_LimitExceededException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_NotFoundException||(models_0_NotFoundException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_GetSessionRequest||(models_0_GetSessionRequest={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},function(FulfillmentState){FulfillmentState.FAILED="Failed",FulfillmentState.FULFILLED="Fulfilled",FulfillmentState.READY_FOR_FULFILLMENT="ReadyForFulfillment"}(FulfillmentState||(FulfillmentState={})),function(MessageFormatType){MessageFormatType.COMPOSITE="Composite",MessageFormatType.CUSTOM_PAYLOAD="CustomPayload",MessageFormatType.PLAIN_TEXT="PlainText",MessageFormatType.SSML="SSML"}(MessageFormatType||(MessageFormatType={})),function(DialogActionType){DialogActionType.CLOSE="Close",DialogActionType.CONFIRM_INTENT="ConfirmIntent",DialogActionType.DELEGATE="Delegate",DialogActionType.ELICIT_INTENT="ElicitIntent",DialogActionType.ELICIT_SLOT="ElicitSlot"}(DialogActionType||(DialogActionType={})),(models_0_DialogAction||(models_0_DialogAction={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.slots&&{slots:smithy_client_dist_es.d}),obj.message&&{message:smithy_client_dist_es.d})},function(ConfirmationStatus){ConfirmationStatus.CONFIRMED="Confirmed",ConfirmationStatus.DENIED="Denied",ConfirmationStatus.NONE="None"}(ConfirmationStatus||(ConfirmationStatus={})),(models_0_IntentSummary||(models_0_IntentSummary={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.slots&&{slots:smithy_client_dist_es.d})},(models_0_GetSessionResponse||(models_0_GetSessionResponse={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.recentIntentSummaryView&&{recentIntentSummaryView:obj.recentIntentSummaryView.map((function(item){return models_0_IntentSummary.filterSensitiveLog(item)}))}),obj.sessionAttributes&&{sessionAttributes:smithy_client_dist_es.d}),obj.dialogAction&&{dialogAction:models_0_DialogAction.filterSensitiveLog(obj.dialogAction)}),obj.activeContexts&&{activeContexts:smithy_client_dist_es.d})},(models_0_BadGatewayException||(models_0_BadGatewayException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_DependencyFailedException||(models_0_DependencyFailedException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_LoopDetectedException||(models_0_LoopDetectedException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_NotAcceptableException||(models_0_NotAcceptableException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_PostContentRequest||(models_0_PostContentRequest={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.sessionAttributes&&{sessionAttributes:smithy_client_dist_es.d}),obj.requestAttributes&&{requestAttributes:smithy_client_dist_es.d}),obj.activeContexts&&{activeContexts:smithy_client_dist_es.d})},function(DialogState){DialogState.CONFIRM_INTENT="ConfirmIntent",DialogState.ELICIT_INTENT="ElicitIntent",DialogState.ELICIT_SLOT="ElicitSlot",DialogState.FAILED="Failed",DialogState.FULFILLED="Fulfilled",DialogState.READY_FOR_FULFILLMENT="ReadyForFulfillment"}(DialogState||(DialogState={})),(models_0_PostContentResponse||(models_0_PostContentResponse={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.message&&{message:smithy_client_dist_es.d}),obj.activeContexts&&{activeContexts:smithy_client_dist_es.d})},(models_0_RequestTimeoutException||(models_0_RequestTimeoutException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_UnsupportedMediaTypeException||(models_0_UnsupportedMediaTypeException={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_PostTextRequest||(models_0_PostTextRequest={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.sessionAttributes&&{sessionAttributes:smithy_client_dist_es.d}),obj.requestAttributes&&{requestAttributes:smithy_client_dist_es.d}),obj.inputText&&{inputText:smithy_client_dist_es.d}),obj.activeContexts&&{activeContexts:smithy_client_dist_es.d})},(models_0_IntentConfidence||(models_0_IntentConfidence={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_PredictedIntent||(models_0_PredictedIntent={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.slots&&{slots:smithy_client_dist_es.d})},function(ContentType){ContentType.GENERIC="application/vnd.amazonaws.card.generic"}(ContentType||(ContentType={})),(models_0_Button||(models_0_Button={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_GenericAttachment||(models_0_GenericAttachment={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_ResponseCard||(models_0_ResponseCard={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_SentimentResponse||(models_0_SentimentResponse={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)({},obj)},(models_0_PostTextResponse||(models_0_PostTextResponse={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.alternativeIntents&&{alternativeIntents:obj.alternativeIntents.map((function(item){return models_0_PredictedIntent.filterSensitiveLog(item)}))}),obj.slots&&{slots:smithy_client_dist_es.d}),obj.sessionAttributes&&{sessionAttributes:smithy_client_dist_es.d}),obj.message&&{message:smithy_client_dist_es.d}),obj.activeContexts&&{activeContexts:smithy_client_dist_es.d})},(models_0_PutSessionRequest||(models_0_PutSessionRequest={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.sessionAttributes&&{sessionAttributes:smithy_client_dist_es.d}),obj.dialogAction&&{dialogAction:models_0_DialogAction.filterSensitiveLog(obj.dialogAction)}),obj.recentIntentSummaryView&&{recentIntentSummaryView:obj.recentIntentSummaryView.map((function(item){return models_0_IntentSummary.filterSensitiveLog(item)}))}),obj.activeContexts&&{activeContexts:smithy_client_dist_es.d})},(models_0_PutSessionResponse||(models_0_PutSessionResponse={})).filterSensitiveLog=function(obj){return Object(tslib_es6.a)(Object(tslib_es6.a)(Object(tslib_es6.a)({},obj),obj.message&&{message:smithy_client_dist_es.d}),obj.activeContexts&&{activeContexts:smithy_client_dist_es.d})};var extendStatics,Aws_restJson1=__webpack_require__(131),middleware_serde_dist_es=__webpack_require__(17),PostTextCommand_PostTextCommand=function(_super){function PostTextCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return Object(tslib_es6.c)(PostTextCommand,_super),PostTextCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"LexRuntimeServiceClient",commandName:"PostTextCommand",inputFilterSensitiveLog:models_0_PostTextRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_PostTextResponse.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},PostTextCommand.prototype.serialize=function(input,context){return Object(Aws_restJson1.d)(input,context)},PostTextCommand.prototype.deserialize=function(output,context){return Object(Aws_restJson1.b)(output,context)},PostTextCommand}(smithy_client_dist_es.b),PostContentCommand_PostContentCommand=function(_super){function PostContentCommand(input){var _this=_super.call(this)||this;return _this.input=input,_this}return Object(tslib_es6.c)(PostContentCommand,_super),PostContentCommand.prototype.resolveMiddleware=function(clientStack,configuration,options){this.middlewareStack.use(Object(middleware_serde_dist_es.a)(configuration,this.serialize,this.deserialize));var stack=clientStack.concat(this.middlewareStack),handlerExecutionContext={logger:configuration.logger,clientName:"LexRuntimeServiceClient",commandName:"PostContentCommand",inputFilterSensitiveLog:models_0_PostContentRequest.filterSensitiveLog,outputFilterSensitiveLog:models_0_PostContentResponse.filterSensitiveLog},requestHandler=configuration.requestHandler;return stack.resolve((function(request){return requestHandler.handle(request.request,options||{})}),handlerExecutionContext)},PostContentCommand.prototype.serialize=function(input,context){return Object(Aws_restJson1.c)(input,context)},PostContentCommand.prototype.deserialize=function(output,context){return Object(Aws_restJson1.a)(output,context)},PostContentCommand}(smithy_client_dist_es.b),Credentials=__webpack_require__(175),Platform=__webpack_require__(96),convert=function(stream){if(stream instanceof Blob||stream instanceof ReadableStream)return new Response(stream).arrayBuffer().then((function(buffer){return new Uint8Array(buffer)}));throw new Error("Readable is not supported.")},__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),AWSLexProvider_assign=function(){return(AWSLexProvider_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},AWSLexProvider_logger=new ConsoleLogger.a("AWSLexProvider"),AWSLexProvider_AWSLexProvider=function(_super){function AWSLexProvider(options){void 0===options&&(options={});var _this=_super.call(this,options)||this;return _this._botsCompleteCallback={},_this}return __extends(AWSLexProvider,_super),AWSLexProvider.prototype.getProviderName=function(){return"AWSLexProvider"},AWSLexProvider.prototype.reportBotStatus=function(data,botname){var _this=this;AWSLexProvider_logger.debug("postContent state",data.dialogState),"ReadyForFulfillment"!==data.dialogState&&"Fulfilled"!==data.dialogState||("function"==typeof this._botsCompleteCallback[botname]&&setTimeout((function(){return _this._botsCompleteCallback[botname](null,{slots:data.slots})}),0),this._config&&"function"==typeof this._config[botname].onComplete&&setTimeout((function(){return _this._config[botname].onComplete(null,{slots:data.slots})}),0)),"Failed"===data.dialogState&&("function"==typeof this._botsCompleteCallback[botname]&&setTimeout((function(){return _this._botsCompleteCallback[botname]("Bot conversation failed")}),0),this._config&&"function"==typeof this._config[botname].onComplete&&setTimeout((function(){return _this._config[botname].onComplete("Bot conversation failed")}),0))},AWSLexProvider.prototype.sendMessage=function(botname,message){return __awaiter(this,void 0,void 0,(function(){var credentials,params,postTextCommand,err_1,content,messageType,postContentCommand,data,audioArray,err_2;return __generator(this,(function(_a){switch(_a.label){case 0:return this._config[botname]?[4,Credentials.a.get()]:[2,Promise.reject("Bot "+botname+" does not exist")];case 1:if(!(credentials=_a.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new LexRuntimeServiceClient_LexRuntimeServiceClient({region:this._config[botname].region,credentials:credentials,customUserAgent:Object(Platform.b)()}),"string"!=typeof message)return[3,6];params={botAlias:this._config[botname].alias,botName:botname,inputText:message,userId:credentials.identityId},AWSLexProvider_logger.debug("postText to lex",message),_a.label=2;case 2:return _a.trys.push([2,4,,5]),postTextCommand=new PostTextCommand_PostTextCommand(params),[4,this.lexRuntimeServiceClient.send(postTextCommand)];case 3:return data=_a.sent(),this.reportBotStatus(data,botname),[2,data];case 4:return err_1=_a.sent(),[2,Promise.reject(err_1)];case 5:return[3,11];case 6:content=message.content,messageType=message.options.messageType,params="voice"===messageType?{botAlias:this._config[botname].alias,botName:botname,contentType:"audio/x-l16; sample-rate=16000",inputStream:content,userId:credentials.identityId,accept:"audio/mpeg"}:{botAlias:this._config[botname].alias,botName:botname,contentType:"text/plain; charset=utf-8",inputStream:content,userId:credentials.identityId,accept:"audio/mpeg"},AWSLexProvider_logger.debug("postContent to lex",message),_a.label=7;case 7:return _a.trys.push([7,10,,11]),postContentCommand=new PostContentCommand_PostContentCommand(params),[4,this.lexRuntimeServiceClient.send(postContentCommand)];case 8:return data=_a.sent(),[4,convert(data.audioStream)];case 9:return audioArray=_a.sent(),this.reportBotStatus(data,botname),[2,AWSLexProvider_assign(AWSLexProvider_assign({},data),{audioStream:audioArray})];case 10:return err_2=_a.sent(),[2,Promise.reject(err_2)];case 11:return[2]}}))}))},AWSLexProvider.prototype.onComplete=function(botname,callback){if(!this._config[botname])throw new ErrorEvent("Bot "+botname+" does not exist");this._botsCompleteCallback[botname]=callback},AWSLexProvider}(AbstractInteractionsProvider),Interactions_assign=function(){return(Interactions_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Interactions_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},Interactions_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},Interactions_logger=new ConsoleLogger.a("Interactions"),Interactions=new(function(){function InteractionsClass(options){this._options=options,Interactions_logger.debug("Interactions Options",this._options),this._pluggables={}}return InteractionsClass.prototype.getModuleName=function(){return"Interactions"},InteractionsClass.prototype.configure=function(options){var _this=this,opt=options?options.Interactions||options:{};Interactions_logger.debug("configure Interactions",{opt:opt}),this._options=Interactions_assign(Interactions_assign({bots:{}},opt),opt.Interactions);var aws_bots_config=this._options.aws_bots_config,bots_config=this._options.bots;return!Object.keys(bots_config).length&&aws_bots_config&&Array.isArray(aws_bots_config)&&aws_bots_config.forEach((function(bot){_this._options.bots[bot.name]=bot})),!this._pluggables.AWSLexProvider&&bots_config&&Object.keys(bots_config).map((function(key){return bots_config[key]})).find((function(bot){return!bot.providerName||"AWSLexProvider"===bot.providerName}))&&(this._pluggables.AWSLexProvider=new AWSLexProvider_AWSLexProvider),Object.keys(this._pluggables).map((function(key){_this._pluggables[key].configure(_this._options.bots)})),this._options},InteractionsClass.prototype.addPluggable=function(pluggable){if(pluggable&&"Interactions"===pluggable.getCategory()){if(this._pluggables[pluggable.getProviderName()])throw new Error("Bot "+pluggable.getProviderName()+" already plugged");return pluggable.configure(this._options.bots),void(this._pluggables[pluggable.getProviderName()]=pluggable)}},InteractionsClass.prototype.send=function(botname,message){return Interactions_awaiter(this,void 0,void 0,(function(){var botProvider;return Interactions_generator(this,(function(_a){switch(_a.label){case 0:if(!this._options.bots||!this._options.bots[botname])throw new Error("Bot "+botname+" does not exist");if(botProvider=this._options.bots[botname].providerName||"AWSLexProvider",!this._pluggables[botProvider])throw new Error("Bot "+botProvider+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[botProvider].sendMessage(botname,message)];case 1:return[2,_a.sent()]}}))}))},InteractionsClass.prototype.onComplete=function(botname,callback){if(!this._options.bots||!this._options.bots[botname])throw new Error("Bot "+botname+" does not exist");var botProvider=this._options.bots[botname].providerName||"AWSLexProvider";if(!this._pluggables[botProvider])throw new Error("Bot "+botProvider+" does not have valid pluggin did you try addPluggable first?");this._pluggables[botProvider].onComplete(botname,callback)},InteractionsClass}())(null);Amplify.a.register(Interactions),__webpack_require__.d(__webpack_exports__,"a",(function(){return Interactions}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var extendStatics,ConsoleLogger=__webpack_require__(84),Amplify=__webpack_require__(40),lib_esm=__webpack_require__(7),Credentials=__webpack_require__(175),Signer=__webpack_require__(286),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},logger=new ConsoleLogger.a("AbstractXRProvider"),AbstractXRProvider=function(){function AbstractXRProvider(options){void 0===options&&(options={}),this._config=options}return AbstractXRProvider.prototype.configure=function(config){return void 0===config&&(config={}),this._config=__assign(__assign({},config),this._config),logger.debug("configure "+this.getProviderName(),this._config),this.options},AbstractXRProvider.prototype.getCategory=function(){return"XR"},Object.defineProperty(AbstractXRProvider.prototype,"options",{get:function(){return __assign({},this._config)},enumerable:!0,configurable:!0}),AbstractXRProvider}(),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),XRError=function(_super){function XRError(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(XRError,_super),XRError}(Error),XRNoSceneConfiguredError=function(_super){function XRNoSceneConfiguredError(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(XRNoSceneConfiguredError,_super),XRNoSceneConfiguredError}(XRError),XRSceneNotFoundError=function(_super){function XRSceneNotFoundError(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(XRSceneNotFoundError,_super),XRSceneNotFoundError}(XRError),XRSceneNotLoadedError=function(_super){function XRSceneNotLoadedError(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(XRSceneNotLoadedError,_super),XRSceneNotLoadedError}(XRError),XRNoDomElement=function(_super){function XRNoDomElement(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(XRNoDomElement,_super),XRNoDomElement}(XRError),XRSceneLoadFailure=function(_super){function XRSceneLoadFailure(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(XRSceneLoadFailure,_super),XRSceneLoadFailure}(XRError),XRProviderNotConfigured=function(_super){function XRProviderNotConfigured(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(XRProviderNotConfigured,_super),XRProviderNotConfigured}(XRError),SumerianProvider_extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SumerianProvider_assign=function(){return(SumerianProvider_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},SumerianProvider_logger=new ConsoleLogger.a("SumerianProvider"),SumerianProvider_SumerianProvider=function(_super){function SumerianProvider(options){return void 0===options&&(options={}),_super.call(this,options)||this}return SumerianProvider_extends(SumerianProvider,_super),SumerianProvider.prototype.getProviderName=function(){return"SumerianProvider"},SumerianProvider.prototype.loadScript=function(url){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,new Promise((function(resolve,reject){var scriptElement=document.createElement("script");scriptElement.src=url,scriptElement.addEventListener("load",(function(event){resolve()})),scriptElement.addEventListener("error",(function(event){reject(new Error("Failed to load script: "+url))})),document.head.appendChild(scriptElement)}))]}))}))},SumerianProvider.prototype.loadScene=function(sceneName,domElementId,sceneOptions){return __awaiter(this,void 0,void 0,(function(){var element,scene,sceneUrl,sceneId,sceneRegion,errorMsg,awsSDKConfigOverride,fetchOptions,url,credentials,accessInfo,serviceInfo,request,apiResponse,apiResponseJson,sceneBundleData,sceneBundleJson,error_1,progressCallback,publishParamOverrides,sceneLoadParams,sceneController,_a,_b,warning,e_2,_c;return __generator(this,(function(_d){switch(_d.label){case 0:if(!sceneName)throw errorMsg="No scene name passed into loadScene",SumerianProvider_logger.error(errorMsg),new XRSceneLoadFailure(errorMsg);if(!domElementId)throw errorMsg="No dom element id passed into loadScene",SumerianProvider_logger.error(errorMsg),new XRNoDomElement(errorMsg);if(!(element=document.getElementById(domElementId)))throw errorMsg="DOM element id, "+domElementId+" not found",SumerianProvider_logger.error(errorMsg),new XRNoDomElement(errorMsg);if(!(scene=this.getScene(sceneName)).sceneConfig)throw errorMsg="No scene config configured for scene: "+sceneName,SumerianProvider_logger.error(errorMsg),new XRSceneLoadFailure(errorMsg);if(sceneUrl=scene.sceneConfig.url,sceneId=scene.sceneConfig.sceneId,scene.sceneConfig.hasOwnProperty("region"))sceneRegion=scene.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw errorMsg="No region configured for scene: "+sceneName,SumerianProvider_logger.error(errorMsg),new XRSceneLoadFailure(errorMsg);sceneRegion=this.options.region}awsSDKConfigOverride={region:sceneRegion,customUserAgent:lib_esm.d.userAgent+"-SumerianScene"},fetchOptions={headers:{"X-Amz-User-Agent":lib_esm.d.userAgent}},url=sceneUrl,_d.label=1;case 1:return _d.trys.push([1,3,,4]),[4,Credentials.a.get()];case 2:return credentials=_d.sent(),awsSDKConfigOverride.credentials=credentials,accessInfo={secret_key:credentials.secretAccessKey,access_key:credentials.accessKeyId,session_token:credentials.sessionToken},serviceInfo={region:sceneRegion,service:"sumerian"},request=Signer.a.sign({method:"GET",url:sceneUrl},accessInfo,serviceInfo),fetchOptions.headers=SumerianProvider_assign(SumerianProvider_assign({},fetchOptions.headers),request.headers),url=request.url,[3,4];case 3:return _d.sent(),SumerianProvider_logger.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(url,fetchOptions)];case 5:return[4,(apiResponse=_d.sent()).json()];case 6:if(apiResponseJson=_d.sent(),403===apiResponse.status)throw apiResponseJson.message?(SumerianProvider_logger.error("Failure to authenticate user: "+apiResponseJson.message),new XRSceneLoadFailure("Failure to authenticate user: "+apiResponseJson.message)):(SumerianProvider_logger.error("Failure to authenticate user"),new XRSceneLoadFailure("Failure to authenticate user"));return sceneBundleData=apiResponseJson.bundleData[sceneId],[4,fetch(sceneBundleData.url,{headers:sceneBundleData.headers})];case 7:return[4,_d.sent().json()];case 8:sceneBundleJson=_d.sent(),_d.label=9;case 9:return _d.trys.push([9,11,,12]),[4,this.loadScript(sceneBundleJson[sceneId].bootstrapperUrl)];case 10:return _d.sent(),[3,12];case 11:throw error_1=_d.sent(),SumerianProvider_logger.error(error_1),new XRSceneLoadFailure(error_1);case 12:return progressCallback=sceneOptions.progressCallback?sceneOptions.progressCallback:void 0,publishParamOverrides=scene.publishParamOverrides?scene.publishParamOverrides:void 0,sceneLoadParams={element:element,sceneId:sceneId,sceneBundle:sceneBundleJson,apiResponse:apiResponseJson,progressCallback:progressCallback,publishParamOverrides:publishParamOverrides,awsSDKConfigOverride:awsSDKConfigOverride},[4,window.SumerianBootstrapper.loadScene(sceneLoadParams)];case 13:sceneController=_d.sent(),scene.sceneController=sceneController,scene.isLoaded=!0;try{for(_a=__values(sceneController.sceneLoadWarnings),_b=_a.next();!_b.done;_b=_a.next())warning=_b.value,SumerianProvider_logger.warn("loadScene warning: "+warning)}catch(e_2_1){e_2={error:e_2_1}}finally{try{_b&&!_b.done&&(_c=_a.return)&&_c.call(_a)}finally{if(e_2)throw e_2.error}}return[2]}}))}))},SumerianProvider.prototype.isSceneLoaded=function(sceneName){return this.getScene(sceneName).isLoaded||!1},SumerianProvider.prototype.getScene=function(sceneName){if(!this.options.scenes){var errorMsg="No scenes were defined in the configuration";throw SumerianProvider_logger.error(errorMsg),new XRNoSceneConfiguredError(errorMsg)}if(!sceneName){errorMsg="No scene name was passed";throw SumerianProvider_logger.error(errorMsg),new XRSceneNotFoundError(errorMsg)}if(!this.options.scenes[sceneName]){errorMsg="Scene '"+sceneName+"' is not configured";throw SumerianProvider_logger.error(errorMsg),new XRSceneNotFoundError(errorMsg)}return this.options.scenes[sceneName]},SumerianProvider.prototype.getSceneController=function(sceneName){if(!this.options.scenes){var errorMsg="No scenes were defined in the configuration";throw SumerianProvider_logger.error(errorMsg),new XRNoSceneConfiguredError(errorMsg)}var scene=this.options.scenes[sceneName];if(!scene){errorMsg="Scene '"+sceneName+"' is not configured";throw SumerianProvider_logger.error(errorMsg),new XRSceneNotFoundError(errorMsg)}var sceneController=scene.sceneController;if(!sceneController){errorMsg="Scene controller for '"+sceneName+"' has not been loaded";throw SumerianProvider_logger.error(errorMsg),new XRSceneNotLoadedError(errorMsg)}return sceneController},SumerianProvider.prototype.isVRCapable=function(sceneName){return this.getSceneController(sceneName).vrCapable},SumerianProvider.prototype.isVRPresentationActive=function(sceneName){return this.getSceneController(sceneName).vrPresentationActive},SumerianProvider.prototype.start=function(sceneName){this.getSceneController(sceneName).start()},SumerianProvider.prototype.enterVR=function(sceneName){this.getSceneController(sceneName).enterVR()},SumerianProvider.prototype.exitVR=function(sceneName){this.getSceneController(sceneName).exitVR()},SumerianProvider.prototype.isMuted=function(sceneName){return this.getSceneController(sceneName).muted},SumerianProvider.prototype.setMuted=function(sceneName,muted){this.getSceneController(sceneName).muted=muted},SumerianProvider.prototype.onSceneEvent=function(sceneName,eventName,eventHandler){this.getSceneController(sceneName).on(eventName,eventHandler)},SumerianProvider.prototype.enableAudio=function(sceneName){this.getSceneController(sceneName).enableAudio()},SumerianProvider}(AbstractXRProvider),XR_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},XR_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},XR_logger=new ConsoleLogger.a("XR"),XR=new(function(){function XRClass(options){this._options=options,XR_logger.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new SumerianProvider_SumerianProvider)}return XRClass.prototype.configure=function(options){var _this=this,opt=options?options.XR||options:{};return XR_logger.debug("configure XR",{opt:opt}),this._options=Object.assign({},this._options,opt),Object.entries(this._pluggables).map((function(_a){var _b=__read(_a,2),name=_b[0],provider=_b[1];name!==_this._defaultProvider||opt[_this._defaultProvider]?provider.configure(_this._options[name]):provider.configure(_this._options)})),this._options},XRClass.prototype.addPluggable=function(pluggable){return XR_awaiter(this,void 0,void 0,(function(){return XR_generator(this,(function(_a){return pluggable&&"XR"===pluggable.getCategory()?(this._pluggables[pluggable.getProviderName()]=pluggable,[2,pluggable.configure(this._options)]):[2]}))}))},XRClass.prototype.loadScene=function(sceneName,domElementId,sceneOptions,provider){return void 0===sceneOptions&&(sceneOptions={}),void 0===provider&&(provider=this._defaultProvider),XR_awaiter(this,void 0,void 0,(function(){return XR_generator(this,(function(_a){switch(_a.label){case 0:if(!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return[4,this._pluggables[provider].loadScene(sceneName,domElementId,sceneOptions)];case 1:return[2,_a.sent()]}}))}))},XRClass.prototype.isSceneLoaded=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].isSceneLoaded(sceneName)},XRClass.prototype.getSceneController=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].getSceneController(sceneName)},XRClass.prototype.isVRCapable=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].isVRCapable(sceneName)},XRClass.prototype.isVRPresentationActive=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].isVRPresentationActive(sceneName)},XRClass.prototype.start=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].start(sceneName)},XRClass.prototype.enterVR=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].enterVR(sceneName)},XRClass.prototype.exitVR=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].exitVR(sceneName)},XRClass.prototype.isMuted=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].isMuted(sceneName)},XRClass.prototype.setMuted=function(sceneName,muted,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].setMuted(sceneName,muted)},XRClass.prototype.onSceneEvent=function(sceneName,eventName,eventHandler,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].onSceneEvent(sceneName,eventName,eventHandler)},XRClass.prototype.enableAudio=function(sceneName,provider){if(void 0===provider&&(provider=this._defaultProvider),!this._pluggables[provider])throw new XRProviderNotConfigured("Provider '"+provider+"' not configured");return this._pluggables[provider].enableAudio(sceneName)},XRClass}())(null);Amplify.a.register(XR),__webpack_require__.d(__webpack_exports__,"a",(function(){return XR}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var logger=new(__webpack_require__(84).a)("ClientDevice_Browser");function clientInfo(){return"undefined"==typeof window?{}:function(){if("undefined"==typeof window)return logger.warn("No window object available to get browser client info"),{};var nav=window.navigator;if(!nav)return logger.warn("No navigator object available to get browser client info"),{};var platform=nav.platform,product=nav.product,vendor=nav.vendor,userAgent=nav.userAgent,language=nav.language,type=function(userAgent){var operaMatch=/.+(Opera[\s[A-Z]*|OPR[\sA-Z]*)\/([0-9\.]+).*/i.exec(userAgent);if(operaMatch)return{type:operaMatch[1],version:operaMatch[2]};var ieMatch=/.+(Trident|Edge)\/([0-9\.]+).*/i.exec(userAgent);if(ieMatch)return{type:ieMatch[1],version:ieMatch[2]};var cfMatch=/.+(Chrome|Firefox|FxiOS)\/([0-9\.]+).*/i.exec(userAgent);if(cfMatch)return{type:cfMatch[1],version:cfMatch[2]};var sMatch=/.+(Safari)\/([0-9\.]+).*/i.exec(userAgent);if(sMatch)return{type:sMatch[1],version:sMatch[2]};var awkMatch=/.+(AppleWebKit)\/([0-9\.]+).*/i.exec(userAgent);if(awkMatch)return{type:awkMatch[1],version:awkMatch[2]};var anyMatch=/.*([A-Z]+)\/([0-9\.]+).*/i.exec(userAgent);if(anyMatch)return{type:anyMatch[1],version:anyMatch[2]};return{type:"",version:""}}(userAgent),timezone=(tzMatch=/\(([A-Za-z\s].*)\)/.exec((new Date).toString()),tzMatch&&tzMatch[1]||"");var tzMatch;return{platform:platform,make:product||vendor,model:type.type,version:type.version,appVersion:[type.type,type.version].join("/"),language:language,timezone:timezone}}()}__webpack_require__.d(__webpack_exports__,"a",(function(){return ClientDevice_ClientDevice}));var ClientDevice_ClientDevice=function(){function ClientDevice(){}return ClientDevice.clientInfo=function(){return clientInfo()},ClientDevice.dimension=function(){return"undefined"==typeof window?(logger.warn("No window object available to get browser client info"),{width:320,height:320}):{width:window.innerWidth,height:window.innerHeight}},ClientDevice}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var ConsoleLogger=__webpack_require__(84),Amplify=__webpack_require__(40),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},logger=new ConsoleLogger.a("Predictions"),Predictions=new(function(){function PredictionsClass(options){this._options=options,this._convertPluggables=[],this._identifyPluggables=[],this._interpretPluggables=[]}return PredictionsClass.prototype.getModuleName=function(){return"Predictions"},PredictionsClass.prototype.addPluggable=function(pluggable){if(this.getPluggable(pluggable.getProviderName()))throw new Error("Pluggable with name "+pluggable.getProviderName()+" has already been added.");var pluggableAdded=!1;this.implementsConvertPluggable(pluggable)&&(this._convertPluggables.push(pluggable),pluggableAdded=!0),this.implementsIdentifyPluggable(pluggable)&&(this._identifyPluggables.push(pluggable),pluggableAdded=!0),this.implementsInterpretPluggable(pluggable)&&(this._interpretPluggables.push(pluggable),pluggableAdded=!0),pluggableAdded&&this.configurePluggable(pluggable)},PredictionsClass.prototype.getPluggable=function(providerName){var pluggable=this.getAllProviders().find((function(pluggable){return pluggable.getProviderName()===providerName}));return void 0===pluggable?(logger.debug("No plugin found with providerName=>",providerName),null):pluggable},PredictionsClass.prototype.removePluggable=function(providerName){this._convertPluggables=this._convertPluggables.filter((function(pluggable){return pluggable.getProviderName()!==providerName})),this._identifyPluggables=this._identifyPluggables.filter((function(pluggable){return pluggable.getProviderName()!==providerName})),this._interpretPluggables=this._interpretPluggables.filter((function(pluggable){return pluggable.getProviderName()!==providerName}))},PredictionsClass.prototype.configure=function(options){var _this=this,predictionsConfig=options?options.predictions||options:{};predictionsConfig=__assign(__assign({},predictionsConfig),options),this._options=Object.assign({},this._options,predictionsConfig),logger.debug("configure Predictions",this._options),this.getAllProviders().forEach((function(pluggable){return _this.configurePluggable(pluggable)}))},PredictionsClass.prototype.interpret=function(input,options){return this.getPluggableToExecute(this._interpretPluggables,options).interpret(input)},PredictionsClass.prototype.convert=function(input,options){return this.getPluggableToExecute(this._convertPluggables,options).convert(input)},PredictionsClass.prototype.identify=function(input,options){return this.getPluggableToExecute(this._identifyPluggables,options).identify(input)},PredictionsClass.prototype.getPluggableToExecute=function(pluggables,providerOptions){if(providerOptions&&providerOptions.providerName)return __spread(pluggables).find((function(pluggable){return pluggable.getProviderName()===providerOptions.providerName}));if(1===pluggables.length)return pluggables[0];throw new Error("More than one or no providers are configured, Either specify a provider name or configure exactly one provider")},PredictionsClass.prototype.getAllProviders=function(){return __spread(this._convertPluggables,this._identifyPluggables,this._interpretPluggables)},PredictionsClass.prototype.configurePluggable=function(pluggable){var categoryConfig=Object.assign({},this._options.predictions,this._options[pluggable.getCategory().toLowerCase()]);pluggable.configure(categoryConfig)},PredictionsClass.prototype.implementsConvertPluggable=function(obj){return obj&&"function"==typeof obj.convert},PredictionsClass.prototype.implementsIdentifyPluggable=function(obj){return obj&&"function"==typeof obj.identify},PredictionsClass.prototype.implementsInterpretPluggable=function(obj){return obj&&"function"==typeof obj.interpret},PredictionsClass}())({});Amplify.a.register(Predictions),__webpack_require__.d(__webpack_exports__,"a",(function(){return Predictions}))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var crypto;if(__webpack_require__.d(__webpack_exports__,"a",(function(){return cryptoSecureRandomInt})),"undefined"!=typeof window&&window.crypto&&(crypto=window.crypto),!crypto&&"undefined"!=typeof window&&window.msCrypto&&(crypto=window.msCrypto),!crypto&&void 0!==global&&global.crypto&&(crypto=global.crypto),!crypto)try{crypto=__webpack_require__(392)}catch(err){}function cryptoSecureRandomInt(){if(crypto){if("function"==typeof crypto.getRandomValues)try{return crypto.getRandomValues(new Uint32Array(1))[0]}catch(err){}if("function"==typeof crypto.randomBytes)try{return crypto.randomBytes(4).readInt32LE()}catch(err){}}throw new Error("Native crypto module could not be used to get secure random number.")}}).call(this,__webpack_require__(54))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isArrayBuffer}));var isArrayBuffer=function(arg){return"function"==typeof ArrayBuffer&&arg instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(arg)}},function(module,exports,__webpack_require__){module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),s=e.getVersionPrecision(r),a=Math.max(i,s),o=0,u=e.map([t,r],(function(t){var r=a-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(o=a-Math.min(i,s)),a-=1;a>=o;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===o)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=e,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var o=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=s.length;t<r;t+=1)o();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},s=r(18);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){}var t,r,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&a(t.prototype,r),n&&a(t,n),e}();t.default=o,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=u(r(92)),i=u(r(93)),s=u(r(94)),a=u(r(95)),o=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=o.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=o.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return o.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},s=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,s+=1):"object"==typeof a&&(r[t]=a,n+=1)})),n>0){var a=Object.keys(r),u=o.default.find(a,(function(e){return t.isOS(e)}));if(u){var d=this.satisfies(r[u]);if(void 0!==d)return d}var c=o.default.find(a,(function(e){return t.isPlatform(e)}));if(c){var f=this.satisfies(r[c]);if(void 0!==f)return f}}if(s>0){var l=Object.keys(i),h=o.default.find(l,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=o.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(o.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:s.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:s.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=a,e.exports=t.default}})},function(module){module.exports={name:"@aws-sdk/client-cognito-identity",description:"AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",version:"3.4.1",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js",test:"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.4.1","@aws-sdk/credential-provider-node":"3.4.1","@aws-sdk/fetch-http-handler":"3.4.1","@aws-sdk/hash-node":"3.4.1","@aws-sdk/invalid-dependency":"3.4.1","@aws-sdk/middleware-content-length":"3.4.1","@aws-sdk/middleware-host-header":"3.4.1","@aws-sdk/middleware-logger":"3.4.1","@aws-sdk/middleware-retry":"3.4.1","@aws-sdk/middleware-serde":"3.4.1","@aws-sdk/middleware-signing":"3.4.1","@aws-sdk/middleware-stack":"3.4.1","@aws-sdk/middleware-user-agent":"3.4.1","@aws-sdk/node-config-provider":"3.4.1","@aws-sdk/node-http-handler":"3.4.1","@aws-sdk/protocol-http":"3.4.1","@aws-sdk/smithy-client":"3.4.1","@aws-sdk/types":"3.4.1","@aws-sdk/url-parser":"3.4.1","@aws-sdk/url-parser-native":"3.4.1","@aws-sdk/util-base64-browser":"3.4.1","@aws-sdk/util-base64-node":"3.4.1","@aws-sdk/util-body-length-browser":"3.4.1","@aws-sdk/util-body-length-node":"3.4.1","@aws-sdk/util-user-agent-browser":"3.4.1","@aws-sdk/util-user-agent-node":"3.4.1","@aws-sdk/util-utf8-browser":"3.4.1","@aws-sdk/util-utf8-node":"3.4.1",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.4.1","@aws-sdk/client-iam":"3.4.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-cognito-identity",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"}}},function(module){module.exports={name:"@aws-sdk/client-pinpoint",description:"AWS SDK for JavaScript Pinpoint Client for Node.js, Browser and React Native",version:"3.4.1",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs",test:"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.4.1","@aws-sdk/credential-provider-node":"3.4.1","@aws-sdk/fetch-http-handler":"3.4.1","@aws-sdk/hash-node":"3.4.1","@aws-sdk/invalid-dependency":"3.4.1","@aws-sdk/middleware-content-length":"3.4.1","@aws-sdk/middleware-host-header":"3.4.1","@aws-sdk/middleware-logger":"3.4.1","@aws-sdk/middleware-retry":"3.4.1","@aws-sdk/middleware-serde":"3.4.1","@aws-sdk/middleware-signing":"3.4.1","@aws-sdk/middleware-stack":"3.4.1","@aws-sdk/middleware-user-agent":"3.4.1","@aws-sdk/node-config-provider":"3.4.1","@aws-sdk/node-http-handler":"3.4.1","@aws-sdk/protocol-http":"3.4.1","@aws-sdk/smithy-client":"3.4.1","@aws-sdk/types":"3.4.1","@aws-sdk/url-parser":"3.4.1","@aws-sdk/url-parser-native":"3.4.1","@aws-sdk/util-base64-browser":"3.4.1","@aws-sdk/util-base64-node":"3.4.1","@aws-sdk/util-body-length-browser":"3.4.1","@aws-sdk/util-body-length-node":"3.4.1","@aws-sdk/util-user-agent-browser":"3.4.1","@aws-sdk/util-user-agent-node":"3.4.1","@aws-sdk/util-utf8-browser":"3.4.1","@aws-sdk/util-utf8-node":"3.4.1",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.4.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-pinpoint",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-pinpoint"}}},function(module){module.exports={name:"@aws-sdk/client-kinesis",description:"AWS SDK for JavaScript Kinesis Client for Node.js, Browser and React Native",version:"3.4.1",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs",test:"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.4.1","@aws-sdk/credential-provider-node":"3.4.1","@aws-sdk/eventstream-serde-browser":"3.4.1","@aws-sdk/eventstream-serde-config-resolver":"3.4.1","@aws-sdk/eventstream-serde-node":"3.4.1","@aws-sdk/fetch-http-handler":"3.4.1","@aws-sdk/hash-node":"3.4.1","@aws-sdk/invalid-dependency":"3.4.1","@aws-sdk/middleware-content-length":"3.4.1","@aws-sdk/middleware-host-header":"3.4.1","@aws-sdk/middleware-logger":"3.4.1","@aws-sdk/middleware-retry":"3.4.1","@aws-sdk/middleware-serde":"3.4.1","@aws-sdk/middleware-signing":"3.4.1","@aws-sdk/middleware-stack":"3.4.1","@aws-sdk/middleware-user-agent":"3.4.1","@aws-sdk/node-config-provider":"3.4.1","@aws-sdk/node-http-handler":"3.4.1","@aws-sdk/protocol-http":"3.4.1","@aws-sdk/smithy-client":"3.4.1","@aws-sdk/types":"3.4.1","@aws-sdk/url-parser":"3.4.1","@aws-sdk/url-parser-native":"3.4.1","@aws-sdk/util-base64-browser":"3.4.1","@aws-sdk/util-base64-node":"3.4.1","@aws-sdk/util-body-length-browser":"3.4.1","@aws-sdk/util-body-length-node":"3.4.1","@aws-sdk/util-user-agent-browser":"3.4.1","@aws-sdk/util-user-agent-node":"3.4.1","@aws-sdk/util-utf8-browser":"3.4.1","@aws-sdk/util-utf8-node":"3.4.1","@aws-sdk/util-waiter":"3.4.1",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.4.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-kinesis",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-kinesis"}}},function(module){module.exports={name:"@aws-sdk/client-firehose",description:"AWS SDK for JavaScript Firehose Client for Node.js, Browser and React Native",version:"3.4.1",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs",test:"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.4.1","@aws-sdk/credential-provider-node":"3.4.1","@aws-sdk/fetch-http-handler":"3.4.1","@aws-sdk/hash-node":"3.4.1","@aws-sdk/invalid-dependency":"3.4.1","@aws-sdk/middleware-content-length":"3.4.1","@aws-sdk/middleware-host-header":"3.4.1","@aws-sdk/middleware-logger":"3.4.1","@aws-sdk/middleware-retry":"3.4.1","@aws-sdk/middleware-serde":"3.4.1","@aws-sdk/middleware-signing":"3.4.1","@aws-sdk/middleware-stack":"3.4.1","@aws-sdk/middleware-user-agent":"3.4.1","@aws-sdk/node-config-provider":"3.4.1","@aws-sdk/node-http-handler":"3.4.1","@aws-sdk/protocol-http":"3.4.1","@aws-sdk/smithy-client":"3.4.1","@aws-sdk/types":"3.4.1","@aws-sdk/url-parser":"3.4.1","@aws-sdk/url-parser-native":"3.4.1","@aws-sdk/util-base64-browser":"3.4.1","@aws-sdk/util-base64-node":"3.4.1","@aws-sdk/util-body-length-browser":"3.4.1","@aws-sdk/util-body-length-node":"3.4.1","@aws-sdk/util-user-agent-browser":"3.4.1","@aws-sdk/util-user-agent-node":"3.4.1","@aws-sdk/util-utf8-browser":"3.4.1","@aws-sdk/util-utf8-node":"3.4.1",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.4.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-firehose",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-firehose"}}},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(498);module.exports=function(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},function(module){module.exports={name:"@aws-sdk/client-personalize-events",description:"AWS SDK for JavaScript Personalize Events Client for Node.js, Browser and React Native",version:"3.4.1",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs",test:"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.4.1","@aws-sdk/credential-provider-node":"3.4.1","@aws-sdk/fetch-http-handler":"3.4.1","@aws-sdk/hash-node":"3.4.1","@aws-sdk/invalid-dependency":"3.4.1","@aws-sdk/middleware-content-length":"3.4.1","@aws-sdk/middleware-host-header":"3.4.1","@aws-sdk/middleware-logger":"3.4.1","@aws-sdk/middleware-retry":"3.4.1","@aws-sdk/middleware-serde":"3.4.1","@aws-sdk/middleware-signing":"3.4.1","@aws-sdk/middleware-stack":"3.4.1","@aws-sdk/middleware-user-agent":"3.4.1","@aws-sdk/node-config-provider":"3.4.1","@aws-sdk/node-http-handler":"3.4.1","@aws-sdk/protocol-http":"3.4.1","@aws-sdk/smithy-client":"3.4.1","@aws-sdk/types":"3.4.1","@aws-sdk/url-parser":"3.4.1","@aws-sdk/url-parser-native":"3.4.1","@aws-sdk/util-base64-browser":"3.4.1","@aws-sdk/util-base64-node":"3.4.1","@aws-sdk/util-body-length-browser":"3.4.1","@aws-sdk/util-body-length-node":"3.4.1","@aws-sdk/util-user-agent-browser":"3.4.1","@aws-sdk/util-user-agent-node":"3.4.1","@aws-sdk/util-utf8-browser":"3.4.1","@aws-sdk/util-utf8-node":"3.4.1",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.4.1","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-personalize-events",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-personalize-events"}}},function(module,exports,__webpack_require__){"use strict";const nodeToJson=__webpack_require__(570),xmlToNodeobj=__webpack_require__(165),x2xmlnode=__webpack_require__(165),buildOptions=__webpack_require__(94).buildOptions,validator=__webpack_require__(572);exports.parse=function(xmlData,options,validationOption){if(validationOption){!0===validationOption&&(validationOption={});const result=validator.validate(xmlData,validationOption);if(!0!==result)throw Error(result.err.msg)}options=buildOptions(options,x2xmlnode.defaultOptions,x2xmlnode.props);const traversableObj=xmlToNodeobj.getTraversalObj(xmlData,options);return nodeToJson.convertToJson(traversableObj,options)},exports.convertTonimn=__webpack_require__(573).convert2nimn,exports.getTraversalObj=xmlToNodeobj.getTraversalObj,exports.convertToJson=nodeToJson.convertToJson,exports.convertToJsonString=__webpack_require__(574).convertToJsonString,exports.validate=validator.validate,exports.j2xParser=__webpack_require__(575),exports.parseToNimn=function(xmlData,schema,options){return exports.convertTonimn(exports.getTraversalObj(xmlData,options),schema,options)}},function(module){module.exports={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.4.1",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js",test:"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.4.1","@aws-sdk/credential-provider-node":"3.4.1","@aws-sdk/eventstream-serde-browser":"3.4.1","@aws-sdk/eventstream-serde-config-resolver":"3.4.1","@aws-sdk/eventstream-serde-node":"3.4.1","@aws-sdk/fetch-http-handler":"3.4.1","@aws-sdk/hash-blob-browser":"3.4.1","@aws-sdk/hash-node":"3.4.1","@aws-sdk/hash-stream-node":"3.4.1","@aws-sdk/invalid-dependency":"3.4.1","@aws-sdk/md5-js":"3.4.1","@aws-sdk/middleware-apply-body-checksum":"3.4.1","@aws-sdk/middleware-bucket-endpoint":"3.4.1","@aws-sdk/middleware-content-length":"3.4.1","@aws-sdk/middleware-expect-continue":"3.4.1","@aws-sdk/middleware-host-header":"3.4.1","@aws-sdk/middleware-location-constraint":"3.4.1","@aws-sdk/middleware-logger":"3.4.1","@aws-sdk/middleware-retry":"3.4.1","@aws-sdk/middleware-sdk-s3":"3.4.1","@aws-sdk/middleware-serde":"3.4.1","@aws-sdk/middleware-signing":"3.4.1","@aws-sdk/middleware-ssec":"3.4.1","@aws-sdk/middleware-stack":"3.4.1","@aws-sdk/middleware-user-agent":"3.4.1","@aws-sdk/node-config-provider":"3.4.1","@aws-sdk/node-http-handler":"3.4.1","@aws-sdk/protocol-http":"3.4.1","@aws-sdk/smithy-client":"3.4.1","@aws-sdk/types":"3.4.1","@aws-sdk/url-parser":"3.4.1","@aws-sdk/url-parser-native":"3.4.1","@aws-sdk/util-base64-browser":"3.4.1","@aws-sdk/util-base64-node":"3.4.1","@aws-sdk/util-body-length-browser":"3.4.1","@aws-sdk/util-body-length-node":"3.4.1","@aws-sdk/util-user-agent-browser":"3.4.1","@aws-sdk/util-user-agent-node":"3.4.1","@aws-sdk/util-utf8-browser":"3.4.1","@aws-sdk/util-utf8-node":"3.4.1","@aws-sdk/util-waiter":"3.4.1","@aws-sdk/xml-builder":"3.4.1","fast-xml-parser":"^3.16.0",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.4.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(576).Observable},function(module,exports,__webpack_require__){(function(global){var factory;factory=function(){return function(global){var data,localStorage=global.localStorage||(data={},{setItem:function(key,item){data[key]=item},getItem:function(key){return data[key]},removeItem:function(key){delete data[key]}}),MESSAGE_TYPE_CONNECT=1,MESSAGE_TYPE_CONNACK=2,MESSAGE_TYPE_PUBLISH=3,MESSAGE_TYPE_PUBACK=4,MESSAGE_TYPE_PUBREC=5,MESSAGE_TYPE_PUBREL=6,MESSAGE_TYPE_PUBCOMP=7,MESSAGE_TYPE_SUBSCRIBE=8,MESSAGE_TYPE_SUBACK=9,MESSAGE_TYPE_UNSUBSCRIBE=10,MESSAGE_TYPE_UNSUBACK=11,MESSAGE_TYPE_PINGREQ=12,MESSAGE_TYPE_PINGRESP=13,MESSAGE_TYPE_DISCONNECT=14,validate=function(obj,keys){for(var key in obj)if(obj.hasOwnProperty(key)){if(!keys.hasOwnProperty(key)){var errorStr="Unknown property, "+key+". Valid properties are:";for(var validKey in keys)keys.hasOwnProperty(validKey)&&(errorStr=errorStr+" "+validKey);throw new Error(errorStr)}if(typeof obj[key]!==keys[key])throw new Error(format(ERROR.INVALID_TYPE,[typeof obj[key],key]))}},scope=function(f,scope){return function(){return f.apply(scope,arguments)}},ERROR={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},CONNACK_RC={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},format=function(error,substitutions){var text=error.text;if(substitutions)for(var field,start,i=0;i<substitutions.length;i++)if(field="{"+i+"}",(start=text.indexOf(field))>0){var part1=text.substring(0,start),part2=text.substring(start+field.length);text=part1+substitutions[i]+part2}return text},MqttProtoIdentifierv3=[0,6,77,81,73,115,100,112,3],MqttProtoIdentifierv4=[0,4,77,81,84,84,4],WireMessage=function(type,options){for(var name in this.type=type,options)options.hasOwnProperty(name)&&(this[name]=options[name])};function decodeMessage(input,pos){var digit,startingPos=pos,first=input[pos],type=first>>4,messageInfo=first&=15;pos+=1;var remLength=0,multiplier=1;do{if(pos==input.length)return[null,startingPos];remLength+=(127&(digit=input[pos++]))*multiplier,multiplier*=128}while(0!=(128&digit));var endPos=pos+remLength;if(endPos>input.length)return[null,startingPos];var wireMessage=new WireMessage(type);switch(type){case MESSAGE_TYPE_CONNACK:1&input[pos++]&&(wireMessage.sessionPresent=!0),wireMessage.returnCode=input[pos++];break;case MESSAGE_TYPE_PUBLISH:var qos=messageInfo>>1&3,len=readUint16(input,pos),topicName=parseUTF8(input,pos+=2,len);pos+=len,qos>0&&(wireMessage.messageIdentifier=readUint16(input,pos),pos+=2);var message=new Message(input.subarray(pos,endPos));1==(1&messageInfo)&&(message.retained=!0),8==(8&messageInfo)&&(message.duplicate=!0),message.qos=qos,message.destinationName=topicName,wireMessage.payloadMessage=message;break;case MESSAGE_TYPE_PUBACK:case MESSAGE_TYPE_PUBREC:case MESSAGE_TYPE_PUBREL:case MESSAGE_TYPE_PUBCOMP:case MESSAGE_TYPE_UNSUBACK:wireMessage.messageIdentifier=readUint16(input,pos);break;case MESSAGE_TYPE_SUBACK:wireMessage.messageIdentifier=readUint16(input,pos),pos+=2,wireMessage.returnCode=input.subarray(pos,endPos)}return[wireMessage,endPos]}function writeUint16(input,buffer,offset){return buffer[offset++]=input>>8,buffer[offset++]=input%256,offset}function writeString(input,utf8Length,buffer,offset){return stringToUTF8(input,buffer,offset=writeUint16(utf8Length,buffer,offset)),offset+utf8Length}function readUint16(buffer,offset){return 256*buffer[offset]+buffer[offset+1]}function UTF8Length(input){for(var output=0,i=0;i<input.length;i++){var charCode=input.charCodeAt(i);charCode>2047?(55296<=charCode&&charCode<=56319&&(i++,output++),output+=3):charCode>127?output+=2:output++}return output}function stringToUTF8(input,output,start){for(var pos=start,i=0;i<input.length;i++){var charCode=input.charCodeAt(i);if(55296<=charCode&&charCode<=56319){var lowCharCode=input.charCodeAt(++i);if(isNaN(lowCharCode))throw new Error(format(ERROR.MALFORMED_UNICODE,[charCode,lowCharCode]));charCode=lowCharCode-56320+(charCode-55296<<10)+65536}charCode<=127?output[pos++]=charCode:charCode<=2047?(output[pos++]=charCode>>6&31|192,output[pos++]=63&charCode|128):charCode<=65535?(output[pos++]=charCode>>12&15|224,output[pos++]=charCode>>6&63|128,output[pos++]=63&charCode|128):(output[pos++]=charCode>>18&7|240,output[pos++]=charCode>>12&63|128,output[pos++]=charCode>>6&63|128,output[pos++]=63&charCode|128)}return output}function parseUTF8(input,offset,length){for(var utf16,output="",pos=offset;pos<offset+length;){var byte1=input[pos++];if(byte1<128)utf16=byte1;else{var byte2=input[pos++]-128;if(byte2<0)throw new Error(format(ERROR.MALFORMED_UTF,[byte1.toString(16),byte2.toString(16),""]));if(byte1<224)utf16=64*(byte1-192)+byte2;else{var byte3=input[pos++]-128;if(byte3<0)throw new Error(format(ERROR.MALFORMED_UTF,[byte1.toString(16),byte2.toString(16),byte3.toString(16)]));if(byte1<240)utf16=4096*(byte1-224)+64*byte2+byte3;else{var byte4=input[pos++]-128;if(byte4<0)throw new Error(format(ERROR.MALFORMED_UTF,[byte1.toString(16),byte2.toString(16),byte3.toString(16),byte4.toString(16)]));if(!(byte1<248))throw new Error(format(ERROR.MALFORMED_UTF,[byte1.toString(16),byte2.toString(16),byte3.toString(16),byte4.toString(16)]));utf16=262144*(byte1-240)+4096*byte2+64*byte3+byte4}}}utf16>65535&&(utf16-=65536,output+=String.fromCharCode(55296+(utf16>>10)),utf16=56320+(1023&utf16)),output+=String.fromCharCode(utf16)}return output}WireMessage.prototype.encode=function(){var willMessagePayloadBytes,first=(15&this.type)<<4,remLength=0,topicStrLength=[],destinationNameLength=0;switch(void 0!==this.messageIdentifier&&(remLength+=2),this.type){case MESSAGE_TYPE_CONNECT:switch(this.mqttVersion){case 3:remLength+=MqttProtoIdentifierv3.length+3;break;case 4:remLength+=MqttProtoIdentifierv4.length+3}remLength+=UTF8Length(this.clientId)+2,void 0!==this.willMessage&&(remLength+=UTF8Length(this.willMessage.destinationName)+2,(willMessagePayloadBytes=this.willMessage.payloadBytes)instanceof Uint8Array||(willMessagePayloadBytes=new Uint8Array(payloadBytes)),remLength+=willMessagePayloadBytes.byteLength+2),void 0!==this.userName&&(remLength+=UTF8Length(this.userName)+2),void 0!==this.password&&(remLength+=UTF8Length(this.password)+2);break;case MESSAGE_TYPE_SUBSCRIBE:first|=2;for(var i=0;i<this.topics.length;i++)topicStrLength[i]=UTF8Length(this.topics[i]),remLength+=topicStrLength[i]+2;remLength+=this.requestedQos.length;break;case MESSAGE_TYPE_UNSUBSCRIBE:for(first|=2,i=0;i<this.topics.length;i++)topicStrLength[i]=UTF8Length(this.topics[i]),remLength+=topicStrLength[i]+2;break;case MESSAGE_TYPE_PUBREL:first|=2;break;case MESSAGE_TYPE_PUBLISH:this.payloadMessage.duplicate&&(first|=8),first=first|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(first|=1),remLength+=(destinationNameLength=UTF8Length(this.payloadMessage.destinationName))+2;var payloadBytes=this.payloadMessage.payloadBytes;remLength+=payloadBytes.byteLength,payloadBytes instanceof ArrayBuffer?payloadBytes=new Uint8Array(payloadBytes):payloadBytes instanceof Uint8Array||(payloadBytes=new Uint8Array(payloadBytes.buffer))}var mbi=function(number){var output=new Array(1),numBytes=0;do{var digit=number%128;(number>>=7)>0&&(digit|=128),output[numBytes++]=digit}while(number>0&&numBytes<4);return output}(remLength),pos=mbi.length+1,buffer=new ArrayBuffer(remLength+pos),byteStream=new Uint8Array(buffer);if(byteStream[0]=first,byteStream.set(mbi,1),this.type==MESSAGE_TYPE_PUBLISH)pos=writeString(this.payloadMessage.destinationName,destinationNameLength,byteStream,pos);else if(this.type==MESSAGE_TYPE_CONNECT){switch(this.mqttVersion){case 3:byteStream.set(MqttProtoIdentifierv3,pos),pos+=MqttProtoIdentifierv3.length;break;case 4:byteStream.set(MqttProtoIdentifierv4,pos),pos+=MqttProtoIdentifierv4.length}var connectFlags=0;this.cleanSession&&(connectFlags=2),void 0!==this.willMessage&&(connectFlags|=4,connectFlags|=this.willMessage.qos<<3,this.willMessage.retained&&(connectFlags|=32)),void 0!==this.userName&&(connectFlags|=128),void 0!==this.password&&(connectFlags|=64),byteStream[pos++]=connectFlags,pos=writeUint16(this.keepAliveInterval,byteStream,pos)}switch(void 0!==this.messageIdentifier&&(pos=writeUint16(this.messageIdentifier,byteStream,pos)),this.type){case MESSAGE_TYPE_CONNECT:pos=writeString(this.clientId,UTF8Length(this.clientId),byteStream,pos),void 0!==this.willMessage&&(pos=writeString(this.willMessage.destinationName,UTF8Length(this.willMessage.destinationName),byteStream,pos),pos=writeUint16(willMessagePayloadBytes.byteLength,byteStream,pos),byteStream.set(willMessagePayloadBytes,pos),pos+=willMessagePayloadBytes.byteLength),void 0!==this.userName&&(pos=writeString(this.userName,UTF8Length(this.userName),byteStream,pos)),void 0!==this.password&&(pos=writeString(this.password,UTF8Length(this.password),byteStream,pos));break;case MESSAGE_TYPE_PUBLISH:byteStream.set(payloadBytes,pos);break;case MESSAGE_TYPE_SUBSCRIBE:for(i=0;i<this.topics.length;i++)pos=writeString(this.topics[i],topicStrLength[i],byteStream,pos),byteStream[pos++]=this.requestedQos[i];break;case MESSAGE_TYPE_UNSUBSCRIBE:for(i=0;i<this.topics.length;i++)pos=writeString(this.topics[i],topicStrLength[i],byteStream,pos)}return buffer};var Pinger=function(client,keepAliveInterval){this._client=client,this._keepAliveInterval=1e3*keepAliveInterval,this.isReset=!1;var pingReq=new WireMessage(MESSAGE_TYPE_PINGREQ).encode(),doTimeout=function(pinger){return function(){return doPing.apply(pinger)}},doPing=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(pingReq),this.timeout=setTimeout(doTimeout(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(ERROR.PING_TIMEOUT.code,format(ERROR.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(doTimeout(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},Timeout=function(client,timeoutSeconds,action,args){timeoutSeconds||(timeoutSeconds=30),this.timeout=setTimeout(function(action,client,args){return function(){return action.apply(client,args)}}(action,client,args),1e3*timeoutSeconds),this.cancel=function(){clearTimeout(this.timeout)}},ClientImpl=function(uri,host,port,path,clientId){if(!("WebSocket"in global)||null===global.WebSocket)throw new Error(format(ERROR.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in global)||null===global.ArrayBuffer)throw new Error(format(ERROR.UNSUPPORTED,["ArrayBuffer"]));for(var key in this._trace("Paho.Client",uri,host,port,path,clientId),this.host=host,this.port=port,this.path=path,this.uri=uri,this.clientId=clientId,this._wsuri=null,this._localKey=host+":"+port+("/mqtt"!=path?":"+path:"")+":"+clientId+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,localStorage)0!==key.indexOf("Sent:"+this._localKey)&&0!==key.indexOf("Received:"+this._localKey)||this.restore(key)};ClientImpl.prototype.host=null,ClientImpl.prototype.port=null,ClientImpl.prototype.path=null,ClientImpl.prototype.uri=null,ClientImpl.prototype.clientId=null,ClientImpl.prototype.socket=null,ClientImpl.prototype.connected=!1,ClientImpl.prototype.maxMessageIdentifier=65536,ClientImpl.prototype.connectOptions=null,ClientImpl.prototype.hostIndex=null,ClientImpl.prototype.onConnected=null,ClientImpl.prototype.onConnectionLost=null,ClientImpl.prototype.onMessageDelivered=null,ClientImpl.prototype.onMessageArrived=null,ClientImpl.prototype.traceFunction=null,ClientImpl.prototype._msg_queue=null,ClientImpl.prototype._buffered_msg_queue=null,ClientImpl.prototype._connectTimeout=null,ClientImpl.prototype.sendPinger=null,ClientImpl.prototype.receivePinger=null,ClientImpl.prototype._reconnectInterval=1,ClientImpl.prototype._reconnecting=!1,ClientImpl.prototype._reconnectTimeout=null,ClientImpl.prototype.disconnectedPublishing=!1,ClientImpl.prototype.disconnectedBufferSize=5e3,ClientImpl.prototype.receiveBuffer=null,ClientImpl.prototype._traceBuffer=null,ClientImpl.prototype._MAX_TRACE_ENTRIES=100,ClientImpl.prototype.connect=function(connectOptions){var connectOptionsMasked=this._traceMask(connectOptions,"password");if(this._trace("Client.connect",connectOptionsMasked,this.socket,this.connected),this.connected)throw new Error(format(ERROR.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(format(ERROR.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=connectOptions,this._reconnectInterval=1,this._reconnecting=!1,connectOptions.uris?(this.hostIndex=0,this._doConnect(connectOptions.uris[0])):this._doConnect(this.uri)},ClientImpl.prototype.subscribe=function(filter,subscribeOptions){if(this._trace("Client.subscribe",filter,subscribeOptions),!this.connected)throw new Error(format(ERROR.INVALID_STATE,["not connected"]));var wireMessage=new WireMessage(MESSAGE_TYPE_SUBSCRIBE);wireMessage.topics=filter.constructor===Array?filter:[filter],void 0===subscribeOptions.qos&&(subscribeOptions.qos=0),wireMessage.requestedQos=[];for(var i=0;i<wireMessage.topics.length;i++)wireMessage.requestedQos[i]=subscribeOptions.qos;subscribeOptions.onSuccess&&(wireMessage.onSuccess=function(grantedQos){subscribeOptions.onSuccess({invocationContext:subscribeOptions.invocationContext,grantedQos:grantedQos})}),subscribeOptions.onFailure&&(wireMessage.onFailure=function(errorCode){subscribeOptions.onFailure({invocationContext:subscribeOptions.invocationContext,errorCode:errorCode,errorMessage:format(errorCode)})}),subscribeOptions.timeout&&(wireMessage.timeOut=new Timeout(this,subscribeOptions.timeout,subscribeOptions.onFailure,[{invocationContext:subscribeOptions.invocationContext,errorCode:ERROR.SUBSCRIBE_TIMEOUT.code,errorMessage:format(ERROR.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(wireMessage),this._schedule_message(wireMessage)},ClientImpl.prototype.unsubscribe=function(filter,unsubscribeOptions){if(this._trace("Client.unsubscribe",filter,unsubscribeOptions),!this.connected)throw new Error(format(ERROR.INVALID_STATE,["not connected"]));var wireMessage=new WireMessage(MESSAGE_TYPE_UNSUBSCRIBE);wireMessage.topics=filter.constructor===Array?filter:[filter],unsubscribeOptions.onSuccess&&(wireMessage.callback=function(){unsubscribeOptions.onSuccess({invocationContext:unsubscribeOptions.invocationContext})}),unsubscribeOptions.timeout&&(wireMessage.timeOut=new Timeout(this,unsubscribeOptions.timeout,unsubscribeOptions.onFailure,[{invocationContext:unsubscribeOptions.invocationContext,errorCode:ERROR.UNSUBSCRIBE_TIMEOUT.code,errorMessage:format(ERROR.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(wireMessage),this._schedule_message(wireMessage)},ClientImpl.prototype.send=function(message){this._trace("Client.send",message);var wireMessage=new WireMessage(MESSAGE_TYPE_PUBLISH);if(wireMessage.payloadMessage=message,this.connected)message.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(format(ERROR.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(format(ERROR.BUFFER_FULL,[this.disconnectedBufferSize]));message.qos>0?this._requires_ack(wireMessage):(wireMessage.sequence=++this._sequence,this._buffered_msg_queue.unshift(wireMessage))}},ClientImpl.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(format(ERROR.INVALID_STATE,["not connecting or connected"]));var wireMessage=new WireMessage(MESSAGE_TYPE_DISCONNECT);this._notify_msg_sent[wireMessage]=scope(this._disconnected,this),this._schedule_message(wireMessage)},ClientImpl.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var key in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",key,this._sentMessages[key]);for(var key in this._receivedMessages)this._trace("_receivedMessages ",key,this._receivedMessages[key]);return this._traceBuffer}},ClientImpl.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},ClientImpl.prototype.stopTrace=function(){delete this._traceBuffer},ClientImpl.prototype._doConnect=function(wsurl){if(this.connectOptions.useSSL){var uriParts=wsurl.split(":");uriParts[0]="wss",wsurl=uriParts.join(":")}this._wsuri=wsurl,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(wsurl,["mqttv3.1"]):this.socket=new WebSocket(wsurl,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=scope(this._on_socket_open,this),this.socket.onmessage=scope(this._on_socket_message,this),this.socket.onerror=scope(this._on_socket_error,this),this.socket.onclose=scope(this._on_socket_close,this),this.sendPinger=new Pinger(this,this.connectOptions.keepAliveInterval),this.receivePinger=new Pinger(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new Timeout(this,this.connectOptions.timeout,this._disconnected,[ERROR.CONNECT_TIMEOUT.code,format(ERROR.CONNECT_TIMEOUT)])},ClientImpl.prototype._schedule_message=function(message){this._msg_queue.unshift(message),this.connected&&this._process_queue()},ClientImpl.prototype.store=function(prefix,wireMessage){var storedMessage={type:wireMessage.type,messageIdentifier:wireMessage.messageIdentifier,version:1};switch(wireMessage.type){case MESSAGE_TYPE_PUBLISH:wireMessage.pubRecReceived&&(storedMessage.pubRecReceived=!0),storedMessage.payloadMessage={};for(var hex="",messageBytes=wireMessage.payloadMessage.payloadBytes,i=0;i<messageBytes.length;i++)messageBytes[i]<=15?hex=hex+"0"+messageBytes[i].toString(16):hex+=messageBytes[i].toString(16);storedMessage.payloadMessage.payloadHex=hex,storedMessage.payloadMessage.qos=wireMessage.payloadMessage.qos,storedMessage.payloadMessage.destinationName=wireMessage.payloadMessage.destinationName,wireMessage.payloadMessage.duplicate&&(storedMessage.payloadMessage.duplicate=!0),wireMessage.payloadMessage.retained&&(storedMessage.payloadMessage.retained=!0),0===prefix.indexOf("Sent:")&&(void 0===wireMessage.sequence&&(wireMessage.sequence=++this._sequence),storedMessage.sequence=wireMessage.sequence);break;default:throw Error(format(ERROR.INVALID_STORED_DATA,[prefix+this._localKey+wireMessage.messageIdentifier,storedMessage]))}localStorage.setItem(prefix+this._localKey+wireMessage.messageIdentifier,JSON.stringify(storedMessage))},ClientImpl.prototype.restore=function(key){var value=localStorage.getItem(key),storedMessage=JSON.parse(value),wireMessage=new WireMessage(storedMessage.type,storedMessage);switch(storedMessage.type){case MESSAGE_TYPE_PUBLISH:for(var hex=storedMessage.payloadMessage.payloadHex,buffer=new ArrayBuffer(hex.length/2),byteStream=new Uint8Array(buffer),i=0;hex.length>=2;){var x=parseInt(hex.substring(0,2),16);hex=hex.substring(2,hex.length),byteStream[i++]=x}var payloadMessage=new Message(byteStream);payloadMessage.qos=storedMessage.payloadMessage.qos,payloadMessage.destinationName=storedMessage.payloadMessage.destinationName,storedMessage.payloadMessage.duplicate&&(payloadMessage.duplicate=!0),storedMessage.payloadMessage.retained&&(payloadMessage.retained=!0),wireMessage.payloadMessage=payloadMessage;break;default:throw Error(format(ERROR.INVALID_STORED_DATA,[key,value]))}0===key.indexOf("Sent:"+this._localKey)?(wireMessage.payloadMessage.duplicate=!0,this._sentMessages[wireMessage.messageIdentifier]=wireMessage):0===key.indexOf("Received:"+this._localKey)&&(this._receivedMessages[wireMessage.messageIdentifier]=wireMessage)},ClientImpl.prototype._process_queue=function(){for(var message=null;message=this._msg_queue.pop();)this._socket_send(message),this._notify_msg_sent[message]&&(this._notify_msg_sent[message](),delete this._notify_msg_sent[message])},ClientImpl.prototype._requires_ack=function(wireMessage){var messageCount=Object.keys(this._sentMessages).length;if(messageCount>this.maxMessageIdentifier)throw Error("Too many messages:"+messageCount);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;wireMessage.messageIdentifier=this._message_identifier,this._sentMessages[wireMessage.messageIdentifier]=wireMessage,wireMessage.type===MESSAGE_TYPE_PUBLISH&&this.store("Sent:",wireMessage),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},ClientImpl.prototype._on_socket_open=function(){var wireMessage=new WireMessage(MESSAGE_TYPE_CONNECT,this.connectOptions);wireMessage.clientId=this.clientId,this._socket_send(wireMessage)},ClientImpl.prototype._on_socket_message=function(event){this._trace("Client._on_socket_message",event.data);for(var messages=this._deframeMessages(event.data),i=0;i<messages.length;i+=1)this._handleMessage(messages[i])},ClientImpl.prototype._deframeMessages=function(data){var byteArray=new Uint8Array(data),messages=[];if(this.receiveBuffer){var newData=new Uint8Array(this.receiveBuffer.length+byteArray.length);newData.set(this.receiveBuffer),newData.set(byteArray,this.receiveBuffer.length),byteArray=newData,delete this.receiveBuffer}try{for(var offset=0;offset<byteArray.length;){var result=decodeMessage(byteArray,offset),wireMessage=result[0];if(offset=result[1],null===wireMessage)break;messages.push(wireMessage)}offset<byteArray.length&&(this.receiveBuffer=byteArray.subarray(offset))}catch(error){var errorStack="undefined"==error.hasOwnProperty("stack")?error.stack.toString():"No Error Stack Available";return void this._disconnected(ERROR.INTERNAL_ERROR.code,format(ERROR.INTERNAL_ERROR,[error.message,errorStack]))}return messages},ClientImpl.prototype._handleMessage=function(wireMessage){this._trace("Client._handleMessage",wireMessage);try{switch(wireMessage.type){case MESSAGE_TYPE_CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var key in this._sentMessages){var sentMessage=this._sentMessages[key];localStorage.removeItem("Sent:"+this._localKey+sentMessage.messageIdentifier)}for(var key in this._sentMessages={},this._receivedMessages){var receivedMessage=this._receivedMessages[key];localStorage.removeItem("Received:"+this._localKey+receivedMessage.messageIdentifier)}this._receivedMessages={}}if(0!==wireMessage.returnCode){this._disconnected(ERROR.CONNACK_RETURNCODE.code,format(ERROR.CONNACK_RETURNCODE,[wireMessage.returnCode,CONNACK_RC[wireMessage.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var sequencedMessages=[];for(var msgId in this._sentMessages)this._sentMessages.hasOwnProperty(msgId)&&sequencedMessages.push(this._sentMessages[msgId]);if(this._buffered_msg_queue.length>0)for(var msg=null;msg=this._buffered_msg_queue.pop();)sequencedMessages.push(msg),this.onMessageDelivered&&(this._notify_msg_sent[msg]=this.onMessageDelivered(msg.payloadMessage));sequencedMessages=sequencedMessages.sort((function(a,b){return a.sequence-b.sequence}));for(var i=0,len=sequencedMessages.length;i<len;i++)if((sentMessage=sequencedMessages[i]).type==MESSAGE_TYPE_PUBLISH&&sentMessage.pubRecReceived){var pubRelMessage=new WireMessage(MESSAGE_TYPE_PUBREL,{messageIdentifier:sentMessage.messageIdentifier});this._schedule_message(pubRelMessage)}else this._schedule_message(sentMessage);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var reconnected=!1;this._reconnecting&&(reconnected=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(reconnected,this._wsuri),this._process_queue();break;case MESSAGE_TYPE_PUBLISH:this._receivePublish(wireMessage);break;case MESSAGE_TYPE_PUBACK:(sentMessage=this._sentMessages[wireMessage.messageIdentifier])&&(delete this._sentMessages[wireMessage.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+wireMessage.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(sentMessage.payloadMessage));break;case MESSAGE_TYPE_PUBREC:(sentMessage=this._sentMessages[wireMessage.messageIdentifier])&&(sentMessage.pubRecReceived=!0,pubRelMessage=new WireMessage(MESSAGE_TYPE_PUBREL,{messageIdentifier:wireMessage.messageIdentifier}),this.store("Sent:",sentMessage),this._schedule_message(pubRelMessage));break;case MESSAGE_TYPE_PUBREL:receivedMessage=this._receivedMessages[wireMessage.messageIdentifier],localStorage.removeItem("Received:"+this._localKey+wireMessage.messageIdentifier),receivedMessage&&(this._receiveMessage(receivedMessage),delete this._receivedMessages[wireMessage.messageIdentifier]);var pubCompMessage=new WireMessage(MESSAGE_TYPE_PUBCOMP,{messageIdentifier:wireMessage.messageIdentifier});this._schedule_message(pubCompMessage);break;case MESSAGE_TYPE_PUBCOMP:sentMessage=this._sentMessages[wireMessage.messageIdentifier],delete this._sentMessages[wireMessage.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+wireMessage.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(sentMessage.payloadMessage);break;case MESSAGE_TYPE_SUBACK:(sentMessage=this._sentMessages[wireMessage.messageIdentifier])&&(sentMessage.timeOut&&sentMessage.timeOut.cancel(),128===wireMessage.returnCode[0]?sentMessage.onFailure&&sentMessage.onFailure(wireMessage.returnCode):sentMessage.onSuccess&&sentMessage.onSuccess(wireMessage.returnCode),delete this._sentMessages[wireMessage.messageIdentifier]);break;case MESSAGE_TYPE_UNSUBACK:(sentMessage=this._sentMessages[wireMessage.messageIdentifier])&&(sentMessage.timeOut&&sentMessage.timeOut.cancel(),sentMessage.callback&&sentMessage.callback(),delete this._sentMessages[wireMessage.messageIdentifier]);break;case MESSAGE_TYPE_PINGRESP:this.sendPinger.reset();break;case MESSAGE_TYPE_DISCONNECT:this._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code,format(ERROR.INVALID_MQTT_MESSAGE_TYPE,[wireMessage.type]));break;default:this._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code,format(ERROR.INVALID_MQTT_MESSAGE_TYPE,[wireMessage.type]))}}catch(error){var errorStack="undefined"==error.hasOwnProperty("stack")?error.stack.toString():"No Error Stack Available";return void this._disconnected(ERROR.INTERNAL_ERROR.code,format(ERROR.INTERNAL_ERROR,[error.message,errorStack]))}},ClientImpl.prototype._on_socket_error=function(error){this._reconnecting||this._disconnected(ERROR.SOCKET_ERROR.code,format(ERROR.SOCKET_ERROR,[error.data]))},ClientImpl.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(ERROR.SOCKET_CLOSE.code,format(ERROR.SOCKET_CLOSE))},ClientImpl.prototype._socket_send=function(wireMessage){if(1==wireMessage.type){var wireMessageMasked=this._traceMask(wireMessage,"password");this._trace("Client._socket_send",wireMessageMasked)}else this._trace("Client._socket_send",wireMessage);this.socket.send(wireMessage.encode()),this.sendPinger.reset()},ClientImpl.prototype._receivePublish=function(wireMessage){switch(wireMessage.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(wireMessage);break;case 1:var pubAckMessage=new WireMessage(MESSAGE_TYPE_PUBACK,{messageIdentifier:wireMessage.messageIdentifier});this._schedule_message(pubAckMessage),this._receiveMessage(wireMessage);break;case 2:this._receivedMessages[wireMessage.messageIdentifier]=wireMessage,this.store("Received:",wireMessage);var pubRecMessage=new WireMessage(MESSAGE_TYPE_PUBREC,{messageIdentifier:wireMessage.messageIdentifier});this._schedule_message(pubRecMessage);break;default:throw Error("Invaild qos="+wireMessage.payloadMessage.qos)}},ClientImpl.prototype._receiveMessage=function(wireMessage){this.onMessageArrived&&this.onMessageArrived(wireMessage.payloadMessage)},ClientImpl.prototype._connected=function(reconnect,uri){this.onConnected&&this.onConnected(reconnect,uri)},ClientImpl.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},ClientImpl.prototype._disconnected=function(errorCode,errorText){if(this._trace("Client._disconnected",errorCode,errorText),void 0!==errorCode&&this._reconnecting)this._reconnectTimeout=new Timeout(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===errorCode&&(errorCode=ERROR.OK.code,errorText=format(ERROR.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:errorCode,errorMessage:errorText,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),errorCode!==ERROR.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:errorCode,errorMessage:errorText})},ClientImpl.prototype._trace=function(){if(this.traceFunction){var args=Array.prototype.slice.call(arguments);for(var i in args)void 0!==args[i]&&args.splice(i,1,JSON.stringify(args[i]));var record=args.join("");this.traceFunction({severity:"Debug",message:record})}if(null!==this._traceBuffer){i=0;for(var max=arguments.length;i<max;i++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===i||void 0===arguments[i]?this._traceBuffer.push(arguments[i]):this._traceBuffer.push("  "+JSON.stringify(arguments[i]))}},ClientImpl.prototype._traceMask=function(traceObject,masked){var traceObjectMasked={};for(var attr in traceObject)traceObject.hasOwnProperty(attr)&&(traceObjectMasked[attr]=attr==masked?"******":traceObject[attr]);return traceObjectMasked};var Message=function(newPayload){var payload,destinationName;if(!("string"==typeof newPayload||newPayload instanceof ArrayBuffer||ArrayBuffer.isView(newPayload)&&!(newPayload instanceof DataView)))throw format(ERROR.INVALID_ARGUMENT,[newPayload,"newPayload"]);payload=newPayload;var qos=0,retained=!1,duplicate=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof payload?payload:parseUTF8(payload,0,payload.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof payload){var buffer=new ArrayBuffer(UTF8Length(payload)),byteStream=new Uint8Array(buffer);return stringToUTF8(payload,byteStream,0),byteStream}return payload}},destinationName:{enumerable:!0,get:function(){return destinationName},set:function(newDestinationName){if("string"!=typeof newDestinationName)throw new Error(format(ERROR.INVALID_ARGUMENT,[newDestinationName,"newDestinationName"]));destinationName=newDestinationName}},qos:{enumerable:!0,get:function(){return qos},set:function(newQos){if(0!==newQos&&1!==newQos&&2!==newQos)throw new Error("Invalid argument:"+newQos);qos=newQos}},retained:{enumerable:!0,get:function(){return retained},set:function(newRetained){if("boolean"!=typeof newRetained)throw new Error(format(ERROR.INVALID_ARGUMENT,[newRetained,"newRetained"]));retained=newRetained}},topic:{enumerable:!0,get:function(){return destinationName},set:function(newTopic){destinationName=newTopic}},duplicate:{enumerable:!0,get:function(){return duplicate},set:function(newDuplicate){duplicate=newDuplicate}}})};return{Client:function(host,port,path,clientId){var uri;if("string"!=typeof host)throw new Error(format(ERROR.INVALID_TYPE,[typeof host,"host"]));if(2==arguments.length){clientId=port;var match=(uri=host).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!match)throw new Error(format(ERROR.INVALID_ARGUMENT,[host,"host"]));host=match[4]||match[2],port=parseInt(match[7]),path=match[8]}else{if(3==arguments.length&&(clientId=path,path="/mqtt"),"number"!=typeof port||port<0)throw new Error(format(ERROR.INVALID_TYPE,[typeof port,"port"]));if("string"!=typeof path)throw new Error(format(ERROR.INVALID_TYPE,[typeof path,"path"]));var ipv6AddSBracket=-1!==host.indexOf(":")&&"["!==host.slice(0,1)&&"]"!==host.slice(-1);uri="ws://"+(ipv6AddSBracket?"["+host+"]":host)+":"+port+path}for(var clientIdLength=0,i=0;i<clientId.length;i++){var charCode=clientId.charCodeAt(i);55296<=charCode&&charCode<=56319&&i++,clientIdLength++}if("string"!=typeof clientId||clientIdLength>65535)throw new Error(format(ERROR.INVALID_ARGUMENT,[clientId,"clientId"]));var client=new ClientImpl(uri,host,port,path,clientId);Object.defineProperties(this,{host:{get:function(){return host},set:function(){throw new Error(format(ERROR.UNSUPPORTED_OPERATION))}},port:{get:function(){return port},set:function(){throw new Error(format(ERROR.UNSUPPORTED_OPERATION))}},path:{get:function(){return path},set:function(){throw new Error(format(ERROR.UNSUPPORTED_OPERATION))}},uri:{get:function(){return uri},set:function(){throw new Error(format(ERROR.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return client.clientId},set:function(){throw new Error(format(ERROR.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return client.onConnected},set:function(newOnConnected){if("function"!=typeof newOnConnected)throw new Error(format(ERROR.INVALID_TYPE,[typeof newOnConnected,"onConnected"]));client.onConnected=newOnConnected}},disconnectedPublishing:{get:function(){return client.disconnectedPublishing},set:function(newDisconnectedPublishing){client.disconnectedPublishing=newDisconnectedPublishing}},disconnectedBufferSize:{get:function(){return client.disconnectedBufferSize},set:function(newDisconnectedBufferSize){client.disconnectedBufferSize=newDisconnectedBufferSize}},onConnectionLost:{get:function(){return client.onConnectionLost},set:function(newOnConnectionLost){if("function"!=typeof newOnConnectionLost)throw new Error(format(ERROR.INVALID_TYPE,[typeof newOnConnectionLost,"onConnectionLost"]));client.onConnectionLost=newOnConnectionLost}},onMessageDelivered:{get:function(){return client.onMessageDelivered},set:function(newOnMessageDelivered){if("function"!=typeof newOnMessageDelivered)throw new Error(format(ERROR.INVALID_TYPE,[typeof newOnMessageDelivered,"onMessageDelivered"]));client.onMessageDelivered=newOnMessageDelivered}},onMessageArrived:{get:function(){return client.onMessageArrived},set:function(newOnMessageArrived){if("function"!=typeof newOnMessageArrived)throw new Error(format(ERROR.INVALID_TYPE,[typeof newOnMessageArrived,"onMessageArrived"]));client.onMessageArrived=newOnMessageArrived}},trace:{get:function(){return client.traceFunction},set:function(trace){if("function"!=typeof trace)throw new Error(format(ERROR.INVALID_TYPE,[typeof trace,"onTrace"]));client.traceFunction=trace}}}),this.connect=function(connectOptions){if(validate(connectOptions=connectOptions||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===connectOptions.keepAliveInterval&&(connectOptions.keepAliveInterval=60),connectOptions.mqttVersion>4||connectOptions.mqttVersion<3)throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===connectOptions.mqttVersion?(connectOptions.mqttVersionExplicit=!1,connectOptions.mqttVersion=4):connectOptions.mqttVersionExplicit=!0,void 0!==connectOptions.password&&void 0===connectOptions.userName)throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.password,"connectOptions.password"]));if(connectOptions.willMessage){if(!(connectOptions.willMessage instanceof Message))throw new Error(format(ERROR.INVALID_TYPE,[connectOptions.willMessage,"connectOptions.willMessage"]));if(connectOptions.willMessage.stringPayload=null,void 0===connectOptions.willMessage.destinationName)throw new Error(format(ERROR.INVALID_TYPE,[typeof connectOptions.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===connectOptions.cleanSession&&(connectOptions.cleanSession=!0),connectOptions.hosts){if(!(connectOptions.hosts instanceof Array))throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.hosts,"connectOptions.hosts"]));if(connectOptions.hosts.length<1)throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.hosts,"connectOptions.hosts"]));for(var usingURIs=!1,i=0;i<connectOptions.hosts.length;i++){if("string"!=typeof connectOptions.hosts[i])throw new Error(format(ERROR.INVALID_TYPE,[typeof connectOptions.hosts[i],"connectOptions.hosts["+i+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(connectOptions.hosts[i])){if(0===i)usingURIs=!0;else if(!usingURIs)throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.hosts[i],"connectOptions.hosts["+i+"]"]))}else if(usingURIs)throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.hosts[i],"connectOptions.hosts["+i+"]"]))}if(usingURIs)connectOptions.uris=connectOptions.hosts;else{if(!connectOptions.ports)throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.ports,"connectOptions.ports"]));if(!(connectOptions.ports instanceof Array))throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.ports,"connectOptions.ports"]));if(connectOptions.hosts.length!==connectOptions.ports.length)throw new Error(format(ERROR.INVALID_ARGUMENT,[connectOptions.ports,"connectOptions.ports"]));for(connectOptions.uris=[],i=0;i<connectOptions.hosts.length;i++){if("number"!=typeof connectOptions.ports[i]||connectOptions.ports[i]<0)throw new Error(format(ERROR.INVALID_TYPE,[typeof connectOptions.ports[i],"connectOptions.ports["+i+"]"]));var host=connectOptions.hosts[i],port=connectOptions.ports[i],ipv6=-1!==host.indexOf(":");uri="ws://"+(ipv6?"["+host+"]":host)+":"+port+path,connectOptions.uris.push(uri)}}}client.connect(connectOptions)},this.subscribe=function(filter,subscribeOptions){if("string"!=typeof filter&&filter.constructor!==Array)throw new Error("Invalid argument:"+filter);if(validate(subscribeOptions=subscribeOptions||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),subscribeOptions.timeout&&!subscribeOptions.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==subscribeOptions.qos&&0!==subscribeOptions.qos&&1!==subscribeOptions.qos&&2!==subscribeOptions.qos)throw new Error(format(ERROR.INVALID_ARGUMENT,[subscribeOptions.qos,"subscribeOptions.qos"]));client.subscribe(filter,subscribeOptions)},this.unsubscribe=function(filter,unsubscribeOptions){if("string"!=typeof filter&&filter.constructor!==Array)throw new Error("Invalid argument:"+filter);if(validate(unsubscribeOptions=unsubscribeOptions||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),unsubscribeOptions.timeout&&!unsubscribeOptions.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");client.unsubscribe(filter,unsubscribeOptions)},this.send=function(topic,payload,qos,retained){var message;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(topic instanceof Message)&&"string"!=typeof topic)throw new Error("Invalid argument:"+typeof topic);if(void 0===(message=topic).destinationName)throw new Error(format(ERROR.INVALID_ARGUMENT,[message.destinationName,"Message.destinationName"]));client.send(message)}else(message=new Message(payload)).destinationName=topic,arguments.length>=3&&(message.qos=qos),arguments.length>=4&&(message.retained=retained),client.send(message)},this.publish=function(topic,payload,qos,retained){var message;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(topic instanceof Message)&&"string"!=typeof topic)throw new Error("Invalid argument:"+typeof topic);if(void 0===(message=topic).destinationName)throw new Error(format(ERROR.INVALID_ARGUMENT,[message.destinationName,"Message.destinationName"]));client.send(message)}else(message=new Message(payload)).destinationName=topic,arguments.length>=3&&(message.qos=qos),arguments.length>=4&&(message.retained=retained),client.send(message)},this.disconnect=function(){client.disconnect()},this.getTraceLog=function(){return client.getTraceLog()},this.startTrace=function(){client.startTrace()},this.stopTrace=function(){client.stopTrace()},this.isConnected=function(){return client.connected}},Message:Message}}(void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},module.exports=factory()}).call(this,__webpack_require__(54))},function(module,exports,__webpack_require__){"use strict";var target,methods,Observable=__webpack_require__(578);function send(p,message,value){if(p._observer)sendMessage(p._observer,message,value);else if(p._observers){var list=[];p._observers.forEach((function(to){list.push(to)})),list.forEach((function(to){sendMessage(to,message,value)}))}}function sendMessage(observer,message,value){if(!observer.closed)switch(message){case"next":return observer.next(value);case"error":return observer.error(value);case"complete":return observer.complete(value)}}function hasObserver(p){return p._observer||p._observers&&p._observers.size>0}function PushStream(opts){var p=this;this._observer=null,this._observers=null,this._observable=new Observable((function(observer){return function(p,opts){!hasObserver(p)&&opts&&opts.start&&opts.start()}(p,opts),function(p,observer){p._observers?p._observers.add(observer):p._observer?(p._observers=new Set,p._observers.add(p._observer),p._observers.add(observer),p._observer=null):p._observer=observer}(p,observer),function(){!function(p,observer){p._observers?p._observers.delete(observer):p._observer===observer&&(p._observer=null)}(p,observer),function(p,opts){!hasObserver(p)&&opts&&opts.pause&&opts.pause()}(p,opts)}}))}target=PushStream.prototype,methods={get observable(){return this._observable},get observed(){return hasObserver(this)},next:function(x){send(this,"next",x)},error:function(e){send(this,"error",e)},complete:function(x){send(this,"complete",x)}},Object.keys(methods).forEach((function(k){var desc=Object.getOwnPropertyDescriptor(methods,k);desc.enumerable=!1,Object.defineProperty(target,k,desc)})),module.exports=PushStream},function(module){module.exports={name:"@aws-sdk/client-lex-runtime-service",description:"AWS SDK for JavaScript Lex Runtime Service Client for Node.js, Browser and React Native",version:"3.4.1",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js",test:"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.4.1","@aws-sdk/credential-provider-node":"3.4.1","@aws-sdk/fetch-http-handler":"3.4.1","@aws-sdk/hash-node":"3.4.1","@aws-sdk/invalid-dependency":"3.4.1","@aws-sdk/middleware-content-length":"3.4.1","@aws-sdk/middleware-host-header":"3.4.1","@aws-sdk/middleware-logger":"3.4.1","@aws-sdk/middleware-retry":"3.4.1","@aws-sdk/middleware-serde":"3.4.1","@aws-sdk/middleware-signing":"3.4.1","@aws-sdk/middleware-stack":"3.4.1","@aws-sdk/middleware-user-agent":"3.4.1","@aws-sdk/node-config-provider":"3.4.1","@aws-sdk/node-http-handler":"3.4.1","@aws-sdk/protocol-http":"3.4.1","@aws-sdk/smithy-client":"3.4.1","@aws-sdk/types":"3.4.1","@aws-sdk/url-parser":"3.4.1","@aws-sdk/url-parser-native":"3.4.1","@aws-sdk/util-base64-browser":"3.4.1","@aws-sdk/util-base64-node":"3.4.1","@aws-sdk/util-body-length-browser":"3.4.1","@aws-sdk/util-body-length-node":"3.4.1","@aws-sdk/util-user-agent-browser":"3.4.1","@aws-sdk/util-user-agent-node":"3.4.1","@aws-sdk/util-utf8-browser":"3.4.1","@aws-sdk/util-utf8-node":"3.4.1",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.4.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-lex-runtime-service",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-lex-runtime-service"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DateUtils}));var __read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},DateUtils={clockOffset:0,getDateWithClockOffset:function(){return DateUtils.clockOffset?new Date((new Date).getTime()+DateUtils.clockOffset):new Date},getClockOffset:function(){return DateUtils.clockOffset},getHeaderStringFromDate:function(date){return void 0===date&&(date=DateUtils.getDateWithClockOffset()),date.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(header){var _a=__read(header.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),year=_a[1],month=_a[2],day=_a[3],hour=_a[4],minute=_a[5],second=_a[6];return new Date(Date.UTC(Number(year),Number(month)-1,Number(day),Number(hour),Number(minute),Number(second)))},isClockSkewed:function(serverDate){return Math.abs(serverDate.getTime()-DateUtils.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(error){if(!error.response||!error.response.headers)return!1;var headers=error.response.headers;return Boolean("BadRequestException"===headers["x-amzn-errortype"]&&(headers.date||headers.Date))},setClockOffset:function(offset){DateUtils.clockOffset=offset}}},,,,,,,,,,function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var Kushki_1=__webpack_require__(224);module.exports=Kushki_1.Kushki},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.CONTAINER=void 0;var Identifiers_1=__webpack_require__(44),KushkiGateway_1=__webpack_require__(153),SiftScience_1=__webpack_require__(384),inversify_1=__webpack_require__(42),AuthService_1=__webpack_require__(388),CardAsyncService_1=__webpack_require__(583),CardDynamicService_1=__webpack_require__(584),CardService_1=__webpack_require__(585),CardSubscriptionDynamicService_1=__webpack_require__(594),CashService_1=__webpack_require__(595),CommissionService_1=__webpack_require__(596),KPayService_1=__webpack_require__(597),KushkiService_1=__webpack_require__(598),MobileProcessorService_1=__webpack_require__(599),MultiMerchantService_1=__webpack_require__(600),PayoutsCashService_1=__webpack_require__(601),PayoutsTransferService_1=__webpack_require__(602),SecureService_1=__webpack_require__(603),TransferService_1=__webpack_require__(604),TransferSubscriptionsService_1=__webpack_require__(605),CONTAINER=new inversify_1.Container;exports.CONTAINER=CONTAINER,CONTAINER.bind(Identifiers_1.IDENTIFIERS.AuthService).toFactory((function(context){return function(){return new AuthService_1.AuthService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.CardService).toFactory((function(context){return function(regional){return new CardService_1.CardService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway),context.container.get(Identifiers_1.IDENTIFIERS.AuthService)(regional),context.container.get(Identifiers_1.IDENTIFIERS.AntiFraud)(regional))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.CashService).toFactory((function(context){return function(regional){return new CashService_1.CashService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway),context.container.get(Identifiers_1.IDENTIFIERS.AntiFraud)(regional))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.CardDynamicService).toFactory((function(context){return function(){return new CardDynamicService_1.CardDynamicService(context.container.get(Identifiers_1.IDENTIFIERS.CardService)(),context.container.get(Identifiers_1.IDENTIFIERS.CardAsyncService)())}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.CardSubscriptionDynamicService).toFactory((function(context){return function(){return new CardSubscriptionDynamicService_1.CardSubscriptionDynamicService(context.container.get(Identifiers_1.IDENTIFIERS.CardService)(),context.container.get(Identifiers_1.IDENTIFIERS.CardAsyncService)())}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.MobileProcessorService).toFactory((function(context){return function(){return new MobileProcessorService_1.MobileProcessorService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.KushkiService).toFactory((function(context){return function(_regional){return new KushkiService_1.KushkiService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.TransferService).toFactory((function(context){return function(regional){return new TransferService_1.TransferService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway),context.container.get(Identifiers_1.IDENTIFIERS.AntiFraud)(regional))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.SecureService).toFactory((function(context){return function(){return new SecureService_1.SecureService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.MultiMerchantService).toFactory((function(context){return function(){return new MultiMerchantService_1.MultiMerchantService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.CommissionService).toFactory((function(context){return function(){return new CommissionService_1.CommissionService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.CardAsyncService).toFactory((function(context){return function(){return new CardAsyncService_1.CardAsyncService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.PayoutsCashService).toFactory((function(context){return function(regional){return new PayoutsCashService_1.PayoutsCashService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway),context.container.get(Identifiers_1.IDENTIFIERS.AntiFraud)(regional))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.TransferSubscriptionService).toFactory((function(context){return function(regional){return new TransferSubscriptionsService_1.TransferSubscriptionsService(context.container.get(Identifiers_1.IDENTIFIERS.AntiFraud)(regional),context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.PayoutsTransferService).toFactory((function(context){return function(regional){return new PayoutsTransferService_1.PayoutsTransferService(context.container.get(Identifiers_1.IDENTIFIERS.AntiFraud)(regional),context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.KPayService).toFactory((function(context){return function(regional){return new KPayService_1.KPayService(context.container.get(Identifiers_1.IDENTIFIERS.KushkiGateway),context.container.get(Identifiers_1.IDENTIFIERS.AuthService)(regional))}})),CONTAINER.bind(Identifiers_1.IDENTIFIERS.KushkiGateway).to(KushkiGateway_1.KushkiGateway),CONTAINER.bind(Identifiers_1.IDENTIFIERS.AntiFraud).toFactory((function(){return function(regional){return new SiftScience_1.SiftScience(regional)}}))},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65),bind=__webpack_require__(225),Axios=__webpack_require__(339),mergeConfig=__webpack_require__(231);function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);return utils.extend(instance,Axios.prototype,context),utils.extend(instance,context),instance}var axios=createInstance(__webpack_require__(228));axios.Axios=Axios,axios.create=function(instanceConfig){return createInstance(mergeConfig(axios.defaults,instanceConfig))},axios.Cancel=__webpack_require__(232),axios.CancelToken=__webpack_require__(352),axios.isCancel=__webpack_require__(227),axios.all=function(promises){return Promise.all(promises)},axios.spread=__webpack_require__(353),axios.isAxiosError=__webpack_require__(354),module.exports=axios,module.exports.default=axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65),buildURL=__webpack_require__(226),InterceptorManager=__webpack_require__(340),dispatchRequest=__webpack_require__(341),mergeConfig=__webpack_require__(231);function Axios(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function(config){"string"==typeof config?(config=arguments[1]||{}).url=arguments[0]:config=config||{},(config=mergeConfig(this.defaults,config)).method?config.method=config.method.toLowerCase():this.defaults.method?config.method=this.defaults.method.toLowerCase():config.method="get";var chain=[dispatchRequest,void 0],promise=Promise.resolve(config);for(this.interceptors.request.forEach((function(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)})),this.interceptors.response.forEach((function(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)}));chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise},Axios.prototype.getUri=function(config){return config=mergeConfig(this.defaults,config),buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],(function(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:(config||{}).data}))}})),utils.forEach(["post","put","patch"],(function(method){Axios.prototype[method]=function(url,data,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:data}))}})),module.exports=Axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(fulfilled,rejected){return this.handlers.push({fulfilled:fulfilled,rejected:rejected}),this.handlers.length-1},InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)},InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,(function(h){null!==h&&fn(h)}))},module.exports=InterceptorManager},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65),transformData=__webpack_require__(342),isCancel=__webpack_require__(227),defaults=__webpack_require__(228);function throwIfCancellationRequested(config){config.cancelToken&&config.cancelToken.throwIfRequested()}module.exports=function(config){return throwIfCancellationRequested(config),config.headers=config.headers||{},config.data=transformData(config.data,config.headers,config.transformRequest),config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers),utils.forEach(["delete","get","head","post","put","patch","common"],(function(method){delete config.headers[method]})),(config.adapter||defaults.adapter)(config).then((function(response){return throwIfCancellationRequested(config),response.data=transformData(response.data,response.headers,config.transformResponse),response}),(function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse))),Promise.reject(reason)}))}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65);module.exports=function(data,headers,fns){return utils.forEach(fns,(function(fn){data=fn(data,headers)})),data}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65);module.exports=function(headers,normalizedName){utils.forEach(headers,(function(value,name){name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()&&(headers[normalizedName]=value,delete headers[name])}))}},function(module,exports,__webpack_require__){"use strict";var createError=__webpack_require__(230);module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;response.status&&validateStatus&&!validateStatus(response.status)?reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response)):resolve(response)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(error,config,code,request,response){return error.config=config,code&&(error.code=code),error.request=request,error.response=response,error.isAxiosError=!0,error.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},error}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65);module.exports=utils.isStandardBrowserEnv()?{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value)),utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils.isString(path)&&cookie.push("path="+path),utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(module,exports,__webpack_require__){"use strict";var isAbsoluteURL=__webpack_require__(348),combineURLs=__webpack_require__(349);module.exports=function(baseURL,requestedURL){return baseURL&&!isAbsoluteURL(requestedURL)?combineURLs(baseURL,requestedURL):requestedURL}},function(module,exports,__webpack_require__){"use strict";module.exports=function(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(headers){var key,val,i,parsed={};return headers?(utils.forEach(headers.split("\n"),(function(line){if(i=line.indexOf(":"),key=utils.trim(line.substr(0,i)).toLowerCase(),val=utils.trim(line.substr(i+1)),key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0)return;parsed[key]="set-cookie"===key?(parsed[key]?parsed[key]:[]).concat([val]):parsed[key]?parsed[key]+", "+val:val}})),parsed):parsed}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(65);module.exports=utils.isStandardBrowserEnv()?function(){var originURL,msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");function resolveURL(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}return originURL=resolveURL(window.location.href),function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return!0}},function(module,exports,__webpack_require__){"use strict";var Cancel=__webpack_require__(232);function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise((function(resolve){resolvePromise=resolve}));var token=this;executor((function(message){token.reason||(token.reason=new Cancel(message),resolvePromise(token.reason))}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var cancel;return{token:new CancelToken((function(c){cancel=c})),cancel:cancel}},module.exports=CancelToken},function(module,exports,__webpack_require__){"use strict";module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(payload){return"object"==typeof payload&&!0===payload.isAxiosError}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});exports.__esModule=!0,exports.AurusError=void 0;var AurusError=function(_super){function AurusError(code,message){var _this=_super.call(this,"AURUS"+code)||this;return _this.code=code,_this._message=message,Object.setPrototypeOf(_this,AurusError.prototype),_this}return __extends(AurusError,_super),AurusError.prototype.getMessage=function(){return this._message},AurusError.prototype.getStatusCode=function(){return 400},AurusError}(Error);exports.AurusError=AurusError},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.EnvironmentEnum=void 0,function(EnvironmentEnum){EnvironmentEnum.uat="https://api-uat.kushkipagos.com/",EnvironmentEnum.prod="https://api.kushkipagos.com/",EnvironmentEnum.regionalUat="https://regional-uat.kushkipagos.com/",EnvironmentEnum.regionalProd="https://regional.kushkipagos.com/"}(exports.EnvironmentEnum||(exports.EnvironmentEnum={}))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.PathEnum=void 0,function(PathEnum){PathEnum.commission_configuration="commission/v1/configuration",PathEnum.multi_merchant_commission="multi-merchant/v1/configuration/",PathEnum.card_tokens="card/v1/tokens",PathEnum.card_token_charge="subscriptions/v1/card/",PathEnum.cash_tokens="cash/v1/tokens",PathEnum.card_subscription_tokens="v1/subscription-tokens",PathEnum.transfer_tokens="transfer/v1/tokens",PathEnum.merchant_settings="merchant/v1/merchant/",PathEnum.bank_list="transfer/v1/bankList",PathEnum.bank_list_transfer_subscription="transfer-subscriptions/v1/bankList",PathEnum.bank_list_payouts_transfer="payouts/transfer/v1/bankList",PathEnum.deferred_options="card/v1/deferred/",PathEnum.gateway_status="rules/v1/gatewayStatus",PathEnum.secure_validation="rules/v1/secureValidation",PathEnum.bin_info="card/v1/bin/",PathEnum.brands_by_merchant="card/v1/merchant/brands",PathEnum.card_async_tokens="card-async/v1/tokens",PathEnum.subscription_card_async_tokens="subscriptions/v1/card-async/tokens",PathEnum.payouts_cash_tokens="payouts/cash/v1/tokens",PathEnum.transfer_subscription_tokens="transfer-subscriptions/v1/tokens",PathEnum.payouts_transfer_tokens="payouts/transfer/v1/tokens",PathEnum.mobile_processor_token="mobile-processor/v1/token",PathEnum.mobile_processor_charge="mobile-processor/v1/charge",PathEnum.cybersource_jwt="card/v1/authToken",PathEnum.savedPaymentMethods="/personal-wallet/v1/payment-data/",PathEnum.kpay_delete_payment_method="personal-wallet/v1/walletSubscription",PathEnum.kpay_get_saved_payment_methods="personal-wallet/v1/payment-data"}(exports.PathEnum||(exports.PathEnum={}))},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=y[2&op[0]?"return":op[0]?"throw":"next"])&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[0,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var binding_1=__webpack_require__(359),ERROR_MSGS=__webpack_require__(66),literal_types_1=__webpack_require__(92),METADATA_KEY=__webpack_require__(45),metadata_reader_1=__webpack_require__(233),planner_1=__webpack_require__(360),resolver_1=__webpack_require__(367),binding_to_syntax_1=__webpack_require__(369),id_1=__webpack_require__(103),serialization_1=__webpack_require__(134),container_snapshot_1=__webpack_require__(372),lookup_1=__webpack_require__(373),Container=function(){function Container(containerOptions){var options=containerOptions||{};if("object"!=typeof options)throw new Error(""+ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===options.defaultScope)options.defaultScope=literal_types_1.BindingScopeEnum.Transient;else if(options.defaultScope!==literal_types_1.BindingScopeEnum.Singleton&&options.defaultScope!==literal_types_1.BindingScopeEnum.Transient&&options.defaultScope!==literal_types_1.BindingScopeEnum.Request)throw new Error(""+ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===options.autoBindInjectable)options.autoBindInjectable=!1;else if("boolean"!=typeof options.autoBindInjectable)throw new Error(""+ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===options.skipBaseClassChecks)options.skipBaseClassChecks=!1;else if("boolean"!=typeof options.skipBaseClassChecks)throw new Error(""+ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:options.autoBindInjectable,defaultScope:options.defaultScope,skipBaseClassChecks:options.skipBaseClassChecks},this.id=id_1.id(),this._bindingDictionary=new lookup_1.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new metadata_reader_1.MetadataReader}return Container.merge=function(container1,container2){var container=new Container,bindingDictionary=planner_1.getBindingDictionary(container),bindingDictionary1=planner_1.getBindingDictionary(container1),bindingDictionary2=planner_1.getBindingDictionary(container2);function copyDictionary(origin,destination){origin.traverse((function(key,value){value.forEach((function(binding){destination.add(binding.serviceIdentifier,binding.clone())}))}))}return copyDictionary(bindingDictionary1,bindingDictionary),copyDictionary(bindingDictionary2,bindingDictionary),container},Container.prototype.load=function(){for(var modules=[],_i=0;_i<arguments.length;_i++)modules[_i]=arguments[_i];for(var getHelpers=this._getContainerModuleHelpersFactory(),_a=0,modules_1=modules;_a<modules_1.length;_a++){var currentModule=modules_1[_a],containerModuleHelpers=getHelpers(currentModule.id);currentModule.registry(containerModuleHelpers.bindFunction,containerModuleHelpers.unbindFunction,containerModuleHelpers.isboundFunction,containerModuleHelpers.rebindFunction)}},Container.prototype.loadAsync=function(){for(var modules=[],_i=0;_i<arguments.length;_i++)modules[_i]=arguments[_i];return __awaiter(this,void 0,void 0,(function(){var getHelpers,_a,modules_2,currentModule,containerModuleHelpers;return __generator(this,(function(_b){switch(_b.label){case 0:getHelpers=this._getContainerModuleHelpersFactory(),_a=0,modules_2=modules,_b.label=1;case 1:return _a<modules_2.length?(currentModule=modules_2[_a],containerModuleHelpers=getHelpers(currentModule.id),[4,currentModule.registry(containerModuleHelpers.bindFunction,containerModuleHelpers.unbindFunction,containerModuleHelpers.isboundFunction,containerModuleHelpers.rebindFunction)]):[3,4];case 2:_b.sent(),_b.label=3;case 3:return _a++,[3,1];case 4:return[2]}}))}))},Container.prototype.unload=function(){for(var _this=this,modules=[],_i=0;_i<arguments.length;_i++)modules[_i]=arguments[_i];var conditionFactory=function(expected){return function(item){return item.moduleId===expected}};modules.forEach((function(module){var condition=conditionFactory(module.id);_this._bindingDictionary.removeByCondition(condition)}))},Container.prototype.bind=function(serviceIdentifier){var scope=this.options.defaultScope||literal_types_1.BindingScopeEnum.Transient,binding=new binding_1.Binding(serviceIdentifier,scope);return this._bindingDictionary.add(serviceIdentifier,binding),new binding_to_syntax_1.BindingToSyntax(binding)},Container.prototype.rebind=function(serviceIdentifier){return this.unbind(serviceIdentifier),this.bind(serviceIdentifier)},Container.prototype.unbind=function(serviceIdentifier){try{this._bindingDictionary.remove(serviceIdentifier)}catch(e){throw new Error(ERROR_MSGS.CANNOT_UNBIND+" "+serialization_1.getServiceIdentifierAsString(serviceIdentifier))}},Container.prototype.unbindAll=function(){this._bindingDictionary=new lookup_1.Lookup},Container.prototype.isBound=function(serviceIdentifier){var bound=this._bindingDictionary.hasKey(serviceIdentifier);return!bound&&this.parent&&(bound=this.parent.isBound(serviceIdentifier)),bound},Container.prototype.isBoundNamed=function(serviceIdentifier,named){return this.isBoundTagged(serviceIdentifier,METADATA_KEY.NAMED_TAG,named)},Container.prototype.isBoundTagged=function(serviceIdentifier,key,value){var bound=!1;if(this._bindingDictionary.hasKey(serviceIdentifier)){var bindings=this._bindingDictionary.get(serviceIdentifier),request_1=planner_1.createMockRequest(this,serviceIdentifier,key,value);bound=bindings.some((function(b){return b.constraint(request_1)}))}return!bound&&this.parent&&(bound=this.parent.isBoundTagged(serviceIdentifier,key,value)),bound},Container.prototype.snapshot=function(){this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},Container.prototype.restore=function(){var snapshot=this._snapshots.pop();if(void 0===snapshot)throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=snapshot.bindings,this._middleware=snapshot.middleware},Container.prototype.createChild=function(containerOptions){var child=new Container(containerOptions||this.options);return child.parent=this,child},Container.prototype.applyMiddleware=function(){for(var middlewares=[],_i=0;_i<arguments.length;_i++)middlewares[_i]=arguments[_i];var initial=this._middleware?this._middleware:this._planAndResolve();this._middleware=middlewares.reduce((function(prev,curr){return curr(prev)}),initial)},Container.prototype.applyCustomMetadataReader=function(metadataReader){this._metadataReader=metadataReader},Container.prototype.get=function(serviceIdentifier){return this._get(!1,!1,literal_types_1.TargetTypeEnum.Variable,serviceIdentifier)},Container.prototype.getTagged=function(serviceIdentifier,key,value){return this._get(!1,!1,literal_types_1.TargetTypeEnum.Variable,serviceIdentifier,key,value)},Container.prototype.getNamed=function(serviceIdentifier,named){return this.getTagged(serviceIdentifier,METADATA_KEY.NAMED_TAG,named)},Container.prototype.getAll=function(serviceIdentifier){return this._get(!0,!0,literal_types_1.TargetTypeEnum.Variable,serviceIdentifier)},Container.prototype.getAllTagged=function(serviceIdentifier,key,value){return this._get(!1,!0,literal_types_1.TargetTypeEnum.Variable,serviceIdentifier,key,value)},Container.prototype.getAllNamed=function(serviceIdentifier,named){return this.getAllTagged(serviceIdentifier,METADATA_KEY.NAMED_TAG,named)},Container.prototype.resolve=function(constructorFunction){var tempContainer=this.createChild();return tempContainer.bind(constructorFunction).toSelf(),tempContainer.get(constructorFunction)},Container.prototype._getContainerModuleHelpersFactory=function(){var _this=this,setModuleId=function(bindingToSyntax,moduleId){bindingToSyntax._binding.moduleId=moduleId},getRebindFunction=function(moduleId){return function(serviceIdentifier){var bindingToSyntax=_this.rebind.bind(_this)(serviceIdentifier);return setModuleId(bindingToSyntax,moduleId),bindingToSyntax}};return function(mId){return{bindFunction:(moduleId=mId,function(serviceIdentifier){var bindingToSyntax=_this.bind.bind(_this)(serviceIdentifier);return setModuleId(bindingToSyntax,moduleId),bindingToSyntax}),isboundFunction:function(serviceIdentifier){return _this.isBound.bind(_this)(serviceIdentifier)},rebindFunction:getRebindFunction(mId),unbindFunction:function(serviceIdentifier){_this.unbind.bind(_this)(serviceIdentifier)}};var moduleId}},Container.prototype._get=function(avoidConstraints,isMultiInject,targetType,serviceIdentifier,key,value){var result=null,defaultArgs={avoidConstraints:avoidConstraints,contextInterceptor:function(context){return context},isMultiInject:isMultiInject,key:key,serviceIdentifier:serviceIdentifier,targetType:targetType,value:value};if(this._middleware){if(null==(result=this._middleware(defaultArgs)))throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN)}else result=this._planAndResolve()(defaultArgs);return result},Container.prototype._planAndResolve=function(){var _this=this;return function(args){var context=planner_1.plan(_this._metadataReader,_this,args.isMultiInject,args.targetType,args.serviceIdentifier,args.key,args.value,args.avoidConstraints);return context=args.contextInterceptor(context),resolver_1.resolve(context)}},Container}();exports.Container=Container},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var literal_types_1=__webpack_require__(92),id_1=__webpack_require__(103),Binding=function(){function Binding(serviceIdentifier,scope){this.id=id_1.id(),this.activated=!1,this.serviceIdentifier=serviceIdentifier,this.scope=scope,this.type=literal_types_1.BindingTypeEnum.Invalid,this.constraint=function(request){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return Binding.prototype.clone=function(){var clone=new Binding(this.serviceIdentifier,this.scope);return clone.activated=!1,clone.implementationType=this.implementationType,clone.dynamicValue=this.dynamicValue,clone.scope=this.scope,clone.type=this.type,clone.factory=this.factory,clone.provider=this.provider,clone.constraint=this.constraint,clone.onActivation=this.onActivation,clone.cache=this.cache,clone},Binding}();exports.Binding=Binding},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_count_1=__webpack_require__(361),ERROR_MSGS=__webpack_require__(66),literal_types_1=__webpack_require__(92),METADATA_KEY=__webpack_require__(45),exceptions_1=__webpack_require__(234),serialization_1=__webpack_require__(134),context_1=__webpack_require__(362),metadata_1=__webpack_require__(77),plan_1=__webpack_require__(363),reflection_utils_1=__webpack_require__(364),request_1=__webpack_require__(366),target_1=__webpack_require__(236);function getBindingDictionary(cntnr){return cntnr._bindingDictionary}function _getActiveBindings(metadataReader,avoidConstraints,context,parentRequest,target){var bindings=getBindings(context.container,target.serviceIdentifier),activeBindings=[];return bindings.length===binding_count_1.BindingCount.NoBindingsAvailable&&context.container.options.autoBindInjectable&&"function"==typeof target.serviceIdentifier&&metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata&&(context.container.bind(target.serviceIdentifier).toSelf(),bindings=getBindings(context.container,target.serviceIdentifier)),activeBindings=avoidConstraints?bindings:bindings.filter((function(binding){var request=new request_1.Request(binding.serviceIdentifier,context,parentRequest,binding,target);return binding.constraint(request)})),function(serviceIdentifier,bindings,target,container){switch(bindings.length){case binding_count_1.BindingCount.NoBindingsAvailable:if(target.isOptional())return bindings;var serviceIdentifierString=serialization_1.getServiceIdentifierAsString(serviceIdentifier),msg=ERROR_MSGS.NOT_REGISTERED;throw msg+=serialization_1.listMetadataForTarget(serviceIdentifierString,target),msg+=serialization_1.listRegisteredBindingsForServiceIdentifier(container,serviceIdentifierString,getBindings),new Error(msg);case binding_count_1.BindingCount.OnlyOneBindingAvailable:if(!target.isArray())return bindings;case binding_count_1.BindingCount.MultipleBindingsAvailable:default:if(target.isArray())return bindings;serviceIdentifierString=serialization_1.getServiceIdentifierAsString(serviceIdentifier),msg=ERROR_MSGS.AMBIGUOUS_MATCH+" "+serviceIdentifierString;throw msg+=serialization_1.listRegisteredBindingsForServiceIdentifier(container,serviceIdentifierString,getBindings),new Error(msg)}}(target.serviceIdentifier,activeBindings,target,context.container),activeBindings}function _createSubRequests(metadataReader,avoidConstraints,serviceIdentifier,context,parentRequest,target){var activeBindings,childRequest;if(null===parentRequest){activeBindings=_getActiveBindings(metadataReader,avoidConstraints,context,null,target),childRequest=new request_1.Request(serviceIdentifier,context,null,activeBindings,target);var thePlan=new plan_1.Plan(context,childRequest);context.addPlan(thePlan)}else activeBindings=_getActiveBindings(metadataReader,avoidConstraints,context,parentRequest,target),childRequest=parentRequest.addChildRequest(target.serviceIdentifier,activeBindings,target);activeBindings.forEach((function(binding){var subChildRequest=null;if(target.isArray())subChildRequest=childRequest.addChildRequest(binding.serviceIdentifier,binding,target);else{if(binding.cache)return;subChildRequest=childRequest}if(binding.type===literal_types_1.BindingTypeEnum.Instance&&null!==binding.implementationType){var dependencies=reflection_utils_1.getDependencies(metadataReader,binding.implementationType);if(!context.container.options.skipBaseClassChecks){var baseClassDependencyCount=reflection_utils_1.getBaseClassDependencyCount(metadataReader,binding.implementationType);if(dependencies.length<baseClassDependencyCount){var error=ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(reflection_utils_1.getFunctionName(binding.implementationType));throw new Error(error)}}dependencies.forEach((function(dependency){_createSubRequests(metadataReader,!1,dependency.serviceIdentifier,context,subChildRequest,dependency)}))}}))}function getBindings(container,serviceIdentifier){var bindings=[],bindingDictionary=getBindingDictionary(container);return bindingDictionary.hasKey(serviceIdentifier)?bindings=bindingDictionary.get(serviceIdentifier):null!==container.parent&&(bindings=getBindings(container.parent,serviceIdentifier)),bindings}exports.getBindingDictionary=getBindingDictionary,exports.plan=function(metadataReader,container,isMultiInject,targetType,serviceIdentifier,key,value,avoidConstraints){void 0===avoidConstraints&&(avoidConstraints=!1);var context=new context_1.Context(container),target=function(isMultiInject,targetType,serviceIdentifier,name,key,value){var metadataKey=isMultiInject?METADATA_KEY.MULTI_INJECT_TAG:METADATA_KEY.INJECT_TAG,injectMetadata=new metadata_1.Metadata(metadataKey,serviceIdentifier),target=new target_1.Target(targetType,name,serviceIdentifier,injectMetadata);if(void 0!==key){var tagMetadata=new metadata_1.Metadata(key,value);target.metadata.push(tagMetadata)}return target}(isMultiInject,targetType,serviceIdentifier,"",key,value);try{return _createSubRequests(metadataReader,avoidConstraints,serviceIdentifier,context,null,target),context}catch(error){throw exceptions_1.isStackOverflowExeption(error)&&context.plan&&serialization_1.circularDependencyToException(context.plan.rootRequest),error}},exports.createMockRequest=function(container,serviceIdentifier,key,value){var target=new target_1.Target(literal_types_1.TargetTypeEnum.Variable,"",serviceIdentifier,new metadata_1.Metadata(key,value)),context=new context_1.Context(container);return new request_1.Request(serviceIdentifier,context,null,[],target)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var id_1=__webpack_require__(103),Context=function(){function Context(container){this.id=id_1.id(),this.container=container}return Context.prototype.addPlan=function(plan){this.plan=plan},Context.prototype.setCurrentRequest=function(currentRequest){this.currentRequest=currentRequest},Context}();exports.Context=Context},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Plan=function(parentContext,rootRequest){this.parentContext=parentContext,this.rootRequest=rootRequest};exports.Plan=Plan},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var inject_1=__webpack_require__(235),ERROR_MSGS=__webpack_require__(66),literal_types_1=__webpack_require__(92),METADATA_KEY=__webpack_require__(45),serialization_1=__webpack_require__(134);exports.getFunctionName=serialization_1.getFunctionName;var target_1=__webpack_require__(236);function getTargets(metadataReader,constructorName,func,isBaseClass){var metadata=metadataReader.getConstructorMetadata(func),serviceIdentifiers=metadata.compilerGeneratedMetadata;if(void 0===serviceIdentifiers){var msg=ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION+" "+constructorName+".";throw new Error(msg)}var constructorArgsMetadata=metadata.userGeneratedMetadata,keys=Object.keys(constructorArgsMetadata),constructorTargets=function(isBaseClass,constructorName,serviceIdentifiers,constructorArgsMetadata,iterations){for(var targets=[],i=0;i<iterations;i++){var target=getConstructorArgsAsTarget(i,isBaseClass,constructorName,serviceIdentifiers,constructorArgsMetadata);null!==target&&targets.push(target)}return targets}(isBaseClass,constructorName,serviceIdentifiers,constructorArgsMetadata,0===func.length&&keys.length>0?keys.length:func.length),propertyTargets=getClassPropsAsTargets(metadataReader,func);return constructorTargets.concat(propertyTargets)}function getConstructorArgsAsTarget(index,isBaseClass,constructorName,serviceIdentifiers,constructorArgsMetadata){var targetMetadata=constructorArgsMetadata[index.toString()]||[],metadata=formatTargetMetadata(targetMetadata),isManaged=!0!==metadata.unmanaged,serviceIdentifier=serviceIdentifiers[index],injectIdentifier=metadata.inject||metadata.multiInject;if((serviceIdentifier=injectIdentifier||serviceIdentifier)instanceof inject_1.LazyServiceIdentifer&&(serviceIdentifier=serviceIdentifier.unwrap()),isManaged){if(!isBaseClass&&(serviceIdentifier===Object||serviceIdentifier===Function||void 0===serviceIdentifier)){var msg=ERROR_MSGS.MISSING_INJECT_ANNOTATION+" argument "+index+" in class "+constructorName+".";throw new Error(msg)}var target=new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument,metadata.targetName,serviceIdentifier);return target.metadata=targetMetadata,target}return null}function getClassPropsAsTargets(metadataReader,constructorFunc){for(var classPropsMetadata=metadataReader.getPropertiesMetadata(constructorFunc),targets=[],_i=0,keys_1=Object.keys(classPropsMetadata);_i<keys_1.length;_i++){var key=keys_1[_i],targetMetadata=classPropsMetadata[key],metadata=formatTargetMetadata(classPropsMetadata[key]),targetName=metadata.targetName||key,serviceIdentifier=metadata.inject||metadata.multiInject,target=new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty,targetName,serviceIdentifier);target.metadata=targetMetadata,targets.push(target)}var baseConstructor=Object.getPrototypeOf(constructorFunc.prototype).constructor;if(baseConstructor!==Object){var baseTargets=getClassPropsAsTargets(metadataReader,baseConstructor);targets=targets.concat(baseTargets)}return targets}function formatTargetMetadata(targetMetadata){var targetMetadataMap={};return targetMetadata.forEach((function(m){targetMetadataMap[m.key.toString()]=m.value})),{inject:targetMetadataMap[METADATA_KEY.INJECT_TAG],multiInject:targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],targetName:targetMetadataMap[METADATA_KEY.NAME_TAG],unmanaged:targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]}}exports.getDependencies=function(metadataReader,func){return getTargets(metadataReader,serialization_1.getFunctionName(func),func,!1)},exports.getBaseClassDependencyCount=function getBaseClassDependencyCount(metadataReader,func){var baseConstructor=Object.getPrototypeOf(func.prototype).constructor;if(baseConstructor!==Object){var targets=getTargets(metadataReader,serialization_1.getFunctionName(baseConstructor),baseConstructor,!0),metadata=targets.map((function(t){return t.metadata.filter((function(m){return m.key===METADATA_KEY.UNMANAGED_TAG}))})),unmanagedCount=[].concat.apply([],metadata).length,dependencyCount=targets.length-unmanagedCount;return dependencyCount>0?dependencyCount:getBaseClassDependencyCount(metadataReader,baseConstructor)}return 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var QueryableString=function(){function QueryableString(str){this.str=str}return QueryableString.prototype.startsWith=function(searchString){return 0===this.str.indexOf(searchString)},QueryableString.prototype.endsWith=function(searchString){var reverseString,reverseSearchString=searchString.split("").reverse().join("");return reverseString=this.str.split("").reverse().join(""),this.startsWith.call({str:reverseString},reverseSearchString)},QueryableString.prototype.contains=function(searchString){return-1!==this.str.indexOf(searchString)},QueryableString.prototype.equals=function(compareString){return this.str===compareString},QueryableString.prototype.value=function(){return this.str},QueryableString}();exports.QueryableString=QueryableString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var id_1=__webpack_require__(103),Request=function(){function Request(serviceIdentifier,parentContext,parentRequest,bindings,target){this.id=id_1.id(),this.serviceIdentifier=serviceIdentifier,this.parentContext=parentContext,this.parentRequest=parentRequest,this.target=target,this.childRequests=[],this.bindings=Array.isArray(bindings)?bindings:[bindings],this.requestScope=null===parentRequest?new Map:null}return Request.prototype.addChildRequest=function(serviceIdentifier,bindings,target){var child=new Request(serviceIdentifier,this.parentContext,this,bindings,target);return this.childRequests.push(child),child},Request}();exports.Request=Request},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(66),literal_types_1=__webpack_require__(92),exceptions_1=__webpack_require__(234),serialization_1=__webpack_require__(134),instantiation_1=__webpack_require__(368),invokeFactory=function(factoryType,serviceIdentifier,fn){try{return fn()}catch(error){throw exceptions_1.isStackOverflowExeption(error)?new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType,serviceIdentifier.toString())):error}},_resolveRequest=function(requestScope){return function(request){request.parentContext.setCurrentRequest(request);var bindings=request.bindings,childRequests=request.childRequests,targetIsAnArray=request.target&&request.target.isArray(),targetParentIsNotAnArray=!(request.parentRequest&&request.parentRequest.target&&request.target&&request.parentRequest.target.matchesArray(request.target.serviceIdentifier));if(targetIsAnArray&&targetParentIsNotAnArray)return childRequests.map((function(childRequest){return _resolveRequest(requestScope)(childRequest)}));var result=null;if(!request.target.isOptional()||0!==bindings.length){var binding_1=bindings[0],isSingleton=binding_1.scope===literal_types_1.BindingScopeEnum.Singleton,isRequestSingleton=binding_1.scope===literal_types_1.BindingScopeEnum.Request;if(isSingleton&&binding_1.activated)return binding_1.cache;if(isRequestSingleton&&null!==requestScope&&requestScope.has(binding_1.id))return requestScope.get(binding_1.id);if(binding_1.type===literal_types_1.BindingTypeEnum.ConstantValue)result=binding_1.cache;else if(binding_1.type===literal_types_1.BindingTypeEnum.Function)result=binding_1.cache;else if(binding_1.type===literal_types_1.BindingTypeEnum.Constructor)result=binding_1.implementationType;else if(binding_1.type===literal_types_1.BindingTypeEnum.DynamicValue&&null!==binding_1.dynamicValue)result=invokeFactory("toDynamicValue",binding_1.serviceIdentifier,(function(){return binding_1.dynamicValue(request.parentContext)}));else if(binding_1.type===literal_types_1.BindingTypeEnum.Factory&&null!==binding_1.factory)result=invokeFactory("toFactory",binding_1.serviceIdentifier,(function(){return binding_1.factory(request.parentContext)}));else if(binding_1.type===literal_types_1.BindingTypeEnum.Provider&&null!==binding_1.provider)result=invokeFactory("toProvider",binding_1.serviceIdentifier,(function(){return binding_1.provider(request.parentContext)}));else{if(binding_1.type!==literal_types_1.BindingTypeEnum.Instance||null===binding_1.implementationType){var serviceIdentifier=serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE+" "+serviceIdentifier)}result=instantiation_1.resolveInstance(binding_1.implementationType,childRequests,_resolveRequest(requestScope))}return"function"==typeof binding_1.onActivation&&(result=binding_1.onActivation(request.parentContext,result)),isSingleton&&(binding_1.cache=result,binding_1.activated=!0),isRequestSingleton&&null!==requestScope&&!requestScope.has(binding_1.id)&&requestScope.set(binding_1.id,result),result}}};exports.resolve=function(context){return _resolveRequest(context.plan.rootRequest.requestScope)(context.plan.rootRequest)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var error_msgs_1=__webpack_require__(66),literal_types_1=__webpack_require__(92),METADATA_KEY=__webpack_require__(45);exports.resolveInstance=function(constr,childRequests,resolveRequest){var Func,injections,result=null;if(childRequests.length>0){var constructorInjections=childRequests.filter((function(childRequest){return null!==childRequest.target&&childRequest.target.type===literal_types_1.TargetTypeEnum.ConstructorArgument})).map(resolveRequest);injections=constructorInjections,result=function(instance,childRequests,resolveRequest){var propertyInjectionsRequests=childRequests.filter((function(childRequest){return null!==childRequest.target&&childRequest.target.type===literal_types_1.TargetTypeEnum.ClassProperty})),propertyInjections=propertyInjectionsRequests.map(resolveRequest);return propertyInjectionsRequests.forEach((function(r,index){var propertyName;propertyName=r.target.name.value();var injection=propertyInjections[index];instance[propertyName]=injection})),instance}(result=new((Func=constr).bind.apply(Func,[void 0].concat(injections))),childRequests,resolveRequest)}else result=new constr;return function(constr,result){if(Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT,constr)){var data=Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT,constr);try{result[data.value]()}catch(e){throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name,e.message))}}}(constr,result),result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(66),literal_types_1=__webpack_require__(92),binding_in_when_on_syntax_1=__webpack_require__(370),binding_when_on_syntax_1=__webpack_require__(237),BindingToSyntax=function(){function BindingToSyntax(binding){this._binding=binding}return BindingToSyntax.prototype.to=function(constructor){return this._binding.type=literal_types_1.BindingTypeEnum.Instance,this._binding.implementationType=constructor,new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+ERROR_MSGS.INVALID_TO_SELF_VALUE);var self=this._binding.serviceIdentifier;return this.to(self)},BindingToSyntax.prototype.toConstantValue=function(value){return this._binding.type=literal_types_1.BindingTypeEnum.ConstantValue,this._binding.cache=value,this._binding.dynamicValue=null,this._binding.implementationType=null,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toDynamicValue=function(func){return this._binding.type=literal_types_1.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=func,this._binding.implementationType=null,new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toConstructor=function(constructor){return this._binding.type=literal_types_1.BindingTypeEnum.Constructor,this._binding.implementationType=constructor,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toFactory=function(factory){return this._binding.type=literal_types_1.BindingTypeEnum.Factory,this._binding.factory=factory,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toFunction=function(func){if("function"!=typeof func)throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);var bindingWhenOnSyntax=this.toConstantValue(func);return this._binding.type=literal_types_1.BindingTypeEnum.Function,bindingWhenOnSyntax},BindingToSyntax.prototype.toAutoFactory=function(serviceIdentifier){return this._binding.type=literal_types_1.BindingTypeEnum.Factory,this._binding.factory=function(context){return function(){return context.container.get(serviceIdentifier)}},new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toProvider=function(provider){return this._binding.type=literal_types_1.BindingTypeEnum.Provider,this._binding.provider=provider,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toService=function(service){this.toDynamicValue((function(context){return context.container.get(service)}))},BindingToSyntax}();exports.BindingToSyntax=BindingToSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_in_syntax_1=__webpack_require__(371),binding_on_syntax_1=__webpack_require__(192),binding_when_syntax_1=__webpack_require__(193),BindingInWhenOnSyntax=function(){function BindingInWhenOnSyntax(binding){this._binding=binding,this._bindingWhenSyntax=new binding_when_syntax_1.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new binding_on_syntax_1.BindingOnSyntax(this._binding),this._bindingInSyntax=new binding_in_syntax_1.BindingInSyntax(binding)}return BindingInWhenOnSyntax.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},BindingInWhenOnSyntax.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},BindingInWhenOnSyntax.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},BindingInWhenOnSyntax.prototype.when=function(constraint){return this._bindingWhenSyntax.when(constraint)},BindingInWhenOnSyntax.prototype.whenTargetNamed=function(name){return this._bindingWhenSyntax.whenTargetNamed(name)},BindingInWhenOnSyntax.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},BindingInWhenOnSyntax.prototype.whenTargetTagged=function(tag,value){return this._bindingWhenSyntax.whenTargetTagged(tag,value)},BindingInWhenOnSyntax.prototype.whenInjectedInto=function(parent){return this._bindingWhenSyntax.whenInjectedInto(parent)},BindingInWhenOnSyntax.prototype.whenParentNamed=function(name){return this._bindingWhenSyntax.whenParentNamed(name)},BindingInWhenOnSyntax.prototype.whenParentTagged=function(tag,value){return this._bindingWhenSyntax.whenParentTagged(tag,value)},BindingInWhenOnSyntax.prototype.whenAnyAncestorIs=function(ancestor){return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor)},BindingInWhenOnSyntax.prototype.whenNoAncestorIs=function(ancestor){return this._bindingWhenSyntax.whenNoAncestorIs(ancestor)},BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed=function(name){return this._bindingWhenSyntax.whenAnyAncestorNamed(name)},BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged=function(tag,value){return this._bindingWhenSyntax.whenAnyAncestorTagged(tag,value)},BindingInWhenOnSyntax.prototype.whenNoAncestorNamed=function(name){return this._bindingWhenSyntax.whenNoAncestorNamed(name)},BindingInWhenOnSyntax.prototype.whenNoAncestorTagged=function(tag,value){return this._bindingWhenSyntax.whenNoAncestorTagged(tag,value)},BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches=function(constraint){return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint)},BindingInWhenOnSyntax.prototype.whenNoAncestorMatches=function(constraint){return this._bindingWhenSyntax.whenNoAncestorMatches(constraint)},BindingInWhenOnSyntax.prototype.onActivation=function(handler){return this._bindingOnSyntax.onActivation(handler)},BindingInWhenOnSyntax}();exports.BindingInWhenOnSyntax=BindingInWhenOnSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var literal_types_1=__webpack_require__(92),binding_when_on_syntax_1=__webpack_require__(237),BindingInSyntax=function(){function BindingInSyntax(binding){this._binding=binding}return BindingInSyntax.prototype.inRequestScope=function(){return this._binding.scope=literal_types_1.BindingScopeEnum.Request,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingInSyntax.prototype.inSingletonScope=function(){return this._binding.scope=literal_types_1.BindingScopeEnum.Singleton,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingInSyntax.prototype.inTransientScope=function(){return this._binding.scope=literal_types_1.BindingScopeEnum.Transient,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingInSyntax}();exports.BindingInSyntax=BindingInSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ContainerSnapshot=function(){function ContainerSnapshot(){}return ContainerSnapshot.of=function(bindings,middleware){var snapshot=new ContainerSnapshot;return snapshot.bindings=bindings,snapshot.middleware=middleware,snapshot},ContainerSnapshot}();exports.ContainerSnapshot=ContainerSnapshot},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(66),Lookup=function(){function Lookup(){this._map=new Map}return Lookup.prototype.getMap=function(){return this._map},Lookup.prototype.add=function(serviceIdentifier,value){if(null==serviceIdentifier)throw new Error(ERROR_MSGS.NULL_ARGUMENT);if(null==value)throw new Error(ERROR_MSGS.NULL_ARGUMENT);var entry=this._map.get(serviceIdentifier);void 0!==entry?(entry.push(value),this._map.set(serviceIdentifier,entry)):this._map.set(serviceIdentifier,[value])},Lookup.prototype.get=function(serviceIdentifier){if(null==serviceIdentifier)throw new Error(ERROR_MSGS.NULL_ARGUMENT);var entry=this._map.get(serviceIdentifier);if(void 0!==entry)return entry;throw new Error(ERROR_MSGS.KEY_NOT_FOUND)},Lookup.prototype.remove=function(serviceIdentifier){if(null==serviceIdentifier)throw new Error(ERROR_MSGS.NULL_ARGUMENT);if(!this._map.delete(serviceIdentifier))throw new Error(ERROR_MSGS.KEY_NOT_FOUND)},Lookup.prototype.removeByCondition=function(condition){var _this=this;this._map.forEach((function(entries,key){var updatedEntries=entries.filter((function(entry){return!condition(entry)}));updatedEntries.length>0?_this._map.set(key,updatedEntries):_this._map.delete(key)}))},Lookup.prototype.hasKey=function(serviceIdentifier){if(null==serviceIdentifier)throw new Error(ERROR_MSGS.NULL_ARGUMENT);return this._map.has(serviceIdentifier)},Lookup.prototype.clone=function(){var copy=new Lookup;return this._map.forEach((function(value,key){value.forEach((function(b){return copy.add(key,b.clone())}))})),copy},Lookup.prototype.traverse=function(func){this._map.forEach((function(value,key){func(key,value)}))},Lookup}();exports.Lookup=Lookup},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var id_1=__webpack_require__(103),ContainerModule=function(registry){this.id=id_1.id(),this.registry=registry};exports.ContainerModule=ContainerModule;var AsyncContainerModule=function(registry){this.id=id_1.id(),this.registry=registry};exports.AsyncContainerModule=AsyncContainerModule},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERRORS_MSGS=__webpack_require__(66),METADATA_KEY=__webpack_require__(45);exports.injectable=function(){return function(target){if(Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES,target))throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);var types=Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES,target)||[];return Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES,types,target),target}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var metadata_1=__webpack_require__(77),decorator_utils_1=__webpack_require__(101);exports.tagged=function(metadataKey,metadataValue){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(metadataKey,metadataValue);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),metadata_1=__webpack_require__(77),decorator_utils_1=__webpack_require__(101);exports.named=function(name){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.NAMED_TAG,name);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),metadata_1=__webpack_require__(77),decorator_utils_1=__webpack_require__(101);exports.optional=function(){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG,!0);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),metadata_1=__webpack_require__(77),decorator_utils_1=__webpack_require__(101);exports.unmanaged=function(){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG,!0);decorator_utils_1.tagParameter(target,targetKey,index,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),metadata_1=__webpack_require__(77),decorator_utils_1=__webpack_require__(101);exports.multiInject=function(serviceIdentifier){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG,serviceIdentifier);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(45),metadata_1=__webpack_require__(77),decorator_utils_1=__webpack_require__(101);exports.targetName=function(name){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.NAME_TAG,name);decorator_utils_1.tagParameter(target,targetKey,index,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERRORS_MSGS=__webpack_require__(66),METADATA_KEY=__webpack_require__(45),metadata_1=__webpack_require__(77);exports.postConstruct=function(){return function(target,propertyKey,descriptor){var metadata=new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT,propertyKey);if(Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT,target.constructor))throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT,metadata,target.constructor)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiBindToService=function(container){return function(service){return function(){for(var types=[],_i=0;_i<arguments.length;_i++)types[_i]=arguments[_i];return types.forEach((function(t){return container.bind(t).toService(service)}))}}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};exports.__esModule=!0,exports.SiftScience=void 0;var SiftScienceEnum_1=__webpack_require__(385),inversify_1=__webpack_require__(42);__webpack_require__(71);var rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),UtilsService_1=__webpack_require__(135),uuid_1=__webpack_require__(30),SiftScience=function(){function SiftScience(regional){this._siftProperty="_sift",this._sift=[],this._initSiftScience(regional)}return SiftScience.prototype.createSiftScienceSession=function(processor,clientIdentification,mid,isTest,merchantSettingsResponse){var _this=this;return rxjs_1.of(merchantSettingsResponse).pipe(operators_1.map((function(merchantSettings){var sift_environment=isTest?SiftScienceEnum_1.SiftScienceEnum.siftScienceTest:SiftScienceEnum_1.SiftScienceEnum.siftScienceProd;if(""===merchantSettings[sift_environment]||null===merchantSettings[sift_environment])return{sessionId:null,userId:null};var user_id=""+mid+processor+clientIdentification,session_id=uuid_1.v4();return _this._sift=void 0===window[_this._siftProperty]?[]:window[_this._siftProperty],_this._sift.push(["_setAccount",merchantSettings[sift_environment]]),_this._sift.push(["_setUserId",user_id]),_this._sift.push(["_setSessionId",session_id]),_this._sift.push(["_trackPageview"]),{sessionId:session_id,userId:user_id}})))},SiftScience.prototype._initSiftScience=function(regional){try{if(!UtilsService_1.UtilsService.sIsEmpty(window)){var e=window.document.createElement("script");e.src=regional?"https://regional-cdn.kushkipagos.com/siftscience/s.js":"https://cdn.siftscience.com/s.js",document.body.appendChild(e)}}catch(e){return}},SiftScience=__decorate([inversify_1.injectable(),__metadata("design:paramtypes",[Boolean])],SiftScience)}();exports.SiftScience=SiftScience},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.SiftScienceEnum=void 0,function(SiftScienceEnum){SiftScienceEnum.siftScienceTest="sandboxBaconKey",SiftScienceEnum.siftScienceProd="prodBaconKey"}(exports.SiftScienceEnum||(exports.SiftScienceEnum={}))},function(module,exports,__webpack_require__){var _nodeId,_clockseq,rng=__webpack_require__(239),bytesToUuid=__webpack_require__(240),_lastMSecs=0,_lastNSecs=0;module.exports=function(options,buf,offset){var i=buf&&offset||0,b=buf||[],node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){var seedBytes=rng();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}var msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq;var tl=(1e4*(268435455&(msecs+=122192928e5))+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var n=0;n<6;++n)b[i+n]=node[n];return buf||bytesToUuid(b)}},function(module,exports,__webpack_require__){var rng=__webpack_require__(239),bytesToUuid=__webpack_require__(240);module.exports=function(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"===options?new Array(16):null,options=null);var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;++ii)buf[i+ii]=rnds[ii];return buf||bytesToUuid(rnds)}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};exports.__esModule=!0,exports.AuthService=void 0;var aws_amplify_1=__webpack_require__(241),axios_1=__webpack_require__(97),Identifiers_1=__webpack_require__(44),KushkiError_1=__webpack_require__(152),CognitoErrorEnum_1=__webpack_require__(580),ErrorEnum_1=__webpack_require__(213),KPayUserPoolEnum_1=__webpack_require__(582),inversify_1=__webpack_require__(42);__webpack_require__(71);var IKushkiGateway_1=__webpack_require__(78),rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),UtilsService_1=__webpack_require__(135),AuthService=function(){function AuthService(gateway){this._gateway=gateway}var AuthService_1,_a;return AuthService_1=AuthService,AuthService.prototype.requestInitAuth=function(body,isTestEnvironment){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return AuthService_1._configureAmplifyCredentials(isTestEnvironment)})),operators_1.mergeMap((function(){return _this._validateCurrentSession(body.email)})),operators_1.mergeMap((function(sessionJwt){return rxjs_1.iif((function(){return!!sessionJwt}),rxjs_1.of({result:!0}),_this._handleInitAuth(body.email))})))},AuthService.prototype.requestVerifyAuth=function(code,isTestEnvironment){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return AuthService_1._configureAmplifyCredentials(isTestEnvironment)})),operators_1.concatMap((function(){return rxjs_1.from(aws_amplify_1.Auth.sendCustomChallengeAnswer(_this._cognitoUser,code))})),operators_1.catchError((function(){return rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E009))})),operators_1.concatMap((function(){return _this._verifyCurrentSession()})),operators_1.map((function(session){return{authorization:session.getRefreshToken().getToken()}})))},AuthService.prototype.validateSession=function(isTestEnvironment){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return AuthService_1._configureAmplifyCredentials(isTestEnvironment)})),operators_1.concatMap((function(){return _this._getCurrentUserEmail()})))},AuthService.prototype.getAuthorizationToken=function(){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return _this._currentAuthenticatedUser()})),operators_1.mergeMap((function(cognitoUser){var session=cognitoUser?cognitoUser.getSignInUserSession():null;return session?rxjs_1.of(session.getAccessToken().getJwtToken()):rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E011))})),operators_1.catchError((function(){return rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E011))})))},AuthService.prototype._currentAuthenticatedUser=function(){return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return rxjs_1.from(aws_amplify_1.Auth.currentAuthenticatedUser())})))},AuthService.prototype._verifyCurrentSession=function(){return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return rxjs_1.from(aws_amplify_1.Auth.currentSession())})),operators_1.catchError((function(){return rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E008))})))},AuthService.prototype._handleInitAuth=function(email){var _this=this,password=AuthService_1._getRandomString();return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){var params={password:password,attributes:{"custom:merchant":email,given_name:email,preferred_username:email},username:email};return rxjs_1.from(aws_amplify_1.Auth.signUp(params))})),operators_1.concatMap((function(){return _this._userSignIn(email,password)})),operators_1.concatMap((function(cognitoUser){return _this._cognitoUser=cognitoUser,cognitoUser.getSignInUserSession().getAccessToken().getJwtToken()})),operators_1.concatMap((function(authorization){return rxjs_1.iif((function(){return!!authorization}),rxjs_1.of({result:!0}),rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E001)))})),operators_1.catchError((function(error){var error_code=UtilsService_1.UtilsService.sGet(error,"code","");return rxjs_1.iif((function(){return error_code===CognitoErrorEnum_1.CognitoErrorEnum.UsernameExistsException}),_this._userSignInPasswordles(email),rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E007)))})))},AuthService.prototype._validateCurrentSession=function(email){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return aws_amplify_1.Auth.currentSession()})),operators_1.concatMap((function(session){return rxjs_1.forkJoin([rxjs_1.of(session),rxjs_1.from(aws_amplify_1.Auth.currentUserInfo())])})),operators_1.concatMap((function(_a){var session=_a[0],current_user_info=_a[1];return email&&current_user_info.attributes.email.toLowerCase()!==email.toLowerCase()?_this._signOut():rxjs_1.of(session.getAccessToken().getJwtToken())})),operators_1.catchError((function(){return _this._signOut()})))},AuthService.prototype._getCurrentUserEmail=function(){return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return aws_amplify_1.Auth.currentUserInfo()})),operators_1.concatMap((function(currentInfo){return rxjs_1.iif((function(){return!!currentInfo.attributes.email}),rxjs_1.of({email:currentInfo.attributes.email.toLowerCase()}),rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E011)))})),operators_1.catchError((function(){return rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E011))})))},AuthService.prototype._signOut=function(){return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return aws_amplify_1.Auth.signOut()})),operators_1.mapTo(!1))},AuthService.prototype._userSignIn=function(email,password){return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return rxjs_1.from(aws_amplify_1.Auth.signIn(email,password))})))},AuthService.prototype._userSignInPasswordles=function(email){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return rxjs_1.from(aws_amplify_1.Auth.signIn(email))})),operators_1.mergeMap((function(cognitoUser){return _this._cognitoUser=cognitoUser,rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E010))})))},AuthService._configureAmplifyCredentials=function(test){return __awaiter(this,void 0,void 0,(function(){var remote_kpay_user_pool_url,cognito_config,auth;return __generator(this,(function(_a){switch(_a.label){case 0:return remote_kpay_user_pool_url=""+(test?KPayUserPoolEnum_1.KPayUserPoolEnum.uat:KPayUserPoolEnum_1.KPayUserPoolEnum.prod),[4,axios_1.default.get(remote_kpay_user_pool_url)];case 1:return cognito_config=_a.sent().data,auth={cognito:{APP_CLIENT_ID:cognito_config.appClientId,REGION:cognito_config.region,USER_POOL_ID:cognito_config.userPoolId}},aws_amplify_1.Auth.configure({Auth:{mandatorySignId:!0,region:auth.cognito.REGION,storage:window.sessionStorage,userPoolId:auth.cognito.USER_POOL_ID,userPoolWebClientId:auth.cognito.APP_CLIENT_ID}}),[2]}}))}))},AuthService._getRandomString=function(){return Math.random().toString(36).slice(2)+Math.random().toString(36).toUpperCase().slice(2)},AuthService=AuthService_1=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object])],AuthService)}();exports.AuthService=AuthService},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){for(var tmp,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen,i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports,__webpack_require__){var CryptoJS,C,Base,Utf8;module.exports=(CryptoJS=__webpack_require__(48),Base=(C=CryptoJS).lib.Base,Utf8=C.enc.Utf8,void(C.algo.HMAC=Base.extend({init:function(hasher,key){hasher=this._hasher=new hasher.init,"string"==typeof key&&(key=Utf8.parse(key));var hasherBlockSize=hasher.blockSize,hasherBlockSizeBytes=4*hasherBlockSize;key.sigBytes>hasherBlockSizeBytes&&(key=hasher.finalize(key)),key.clamp();for(var oKey=this._oKey=key.clone(),iKey=this._iKey=key.clone(),oKeyWords=oKey.words,iKeyWords=iKey.words,i=0;i<hasherBlockSize;i++)oKeyWords[i]^=1549556828,iKeyWords[i]^=909522486;oKey.sigBytes=iKey.sigBytes=hasherBlockSizeBytes,this.reset()},reset:function(){var hasher=this._hasher;hasher.reset(),hasher.update(this._iKey)},update:function(messageUpdate){return this._hasher.update(messageUpdate),this},finalize:function(messageUpdate){var hasher=this._hasher,innerHash=hasher.finalize(messageUpdate);return hasher.reset(),hasher.finalize(this._oKey.clone().concat(innerHash))}})))},function(module,exports,__webpack_require__){"use strict";exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=__webpack_require__(110),exports.createHash=exports.Hash=__webpack_require__(136),exports.createHmac=exports.Hmac=__webpack_require__(251);var algos=__webpack_require__(409),algoKeys=Object.keys(algos),hashes=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(algoKeys);exports.getHashes=function(){return hashes};var p=__webpack_require__(254);exports.pbkdf2=p.pbkdf2,exports.pbkdf2Sync=p.pbkdf2Sync;var aes=__webpack_require__(411);exports.Cipher=aes.Cipher,exports.createCipher=aes.createCipher,exports.Cipheriv=aes.Cipheriv,exports.createCipheriv=aes.createCipheriv,exports.Decipher=aes.Decipher,exports.createDecipher=aes.createDecipher,exports.Decipheriv=aes.Decipheriv,exports.createDecipheriv=aes.createDecipheriv,exports.getCiphers=aes.getCiphers,exports.listCiphers=aes.listCiphers;var dh=__webpack_require__(428);exports.DiffieHellmanGroup=dh.DiffieHellmanGroup,exports.createDiffieHellmanGroup=dh.createDiffieHellmanGroup,exports.getDiffieHellman=dh.getDiffieHellman,exports.createDiffieHellman=dh.createDiffieHellman,exports.DiffieHellman=dh.DiffieHellman;var sign=__webpack_require__(433);exports.createSign=sign.createSign,exports.Sign=sign.Sign,exports.createVerify=sign.createVerify,exports.Verify=sign.Verify,exports.createECDH=__webpack_require__(471);var publicEncrypt=__webpack_require__(472);exports.publicEncrypt=publicEncrypt.publicEncrypt,exports.privateEncrypt=publicEncrypt.privateEncrypt,exports.publicDecrypt=publicEncrypt.publicDecrypt,exports.privateDecrypt=publicEncrypt.privateDecrypt;var rf=__webpack_require__(475);exports.randomFill=rf.randomFill,exports.randomFillSync=rf.randomFillSync,exports.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},exports.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(16).Buffer,util=__webpack_require__(395);module.exports=function(){function BufferList(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function(n){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,src.copy(target,offset),i+=p.data.length,p=p.next;return ret},BufferList}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj})},function(module,exports){},function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout((function(){item._onTimeout&&item._onTimeout()}),msecs))},__webpack_require__(397),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(54))},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,html,channel,messagePrefix,onGlobalMessage,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?registerImmediate=function(handle){process.nextTick((function(){runIfPresent(handle)}))}:!function(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?((channel=new MessageChannel).port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}):doc&&"onreadystatechange"in doc.createElement("script")?(html=doc.documentElement,registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}):registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}:(messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))},global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}),attachTo.setImmediate=function(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(void 0,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(54),__webpack_require__(76))},function(module,exports,__webpack_require__){(function(global){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}}).call(this,__webpack_require__(54))},function(module,exports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(248),util=__webpack_require__(137);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=__webpack_require__(15),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(197)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(104)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(196).Transform},function(module,exports,__webpack_require__){module.exports=__webpack_require__(196).PassThrough},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),Hash=__webpack_require__(111),Buffer=__webpack_require__(16).Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return 0===s?b&c|~b&d:2===s?b&c|b&d|c&d:b^c^d}inherits(Sha,Hash),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(M){for(var num,W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,i=0;i<16;++i)W[i]=M.readInt32BE(4*i);for(;i<80;++i)W[i]=W[i-3]^W[i-8]^W[i-14]^W[i-16];for(var j=0;j<80;++j){var s=~~(j/20),t=0|((num=a)<<5|num>>>27)+ft(s,b,c,d)+e+W[j]+K[s];e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0},Sha.prototype._hash=function(){var H=Buffer.allocUnsafe(20);return H.writeInt32BE(0|this._a,0),H.writeInt32BE(0|this._b,4),H.writeInt32BE(0|this._c,8),H.writeInt32BE(0|this._d,12),H.writeInt32BE(0|this._e,16),H},module.exports=Sha},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),Hash=__webpack_require__(111),Buffer=__webpack_require__(16).Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha1(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return 0===s?b&c|~b&d:2===s?b&c|b&d|c&d:b^c^d}inherits(Sha1,Hash),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(M){for(var num,W=this._w,a=0|this._a,b=0|this._b,c=0|this._c,d=0|this._d,e=0|this._e,i=0;i<16;++i)W[i]=M.readInt32BE(4*i);for(;i<80;++i)W[i]=(num=W[i-3]^W[i-8]^W[i-14]^W[i-16])<<1|num>>>31;for(var j=0;j<80;++j){var s=~~(j/20),t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0},Sha1.prototype._hash=function(){var H=Buffer.allocUnsafe(20);return H.writeInt32BE(0|this._a,0),H.writeInt32BE(0|this._b,4),H.writeInt32BE(0|this._c,8),H.writeInt32BE(0|this._d,12),H.writeInt32BE(0|this._e,16),H},module.exports=Sha1},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),Sha256=__webpack_require__(249),Hash=__webpack_require__(111),Buffer=__webpack_require__(16).Buffer,W=new Array(64);function Sha224(){this.init(),this._w=W,Hash.call(this,64,56)}inherits(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var H=Buffer.allocUnsafe(28);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H},module.exports=Sha224},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),SHA512=__webpack_require__(250),Hash=__webpack_require__(111),Buffer=__webpack_require__(16).Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}inherits(Sha384,SHA512),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){var H=Buffer.allocUnsafe(48);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),H},module.exports=Sha384},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(15),Buffer=__webpack_require__(16).Buffer,Base=__webpack_require__(102),ZEROS=Buffer.alloc(128);function Hmac(alg,key){Base.call(this,"digest"),"string"==typeof key&&(key=Buffer.from(key)),this._alg=alg,this._key=key,key.length>64?key=alg(key):key.length<64&&(key=Buffer.concat([key,ZEROS],64));for(var ipad=this._ipad=Buffer.allocUnsafe(64),opad=this._opad=Buffer.allocUnsafe(64),i=0;i<64;i++)ipad[i]=54^key[i],opad[i]=92^key[i];this._hash=[ipad]}inherits(Hmac,Base),Hmac.prototype._update=function(data){this._hash.push(data)},Hmac.prototype._final=function(){var h=this._alg(Buffer.concat(this._hash));return this._alg(Buffer.concat([this._opad,h]))},module.exports=Hmac},function(module,exports,__webpack_require__){module.exports=__webpack_require__(253)},function(module,exports,__webpack_require__){(function(global,process){var ZERO_BUF,checkParameters=__webpack_require__(255),defaultEncoding=__webpack_require__(256),sync=__webpack_require__(257),Buffer=__webpack_require__(16).Buffer,subtle=global.crypto&&global.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function browserPbkdf2(password,salt,iterations,length,algo){return subtle.importKey("raw",password,{name:"PBKDF2"},!1,["deriveBits"]).then((function(key){return subtle.deriveBits({name:"PBKDF2",salt:salt,iterations:iterations,hash:{name:algo}},key,length<<3)})).then((function(res){return Buffer.from(res)}))}module.exports=function(password,salt,iterations,keylen,digest,callback){"function"==typeof digest&&(callback=digest,digest=void 0);var algo=toBrowser[(digest=digest||"sha1").toLowerCase()];if(!algo||"function"!=typeof global.Promise)return process.nextTick((function(){var out;try{out=sync(password,salt,iterations,keylen,digest)}catch(e){return callback(e)}callback(null,out)}));if(checkParameters(password,salt,iterations,keylen),"function"!=typeof callback)throw new Error("No callback provided to pbkdf2");Buffer.isBuffer(password)||(password=Buffer.from(password,defaultEncoding)),Buffer.isBuffer(salt)||(salt=Buffer.from(salt,defaultEncoding)),function(promise,callback){promise.then((function(out){process.nextTick((function(){callback(null,out)}))}),(function(e){process.nextTick((function(){callback(e)}))}))}(function(algo){if(global.process&&!global.process.browser)return Promise.resolve(!1);if(!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(void 0!==checks[algo])return checks[algo];var prom=browserPbkdf2(ZERO_BUF=ZERO_BUF||Buffer.alloc(8),ZERO_BUF,10,128,algo).then((function(){return!0})).catch((function(){return!1}));return checks[algo]=prom,prom}(algo).then((function(resp){return resp?browserPbkdf2(password,salt,iterations,keylen,algo):sync(password,salt,iterations,keylen,digest)})),callback)}}).call(this,__webpack_require__(54),__webpack_require__(76))},function(module,exports,__webpack_require__){var DES=__webpack_require__(412),aes=__webpack_require__(202),aesModes=__webpack_require__(203),desModes=__webpack_require__(427),ebtk=__webpack_require__(157);function createCipheriv(suite,key,iv){if(suite=suite.toLowerCase(),aesModes[suite])return aes.createCipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite});throw new TypeError("invalid suite type")}function createDecipheriv(suite,key,iv){if(suite=suite.toLowerCase(),aesModes[suite])return aes.createDecipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite,decrypt:!0});throw new TypeError("invalid suite type")}exports.createCipher=exports.Cipher=function(suite,password){var keyLen,ivLen;if(suite=suite.toLowerCase(),aesModes[suite])keyLen=aesModes[suite].key,ivLen=aesModes[suite].iv;else{if(!desModes[suite])throw new TypeError("invalid suite type");keyLen=8*desModes[suite].key,ivLen=desModes[suite].iv}var keys=ebtk(password,!1,keyLen,ivLen);return createCipheriv(suite,keys.key,keys.iv)},exports.createCipheriv=exports.Cipheriv=createCipheriv,exports.createDecipher=exports.Decipher=function(suite,password){var keyLen,ivLen;if(suite=suite.toLowerCase(),aesModes[suite])keyLen=aesModes[suite].key,ivLen=aesModes[suite].iv;else{if(!desModes[suite])throw new TypeError("invalid suite type");keyLen=8*desModes[suite].key,ivLen=desModes[suite].iv}var keys=ebtk(password,!1,keyLen,ivLen);return createDecipheriv(suite,keys.key,keys.iv)},exports.createDecipheriv=exports.Decipheriv=createDecipheriv,exports.listCiphers=exports.getCiphers=function(){return Object.keys(desModes).concat(aes.getCiphers())}},function(module,exports,__webpack_require__){var CipherBase=__webpack_require__(102),des=__webpack_require__(201),inherits=__webpack_require__(15),Buffer=__webpack_require__(16).Buffer,modes={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};function DES(opts){CipherBase.call(this);var type,modeName=opts.mode.toLowerCase(),mode=modes[modeName];type=opts.decrypt?"decrypt":"encrypt";var key=opts.key;Buffer.isBuffer(key)||(key=Buffer.from(key)),"des-ede"!==modeName&&"des-ede-cbc"!==modeName||(key=Buffer.concat([key,key.slice(0,8)]));var iv=opts.iv;Buffer.isBuffer(iv)||(iv=Buffer.from(iv)),this._des=mode.create({key:key,iv:iv,type:type})}modes.des=modes["des-cbc"],modes.des3=modes["des-ede3-cbc"],module.exports=DES,inherits(DES,CipherBase),DES.prototype._update=function(data){return Buffer.from(this._des.update(data))},DES.prototype._final=function(){return Buffer.from(this._des.final())}},function(module,exports,__webpack_require__){"use strict";exports.readUInt32BE=function(bytes,off){return(bytes[0+off]<<24|bytes[1+off]<<16|bytes[2+off]<<8|bytes[3+off])>>>0},exports.writeUInt32BE=function(bytes,value,off){bytes[0+off]=value>>>24,bytes[1+off]=value>>>16&255,bytes[2+off]=value>>>8&255,bytes[3+off]=255&value},exports.ip=function(inL,inR,out,off){for(var outL=0,outR=0,i=6;i>=0;i-=2){for(var j=0;j<=24;j+=8)outL<<=1,outL|=inR>>>j+i&1;for(j=0;j<=24;j+=8)outL<<=1,outL|=inL>>>j+i&1}for(i=6;i>=0;i-=2){for(j=1;j<=25;j+=8)outR<<=1,outR|=inR>>>j+i&1;for(j=1;j<=25;j+=8)outR<<=1,outR|=inL>>>j+i&1}out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.rip=function(inL,inR,out,off){for(var outL=0,outR=0,i=0;i<4;i++)for(var j=24;j>=0;j-=8)outL<<=1,outL|=inR>>>j+i&1,outL<<=1,outL|=inL>>>j+i&1;for(i=4;i<8;i++)for(j=24;j>=0;j-=8)outR<<=1,outR|=inR>>>j+i&1,outR<<=1,outR|=inL>>>j+i&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.pc1=function(inL,inR,out,off){for(var outL=0,outR=0,i=7;i>=5;i--){for(var j=0;j<=24;j+=8)outL<<=1,outL|=inR>>j+i&1;for(j=0;j<=24;j+=8)outL<<=1,outL|=inL>>j+i&1}for(j=0;j<=24;j+=8)outL<<=1,outL|=inR>>j+i&1;for(i=1;i<=3;i++){for(j=0;j<=24;j+=8)outR<<=1,outR|=inR>>j+i&1;for(j=0;j<=24;j+=8)outR<<=1,outR|=inL>>j+i&1}for(j=0;j<=24;j+=8)outR<<=1,outR|=inL>>j+i&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.r28shl=function(num,shift){return num<<shift&268435455|num>>>28-shift};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function(inL,inR,out,off){for(var outL=0,outR=0,len=pc2table.length>>>1,i=0;i<len;i++)outL<<=1,outL|=inL>>>pc2table[i]&1;for(i=len;i<pc2table.length;i++)outR<<=1,outR|=inR>>>pc2table[i]&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.expand=function(r,out,off){var outL=0,outR=0;outL=(1&r)<<5|r>>>27;for(var i=23;i>=15;i-=4)outL<<=6,outL|=r>>>i&63;for(i=11;i>=3;i-=4)outR|=r>>>i&63,outR<<=6;outR|=(31&r)<<1|r>>>31,out[off+0]=outL>>>0,out[off+1]=outR>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function(inL,inR){for(var out=0,i=0;i<4;i++){out<<=4,out|=sTable[64*i+(inL>>>18-6*i&63)]}for(i=0;i<4;i++){out<<=4,out|=sTable[256+64*i+(inR>>>18-6*i&63)]}return out>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function(num){for(var out=0,i=0;i<permuteTable.length;i++)out<<=1,out|=num>>>permuteTable[i]&1;return out>>>0},exports.padSplit=function(num,size,group){for(var str=num.toString(2);str.length<size;)str="0"+str;for(var out=[],i=0;i<size;i+=group)out.push(str.slice(i,i+group));return out.join(" ")}},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(72);function Cipher(options){this.options=options,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}module.exports=Cipher,Cipher.prototype._init=function(){},Cipher.prototype.update=function(data){return 0===data.length?[]:"decrypt"===this.type?this._updateDecrypt(data):this._updateEncrypt(data)},Cipher.prototype._buffer=function(data,off){for(var min=Math.min(this.buffer.length-this.bufferOff,data.length-off),i=0;i<min;i++)this.buffer[this.bufferOff+i]=data[off+i];return this.bufferOff+=min,min},Cipher.prototype._flushBuffer=function(out,off){return this._update(this.buffer,0,out,off),this.bufferOff=0,this.blockSize},Cipher.prototype._updateEncrypt=function(data){var inputOff=0,outputOff=0,count=(this.bufferOff+data.length)/this.blockSize|0,out=new Array(count*this.blockSize);0!==this.bufferOff&&(inputOff+=this._buffer(data,inputOff),this.bufferOff===this.buffer.length&&(outputOff+=this._flushBuffer(out,outputOff)));for(var max=data.length-(data.length-inputOff)%this.blockSize;inputOff<max;inputOff+=this.blockSize)this._update(data,inputOff,out,outputOff),outputOff+=this.blockSize;for(;inputOff<data.length;inputOff++,this.bufferOff++)this.buffer[this.bufferOff]=data[inputOff];return out},Cipher.prototype._updateDecrypt=function(data){for(var inputOff=0,outputOff=0,count=Math.ceil((this.bufferOff+data.length)/this.blockSize)-1,out=new Array(count*this.blockSize);count>0;count--)inputOff+=this._buffer(data,inputOff),outputOff+=this._flushBuffer(out,outputOff);return inputOff+=this._buffer(data,inputOff),out},Cipher.prototype.final=function(buffer){var first,last;return buffer&&(first=this.update(buffer)),last="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),first?first.concat(last):last},Cipher.prototype._pad=function(buffer,off){if(0===off)return!1;for(;off<buffer.length;)buffer[off++]=0;return!0},Cipher.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var out=new Array(this.blockSize);return this._update(this.buffer,0,out,0),out},Cipher.prototype._unpad=function(buffer){return buffer},Cipher.prototype._finalDecrypt=function(){assert.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var out=new Array(this.blockSize);return this._flushBuffer(out,0),this._unpad(out)}},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(72),inherits=__webpack_require__(15),des=__webpack_require__(201),utils=des.utils,Cipher=des.Cipher;function DESState(){this.tmp=new Array(2),this.keys=null}function DES(options){Cipher.call(this,options);var state=new DESState;this._desState=state,this.deriveKeys(state,options.key)}inherits(DES,Cipher),module.exports=DES,DES.create=function(options){return new DES(options)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function(state,key){state.keys=new Array(32),assert.equal(key.length,this.blockSize,"Invalid key length");var kL=utils.readUInt32BE(key,0),kR=utils.readUInt32BE(key,4);utils.pc1(kL,kR,state.tmp,0),kL=state.tmp[0],kR=state.tmp[1];for(var i=0;i<state.keys.length;i+=2){var shift=shiftTable[i>>>1];kL=utils.r28shl(kL,shift),kR=utils.r28shl(kR,shift),utils.pc2(kL,kR,state.keys,i)}},DES.prototype._update=function(inp,inOff,out,outOff){var state=this._desState,l=utils.readUInt32BE(inp,inOff),r=utils.readUInt32BE(inp,inOff+4);utils.ip(l,r,state.tmp,0),l=state.tmp[0],r=state.tmp[1],"encrypt"===this.type?this._encrypt(state,l,r,state.tmp,0):this._decrypt(state,l,r,state.tmp,0),l=state.tmp[0],r=state.tmp[1],utils.writeUInt32BE(out,l,outOff),utils.writeUInt32BE(out,r,outOff+4)},DES.prototype._pad=function(buffer,off){for(var value=buffer.length-off,i=off;i<buffer.length;i++)buffer[i]=value;return!0},DES.prototype._unpad=function(buffer){for(var pad=buffer[buffer.length-1],i=buffer.length-pad;i<buffer.length;i++)assert.equal(buffer[i],pad);return buffer.slice(0,buffer.length-pad)},DES.prototype._encrypt=function(state,lStart,rStart,out,off){for(var l=lStart,r=rStart,i=0;i<state.keys.length;i+=2){var keyL=state.keys[i],keyR=state.keys[i+1];utils.expand(r,state.tmp,0),keyL^=state.tmp[0],keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR),t=r;r=(l^utils.permute(s))>>>0,l=t}utils.rip(r,l,out,off)},DES.prototype._decrypt=function(state,lStart,rStart,out,off){for(var l=rStart,r=lStart,i=state.keys.length-2;i>=0;i-=2){var keyL=state.keys[i],keyR=state.keys[i+1];utils.expand(l,state.tmp,0),keyL^=state.tmp[0],keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR),t=l;l=(r^utils.permute(s))>>>0,r=t}utils.rip(l,r,out,off)}},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(72),inherits=__webpack_require__(15),proto={};function CBCState(iv){assert.equal(iv.length,8,"Invalid IV length"),this.iv=new Array(8);for(var i=0;i<this.iv.length;i++)this.iv[i]=iv[i]}exports.instantiate=function(Base){function CBC(options){Base.call(this,options),this._cbcInit()}inherits(CBC,Base);for(var keys=Object.keys(proto),i=0;i<keys.length;i++){var key=keys[i];CBC.prototype[key]=proto[key]}return CBC.create=function(options){return new CBC(options)},CBC},proto._cbcInit=function(){var state=new CBCState(this.options.iv);this._cbcState=state},proto._update=function(inp,inOff,out,outOff){var state=this._cbcState,superProto=this.constructor.super_.prototype,iv=state.iv;if("encrypt"===this.type){for(var i=0;i<this.blockSize;i++)iv[i]^=inp[inOff+i];superProto._update.call(this,iv,0,out,outOff);for(i=0;i<this.blockSize;i++)iv[i]=out[outOff+i]}else{superProto._update.call(this,inp,inOff,out,outOff);for(i=0;i<this.blockSize;i++)out[outOff+i]^=iv[i];for(i=0;i<this.blockSize;i++)iv[i]=inp[inOff+i]}}},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(72),inherits=__webpack_require__(15),des=__webpack_require__(201),Cipher=des.Cipher,DES=des.DES;function EDEState(type,key){assert.equal(key.length,24,"Invalid key length");var k1=key.slice(0,8),k2=key.slice(8,16),k3=key.slice(16,24);this.ciphers="encrypt"===type?[DES.create({type:"encrypt",key:k1}),DES.create({type:"decrypt",key:k2}),DES.create({type:"encrypt",key:k3})]:[DES.create({type:"decrypt",key:k3}),DES.create({type:"encrypt",key:k2}),DES.create({type:"decrypt",key:k1})]}function EDE(options){Cipher.call(this,options);var state=new EDEState(this.type,this.options.key);this._edeState=state}inherits(EDE,Cipher),module.exports=EDE,EDE.create=function(options){return new EDE(options)},EDE.prototype._update=function(inp,inOff,out,outOff){var state=this._edeState;state.ciphers[0]._update(inp,inOff,out,outOff),state.ciphers[1]._update(out,outOff,out,outOff),state.ciphers[2]._update(out,outOff,out,outOff)},EDE.prototype._pad=DES.prototype._pad,EDE.prototype._unpad=DES.prototype._unpad},function(module,exports,__webpack_require__){var MODES=__webpack_require__(203),AuthCipher=__webpack_require__(261),Buffer=__webpack_require__(16).Buffer,StreamCipher=__webpack_require__(262),Transform=__webpack_require__(102),aes=__webpack_require__(156),ebtk=__webpack_require__(157);function Cipher(mode,key,iv){Transform.call(this),this._cache=new Splitter,this._cipher=new aes.AES(key),this._prev=Buffer.from(iv),this._mode=mode,this._autopadding=!0}__webpack_require__(15)(Cipher,Transform),Cipher.prototype._update=function(data){var chunk,thing;this._cache.add(data);for(var out=[];chunk=this._cache.get();)thing=this._mode.encrypt(this,chunk),out.push(thing);return Buffer.concat(out)};var PADDING=Buffer.alloc(16,16);function Splitter(){this.cache=Buffer.allocUnsafe(0)}function createCipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");if("string"==typeof password&&(password=Buffer.from(password)),password.length!==config.key/8)throw new TypeError("invalid key length "+password.length);if("string"==typeof iv&&(iv=Buffer.from(iv)),"GCM"!==config.mode&&iv.length!==config.iv)throw new TypeError("invalid iv length "+iv.length);return"stream"===config.type?new StreamCipher(config.module,password,iv):"auth"===config.type?new AuthCipher(config.module,password,iv):new Cipher(config.module,password,iv)}Cipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding)return chunk=this._mode.encrypt(this,chunk),this._cipher.scrub(),chunk;if(!chunk.equals(PADDING))throw this._cipher.scrub(),new Error("data not multiple of block length")},Cipher.prototype.setAutoPadding=function(setTo){return this._autopadding=!!setTo,this},Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])},Splitter.prototype.get=function(){if(this.cache.length>15){var out=this.cache.slice(0,16);return this.cache=this.cache.slice(16),out}return null},Splitter.prototype.flush=function(){for(var len=16-this.cache.length,padBuff=Buffer.allocUnsafe(len),i=-1;++i<len;)padBuff.writeUInt8(len,i);return Buffer.concat([this.cache,padBuff])},exports.createCipheriv=createCipheriv,exports.createCipher=function(suite,password){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");var keys=ebtk(password,!1,config.key,config.iv);return createCipheriv(suite,keys.key,keys.iv)}},function(module,exports){exports.encrypt=function(self,block){return self._cipher.encryptBlock(block)},exports.decrypt=function(self,block){return self._cipher.decryptBlock(block)}},function(module,exports,__webpack_require__){var xor=__webpack_require__(138);exports.encrypt=function(self,block){var data=xor(block,self._prev);return self._prev=self._cipher.encryptBlock(data),self._prev},exports.decrypt=function(self,block){var pad=self._prev;self._prev=block;var out=self._cipher.decryptBlock(block);return xor(out,pad)}},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(16).Buffer,xor=__webpack_require__(138);function encryptStart(self,data,decrypt){var len=data.length,out=xor(data,self._cache);return self._cache=self._cache.slice(len),self._prev=Buffer.concat([self._prev,decrypt?data:out]),out}exports.encrypt=function(self,data,decrypt){for(var len,out=Buffer.allocUnsafe(0);data.length;){if(0===self._cache.length&&(self._cache=self._cipher.encryptBlock(self._prev),self._prev=Buffer.allocUnsafe(0)),!(self._cache.length<=data.length)){out=Buffer.concat([out,encryptStart(self,data,decrypt)]);break}len=self._cache.length,out=Buffer.concat([out,encryptStart(self,data.slice(0,len),decrypt)]),data=data.slice(len)}return out}},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(16).Buffer;function encryptByte(self,byteParam,decrypt){var out=self._cipher.encryptBlock(self._prev)[0]^byteParam;return self._prev=Buffer.concat([self._prev.slice(1),Buffer.from([decrypt?byteParam:out])]),out}exports.encrypt=function(self,chunk,decrypt){for(var len=chunk.length,out=Buffer.allocUnsafe(len),i=-1;++i<len;)out[i]=encryptByte(self,chunk[i],decrypt);return out}},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(16).Buffer;function encryptByte(self,byteParam,decrypt){for(var bit,value,i=-1,out=0;++i<8;)bit=byteParam&1<<7-i?128:0,out+=(128&(value=self._cipher.encryptBlock(self._prev)[0]^bit))>>i%8,self._prev=shiftIn(self._prev,decrypt?bit:value);return out}function shiftIn(buffer,value){var len=buffer.length,i=-1,out=Buffer.allocUnsafe(buffer.length);for(buffer=Buffer.concat([buffer,Buffer.from([value])]);++i<len;)out[i]=buffer[i]<<1|buffer[i+1]>>7;return out}exports.encrypt=function(self,chunk,decrypt){for(var len=chunk.length,out=Buffer.allocUnsafe(len),i=-1;++i<len;)out[i]=encryptByte(self,chunk[i],decrypt);return out}},function(module,exports,__webpack_require__){(function(Buffer){var xor=__webpack_require__(138);function getBlock(self){return self._prev=self._cipher.encryptBlock(self._prev),self._prev}exports.encrypt=function(self,chunk){for(;self._cache.length<chunk.length;)self._cache=Buffer.concat([self._cache,getBlock(self)]);var pad=self._cache.slice(0,chunk.length);return self._cache=self._cache.slice(chunk.length),xor(chunk,pad)}}).call(this,__webpack_require__(11).Buffer)},function(module,exports,__webpack_require__){var Buffer=__webpack_require__(16).Buffer,ZEROES=Buffer.alloc(16,0);function fromArray(out){var buf=Buffer.allocUnsafe(16);return buf.writeUInt32BE(out[0]>>>0,0),buf.writeUInt32BE(out[1]>>>0,4),buf.writeUInt32BE(out[2]>>>0,8),buf.writeUInt32BE(out[3]>>>0,12),buf}function GHASH(key){this.h=key,this.state=Buffer.alloc(16,0),this.cache=Buffer.allocUnsafe(0)}GHASH.prototype.ghash=function(block){for(var i=-1;++i<block.length;)this.state[i]^=block[i];this._multiply()},GHASH.prototype._multiply=function(){for(var buf,j,lsbVi,Vi=[(buf=this.h).readUInt32BE(0),buf.readUInt32BE(4),buf.readUInt32BE(8),buf.readUInt32BE(12)],Zi=[0,0,0,0],i=-1;++i<128;){for(0!=(this.state[~~(i/8)]&1<<7-i%8)&&(Zi[0]^=Vi[0],Zi[1]^=Vi[1],Zi[2]^=Vi[2],Zi[3]^=Vi[3]),lsbVi=0!=(1&Vi[3]),j=3;j>0;j--)Vi[j]=Vi[j]>>>1|(1&Vi[j-1])<<31;Vi[0]=Vi[0]>>>1,lsbVi&&(Vi[0]=Vi[0]^225<<24)}this.state=fromArray(Zi)},GHASH.prototype.update=function(buf){var chunk;for(this.cache=Buffer.concat([this.cache,buf]);this.cache.length>=16;)chunk=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(chunk)},GHASH.prototype.final=function(abl,bl){return this.cache.length&&this.ghash(Buffer.concat([this.cache,ZEROES],16)),this.ghash(fromArray([0,abl,0,bl])),this.state},module.exports=GHASH},function(module,exports,__webpack_require__){var AuthCipher=__webpack_require__(261),Buffer=__webpack_require__(16).Buffer,MODES=__webpack_require__(203),StreamCipher=__webpack_require__(262),Transform=__webpack_require__(102),aes=__webpack_require__(156),ebtk=__webpack_require__(157);function Decipher(mode,key,iv){Transform.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes.AES(key),this._prev=Buffer.from(iv),this._mode=mode,this._autopadding=!0}function Splitter(){this.cache=Buffer.allocUnsafe(0)}function createDecipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");if("string"==typeof iv&&(iv=Buffer.from(iv)),"GCM"!==config.mode&&iv.length!==config.iv)throw new TypeError("invalid iv length "+iv.length);if("string"==typeof password&&(password=Buffer.from(password)),password.length!==config.key/8)throw new TypeError("invalid key length "+password.length);return"stream"===config.type?new StreamCipher(config.module,password,iv,!0):"auth"===config.type?new AuthCipher(config.module,password,iv,!0):new Decipher(config.module,password,iv)}__webpack_require__(15)(Decipher,Transform),Decipher.prototype._update=function(data){var chunk,thing;this._cache.add(data);for(var out=[];chunk=this._cache.get(this._autopadding);)thing=this._mode.decrypt(this,chunk),out.push(thing);return Buffer.concat(out)},Decipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding)return function(last){var padded=last[15];if(padded<1||padded>16)throw new Error("unable to decrypt data");var i=-1;for(;++i<padded;)if(last[i+(16-padded)]!==padded)throw new Error("unable to decrypt data");if(16===padded)return;return last.slice(0,16-padded)}(this._mode.decrypt(this,chunk));if(chunk)throw new Error("data not multiple of block length")},Decipher.prototype.setAutoPadding=function(setTo){return this._autopadding=!!setTo,this},Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])},Splitter.prototype.get=function(autoPadding){var out;if(autoPadding){if(this.cache.length>16)return out=this.cache.slice(0,16),this.cache=this.cache.slice(16),out}else if(this.cache.length>=16)return out=this.cache.slice(0,16),this.cache=this.cache.slice(16),out;return null},Splitter.prototype.flush=function(){if(this.cache.length)return this.cache},exports.createDecipher=function(suite,password){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");var keys=ebtk(password,!1,config.key,config.iv);return createDecipheriv(suite,keys.key,keys.iv)},exports.createDecipheriv=createDecipheriv},function(module,exports){exports["des-ecb"]={key:8,iv:0},exports["des-cbc"]=exports.des={key:8,iv:8},exports["des-ede3-cbc"]=exports.des3={key:24,iv:8},exports["des-ede3"]={key:24,iv:0},exports["des-ede-cbc"]={key:16,iv:8},exports["des-ede"]={key:16,iv:0}},function(module,exports,__webpack_require__){(function(Buffer){var generatePrime=__webpack_require__(263),primes=__webpack_require__(431),DH=__webpack_require__(432);var ENCODINGS={binary:!0,hex:!0,base64:!0};exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=function(mod){var prime=new Buffer(primes[mod].prime,"hex"),gen=new Buffer(primes[mod].gen,"hex");return new DH(prime,gen)},exports.createDiffieHellman=exports.DiffieHellman=function createDiffieHellman(prime,enc,generator,genc){return Buffer.isBuffer(enc)||void 0===ENCODINGS[enc]?createDiffieHellman(prime,"binary",enc,generator):(enc=enc||"binary",genc=genc||"binary",generator=generator||new Buffer([2]),Buffer.isBuffer(generator)||(generator=new Buffer(generator,genc)),"number"==typeof prime?new DH(generatePrime(prime,generator),generator,!0):(Buffer.isBuffer(prime)||(prime=new Buffer(prime,enc)),new DH(prime,generator,!0)))}}).call(this,__webpack_require__(11).Buffer)},function(module,exports){},function(module,exports){},function(module){module.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},function(module,exports,__webpack_require__){(function(Buffer){var BN=__webpack_require__(38),millerRabin=new(__webpack_require__(264)),TWENTYFOUR=new BN(24),ELEVEN=new BN(11),TEN=new BN(10),THREE=new BN(3),SEVEN=new BN(7),primes=__webpack_require__(263),randomBytes=__webpack_require__(110);function setPublicKey(pub,enc){return enc=enc||"utf8",Buffer.isBuffer(pub)||(pub=new Buffer(pub,enc)),this._pub=new BN(pub),this}function setPrivateKey(priv,enc){return enc=enc||"utf8",Buffer.isBuffer(priv)||(priv=new Buffer(priv,enc)),this._priv=new BN(priv),this}module.exports=DH;var primeCache={};function DH(prime,generator,malleable){this.setGenerator(generator),this.__prime=new BN(prime),this._prime=BN.mont(this.__prime),this._primeLen=prime.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,malleable?(this.setPublicKey=setPublicKey,this.setPrivateKey=setPrivateKey):this._primeCode=8}function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());return enc?buf.toString(enc):buf}Object.defineProperty(DH.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(prime,generator){var gen=generator.toString("hex"),hex=[gen,prime.toString(16)].join("_");if(hex in primeCache)return primeCache[hex];var rem,error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime))return error+=1,error+="02"===gen||"05"===gen?8:4,primeCache[hex]=error,error;switch(millerRabin.test(prime.shrn(1))||(error+=2),gen){case"02":prime.mod(TWENTYFOUR).cmp(ELEVEN)&&(error+=8);break;case"05":(rem=prime.mod(TEN)).cmp(THREE)&&rem.cmp(SEVEN)&&(error+=8);break;default:error+=4}return primeCache[hex]=error,error}(this.__prime,this.__gen)),this._primeCode}}),DH.prototype.generateKeys=function(){return this._priv||(this._priv=new BN(randomBytes(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},DH.prototype.computeSecret=function(other){var secret=(other=(other=new BN(other)).toRed(this._prime)).redPow(this._priv).fromRed(),out=new Buffer(secret.toArray()),prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0),out=Buffer.concat([front,out])}return out},DH.prototype.getPublicKey=function(enc){return formatReturnValue(this._pub,enc)},DH.prototype.getPrivateKey=function(enc){return formatReturnValue(this._priv,enc)},DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc)},DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc)},DH.prototype.setGenerator=function(gen,enc){return enc=enc||"utf8",Buffer.isBuffer(gen)||(gen=new Buffer(gen,enc)),this.__gen=gen,this._gen=new BN(gen),this}}).call(this,__webpack_require__(11).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var createHash=__webpack_require__(136),stream=__webpack_require__(195),inherits=__webpack_require__(15),sign=__webpack_require__(434),verify=__webpack_require__(470),algorithms=__webpack_require__(253);function Sign(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error("Unknown message digest");this._hashType=data.hash,this._hash=createHash(data.hash),this._tag=data.id,this._signType=data.sign}function Verify(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error("Unknown message digest");this._hash=createHash(data.hash),this._tag=data.id,this._signType=data.sign}function createSign(algorithm){return new Sign(algorithm)}function createVerify(algorithm){return new Verify(algorithm)}Object.keys(algorithms).forEach((function(key){algorithms[key].id=new Buffer(algorithms[key].id,"hex"),algorithms[key.toLowerCase()]=algorithms[key]})),inherits(Sign,stream.Writable),Sign.prototype._write=function(data,_,done){this._hash.update(data),done()},Sign.prototype.update=function(data,enc){return"string"==typeof data&&(data=new Buffer(data,enc)),this._hash.update(data),this},Sign.prototype.sign=function(key,enc){this.end();var hash=this._hash.digest(),sig=sign(hash,key,this._hashType,this._signType,this._tag);return enc?sig.toString(enc):sig},inherits(Verify,stream.Writable),Verify.prototype._write=function(data,_,done){this._hash.update(data),done()},Verify.prototype.update=function(data,enc){return"string"==typeof data&&(data=new Buffer(data,enc)),this._hash.update(data),this},Verify.prototype.verify=function(key,sig,enc){"string"==typeof sig&&(sig=new Buffer(sig,enc)),this.end();var hash=this._hash.digest();return verify(sig,hash,key,this._signType,this._tag)},module.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify}}).call(this,__webpack_require__(11).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var createHmac=__webpack_require__(251),crt=__webpack_require__(204),EC=__webpack_require__(55).ec,BN=__webpack_require__(38),parseKeys=__webpack_require__(159),curves=__webpack_require__(274);function getKey(x,q,hash,algo){if((x=new Buffer(x.toArray())).length<q.byteLength()){var zeros=new Buffer(q.byteLength()-x.length);zeros.fill(0),x=Buffer.concat([zeros,x])}var hlen=hash.length,hbits=function(bits,q){bits=(bits=bits2int(bits,q)).mod(q);var out=new Buffer(bits.toArray());if(out.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-out.length);zeros.fill(0),out=Buffer.concat([zeros,out])}return out}(hash,q),v=new Buffer(hlen);v.fill(1);var k=new Buffer(hlen);return k.fill(0),k=createHmac(algo,k).update(v).update(new Buffer([0])).update(x).update(hbits).digest(),v=createHmac(algo,k).update(v).digest(),{k:k=createHmac(algo,k).update(v).update(new Buffer([1])).update(x).update(hbits).digest(),v:v=createHmac(algo,k).update(v).digest()}}function bits2int(obits,q){var bits=new BN(obits),shift=(obits.length<<3)-q.bitLength();return shift>0&&bits.ishrn(shift),bits}function makeKey(q,kv,algo){var t,k;do{for(t=new Buffer(0);8*t.length<q.bitLength();)kv.v=createHmac(algo,kv.k).update(kv.v).digest(),t=Buffer.concat([t,kv.v]);k=bits2int(t,q),kv.k=createHmac(algo,kv.k).update(kv.v).update(new Buffer([0])).digest(),kv.v=createHmac(algo,kv.k).update(kv.v).digest()}while(-1!==k.cmp(q));return k}function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q)}module.exports=function(hash,key,hashType,signType,tag){var priv=parseKeys(key);if(priv.curve){if("ecdsa"!==signType&&"ecdsa/rsa"!==signType)throw new Error("wrong private key type");return function(hash,priv){var curveId=curves[priv.curve.join(".")];if(!curveId)throw new Error("unknown curve "+priv.curve.join("."));var out=new EC(curveId).keyFromPrivate(priv.privateKey).sign(hash);return new Buffer(out.toDER())}(hash,priv)}if("dsa"===priv.type){if("dsa"!==signType)throw new Error("wrong private key type");return function(hash,priv,algo){var k,x=priv.params.priv_key,p=priv.params.p,q=priv.params.q,g=priv.params.g,r=new BN(0),H=bits2int(hash,q).mod(q),s=!1,kv=getKey(x,q,hash,algo);for(;!1===s;)r=makeR(g,k=makeKey(q,kv,algo),p,q),0===(s=k.invm(q).imul(H.add(x.mul(r))).mod(q)).cmpn(0)&&(s=!1,r=new BN(0));return function(r,s){r=r.toArray(),s=s.toArray(),128&r[0]&&(r=[0].concat(r));128&s[0]&&(s=[0].concat(s));var res=[48,r.length+s.length+4,2,r.length];return res=res.concat(r,[2,s.length],s),new Buffer(res)}(r,s)}(hash,priv,hashType)}if("rsa"!==signType&&"ecdsa/rsa"!==signType)throw new Error("wrong private key type");hash=Buffer.concat([tag,hash]);for(var len=priv.modulus.byteLength(),pad=[0,1];hash.length+pad.length+1<len;)pad.push(255);pad.push(0);for(var i=-1;++i<hash.length;)pad.push(hash[i]);return crt(pad,priv)},module.exports.getKey=getKey,module.exports.makeKey=makeKey}).call(this,__webpack_require__(11).Buffer)},function(module){module.exports={name:"elliptic",version:"6.4.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.4.1.tgz",_integrity:"sha512-BsXLz5sqX8OHcsh7CqBMztyXARmGQ3LWPtGjJi6DiJHq5C/qvi9P3OqgswKSDftbu8+IoI/QDTAm2fFnQ9SZSQ==",_from:"elliptic@6.4.1"}},function(module,exports,__webpack_require__){"use strict";var utils=exports,BN=__webpack_require__(38),minAssert=__webpack_require__(72),minUtils=__webpack_require__(266);utils.assert=minAssert,utils.toArray=minUtils.toArray,utils.zero2=minUtils.zero2,utils.toHex=minUtils.toHex,utils.encode=minUtils.encode,utils.getNAF=function(num,w){for(var naf=[],ws=1<<w+1,k=num.clone();k.cmpn(1)>=0;){var z;if(k.isOdd()){var mod=k.andln(ws-1);z=mod>(ws>>1)-1?(ws>>1)-mod:mod,k.isubn(z)}else z=0;naf.push(z);for(var shift=0!==k.cmpn(0)&&0===k.andln(ws-1)?w+1:1,i=1;i<shift;i++)naf.push(0);k.iushrn(shift)}return naf},utils.getJSF=function(k1,k2){var jsf=[[],[]];k1=k1.clone(),k2=k2.clone();for(var d1=0,d2=0;k1.cmpn(-d1)>0||k2.cmpn(-d2)>0;){var u1,u2,m8,m14=k1.andln(3)+d1&3,m24=k2.andln(3)+d2&3;if(3===m14&&(m14=-1),3===m24&&(m24=-1),0==(1&m14))u1=0;else u1=3!==(m8=k1.andln(7)+d1&7)&&5!==m8||2!==m24?m14:-m14;if(jsf[0].push(u1),0==(1&m24))u2=0;else u2=3!==(m8=k2.andln(7)+d2&7)&&5!==m8||2!==m14?m24:-m24;jsf[1].push(u2),2*d1===u1+1&&(d1=1-d1),2*d2===u2+1&&(d2=1-d2),k1.iushrn(1),k2.iushrn(1)}return jsf},utils.cachedProperty=function(obj,name,computer){var key="_"+name;obj.prototype[name]=function(){return void 0!==this[key]?this[key]:this[key]=computer.call(this)}},utils.parseBytes=function(bytes){return"string"==typeof bytes?utils.toArray(bytes,"hex"):bytes},utils.intFromLE=function(bytes){return new BN(bytes,"hex","le")}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(38),utils=__webpack_require__(55).utils,getNAF=utils.getNAF,getJSF=utils.getJSF,assert=utils.assert;function BaseCurve(type,conf){this.type=type,this.p=new BN(conf.p,16),this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=conf.n&&new BN(conf.n,16),this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var adjustCount=this.n&&this.p.div(this.n);!adjustCount||adjustCount.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function BasePoint(curve,type){this.curve=curve,this.type=type,this.precomputed=null}module.exports=BaseCurve,BaseCurve.prototype.point=function(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function(p,k){assert(p.precomputed);var doubles=p._getDoubles(),naf=getNAF(k,1),I=(1<<doubles.step+1)-(doubles.step%2==0?2:1);I/=3;for(var repr=[],j=0;j<naf.length;j+=doubles.step){var nafW=0;for(k=j+doubles.step-1;k>=j;k--)nafW=(nafW<<1)+naf[k];repr.push(nafW)}for(var a=this.jpoint(null,null,null),b=this.jpoint(null,null,null),i=I;i>0;i--){for(j=0;j<repr.length;j++){(nafW=repr[j])===i?b=b.mixedAdd(doubles.points[j]):nafW===-i&&(b=b.mixedAdd(doubles.points[j].neg()))}a=a.add(b)}return a.toP()},BaseCurve.prototype._wnafMul=function(p,k){var w=4,nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;for(var wnd=nafPoints.points,naf=getNAF(k,w),acc=this.jpoint(null,null,null),i=naf.length-1;i>=0;i--){for(k=0;i>=0&&0===naf[i];i--)k++;if(i>=0&&k++,acc=acc.dblp(k),i<0)break;var z=naf[i];assert(0!==z),acc="affine"===p.type?z>0?acc.mixedAdd(wnd[z-1>>1]):acc.mixedAdd(wnd[-z-1>>1].neg()):z>0?acc.add(wnd[z-1>>1]):acc.add(wnd[-z-1>>1].neg())}return"affine"===p.type?acc.toP():acc},BaseCurve.prototype._wnafMulAdd=function(defW,points,coeffs,len,jacobianResult){for(var wndWidth=this._wnafT1,wnd=this._wnafT2,naf=this._wnafT3,max=0,i=0;i<len;i++){var nafPoints=(p=points[i])._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd,wnd[i]=nafPoints.points}for(i=len-1;i>=1;i-=2){var a=i-1,b=i;if(1===wndWidth[a]&&1===wndWidth[b]){var comb=[points[a],null,null,points[b]];0===points[a].y.cmp(points[b].y)?(comb[1]=points[a].add(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg())):0===points[a].y.cmp(points[b].y.redNeg())?(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].add(points[b].neg())):(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg()));var index=[-3,-1,-5,-7,0,7,5,1,3],jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max),naf[a]=new Array(max),naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=0|jsf[0][j],jb=0|jsf[1][j];naf[a][j]=index[3*(ja+1)+(jb+1)],naf[b][j]=0,wnd[a]=comb}}else naf[a]=getNAF(coeffs[a],wndWidth[a]),naf[b]=getNAF(coeffs[b],wndWidth[b]),max=Math.max(naf[a].length,max),max=Math.max(naf[b].length,max)}var acc=this.jpoint(null,null,null),tmp=this._wnafT4;for(i=max;i>=0;i--){for(var k=0;i>=0;){var zero=!0;for(j=0;j<len;j++)tmp[j]=0|naf[j][i],0!==tmp[j]&&(zero=!1);if(!zero)break;k++,i--}if(i>=0&&k++,acc=acc.dblp(k),i<0)break;for(j=0;j<len;j++){var p,z=tmp[j];0!==z&&(z>0?p=wnd[j][z-1>>1]:z<0&&(p=wnd[j][-z-1>>1].neg()),acc="affine"===p.type?acc.mixedAdd(p):acc.add(p))}}for(i=0;i<len;i++)wnd[i]=null;return jacobianResult?acc:acc.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function(){throw new Error("Not implemented")},BasePoint.prototype.validate=function(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((4===bytes[0]||6===bytes[0]||7===bytes[0])&&bytes.length-1==2*len)return 6===bytes[0]?assert(bytes[bytes.length-1]%2==0):7===bytes[0]&&assert(bytes[bytes.length-1]%2==1),this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));if((2===bytes[0]||3===bytes[0])&&bytes.length-1===len)return this.pointFromX(bytes.slice(1,1+len),3===bytes[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function(enc){return this.encode(enc,!0)},BasePoint.prototype._encode=function(compact){var len=this.curve.p.byteLength(),x=this.getX().toArray("be",len);return compact?[this.getY().isEven()?2:3].concat(x):[4].concat(x,this.getY().toArray("be",len))},BasePoint.prototype.encode=function(enc,compact){return utils.encode(this._encode(compact),enc)},BasePoint.prototype.precompute=function(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};return precomputed.naf=this._getNAFPoints(8),precomputed.doubles=this._getDoubles(4,power),precomputed.beta=this._getBeta(),this.precomputed=precomputed,this},BasePoint.prototype._hasDoubles=function(k){if(!this.precomputed)return!1;var doubles=this.precomputed.doubles;return!!doubles&&doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step)},BasePoint.prototype._getDoubles=function(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var doubles=[this],acc=this,i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc)}return{step:step,points:doubles}},BasePoint.prototype._getNAFPoints=function(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var res=[this],max=(1<<wnd)-1,dbl=1===max?null:this.dbl(),i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res}},BasePoint.prototype._getBeta=function(){return null},BasePoint.prototype.dblp=function(k){for(var r=this,i=0;i<k;i++)r=r.dbl();return r}},function(module,exports,__webpack_require__){"use strict";var curve=__webpack_require__(158),elliptic=__webpack_require__(55),BN=__webpack_require__(38),inherits=__webpack_require__(15),Base=curve.base,assert=elliptic.utils.assert;function ShortCurve(conf){Base.call(this,"short",conf),this.a=new BN(conf.a,16).toRed(this.red),this.b=new BN(conf.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(conf),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,"affine"),null===x&&null===y?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(x,16),this.y=new BN(y,16),isRed&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,"jacobian"),null===x&&null===y&&null===z?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(x,16),this.y=new BN(y,16),this.z=new BN(z,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits(ShortCurve,Base),module.exports=ShortCurve,ShortCurve.prototype._getEndomorphism=function(conf){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var beta,lambda;if(conf.beta)beta=new BN(conf.beta,16).toRed(this.red);else{var betas=this._getEndoRoots(this.p);beta=(beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1]).toRed(this.red)}if(conf.lambda)lambda=new BN(conf.lambda,16);else{var lambdas=this._getEndoRoots(this.n);0===this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))?lambda=lambdas[0]:(lambda=lambdas[1],assert(0===this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))))}return{beta:beta,lambda:lambda,basis:conf.basis?conf.basis.map((function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)}})):this._getEndoBasis(lambda)}}},ShortCurve.prototype._getEndoRoots=function(num){var red=num===this.p?this.red:BN.mont(num),tinv=new BN(2).toRed(red).redInvm(),ntinv=tinv.redNeg(),s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);return[ntinv.redAdd(s).fromRed(),ntinv.redSub(s).fromRed()]},ShortCurve.prototype._getEndoBasis=function(lambda){for(var a0,b0,a1,b1,a2,b2,prevR,r,x,aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=lambda,v=this.n.clone(),x1=new BN(1),y1=new BN(0),x2=new BN(0),y2=new BN(1),i=0;0!==u.cmpn(0);){var q=v.div(u);r=v.sub(q.mul(u)),x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0)a0=prevR.neg(),b0=x1,a1=r.neg(),b1=x;else if(a1&&2==++i)break;prevR=r,v=u,u=r,x2=x1,x1=x,y2=y1,y1=y}a2=r.neg(),b2=x;var len1=a1.sqr().add(b1.sqr());return a2.sqr().add(b2.sqr()).cmp(len1)>=0&&(a2=a0,b2=b0),a1.negative&&(a1=a1.neg(),b1=b1.neg()),a2.negative&&(a2=a2.neg(),b2=b2.neg()),[{a:a1,b:b1},{a:a2,b:b2}]},ShortCurve.prototype._endoSplit=function(k){var basis=this.endo.basis,v1=basis[0],v2=basis[1],c1=v2.b.mul(k).divRound(this.n),c2=v1.b.neg().mul(k).divRound(this.n),p1=c1.mul(v1.a),p2=c2.mul(v2.a),q1=c1.mul(v1.b),q2=c2.mul(v2.b);return{k1:k.sub(p1).sub(p2),k2:q1.add(q2).neg()}},ShortCurve.prototype.pointFromX=function(x,odd){(x=new BN(x,16)).red||(x=x.toRed(this.red));var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b),y=y2.redSqrt();if(0!==y.redSqr().redSub(y2).cmp(this.zero))throw new Error("invalid point");var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},ShortCurve.prototype.validate=function(point){if(point.inf)return!0;var x=point.x,y=point.y,ax=this.a.redMul(x),rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return 0===y.redSqr().redISub(rhs).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function(points,coeffs,jacobianResult){for(var npoints=this._endoWnafT1,ncoeffs=this._endoWnafT2,i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]),p=points[i],beta=p._getBeta();split.k1.negative&&(split.k1.ineg(),p=p.neg(!0)),split.k2.negative&&(split.k2.ineg(),beta=beta.neg(!0)),npoints[2*i]=p,npoints[2*i+1]=beta,ncoeffs[2*i]=split.k1,ncoeffs[2*i+1]=split.k2}for(var res=this._wnafMulAdd(1,npoints,ncoeffs,2*i,jacobianResult),j=0;j<2*i;j++)npoints[j]=null,ncoeffs[j]=null;return res},inherits(Point,Base.BasePoint),ShortCurve.prototype.point=function(x,y,isRed){return new Point(this,x,y,isRed)},ShortCurve.prototype.pointFromJSON=function(obj,red){return Point.fromJSON(this,obj,red)},Point.prototype._getBeta=function(){if(this.curve.endo){var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve,endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y)};pre.beta=beta,beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}}}return beta}},Point.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function(curve,obj,red){"string"==typeof obj&&(obj=JSON.parse(obj));var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red)}var pre=obj[2];return res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}},res},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return this.inf},Point.prototype.add=function(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(0===this.x.cmp(p.x))return this.curve.point(null,null);var c=this.y.redSub(p.y);0!==c.cmpn(0)&&(c=c.redMul(this.x.redSub(p.x).redInvm()));var nx=c.redSqr().redISub(this.x).redISub(p.x),ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.dbl=function(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(0===ys1.cmpn(0))return this.curve.point(null,null);var a=this.curve.a,x2=this.x.redSqr(),dyinv=ys1.redInvm(),c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv),nx=c.redSqr().redISub(this.x.redAdd(this.x)),ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.getX=function(){return this.x.fromRed()},Point.prototype.getY=function(){return this.y.fromRed()},Point.prototype.mul=function(k){return k=new BN(k,16),this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve.endo?this.curve._endoWnafMulAdd([this],[k]):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function(k1,p2,k2){var points=[this,p2],coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs):this.curve._wnafMulAdd(1,points,coeffs,2)},Point.prototype.jmulAdd=function(k1,p2,k2){var points=[this,p2],coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs,!0):this.curve._wnafMulAdd(1,points,coeffs,2,!0)},Point.prototype.eq=function(p){return this===p||this.inf===p.inf&&(this.inf||0===this.x.cmp(p.x)&&0===this.y.cmp(p.y))},Point.prototype.neg=function(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed,negate=function(p){return p.neg()};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}}}return res},Point.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},inherits(JPoint,Base.BasePoint),ShortCurve.prototype.jpoint=function(x,y,z){return new JPoint(this,x,y,z)},JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm(),zinv2=zinv.redSqr(),ax=this.x.redMul(zinv2),ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay)},JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr(),z2=this.z.redSqr(),u1=this.x.redMul(pz2),u2=p.x.redMul(z2),s1=this.y.redMul(pz2.redMul(p.z)),s2=p.y.redMul(z2.redMul(this.z)),h=u1.redSub(u2),r=s1.redSub(s2);if(0===h.cmpn(0))return 0!==r.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h2=h.redSqr(),h3=h2.redMul(h),v=u1.redMul(h2),nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v),ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3)),nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mixedAdd=function(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr(),u1=this.x,u2=p.x.redMul(z2),s1=this.y,s2=p.y.redMul(z2).redMul(this.z),h=u1.redSub(u2),r=s1.redSub(s2);if(0===h.cmpn(0))return 0!==r.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h2=h.redSqr(),h3=h2.redMul(h),v=u1.redMul(h2),nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v),ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3)),nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.dblp=function(pow){if(0===pow)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var r=this,i=0;i<pow;i++)r=r.dbl();return r}var a=this.curve.a,tinv=this.curve.tinv,jx=this.x,jy=this.y,jz=this.z,jz4=jz.redSqr().redSqr(),jyd=jy.redAdd(jy);for(i=0;i<pow;i++){var jx2=jx.redSqr(),jyd2=jyd.redSqr(),jyd4=jyd2.redSqr(),c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4)),t1=jx.redMul(jyd2),nx=c.redSqr().redISub(t1.redAdd(t1)),t2=t1.redISub(nx),dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);i+1<pow&&(jz4=jz4.redMul(jyd4)),jx=nx,jz=nz,jyd=dny}return this.curve.jpoint(jx,jyd.redMul(tinv),jz)},JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function(){var nx,ny,nz;if(this.zOne){var xx=this.x.redSqr(),yy=this.y.redSqr(),yyyy=yy.redSqr(),s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx),t=m.redSqr().redISub(s).redISub(s),yyyy8=yyyy.redIAdd(yyyy);yyyy8=(yyyy8=yyyy8.redIAdd(yyyy8)).redIAdd(yyyy8),nx=t,ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a),f=e.redSqr(),c8=c.redIAdd(c);c8=(c8=c8.redIAdd(c8)).redIAdd(c8),nx=f.redISub(d).redISub(d),ny=e.redMul(d.redISub(nx)).redISub(c8),nz=(nz=this.y.redMul(this.z)).redIAdd(nz)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._threeDbl=function(){var nx,ny,nz;if(this.zOne){var xx=this.x.redSqr(),yy=this.y.redSqr(),yyyy=yy.redSqr(),s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a),t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=(yyyy8=yyyy8.redIAdd(yyyy8)).redIAdd(yyyy8),ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var delta=this.z.redSqr(),gamma=this.y.redSqr(),beta=this.x.redMul(gamma),alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta),beta8=(beta4=beta4.redIAdd(beta4)).redAdd(beta4);nx=alpha.redSqr().redISub(beta8),nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=(ggamma8=(ggamma8=ggamma8.redIAdd(ggamma8)).redIAdd(ggamma8)).redIAdd(ggamma8),ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._dbl=function(){var a=this.curve.a,jx=this.x,jy=this.y,jz=this.z,jz4=jz.redSqr().redSqr(),jx2=jx.redSqr(),jy2=jy.redSqr(),c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4)),jxd4=jx.redAdd(jx),t1=(jxd4=jxd4.redIAdd(jxd4)).redMul(jy2),nx=c.redSqr().redISub(t1.redAdd(t1)),t2=t1.redISub(nx),jyd8=jy2.redSqr();jyd8=(jyd8=(jyd8=jyd8.redIAdd(jyd8)).redIAdd(jyd8)).redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8),nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr(),yy=this.y.redSqr(),zz=this.z.redSqr(),yyyy=yy.redSqr(),m=xx.redAdd(xx).redIAdd(xx),mm=m.redSqr(),e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy),ee=(e=(e=(e=e.redIAdd(e)).redAdd(e).redIAdd(e)).redISub(mm)).redSqr(),t=yyyy.redIAdd(yyyy);t=(t=(t=t.redIAdd(t)).redIAdd(t)).redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t),yyu4=yy.redMul(u);yyu4=(yyu4=yyu4.redIAdd(yyu4)).redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=(nx=nx.redIAdd(nx)).redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=(ny=(ny=ny.redIAdd(ny)).redIAdd(ny)).redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mul=function(k,kbase){return k=new BN(k,kbase),this.curve._wnafMul(this,k)},JPoint.prototype.eq=function(p){if("affine"===p.type)return this.eq(p.toJ());if(this===p)return!0;var z2=this.z.redSqr(),pz2=p.z.redSqr();if(0!==this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0))return!1;var z3=z2.redMul(this.z),pz3=pz2.redMul(p.z);return 0===this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)},JPoint.prototype.eqXToP=function(x){var zs=this.z.redSqr(),rx=x.toRed(this.curve.red).redMul(zs);if(0===this.x.cmp(rx))return!0;for(var xc=x.clone(),t=this.curve.redN.redMul(zs);;){if(xc.iadd(this.curve.n),xc.cmp(this.curve.p)>=0)return!1;if(rx.redIAdd(t),0===this.x.cmp(rx))return!0}},JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(module,exports,__webpack_require__){"use strict";var curve=__webpack_require__(158),BN=__webpack_require__(38),inherits=__webpack_require__(15),Base=curve.base,utils=__webpack_require__(55).utils;function MontCurve(conf){Base.call(this,"mont",conf),this.a=new BN(conf.a,16).toRed(this.red),this.b=new BN(conf.b,16).toRed(this.red),this.i4=new BN(4).toRed(this.red).redInvm(),this.two=new BN(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Point(curve,x,z){Base.BasePoint.call(this,curve,"projective"),null===x&&null===z?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN(x,16),this.z=new BN(z,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits(MontCurve,Base),module.exports=MontCurve,MontCurve.prototype.validate=function(point){var x=point.normalize().x,x2=x.redSqr(),rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);return 0===rhs.redSqrt().redSqr().cmp(rhs)},inherits(Point,Base.BasePoint),MontCurve.prototype.decodePoint=function(bytes,enc){return this.point(utils.toArray(bytes,enc),1)},MontCurve.prototype.point=function(x,z){return new Point(this,x,z)},MontCurve.prototype.pointFromJSON=function(obj){return Point.fromJSON(this,obj)},Point.prototype.precompute=function(){},Point.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Point.fromJSON=function(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one)},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Point.prototype.dbl=function(){var aa=this.x.redAdd(this.z).redSqr(),bb=this.x.redSub(this.z).redSqr(),c=aa.redSub(bb),nx=aa.redMul(bb),nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz)},Point.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point.prototype.diffAdd=function(p,diff){var a=this.x.redAdd(this.z),b=this.x.redSub(this.z),c=p.x.redAdd(p.z),da=p.x.redSub(p.z).redMul(a),cb=c.redMul(b),nx=diff.z.redMul(da.redAdd(cb).redSqr()),nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz)},Point.prototype.mul=function(k){for(var t=k.clone(),a=this,b=this.curve.point(null,null),bits=[];0!==t.cmpn(0);t.iushrn(1))bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--)0===bits[i]?(a=a.diffAdd(b,this),b=b.dbl()):(b=a.diffAdd(b,this),a=a.dbl());return b},Point.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Point.prototype.eq=function(other){return 0===this.getX().cmp(other.getX())},Point.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(module,exports,__webpack_require__){"use strict";var curve=__webpack_require__(158),elliptic=__webpack_require__(55),BN=__webpack_require__(38),inherits=__webpack_require__(15),Base=curve.base,assert=elliptic.utils.assert;function EdwardsCurve(conf){this.twisted=1!=(0|conf.a),this.mOneA=this.twisted&&-1==(0|conf.a),this.extended=this.mOneA,Base.call(this,"edwards",conf),this.a=new BN(conf.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN(conf.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN(conf.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|conf.c)}function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,"projective"),null===x&&null===y&&null===z?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN(x,16),this.y=new BN(y,16),this.z=z?new BN(z,16):this.curve.one,this.t=t&&new BN(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits(EdwardsCurve,Base),module.exports=EdwardsCurve,EdwardsCurve.prototype._mulA=function(num){return this.mOneA?num.redNeg():this.a.redMul(num)},EdwardsCurve.prototype._mulC=function(num){return this.oneC?num:this.c.redMul(num)},EdwardsCurve.prototype.jpoint=function(x,y,z,t){return this.point(x,y,z,t)},EdwardsCurve.prototype.pointFromX=function(x,odd){(x=new BN(x,16)).red||(x=x.toRed(this.red));var x2=x.redSqr(),rhs=this.c2.redSub(this.a.redMul(x2)),lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2)),y2=rhs.redMul(lhs.redInvm()),y=y2.redSqrt();if(0!==y.redSqr().redSub(y2).cmp(this.zero))throw new Error("invalid point");var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},EdwardsCurve.prototype.pointFromY=function(y,odd){(y=new BN(y,16)).red||(y=y.toRed(this.red));var y2=y.redSqr(),lhs=y2.redSub(this.c2),rhs=y2.redMul(this.d).redMul(this.c2).redSub(this.a),x2=lhs.redMul(rhs.redInvm());if(0===x2.cmp(this.zero)){if(odd)throw new Error("invalid point");return this.point(this.zero,y)}var x=x2.redSqrt();if(0!==x.redSqr().redSub(x2).cmp(this.zero))throw new Error("invalid point");return x.fromRed().isOdd()!==odd&&(x=x.redNeg()),this.point(x,y)},EdwardsCurve.prototype.validate=function(point){if(point.isInfinity())return!0;point.normalize();var x2=point.x.redSqr(),y2=point.y.redSqr(),lhs=x2.redMul(this.a).redAdd(y2),rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return 0===lhs.cmp(rhs)},inherits(Point,Base.BasePoint),EdwardsCurve.prototype.pointFromJSON=function(obj){return Point.fromJSON(this,obj)},EdwardsCurve.prototype.point=function(x,y,z,t){return new Point(this,x,y,z,t)},Point.fromJSON=function(curve,obj){return new Point(curve,obj[0],obj[1],obj[2])},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},Point.prototype._extDbl=function(){var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b),g=d.redAdd(b),f=g.redSub(c),h=d.redSub(b),nx=e.redMul(f),ny=g.redMul(h),nt=e.redMul(h),nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)},Point.prototype._projDbl=function(){var nx,ny,nz,b=this.x.redAdd(this.y).redSqr(),c=this.x.redSqr(),d=this.y.redSqr();if(this.curve.twisted){var f=(e=this.curve._mulA(c)).redAdd(d);if(this.zOne)nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two)),ny=f.redMul(e.redSub(d)),nz=f.redSqr().redSub(f).redSub(f);else{var h=this.z.redSqr(),j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j),ny=f.redMul(e.redSub(d)),nz=f.redMul(j)}}else{var e=c.redAdd(d);h=this.curve._mulC(this.z).redSqr(),j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j),ny=this.curve._mulC(e).redMul(c.redISub(d)),nz=e.redMul(j)}return this.curve.point(nx,ny,nz)},Point.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point.prototype._extAdd=function(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x)),b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x)),c=this.t.redMul(this.curve.dd).redMul(p.t),d=this.z.redMul(p.z.redAdd(p.z)),e=b.redSub(a),f=d.redSub(c),g=d.redAdd(c),h=b.redAdd(a),nx=e.redMul(f),ny=g.redMul(h),nt=e.redMul(h),nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)},Point.prototype._projAdd=function(p){var ny,nz,a=this.z.redMul(p.z),b=a.redSqr(),c=this.x.redMul(p.x),d=this.y.redMul(p.y),e=this.curve.d.redMul(c).redMul(d),f=b.redSub(e),g=b.redAdd(e),tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d),nx=a.redMul(f).redMul(tmp);return this.curve.twisted?(ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c))),nz=f.redMul(g)):(ny=a.redMul(g).redMul(d.redSub(c)),nz=this.curve._mulC(f).redMul(g)),this.curve.point(nx,ny,nz)},Point.prototype.add=function(p){return this.isInfinity()?p:p.isInfinity()?this:this.curve.extended?this._extAdd(p):this._projAdd(p)},Point.prototype.mul=function(k){return this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,!1)},Point.prototype.jmulAdd=function(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,!0)},Point.prototype.normalize=function(){if(this.zOne)return this;var zi=this.z.redInvm();return this.x=this.x.redMul(zi),this.y=this.y.redMul(zi),this.t&&(this.t=this.t.redMul(zi)),this.z=this.curve.one,this.zOne=!0,this},Point.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point.prototype.eq=function(other){return this===other||0===this.getX().cmp(other.getX())&&0===this.getY().cmp(other.getY())},Point.prototype.eqXToP=function(x){var rx=x.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(rx))return!0;for(var xc=x.clone(),t=this.curve.redN.redMul(this.z);;){if(xc.iadd(this.curve.n),xc.cmp(this.curve.p)>=0)return!1;if(rx.redIAdd(t),0===this.x.cmp(rx))return!0}},Point.prototype.toP=Point.prototype.normalize,Point.prototype.mixedAdd=Point.prototype.add},function(module,exports,__webpack_require__){"use strict";var pre,curves=exports,hash=__webpack_require__(205),elliptic=__webpack_require__(55),assert=elliptic.utils.assert;function PresetCurve(options){"short"===options.type?this.curve=new elliptic.curve.short(options):"edwards"===options.type?this.curve=new elliptic.curve.edwards(options):this.curve=new elliptic.curve.mont(options),this.g=this.curve.g,this.n=this.curve.n,this.hash=options.hash,assert(this.g.validate(),"Invalid curve"),assert(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,get:function(){var curve=new PresetCurve(options);return Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,value:curve}),curve}})}curves.PresetCurve=PresetCurve,defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:!1,g:["9"]}),defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{pre=__webpack_require__(448)}catch(e){pre=void 0}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]})},function(module,exports,__webpack_require__){"use strict";exports.sha1=__webpack_require__(443),exports.sha224=__webpack_require__(444),exports.sha256=__webpack_require__(268),exports.sha384=__webpack_require__(445),exports.sha512=__webpack_require__(269)},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(85),common=__webpack_require__(140),shaCommon=__webpack_require__(267),rotl32=utils.rotl32,sum32=utils.sum32,sum32_5=utils.sum32_5,ft_1=shaCommon.ft_1,BlockHash=common.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils.inherits(SHA1,BlockHash),module.exports=SHA1,SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function(msg,start){for(var W=this.W,i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0],b=this.h[1],c=this.h[2],d=this.h[3],e=this.h[4];for(i=0;i<W.length;i++){var s=~~(i/20),t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d,d=c,c=rotl32(b,30),b=a,a=t}this.h[0]=sum32(this.h[0],a),this.h[1]=sum32(this.h[1],b),this.h[2]=sum32(this.h[2],c),this.h[3]=sum32(this.h[3],d),this.h[4]=sum32(this.h[4],e)},SHA1.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(85),SHA256=__webpack_require__(268);function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils.inherits(SHA224,SHA256),module.exports=SHA224,SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h.slice(0,7),"big"):utils.split32(this.h.slice(0,7),"big")}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(85),SHA512=__webpack_require__(269);function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils.inherits(SHA384,SHA512),module.exports=SHA384,SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h.slice(0,12),"big"):utils.split32(this.h.slice(0,12),"big")}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(85),common=__webpack_require__(140),rotl32=utils.rotl32,sum32=utils.sum32,sum32_3=utils.sum32_3,sum32_4=utils.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(j,x,y,z){return j<=15?x^y^z:j<=31?x&y|~x&z:j<=47?(x|~y)^z:j<=63?x&z|y&~z:x^(y|~z)}function K(j){return j<=15?0:j<=31?1518500249:j<=47?1859775393:j<=63?2400959708:2840853838}function Kh(j){return j<=15?1352829926:j<=31?1548603684:j<=47?1836072691:j<=63?2053994217:0}utils.inherits(RIPEMD160,BlockHash),exports.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function(msg,start){for(var A=this.h[0],B=this.h[1],C=this.h[2],D=this.h[3],E=this.h[4],Ah=A,Bh=B,Ch=C,Dh=D,Eh=E,j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E,E=D,D=rotl32(C,10),C=B,B=T,T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh),Ah=Eh,Eh=Dh,Dh=rotl32(Ch,10),Ch=Bh,Bh=T}T=sum32_3(this.h[1],C,Dh),this.h[1]=sum32_3(this.h[2],D,Eh),this.h[2]=sum32_3(this.h[3],E,Ah),this.h[3]=sum32_3(this.h[4],A,Bh),this.h[4]=sum32_3(this.h[0],B,Ch),this.h[0]=T},RIPEMD160.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"little"):utils.split32(this.h,"little")};var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(85),assert=__webpack_require__(72);function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash,this.blockSize=hash.blockSize/8,this.outSize=hash.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(key,enc))}module.exports=Hmac,Hmac.prototype._init=function(key){key.length>this.blockSize&&(key=(new this.Hash).update(key).digest()),assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(i=0;i<key.length;i++)key[i]^=54;for(this.inner=(new this.Hash).update(key),i=0;i<key.length;i++)key[i]^=106;this.outer=(new this.Hash).update(key)},Hmac.prototype.update=function(msg,enc){return this.inner.update(msg,enc),this},Hmac.prototype.digest=function(enc){return this.outer.update(this.inner.digest()),this.outer.digest(enc)}},function(module,exports){module.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(38),HmacDRBG=__webpack_require__(450),elliptic=__webpack_require__(55),assert=elliptic.utils.assert,KeyPair=__webpack_require__(451),Signature=__webpack_require__(452);function EC(options){if(!(this instanceof EC))return new EC(options);"string"==typeof options&&(assert(elliptic.curves.hasOwnProperty(options),"Unknown curve "+options),options=elliptic.curves[options]),options instanceof elliptic.curves.PresetCurve&&(options={curve:options}),this.curve=options.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=options.curve.g,this.g.precompute(options.curve.n.bitLength()+1),this.hash=options.hash||options.curve.hash}module.exports=EC,EC.prototype.keyPair=function(options){return new KeyPair(this,options)},EC.prototype.keyFromPrivate=function(priv,enc){return KeyPair.fromPrivate(this,priv,enc)},EC.prototype.keyFromPublic=function(pub,enc){return KeyPair.fromPublic(this,pub,enc)},EC.prototype.genKeyPair=function(options){options||(options={});for(var drbg=new HmacDRBG({hash:this.hash,pers:options.pers,persEnc:options.persEnc||"utf8",entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||"utf8",nonce:this.n.toArray()}),bytes=this.n.byteLength(),ns2=this.n.sub(new BN(2));;){var priv=new BN(drbg.generate(bytes));if(!(priv.cmp(ns2)>0))return priv.iaddn(1),this.keyFromPrivate(priv)}},EC.prototype._truncateToN=function(msg,truncOnly){var delta=8*msg.byteLength()-this.n.bitLength();return delta>0&&(msg=msg.ushrn(delta)),!truncOnly&&msg.cmp(this.n)>=0?msg.sub(this.n):msg},EC.prototype.sign=function(msg,key,enc,options){"object"==typeof enc&&(options=enc,enc=null),options||(options={}),key=this.keyFromPrivate(key,enc),msg=this._truncateToN(new BN(msg,16));for(var bytes=this.n.byteLength(),bkey=key.getPrivate().toArray("be",bytes),nonce=msg.toArray("be",bytes),drbg=new HmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc||"utf8"}),ns1=this.n.sub(new BN(1)),iter=0;;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));if(!((k=this._truncateToN(k,!0)).cmpn(1)<=0||k.cmp(ns1)>=0)){var kp=this.g.mul(k);if(!kp.isInfinity()){var kpX=kp.getX(),r=kpX.umod(this.n);if(0!==r.cmpn(0)){var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));if(0!==(s=s.umod(this.n)).cmpn(0)){var recoveryParam=(kp.getY().isOdd()?1:0)|(0!==kpX.cmp(r)?2:0);return options.canonical&&s.cmp(this.nh)>0&&(s=this.n.sub(s),recoveryParam^=1),new Signature({r:r,s:s,recoveryParam:recoveryParam})}}}}}},EC.prototype.verify=function(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16)),key=this.keyFromPublic(key,enc);var r=(signature=new Signature(signature,"hex")).r,s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var p,sinv=s.invm(this.n),u1=sinv.mul(msg).umod(this.n),u2=sinv.mul(r).umod(this.n);return this.curve._maxwellTrick?!(p=this.g.jmulAdd(u1,key.getPublic(),u2)).isInfinity()&&p.eqXToP(r):!(p=this.g.mulAdd(u1,key.getPublic(),u2)).isInfinity()&&0===p.getX().umod(this.n).cmp(r)},EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,"The recovery param is more than two bits"),signature=new Signature(signature,enc);var n=this.n,e=new BN(msg),r=signature.r,s=signature.s,isYOdd=1&j,isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error("Unable to find sencond key candinate");r=isSecondKey?this.curve.pointFromX(r.add(this.curve.n),isYOdd):this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n),s1=n.sub(e).mul(rInv).umod(n),s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2)},EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){if(null!==(signature=new Signature(signature,enc)).recoveryParam)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i)}catch(e){continue}if(Qprime.eq(Q))return i}throw new Error("Unable to find valid recovery factor")}},function(module,exports,__webpack_require__){"use strict";var hash=__webpack_require__(205),utils=__webpack_require__(266),assert=__webpack_require__(72);function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash,this.predResist=!!options.predResist,this.outLen=this.hash.outSize,this.minEntropy=options.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc||"hex"),nonce=utils.toArray(options.nonce,options.nonceEnc||"hex"),pers=utils.toArray(options.pers,options.persEnc||"hex");assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(entropy,nonce,pers)}module.exports=HmacDRBG,HmacDRBG.prototype._init=function(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(seed),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function(){return new hash.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function(seed){var kmac=this._hmac().update(this.V).update([0]);seed&&(kmac=kmac.update(seed)),this.K=kmac.digest(),this.V=this._hmac().update(this.V).digest(),seed&&(this.K=this._hmac().update(this.V).update([1]).update(seed).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function(entropy,entropyEnc,add,addEnc){"string"!=typeof entropyEnc&&(addEnc=add,add=entropyEnc,entropyEnc=null),entropy=utils.toArray(entropy,entropyEnc),add=utils.toArray(add,addEnc),assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(entropy.concat(add||[])),this._reseed=1},HmacDRBG.prototype.generate=function(len,enc,add,addEnc){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof enc&&(addEnc=add,add=enc,enc=null),add&&(add=utils.toArray(add,addEnc||"hex"),this._update(add));for(var temp=[];temp.length<len;)this.V=this._hmac().update(this.V).digest(),temp=temp.concat(this.V);var res=temp.slice(0,len);return this._update(add),this._reseed++,utils.encode(res,enc)}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(38),assert=__webpack_require__(55).utils.assert;function KeyPair(ec,options){this.ec=ec,this.priv=null,this.pub=null,options.priv&&this._importPrivate(options.priv,options.privEnc),options.pub&&this._importPublic(options.pub,options.pubEnc)}module.exports=KeyPair,KeyPair.fromPublic=function(ec,pub,enc){return pub instanceof KeyPair?pub:new KeyPair(ec,{pub:pub,pubEnc:enc})},KeyPair.fromPrivate=function(ec,priv,enc){return priv instanceof KeyPair?priv:new KeyPair(ec,{priv:priv,privEnc:enc})},KeyPair.prototype.validate=function(){var pub=this.getPublic();return pub.isInfinity()?{result:!1,reason:"Invalid public key"}:pub.validate()?pub.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function(compact,enc){return"string"==typeof compact&&(enc=compact,compact=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),enc?this.pub.encode(enc,compact):this.pub},KeyPair.prototype.getPrivate=function(enc){return"hex"===enc?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function(key,enc){this.priv=new BN(key,enc||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function(key,enc){if(key.x||key.y)return"mont"===this.ec.curve.type?assert(key.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||assert(key.x&&key.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(key.x,key.y));this.pub=this.ec.curve.decodePoint(key,enc)},KeyPair.prototype.derive=function(pub){return pub.mul(this.priv).getX()},KeyPair.prototype.sign=function(msg,enc,options){return this.ec.sign(msg,this,enc,options)},KeyPair.prototype.verify=function(msg,signature){return this.ec.verify(msg,signature,this)},KeyPair.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(38),utils=__webpack_require__(55).utils,assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;this._importDER(options,enc)||(assert(options.r&&options.s,"Signature without r or s"),this.r=new BN(options.r,16),this.s=new BN(options.s,16),void 0===options.recoveryParam?this.recoveryParam=null:this.recoveryParam=options.recoveryParam)}function Position(){this.place=0}function getLength(buf,p){var initial=buf[p.place++];if(!(128&initial))return initial;for(var octetLen=15&initial,val=0,i=0,off=p.place;i<octetLen;i++,off++)val<<=8,val|=buf[off];return p.place=off,val}function rmPadding(buf){for(var i=0,len=buf.length-1;!buf[i]&&!(128&buf[i+1])&&i<len;)i++;return 0===i?buf:buf.slice(i)}function constructLength(arr,len){if(len<128)arr.push(len);else{var octets=1+(Math.log(len)/Math.LN2>>>3);for(arr.push(128|octets);--octets;)arr.push(len>>>(octets<<3)&255);arr.push(len)}}module.exports=Signature,Signature.prototype._importDER=function(data,enc){data=utils.toArray(data,enc);var p=new Position;if(48!==data[p.place++])return!1;if(getLength(data,p)+p.place!==data.length)return!1;if(2!==data[p.place++])return!1;var rlen=getLength(data,p),r=data.slice(p.place,rlen+p.place);if(p.place+=rlen,2!==data[p.place++])return!1;var slen=getLength(data,p);if(data.length!==slen+p.place)return!1;var s=data.slice(p.place,slen+p.place);return 0===r[0]&&128&r[1]&&(r=r.slice(1)),0===s[0]&&128&s[1]&&(s=s.slice(1)),this.r=new BN(r),this.s=new BN(s),this.recoveryParam=null,!0},Signature.prototype.toDER=function(enc){var r=this.r.toArray(),s=this.s.toArray();for(128&r[0]&&(r=[0].concat(r)),128&s[0]&&(s=[0].concat(s)),r=rmPadding(r),s=rmPadding(s);!(s[0]||128&s[1]);)s=s.slice(1);var arr=[2];constructLength(arr,r.length),(arr=arr.concat(r)).push(2),constructLength(arr,s.length);var backHalf=arr.concat(s),res=[48];return constructLength(res,backHalf.length),res=res.concat(backHalf),utils.encode(res,enc)}},function(module,exports,__webpack_require__){"use strict";var hash=__webpack_require__(205),elliptic=__webpack_require__(55),utils=elliptic.utils,assert=utils.assert,parseBytes=utils.parseBytes,KeyPair=__webpack_require__(454),Signature=__webpack_require__(455);function EDDSA(curve){if(assert("ed25519"===curve,"only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(curve);curve=elliptic.curves[curve].curve;this.curve=curve,this.g=curve.g,this.g.precompute(curve.n.bitLength()+1),this.pointClass=curve.point().constructor,this.encodingLength=Math.ceil(curve.n.bitLength()/8),this.hash=hash.sha512}module.exports=EDDSA,EDDSA.prototype.sign=function(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret),r=this.hashInt(key.messagePrefix(),message),R=this.g.mul(r),Rencoded=this.encodePoint(R),s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv()),S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded})},EDDSA.prototype.verify=function(message,sig,pub){message=parseBytes(message),sig=this.makeSignature(sig);var key=this.keyFromPublic(pub),h=this.hashInt(sig.Rencoded(),key.pubBytes(),message),SG=this.g.mul(sig.S());return sig.R().add(key.pub().mul(h)).eq(SG)},EDDSA.prototype.hashInt=function(){for(var hash=this.hash(),i=0;i<arguments.length;i++)hash.update(arguments[i]);return utils.intFromLE(hash.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function(pub){return KeyPair.fromPublic(this,pub)},EDDSA.prototype.keyFromSecret=function(secret){return KeyPair.fromSecret(this,secret)},EDDSA.prototype.makeSignature=function(sig){return sig instanceof Signature?sig:new Signature(this,sig)},EDDSA.prototype.encodePoint=function(point){var enc=point.getY().toArray("le",this.encodingLength);return enc[this.encodingLength-1]|=point.getX().isOdd()?128:0,enc},EDDSA.prototype.decodePoint=function(bytes){var lastIx=(bytes=utils.parseBytes(bytes)).length-1,normed=bytes.slice(0,lastIx).concat(-129&bytes[lastIx]),xIsOdd=0!=(128&bytes[lastIx]),y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd)},EDDSA.prototype.encodeInt=function(num){return num.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function(bytes){return utils.intFromLE(bytes)},EDDSA.prototype.isPoint=function(val){return val instanceof this.pointClass}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(55).utils,assert=utils.assert,parseBytes=utils.parseBytes,cachedProperty=utils.cachedProperty;function KeyPair(eddsa,params){this.eddsa=eddsa,this._secret=parseBytes(params.secret),eddsa.isPoint(params.pub)?this._pub=params.pub:this._pubBytes=parseBytes(params.pub)}KeyPair.fromPublic=function(eddsa,pub){return pub instanceof KeyPair?pub:new KeyPair(eddsa,{pub:pub})},KeyPair.fromSecret=function(eddsa,secret){return secret instanceof KeyPair?secret:new KeyPair(eddsa,{secret:secret})},KeyPair.prototype.secret=function(){return this._secret},cachedProperty(KeyPair,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),cachedProperty(KeyPair,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),cachedProperty(KeyPair,"privBytes",(function(){var eddsa=this.eddsa,hash=this.hash(),lastIx=eddsa.encodingLength-1,a=hash.slice(0,eddsa.encodingLength);return a[0]&=248,a[lastIx]&=127,a[lastIx]|=64,a})),cachedProperty(KeyPair,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),cachedProperty(KeyPair,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),cachedProperty(KeyPair,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),KeyPair.prototype.sign=function(message){return assert(this._secret,"KeyPair can only verify"),this.eddsa.sign(message,this)},KeyPair.prototype.verify=function(message,sig){return this.eddsa.verify(message,sig,this)},KeyPair.prototype.getSecret=function(enc){return assert(this._secret,"KeyPair is public only"),utils.encode(this.secret(),enc)},KeyPair.prototype.getPublic=function(enc){return utils.encode(this.pubBytes(),enc)},module.exports=KeyPair},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(38),utils=__webpack_require__(55).utils,assert=utils.assert,cachedProperty=utils.cachedProperty,parseBytes=utils.parseBytes;function Signature(eddsa,sig){this.eddsa=eddsa,"object"!=typeof sig&&(sig=parseBytes(sig)),Array.isArray(sig)&&(sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)}),assert(sig.R&&sig.S,"Signature without R or S"),eddsa.isPoint(sig.R)&&(this._R=sig.R),sig.S instanceof BN&&(this._S=sig.S),this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded,this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded}cachedProperty(Signature,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),cachedProperty(Signature,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),cachedProperty(Signature,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),cachedProperty(Signature,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),Signature.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Signature.prototype.toHex=function(){return utils.encode(this.toBytes(),"hex").toUpperCase()},module.exports=Signature},function(module,exports,__webpack_require__){"use strict";var asn1=__webpack_require__(141);exports.certificate=__webpack_require__(467);var RSAPrivateKey=asn1.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));exports.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));exports.RSAPublicKey=RSAPublicKey;var PublicKey=asn1.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())}));exports.PublicKey=PublicKey;var AlgorithmIdentifier=asn1.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),PrivateKeyInfo=asn1.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())}));exports.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));exports.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));exports.DSAPrivateKey=DSAPrivateKey,exports.DSAparam=asn1.define("DSAparam",(function(){this.int()}));var ECPrivateKey=asn1.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())}));exports.ECPrivateKey=ECPrivateKey;var ECParameters=asn1.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));exports.signature=asn1.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(module,exports,__webpack_require__){var asn1=__webpack_require__(141),inherits=__webpack_require__(15);function Entity(name,body){this.name=name,this.body=body,this.decoders={},this.encoders={}}exports.define=function(name,body){return new Entity(name,body)},Entity.prototype._createNamed=function(base){var named;try{named=__webpack_require__(458).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){named=function(entity){this._initNamed(entity)}}return inherits(named,base),named.prototype._initNamed=function(entity){base.call(this,entity)},new named(this)},Entity.prototype._getDecoder=function(enc){return enc=enc||"der",this.decoders.hasOwnProperty(enc)||(this.decoders[enc]=this._createNamed(asn1.decoders[enc])),this.decoders[enc]},Entity.prototype.decode=function(data,enc,options){return this._getDecoder(enc).decode(data,options)},Entity.prototype._getEncoder=function(enc){return enc=enc||"der",this.encoders.hasOwnProperty(enc)||(this.encoders[enc]=this._createNamed(asn1.encoders[enc])),this.encoders[enc]},Entity.prototype.encode=function(data,enc,reporter){return this._getEncoder(enc).encode(data,reporter)}},function(module,exports,__webpack_require__){var indexOf=__webpack_require__(459),Object_keys=function(obj){if(Object.keys)return Object.keys(obj);var res=[];for(var key in obj)res.push(key);return res},forEach=function(xs,fn){if(xs.forEach)return xs.forEach(fn);for(var i=0;i<xs.length;i++)fn(xs[i],i,xs)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(obj,name,value){Object.defineProperty(obj,name,{writable:!0,enumerable:!1,configurable:!0,value:value})}}catch(e){return function(obj,name,value){obj[name]=value}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(code){if(!(this instanceof Script))return new Script(code);this.code=code};Script.prototype.runInContext=function(context){if(!(context instanceof Context))throw new TypeError("needs a 'context' argument.");var iframe=document.createElement("iframe");iframe.style||(iframe.style={}),iframe.style.display="none",document.body.appendChild(iframe);var win=iframe.contentWindow,wEval=win.eval,wExecScript=win.execScript;!wEval&&wExecScript&&(wExecScript.call(win,"null"),wEval=win.eval),forEach(Object_keys(context),(function(key){win[key]=context[key]})),forEach(globals,(function(key){context[key]&&(win[key]=context[key])}));var winKeys=Object_keys(win),res=wEval.call(win,this.code);return forEach(Object_keys(win),(function(key){(key in context||-1===indexOf(winKeys,key))&&(context[key]=win[key])})),forEach(globals,(function(key){key in context||defineProp(context,key,win[key])})),document.body.removeChild(iframe),res},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(context){var ctx=Script.createContext(context),res=this.runInContext(ctx);return forEach(Object_keys(ctx),(function(key){context[key]=ctx[key]})),res},forEach(Object_keys(Script.prototype),(function(name){exports[name]=Script[name]=function(code){var s=Script(code);return s[name].apply(s,[].slice.call(arguments,1))}})),exports.createScript=function(code){return exports.Script(code)},exports.createContext=Script.createContext=function(context){var copy=new Context;return"object"==typeof context&&forEach(Object_keys(context),(function(key){copy[key]=context[key]})),copy}},function(module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15);function Reporter(options){this._reporterState={obj:null,path:[],options:options||{},errors:[]}}function ReporterError(path,msg){this.path=path,this.rethrow(msg)}exports.Reporter=Reporter,Reporter.prototype.isError=function(obj){return obj instanceof ReporterError},Reporter.prototype.save=function(){var state=this._reporterState;return{obj:state.obj,pathLen:state.path.length}},Reporter.prototype.restore=function(data){var state=this._reporterState;state.obj=data.obj,state.path=state.path.slice(0,data.pathLen)},Reporter.prototype.enterKey=function(key){return this._reporterState.path.push(key)},Reporter.prototype.exitKey=function(index){var state=this._reporterState;state.path=state.path.slice(0,index-1)},Reporter.prototype.leaveKey=function(index,key,value){var state=this._reporterState;this.exitKey(index),null!==state.obj&&(state.obj[key]=value)},Reporter.prototype.path=function(){return this._reporterState.path.join("/")},Reporter.prototype.enterObject=function(){var state=this._reporterState,prev=state.obj;return state.obj={},prev},Reporter.prototype.leaveObject=function(prev){var state=this._reporterState,now=state.obj;return state.obj=prev,now},Reporter.prototype.error=function(msg){var err,state=this._reporterState,inherited=msg instanceof ReporterError;if(err=inherited?msg:new ReporterError(state.path.map((function(elem){return"["+JSON.stringify(elem)+"]"})).join(""),msg.message||msg,msg.stack),!state.options.partial)throw err;return inherited||state.errors.push(err),err},Reporter.prototype.wrapResult=function(result){var state=this._reporterState;return state.options.partial?{result:this.isError(result)?null:result,errors:state.errors}:result},inherits(ReporterError,Error),ReporterError.prototype.rethrow=function(msg){if(this.message=msg+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(module,exports,__webpack_require__){var Reporter=__webpack_require__(142).Reporter,EncoderBuffer=__webpack_require__(142).EncoderBuffer,DecoderBuffer=__webpack_require__(142).DecoderBuffer,assert=__webpack_require__(72),tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags);function Node(enc,parent){var state={};this._baseState=state,state.enc=enc,state.parent=parent||null,state.children=null,state.tag=null,state.args=null,state.reverseArgs=null,state.choice=null,state.optional=!1,state.any=!1,state.obj=!1,state.use=null,state.useDecoder=null,state.key=null,state.default=null,state.explicit=null,state.implicit=null,state.contains=null,state.parent||(state.children=[],this._wrap())}module.exports=Node;var stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node.prototype.clone=function(){var state=this._baseState,cstate={};stateProps.forEach((function(prop){cstate[prop]=state[prop]}));var res=new this.constructor(cstate.parent);return res._baseState=cstate,res},Node.prototype._wrap=function(){var state=this._baseState;methods.forEach((function(method){this[method]=function(){var clone=new this.constructor(this);return state.children.push(clone),clone[method].apply(clone,arguments)}}),this)},Node.prototype._init=function(body){var state=this._baseState;assert(null===state.parent),body.call(this),state.children=state.children.filter((function(child){return child._baseState.parent===this}),this),assert.equal(state.children.length,1,"Root node can have only one child")},Node.prototype._useArgs=function(args){var state=this._baseState,children=args.filter((function(arg){return arg instanceof this.constructor}),this);args=args.filter((function(arg){return!(arg instanceof this.constructor)}),this),0!==children.length&&(assert(null===state.children),state.children=children,children.forEach((function(child){child._baseState.parent=this}),this)),0!==args.length&&(assert(null===state.args),state.args=args,state.reverseArgs=args.map((function(arg){if("object"!=typeof arg||arg.constructor!==Object)return arg;var res={};return Object.keys(arg).forEach((function(key){key==(0|key)&&(key|=0);var value=arg[key];res[value]=key})),res})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(method){Node.prototype[method]=function(){var state=this._baseState;throw new Error(method+" not implemented for encoding: "+state.enc)}})),tags.forEach((function(tag){Node.prototype[tag]=function(){var state=this._baseState,args=Array.prototype.slice.call(arguments);return assert(null===state.tag),state.tag=tag,this._useArgs(args),this}})),Node.prototype.use=function(item){assert(item);var state=this._baseState;return assert(null===state.use),state.use=item,this},Node.prototype.optional=function(){return this._baseState.optional=!0,this},Node.prototype.def=function(val){var state=this._baseState;return assert(null===state.default),state.default=val,state.optional=!0,this},Node.prototype.explicit=function(num){var state=this._baseState;return assert(null===state.explicit&&null===state.implicit),state.explicit=num,this},Node.prototype.implicit=function(num){var state=this._baseState;return assert(null===state.explicit&&null===state.implicit),state.implicit=num,this},Node.prototype.obj=function(){var state=this._baseState,args=Array.prototype.slice.call(arguments);return state.obj=!0,0!==args.length&&this._useArgs(args),this},Node.prototype.key=function(newKey){var state=this._baseState;return assert(null===state.key),state.key=newKey,this},Node.prototype.any=function(){return this._baseState.any=!0,this},Node.prototype.choice=function(obj){var state=this._baseState;return assert(null===state.choice),state.choice=obj,this._useArgs(Object.keys(obj).map((function(key){return obj[key]}))),this},Node.prototype.contains=function(item){var state=this._baseState;return assert(null===state.use),state.contains=item,this},Node.prototype._decode=function(input,options){var state=this._baseState;if(null===state.parent)return input.wrapResult(state.children[0]._decode(input,options));var prevObj,result=state.default,present=!0,prevKey=null;if(null!==state.key&&(prevKey=input.enterKey(state.key)),state.optional){var tag=null;if(null!==state.explicit?tag=state.explicit:null!==state.implicit?tag=state.implicit:null!==state.tag&&(tag=state.tag),null!==tag||state.any){if(present=this._peekTag(input,tag,state.any),input.isError(present))return present}else{var save=input.save();try{null===state.choice?this._decodeGeneric(state.tag,input,options):this._decodeChoice(input,options),present=!0}catch(e){present=!1}input.restore(save)}}if(state.obj&&present&&(prevObj=input.enterObject()),present){if(null!==state.explicit){var explicit=this._decodeTag(input,state.explicit);if(input.isError(explicit))return explicit;input=explicit}var start=input.offset;if(null===state.use&&null===state.choice){if(state.any)save=input.save();var body=this._decodeTag(input,null!==state.implicit?state.implicit:state.tag,state.any);if(input.isError(body))return body;state.any?result=input.raw(save):input=body}if(options&&options.track&&null!==state.tag&&options.track(input.path(),start,input.length,"tagged"),options&&options.track&&null!==state.tag&&options.track(input.path(),input.offset,input.length,"content"),result=state.any?result:null===state.choice?this._decodeGeneric(state.tag,input,options):this._decodeChoice(input,options),input.isError(result))return result;if(state.any||null!==state.choice||null===state.children||state.children.forEach((function(child){child._decode(input,options)})),state.contains&&("octstr"===state.tag||"bitstr"===state.tag)){var data=new DecoderBuffer(result);result=this._getUse(state.contains,input._reporterState.obj)._decode(data,options)}}return state.obj&&present&&(result=input.leaveObject(prevObj)),null===state.key||null===result&&!0!==present?null!==prevKey&&input.exitKey(prevKey):input.leaveKey(prevKey,state.key,result),result},Node.prototype._decodeGeneric=function(tag,input,options){var state=this._baseState;return"seq"===tag||"set"===tag?null:"seqof"===tag||"setof"===tag?this._decodeList(input,tag,state.args[0],options):/str$/.test(tag)?this._decodeStr(input,tag,options):"objid"===tag&&state.args?this._decodeObjid(input,state.args[0],state.args[1],options):"objid"===tag?this._decodeObjid(input,null,null,options):"gentime"===tag||"utctime"===tag?this._decodeTime(input,tag,options):"null_"===tag?this._decodeNull(input,options):"bool"===tag?this._decodeBool(input,options):"objDesc"===tag?this._decodeStr(input,tag,options):"int"===tag||"enum"===tag?this._decodeInt(input,state.args&&state.args[0],options):null!==state.use?this._getUse(state.use,input._reporterState.obj)._decode(input,options):input.error("unknown tag: "+tag)},Node.prototype._getUse=function(entity,obj){var state=this._baseState;return state.useDecoder=this._use(entity,obj),assert(null===state.useDecoder._baseState.parent),state.useDecoder=state.useDecoder._baseState.children[0],state.implicit!==state.useDecoder._baseState.implicit&&(state.useDecoder=state.useDecoder.clone(),state.useDecoder._baseState.implicit=state.implicit),state.useDecoder},Node.prototype._decodeChoice=function(input,options){var state=this._baseState,result=null,match=!1;return Object.keys(state.choice).some((function(key){var save=input.save(),node=state.choice[key];try{var value=node._decode(input,options);if(input.isError(value))return!1;result={type:key,value:value},match=!0}catch(e){return input.restore(save),!1}return!0}),this),match?result:input.error("Choice not matched")},Node.prototype._createEncoderBuffer=function(data){return new EncoderBuffer(data,this.reporter)},Node.prototype._encode=function(data,reporter,parent){var state=this._baseState;if(null===state.default||state.default!==data){var result=this._encodeValue(data,reporter,parent);if(void 0!==result&&!this._skipDefault(result,reporter,parent))return result}},Node.prototype._encodeValue=function(data,reporter,parent){var state=this._baseState;if(null===state.parent)return state.children[0]._encode(data,reporter||new Reporter);var result=null;if(this.reporter=reporter,state.optional&&void 0===data){if(null===state.default)return;data=state.default}var content=null,primitive=!1;if(state.any)result=this._createEncoderBuffer(data);else if(state.choice)result=this._encodeChoice(data,reporter);else if(state.contains)content=this._getUse(state.contains,parent)._encode(data,reporter),primitive=!0;else if(state.children)content=state.children.map((function(child){if("null_"===child._baseState.tag)return child._encode(null,reporter,data);if(null===child._baseState.key)return reporter.error("Child should have a key");var prevKey=reporter.enterKey(child._baseState.key);if("object"!=typeof data)return reporter.error("Child expected, but input is not object");var res=child._encode(data[child._baseState.key],reporter,data);return reporter.leaveKey(prevKey),res}),this).filter((function(child){return child})),content=this._createEncoderBuffer(content);else if("seqof"===state.tag||"setof"===state.tag){if(!state.args||1!==state.args.length)return reporter.error("Too many args for : "+state.tag);if(!Array.isArray(data))return reporter.error("seqof/setof, but data is not Array");var child=this.clone();child._baseState.implicit=null,content=this._createEncoderBuffer(data.map((function(item){var state=this._baseState;return this._getUse(state.args[0],data)._encode(item,reporter)}),child))}else null!==state.use?result=this._getUse(state.use,parent)._encode(data,reporter):(content=this._encodePrimitive(state.tag,data),primitive=!0);if(!state.any&&null===state.choice){var tag=null!==state.implicit?state.implicit:state.tag,cls=null===state.implicit?"universal":"context";null===tag?null===state.use&&reporter.error("Tag could be omitted only for .use()"):null===state.use&&(result=this._encodeComposite(tag,primitive,cls,content))}return null!==state.explicit&&(result=this._encodeComposite(state.explicit,!1,"context",result)),result},Node.prototype._encodeChoice=function(data,reporter){var state=this._baseState,node=state.choice[data.type];return node||assert(!1,data.type+" not found in "+JSON.stringify(Object.keys(state.choice))),node._encode(data.value,reporter)},Node.prototype._encodePrimitive=function(tag,data){var state=this._baseState;if(/str$/.test(tag))return this._encodeStr(data,tag);if("objid"===tag&&state.args)return this._encodeObjid(data,state.reverseArgs[0],state.args[1]);if("objid"===tag)return this._encodeObjid(data,null,null);if("gentime"===tag||"utctime"===tag)return this._encodeTime(data,tag);if("null_"===tag)return this._encodeNull();if("int"===tag||"enum"===tag)return this._encodeInt(data,state.args&&state.reverseArgs[0]);if("bool"===tag)return this._encodeBool(data);if("objDesc"===tag)return this._encodeStr(data,tag);throw new Error("Unsupported tag: "+tag)},Node.prototype._isNumstr=function(str){return/^[0-9 ]*$/.test(str)},Node.prototype._isPrintstr=function(str){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(str)}},function(module,exports,__webpack_require__){var constants=__webpack_require__(271);exports.tagClass={0:"universal",1:"application",2:"context",3:"private"},exports.tagClassByName=constants._reverse(exports.tagClass),exports.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},exports.tagByName=constants._reverse(exports.tag)},function(module,exports,__webpack_require__){var decoders=exports;decoders.der=__webpack_require__(272),decoders.pem=__webpack_require__(464)},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),Buffer=__webpack_require__(11).Buffer,DERDecoder=__webpack_require__(272);function PEMDecoder(entity){DERDecoder.call(this,entity),this.enc="pem"}inherits(PEMDecoder,DERDecoder),module.exports=PEMDecoder,PEMDecoder.prototype.decode=function(data,options){for(var lines=data.toString().split(/[\r\n]+/g),label=options.label.toUpperCase(),re=/^-----(BEGIN|END) ([^-]+)-----$/,start=-1,end=-1,i=0;i<lines.length;i++){var match=lines[i].match(re);if(null!==match&&match[2]===label){if(-1!==start){if("END"!==match[1])break;end=i;break}if("BEGIN"!==match[1])break;start=i}}if(-1===start||-1===end)throw new Error("PEM section not found for: "+label);var base64=lines.slice(start+1,end).join("");base64.replace(/[^a-z0-9\+\/=]+/gi,"");var input=new Buffer(base64,"base64");return DERDecoder.prototype.decode.call(this,input,options)}},function(module,exports,__webpack_require__){var encoders=exports;encoders.der=__webpack_require__(273),encoders.pem=__webpack_require__(466)},function(module,exports,__webpack_require__){var inherits=__webpack_require__(15),DEREncoder=__webpack_require__(273);function PEMEncoder(entity){DEREncoder.call(this,entity),this.enc="pem"}inherits(PEMEncoder,DEREncoder),module.exports=PEMEncoder,PEMEncoder.prototype.encode=function(data,options){for(var p=DEREncoder.prototype.encode.call(this,data).toString("base64"),out=["-----BEGIN "+options.label+"-----"],i=0;i<p.length;i+=64)out.push(p.slice(i,i+64));return out.push("-----END "+options.label+"-----"),out.join("\n")}},function(module,exports,__webpack_require__){"use strict";var asn=__webpack_require__(141),Time=asn.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),AttributeTypeValue=asn.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),AlgorithmIdentifier=asn.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())})),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",(function(){this.setof(AttributeTypeValue)})),RDNSequence=asn.define("RDNSequence",(function(){this.seqof(RelativeDistinguishedName)})),Name=asn.define("Name",(function(){this.choice({rdnSequence:this.use(RDNSequence)})})),Validity=asn.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))})),Extension=asn.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),TBSCertificate=asn.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())})),X509Certificate=asn.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier),this.key("signatureValue").bitstr())}));module.exports=X509Certificate},function(module){module.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},function(module,exports,__webpack_require__){var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,evp=__webpack_require__(157),ciphers=__webpack_require__(202),Buffer=__webpack_require__(16).Buffer;module.exports=function(okey,password){var decrypted,key=okey.toString(),match=key.match(findProc);if(match){var suite="aes"+match[1],iv=Buffer.from(match[2],"hex"),cipherText=Buffer.from(match[3].replace(/[\r\n]/g,""),"base64"),cipherKey=evp(password,iv.slice(0,8),parseInt(match[1],10)).key,out=[],cipher=ciphers.createDecipheriv(suite,cipherKey,iv);out.push(cipher.update(cipherText)),out.push(cipher.final()),decrypted=Buffer.concat(out)}else{var match2=key.match(fullRegex);decrypted=new Buffer(match2[2].replace(/[\r\n]/g,""),"base64")}return{tag:key.match(startRegex)[1],data:decrypted}}},function(module,exports,__webpack_require__){(function(Buffer){var BN=__webpack_require__(38),EC=__webpack_require__(55).ec,parseKeys=__webpack_require__(159),curves=__webpack_require__(274);function checkValue(b,q){if(b.cmpn(0)<=0)throw new Error("invalid sig");if(b.cmp(q)>=q)throw new Error("invalid sig")}module.exports=function(sig,hash,key,signType,tag){var pub=parseKeys(key);if("ec"===pub.type){if("ecdsa"!==signType&&"ecdsa/rsa"!==signType)throw new Error("wrong public key type");return function(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join(".")];if(!curveId)throw new Error("unknown curve "+pub.data.algorithm.curve.join("."));var curve=new EC(curveId),pubkey=pub.data.subjectPrivateKey.data;return curve.verify(hash,sig,pubkey)}(sig,hash,pub)}if("dsa"===pub.type){if("dsa"!==signType)throw new Error("wrong public key type");return function(sig,hash,pub){var p=pub.data.p,q=pub.data.q,g=pub.data.g,y=pub.data.pub_key,unpacked=parseKeys.signature.decode(sig,"der"),s=unpacked.s,r=unpacked.r;checkValue(s,q),checkValue(r,q);var montp=BN.mont(p),w=s.invm(q);return 0===g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q).cmp(r)}(sig,hash,pub)}if("rsa"!==signType&&"ecdsa/rsa"!==signType)throw new Error("wrong public key type");hash=Buffer.concat([tag,hash]);for(var len=pub.modulus.byteLength(),pad=[1],padNum=0;hash.length+pad.length+2<len;)pad.push(255),padNum++;pad.push(0);for(var i=-1;++i<hash.length;)pad.push(hash[i]);pad=new Buffer(pad);var red=BN.mont(pub.modulus);sig=(sig=new BN(sig).toRed(red)).redPow(new BN(pub.publicExponent)),sig=new Buffer(sig.fromRed().toArray());var out=padNum<8?1:0;for(len=Math.min(sig.length,pad.length),sig.length!==pad.length&&(out=1),i=-1;++i<len;)out|=sig[i]^pad[i];return 0===out}}).call(this,__webpack_require__(11).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var elliptic=__webpack_require__(55),BN=__webpack_require__(38);module.exports=function(curve){return new ECDH(curve)};var aliases={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function ECDH(curve){this.curveType=aliases[curve],this.curveType||(this.curveType={name:curve}),this.curve=new elliptic.ec(this.curveType.name),this.keys=void 0}function formatReturnValue(bn,enc,len){Array.isArray(bn)||(bn=bn.toArray());var buf=new Buffer(bn);if(len&&buf.length<len){var zeros=new Buffer(len-buf.length);zeros.fill(0),buf=Buffer.concat([zeros,buf])}return enc?buf.toString(enc):buf}aliases.p224=aliases.secp224r1,aliases.p256=aliases.secp256r1=aliases.prime256v1,aliases.p192=aliases.secp192r1=aliases.prime192v1,aliases.p384=aliases.secp384r1,aliases.p521=aliases.secp521r1,ECDH.prototype.generateKeys=function(enc,format){return this.keys=this.curve.genKeyPair(),this.getPublicKey(enc,format)},ECDH.prototype.computeSecret=function(other,inenc,enc){return inenc=inenc||"utf8",Buffer.isBuffer(other)||(other=new Buffer(other,inenc)),formatReturnValue(this.curve.keyFromPublic(other).getPublic().mul(this.keys.getPrivate()).getX(),enc,this.curveType.byteLength)},ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic("compressed"===format,!0);return"hybrid"===format&&(key[key.length-1]%2?key[0]=7:key[0]=6),formatReturnValue(key,enc)},ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc)},ECDH.prototype.setPublicKey=function(pub,enc){return enc=enc||"utf8",Buffer.isBuffer(pub)||(pub=new Buffer(pub,enc)),this.keys._importPublic(pub),this},ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||"utf8",Buffer.isBuffer(priv)||(priv=new Buffer(priv,enc));var _priv=new BN(priv);return _priv=_priv.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(_priv),this}}).call(this,__webpack_require__(11).Buffer)},function(module,exports,__webpack_require__){exports.publicEncrypt=__webpack_require__(473),exports.privateDecrypt=__webpack_require__(474),exports.privateEncrypt=function(key,buf){return exports.publicEncrypt(key,buf,!0)},exports.publicDecrypt=function(key,buf){return exports.privateDecrypt(key,buf,!0)}},function(module,exports,__webpack_require__){var parseKeys=__webpack_require__(159),randomBytes=__webpack_require__(110),createHash=__webpack_require__(136),mgf=__webpack_require__(275),xor=__webpack_require__(276),BN=__webpack_require__(38),withPublic=__webpack_require__(277),crt=__webpack_require__(204),Buffer=__webpack_require__(16).Buffer;module.exports=function(publicKey,msg,reverse){var padding;padding=publicKey.padding?publicKey.padding:reverse?1:4;var paddedMsg,key=parseKeys(publicKey);if(4===padding)paddedMsg=function(key,msg){var k=key.modulus.byteLength(),mLen=msg.length,iHash=createHash("sha1").update(Buffer.alloc(0)).digest(),hLen=iHash.length,hLen2=2*hLen;if(mLen>k-hLen2-2)throw new Error("message too long");var ps=Buffer.alloc(k-mLen-hLen2-2),dblen=k-hLen-1,seed=randomBytes(hLen),maskedDb=xor(Buffer.concat([iHash,ps,Buffer.alloc(1,1),msg],dblen),mgf(seed,dblen)),maskedSeed=xor(seed,mgf(maskedDb,hLen));return new BN(Buffer.concat([Buffer.alloc(1),maskedSeed,maskedDb],k))}(key,msg);else if(1===padding)paddedMsg=function(key,msg,reverse){var ps,mLen=msg.length,k=key.modulus.byteLength();if(mLen>k-11)throw new Error("message too long");ps=reverse?Buffer.alloc(k-mLen-3,255):function(len){var num,out=Buffer.allocUnsafe(len),i=0,cache=randomBytes(2*len),cur=0;for(;i<len;)cur===cache.length&&(cache=randomBytes(2*len),cur=0),(num=cache[cur++])&&(out[i++]=num);return out}(k-mLen-3);return new BN(Buffer.concat([Buffer.from([0,reverse?1:2]),ps,Buffer.alloc(1),msg],k))}(key,msg,reverse);else{if(3!==padding)throw new Error("unknown padding");if((paddedMsg=new BN(msg)).cmp(key.modulus)>=0)throw new Error("data too long for modulus")}return reverse?crt(paddedMsg,key):withPublic(paddedMsg,key)}},function(module,exports,__webpack_require__){var parseKeys=__webpack_require__(159),mgf=__webpack_require__(275),xor=__webpack_require__(276),BN=__webpack_require__(38),crt=__webpack_require__(204),createHash=__webpack_require__(136),withPublic=__webpack_require__(277),Buffer=__webpack_require__(16).Buffer;module.exports=function(privateKey,enc,reverse){var padding;padding=privateKey.padding?privateKey.padding:reverse?1:4;var msg,key=parseKeys(privateKey),k=key.modulus.byteLength();if(enc.length>k||new BN(enc).cmp(key.modulus)>=0)throw new Error("decryption error");msg=reverse?withPublic(new BN(enc),key):crt(enc,key);var zBuffer=Buffer.alloc(k-msg.length);if(msg=Buffer.concat([zBuffer,msg],k),4===padding)return function(key,msg){var k=key.modulus.byteLength(),iHash=createHash("sha1").update(Buffer.alloc(0)).digest(),hLen=iHash.length;if(0!==msg[0])throw new Error("decryption error");var maskedSeed=msg.slice(1,hLen+1),maskedDb=msg.slice(hLen+1),seed=xor(maskedSeed,mgf(maskedDb,hLen)),db=xor(maskedDb,mgf(seed,k-hLen-1));if(function(a,b){a=Buffer.from(a),b=Buffer.from(b);var dif=0,len=a.length;a.length!==b.length&&(dif++,len=Math.min(a.length,b.length));var i=-1;for(;++i<len;)dif+=a[i]^b[i];return dif}(iHash,db.slice(0,hLen)))throw new Error("decryption error");var i=hLen;for(;0===db[i];)i++;if(1!==db[i++])throw new Error("decryption error");return db.slice(i)}(key,msg);if(1===padding)return function(key,msg,reverse){var p1=msg.slice(0,2),i=2,status=0;for(;0!==msg[i++];)if(i>=msg.length){status++;break}var ps=msg.slice(2,i-1);("0002"!==p1.toString("hex")&&!reverse||"0001"!==p1.toString("hex")&&reverse)&&status++;ps.length<8&&status++;if(status)throw new Error("decryption error");return msg.slice(i)}(0,msg,reverse);if(3===padding)return msg;throw new Error("unknown padding")}},function(module,exports,__webpack_require__){"use strict";(function(global,process){function oldBrowser(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var safeBuffer=__webpack_require__(16),randombytes=__webpack_require__(110),Buffer=safeBuffer.Buffer,kBufferMaxLength=safeBuffer.kMaxLength,crypto=global.crypto||global.msCrypto,kMaxUint32=Math.pow(2,32)-1;function assertOffset(offset,length){if("number"!=typeof offset||offset!=offset)throw new TypeError("offset must be a number");if(offset>kMaxUint32||offset<0)throw new TypeError("offset must be a uint32");if(offset>kBufferMaxLength||offset>length)throw new RangeError("offset out of range")}function assertSize(size,offset,length){if("number"!=typeof size||size!=size)throw new TypeError("size must be a number");if(size>kMaxUint32||size<0)throw new TypeError("size must be a uint32");if(size+offset>length||size>kBufferMaxLength)throw new RangeError("buffer too small")}function actualFill(buf,offset,size,cb){if(process.browser){var ourBuf=buf.buffer,uint=new Uint8Array(ourBuf,offset,size);return crypto.getRandomValues(uint),cb?void process.nextTick((function(){cb(null,buf)})):buf}if(!cb)return randombytes(size).copy(buf,offset),buf;randombytes(size,(function(err,bytes){if(err)return cb(err);bytes.copy(buf,offset),cb(null,buf)}))}crypto&&crypto.getRandomValues||!process.browser?(exports.randomFill=function(buf,offset,size,cb){if(!(Buffer.isBuffer(buf)||buf instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof offset)cb=offset,offset=0,size=buf.length;else if("function"==typeof size)cb=size,size=buf.length-offset;else if("function"!=typeof cb)throw new TypeError('"cb" argument must be a function');return assertOffset(offset,buf.length),assertSize(size,offset,buf.length),actualFill(buf,offset,size,cb)},exports.randomFillSync=function(buf,offset,size){void 0===offset&&(offset=0);if(!(Buffer.isBuffer(buf)||buf instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');assertOffset(offset,buf.length),void 0===size&&(size=buf.length-offset);return assertSize(size,offset,buf.length),actualFill(buf,offset,size)}):(exports.randomFill=oldBrowser,exports.randomFillSync=oldBrowser)}).call(this,__webpack_require__(54),__webpack_require__(76))},function(module,exports,__webpack_require__){module.exports=self.fetch||(self.fetch=__webpack_require__(278).default||__webpack_require__(278))},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(root){exports&&exports.nodeType,module&&module.nodeType;var freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self;var punycode,maxInt=2147483647,regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";return parts.length>1&&(result=parts[0]+"@",string=parts[1]),result+map((string=string.replace(regexSeparators,".")).split("."),fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,(function(value){var output="";return value>65535&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)})).join("")}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/700):delta>>1,delta+=floor(delta/numPoints);delta>455;k+=36)delta=floor(delta/35);return floor(k+36*delta/(delta+38))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,codePoint,output=[],inputLength=input.length,i=0,n=128,bias=72;for((basic=input.lastIndexOf("-"))<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=36;index>=inputLength&&error("invalid-input"),((digit=(codePoint=input.charCodeAt(index++))-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:36)>=36||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,!(digit<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)w>floor(maxInt/(baseMinusT=36-t))&&error("overflow"),w*=baseMinusT;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(inputLength=(input=ucs2decode(input)).length,n=128,delta=0,bias=72,j=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push("-");handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)(currentValue=input[j])>=n&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=36;!(q<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)qMinusT=q-t,baseMinusT=36-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))},toUnicode:function(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(139)(module),__webpack_require__(54))},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return"string"==typeof arg},isObject:function(arg){return"object"==typeof arg&&null!==arg},isNull:function(arg){return null===arg},isNullOrUndefined:function(arg){return null==arg}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(480),exports.encode=exports.stringify=__webpack_require__(481)},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))})).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))})).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)};function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var ie11Sha256_1=__webpack_require__(279),webCryptoSha256_1=__webpack_require__(282),sha256_js_1=__webpack_require__(483),supports_web_crypto_1=__webpack_require__(486),ie11_detection_1=__webpack_require__(488),util_locate_window_1=__webpack_require__(207),Sha256=function(){function Sha256(secret){supports_web_crypto_1.supportsWebCrypto(util_locate_window_1.locateWindow())?this.hash=new webCryptoSha256_1.Sha256(secret):ie11_detection_1.isMsWindow(util_locate_window_1.locateWindow())?this.hash=new ie11Sha256_1.Sha256(secret):this.hash=new sha256_js_1.Sha256(secret)}return Sha256.prototype.update=function(data,encoding){this.hash.update(data,encoding)},Sha256.prototype.digest=function(){return this.hash.digest()},Sha256}();exports.Sha256=Sha256},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(206).__exportStar(__webpack_require__(484),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var tslib_1=__webpack_require__(206),constants_1=__webpack_require__(283),RawSha256_1=__webpack_require__(485),util_utf8_browser_1=__webpack_require__(21),Sha256=function(){function Sha256(secret){if(this.hash=new RawSha256_1.RawSha256,secret){this.outer=new RawSha256_1.RawSha256;var inner=function(secret){var input=convertToBuffer(secret);if(input.byteLength>constants_1.BLOCK_SIZE){var bufferHash=new RawSha256_1.RawSha256;bufferHash.update(input),input=bufferHash.digest()}var buffer=new Uint8Array(constants_1.BLOCK_SIZE);return buffer.set(input),buffer}(secret),outer=new Uint8Array(constants_1.BLOCK_SIZE);outer.set(inner);for(var i=0;i<constants_1.BLOCK_SIZE;i++)inner[i]^=54,outer[i]^=92;this.hash.update(inner),this.outer.update(outer);for(i=0;i<inner.byteLength;i++)inner[i]=0}}return Sha256.prototype.update=function(toHash){if(!function(data){if("string"==typeof data)return 0===data.length;return 0===data.byteLength}(toHash)&&!this.error)try{this.hash.update(convertToBuffer(toHash))}catch(e){this.error=e}},Sha256.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},Sha256.prototype.digest=function(){return tslib_1.__awaiter(this,void 0,void 0,(function(){return tslib_1.__generator(this,(function(_a){return[2,this.digestSync()]}))}))},Sha256}();function convertToBuffer(data){return"string"==typeof data?util_utf8_browser_1.fromUtf8(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data)}exports.Sha256=Sha256},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RawSha256=void 0;var constants_1=__webpack_require__(283),RawSha256=function(){function RawSha256(){this.state=Int32Array.from(constants_1.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return RawSha256.prototype.update=function(data){if(this.finished)throw new Error("Attempted to update an already finished hash.");var position=0,byteLength=data.byteLength;if(this.bytesHashed+=byteLength,8*this.bytesHashed>constants_1.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;byteLength>0;)this.buffer[this.bufferLength++]=data[position++],byteLength--,this.bufferLength===constants_1.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},RawSha256.prototype.digest=function(){if(!this.finished){var bitsHashed=8*this.bytesHashed,bufferView=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),undecoratedLength=this.bufferLength;if(bufferView.setUint8(this.bufferLength++,128),undecoratedLength%constants_1.BLOCK_SIZE>=constants_1.BLOCK_SIZE-8){for(var i=this.bufferLength;i<constants_1.BLOCK_SIZE;i++)bufferView.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<constants_1.BLOCK_SIZE-8;i++)bufferView.setUint8(i,0);bufferView.setUint32(constants_1.BLOCK_SIZE-8,Math.floor(bitsHashed/4294967296),!0),bufferView.setUint32(constants_1.BLOCK_SIZE-4,bitsHashed),this.hashBuffer(),this.finished=!0}var out=new Uint8Array(constants_1.DIGEST_LENGTH);for(i=0;i<8;i++)out[4*i]=this.state[i]>>>24&255,out[4*i+1]=this.state[i]>>>16&255,out[4*i+2]=this.state[i]>>>8&255,out[4*i+3]=this.state[i]>>>0&255;return out},RawSha256.prototype.hashBuffer=function(){for(var buffer=this.buffer,state=this.state,state0=state[0],state1=state[1],state2=state[2],state3=state[3],state4=state[4],state5=state[5],state6=state[6],state7=state[7],i=0;i<constants_1.BLOCK_SIZE;i++){if(i<16)this.temp[i]=(255&buffer[4*i])<<24|(255&buffer[4*i+1])<<16|(255&buffer[4*i+2])<<8|255&buffer[4*i+3];else{var u=this.temp[i-2],t1_1=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,t2_1=((u=this.temp[i-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3;this.temp[i]=(t1_1+this.temp[i-7]|0)+(t2_1+this.temp[i-16]|0)}var t1=(((state4>>>6|state4<<26)^(state4>>>11|state4<<21)^(state4>>>25|state4<<7))+(state4&state5^~state4&state6)|0)+(state7+(constants_1.KEY[i]+this.temp[i]|0)|0)|0,t2=((state0>>>2|state0<<30)^(state0>>>13|state0<<19)^(state0>>>22|state0<<10))+(state0&state1^state0&state2^state1&state2)|0;state7=state6,state6=state5,state5=state4,state4=state3+t1|0,state3=state2,state2=state1,state1=state0,state0=t1+t2|0}state[0]+=state0,state[1]+=state1,state[2]+=state2,state[3]+=state3,state[4]+=state4,state[5]+=state5,state[6]+=state6,state[7]+=state7},RawSha256}();exports.RawSha256=RawSha256},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(284).__exportStar(__webpack_require__(487),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.supportsZeroByteGCM=exports.supportsSubtleCrypto=exports.supportsSecureRandom=exports.supportsWebCrypto=void 0;var tslib_1=__webpack_require__(284),subtleCryptoMethods=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function supportsSecureRandom(window){return"object"==typeof window&&"object"==typeof window.crypto&&"function"==typeof window.crypto.getRandomValues}function supportsSubtleCrypto(subtle){return subtle&&subtleCryptoMethods.every((function(methodName){return"function"==typeof subtle[methodName]}))}exports.supportsWebCrypto=function(window){return!(!supportsSecureRandom(window)||"object"!=typeof window.crypto.subtle)&&supportsSubtleCrypto(window.crypto.subtle)},exports.supportsSecureRandom=supportsSecureRandom,exports.supportsSubtleCrypto=supportsSubtleCrypto,exports.supportsZeroByteGCM=function(subtle){return tslib_1.__awaiter(this,void 0,void 0,(function(){var key;return tslib_1.__generator(this,(function(_b){switch(_b.label){case 0:if(!supportsSubtleCrypto(subtle))return[2,!1];_b.label=1;case 1:return _b.trys.push([1,4,,5]),[4,subtle.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return key=_b.sent(),[4,subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},key,new Uint8Array(0))];case 3:return[2,16===_b.sent().byteLength];case 4:return _b.sent(),[2,!1];case 5:return[2]}}))}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(489);tslib_1.__exportStar(__webpack_require__(490),exports),tslib_1.__exportStar(__webpack_require__(491),exports),tslib_1.__exportStar(__webpack_require__(492),exports),tslib_1.__exportStar(__webpack_require__(493),exports),tslib_1.__exportStar(__webpack_require__(494),exports)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__extends",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,"__assign",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,"__rest",(function(){return __rest})),__webpack_require__.d(__webpack_exports__,"__decorate",(function(){return __decorate})),__webpack_require__.d(__webpack_exports__,"__param",(function(){return __param})),__webpack_require__.d(__webpack_exports__,"__metadata",(function(){return __metadata})),__webpack_require__.d(__webpack_exports__,"__awaiter",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,"__generator",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,"__createBinding",(function(){return __createBinding})),__webpack_require__.d(__webpack_exports__,"__exportStar",(function(){return __exportStar})),__webpack_require__.d(__webpack_exports__,"__values",(function(){return __values})),__webpack_require__.d(__webpack_exports__,"__read",(function(){return __read})),__webpack_require__.d(__webpack_exports__,"__spread",(function(){return __spread})),__webpack_require__.d(__webpack_exports__,"__spreadArrays",(function(){return __spreadArrays})),__webpack_require__.d(__webpack_exports__,"__await",(function(){return __await})),__webpack_require__.d(__webpack_exports__,"__asyncGenerator",(function(){return __asyncGenerator})),__webpack_require__.d(__webpack_exports__,"__asyncDelegator",(function(){return __asyncDelegator})),__webpack_require__.d(__webpack_exports__,"__asyncValues",(function(){return __asyncValues})),__webpack_require__.d(__webpack_exports__,"__makeTemplateObject",(function(){return __makeTemplateObject})),__webpack_require__.d(__webpack_exports__,"__importStar",(function(){return __importStar})),__webpack_require__.d(__webpack_exports__,"__importDefault",(function(){return __importDefault})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMsWindow=void 0;var msSubtleCryptoMethods=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];exports.isMsWindow=function(window){if(function(window){return"MSInputMethodContext"in window&&"msCrypto"in window}(window)&&void 0!==window.msCrypto.subtle){var _a=window.msCrypto,getRandomValues=_a.getRandomValues,subtle_1=_a.subtle;return msSubtleCryptoMethods.map((function(methodName){return subtle_1[methodName]})).concat(getRandomValues).every((function(method){return"function"==typeof method}))}return!1}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__(0),constants_1=__webpack_require__(287),RawSha256_1=__webpack_require__(496),util_utf8_browser_1=__webpack_require__(608),Sha256=function(){function Sha256(secret){if(this.hash=new RawSha256_1.RawSha256,secret){this.outer=new RawSha256_1.RawSha256;var inner=function(secret){var input=convertToBuffer(secret);if(input.byteLength>constants_1.BLOCK_SIZE){var bufferHash=new RawSha256_1.RawSha256;bufferHash.update(input),input=bufferHash.digest()}var buffer=new Uint8Array(constants_1.BLOCK_SIZE);return buffer.set(input),buffer}(secret),outer=new Uint8Array(constants_1.BLOCK_SIZE);outer.set(inner);for(var i=0;i<constants_1.BLOCK_SIZE;i++)inner[i]^=54,outer[i]^=92;this.hash.update(inner),this.outer.update(outer);for(i=0;i<inner.byteLength;i++)inner[i]=0}}return Sha256.prototype.update=function(toHash){if(!function(data){if("string"==typeof data)return 0===data.length;return 0===data.byteLength}(toHash)&&!this.error)try{this.hash.update(convertToBuffer(toHash))}catch(e){this.error=e}},Sha256.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},Sha256.prototype.digest=function(){return tslib_1.__awaiter(this,void 0,void 0,(function(){return tslib_1.__generator(this,(function(_a){return[2,this.digestSync()]}))}))},Sha256}();function convertToBuffer(data){return"string"==typeof data?util_utf8_browser_1.fromUtf8(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data)}exports.Sha256=Sha256},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=__webpack_require__(287),RawSha256=function(){function RawSha256(){this.state=Int32Array.from(constants_1.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return RawSha256.prototype.update=function(data){if(this.finished)throw new Error("Attempted to update an already finished hash.");var position=0,byteLength=data.byteLength;if(this.bytesHashed+=byteLength,8*this.bytesHashed>constants_1.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;byteLength>0;)this.buffer[this.bufferLength++]=data[position++],byteLength--,this.bufferLength===constants_1.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},RawSha256.prototype.digest=function(){if(!this.finished){var bitsHashed=8*this.bytesHashed,bufferView=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),undecoratedLength=this.bufferLength;if(bufferView.setUint8(this.bufferLength++,128),undecoratedLength%constants_1.BLOCK_SIZE>=constants_1.BLOCK_SIZE-8){for(var i=this.bufferLength;i<constants_1.BLOCK_SIZE;i++)bufferView.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<constants_1.BLOCK_SIZE-8;i++)bufferView.setUint8(i,0);bufferView.setUint32(constants_1.BLOCK_SIZE-8,Math.floor(bitsHashed/4294967296),!0),bufferView.setUint32(constants_1.BLOCK_SIZE-4,bitsHashed),this.hashBuffer(),this.finished=!0}var out=new Uint8Array(constants_1.DIGEST_LENGTH);for(i=0;i<8;i++)out[4*i]=this.state[i]>>>24&255,out[4*i+1]=this.state[i]>>>16&255,out[4*i+2]=this.state[i]>>>8&255,out[4*i+3]=this.state[i]>>>0&255;return out},RawSha256.prototype.hashBuffer=function(){for(var buffer=this.buffer,state=this.state,state0=state[0],state1=state[1],state2=state[2],state3=state[3],state4=state[4],state5=state[5],state6=state[6],state7=state[7],i=0;i<constants_1.BLOCK_SIZE;i++){if(i<16)this.temp[i]=(255&buffer[4*i])<<24|(255&buffer[4*i+1])<<16|(255&buffer[4*i+2])<<8|255&buffer[4*i+3];else{var u=this.temp[i-2],t1_1=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,t2_1=((u=this.temp[i-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3;this.temp[i]=(t1_1+this.temp[i-7]|0)+(t2_1+this.temp[i-16]|0)}var t1=(((state4>>>6|state4<<26)^(state4>>>11|state4<<21)^(state4>>>25|state4<<7))+(state4&state5^~state4&state6)|0)+(state7+(constants_1.KEY[i]+this.temp[i]|0)|0)|0,t2=((state0>>>2|state0<<30)^(state0>>>13|state0<<19)^(state0>>>22|state0<<10))+(state0&state1^state0&state2^state1&state2)|0;state7=state6,state6=state5,state5=state4,state4=state3+t1|0,state3=state2,state2=state1,state1=state0,state0=t1+t2|0}state[0]+=state0,state[1]+=state1,state[2]+=state2,state[3]+=state3,state[4]+=state4,state[5]+=state5,state[6]+=state6,state[7]+=state7},RawSha256}();exports.RawSha256=RawSha256},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__extends",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,"__assign",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,"__rest",(function(){return __rest})),__webpack_require__.d(__webpack_exports__,"__decorate",(function(){return __decorate})),__webpack_require__.d(__webpack_exports__,"__param",(function(){return __param})),__webpack_require__.d(__webpack_exports__,"__metadata",(function(){return __metadata})),__webpack_require__.d(__webpack_exports__,"__awaiter",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,"__generator",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,"__createBinding",(function(){return __createBinding})),__webpack_require__.d(__webpack_exports__,"__exportStar",(function(){return __exportStar})),__webpack_require__.d(__webpack_exports__,"__values",(function(){return __values})),__webpack_require__.d(__webpack_exports__,"__read",(function(){return __read})),__webpack_require__.d(__webpack_exports__,"__spread",(function(){return __spread})),__webpack_require__.d(__webpack_exports__,"__spreadArrays",(function(){return __spreadArrays})),__webpack_require__.d(__webpack_exports__,"__await",(function(){return __await})),__webpack_require__.d(__webpack_exports__,"__asyncGenerator",(function(){return __asyncGenerator})),__webpack_require__.d(__webpack_exports__,"__asyncDelegator",(function(){return __asyncDelegator})),__webpack_require__.d(__webpack_exports__,"__asyncValues",(function(){return __asyncValues})),__webpack_require__.d(__webpack_exports__,"__makeTemplateObject",(function(){return __makeTemplateObject})),__webpack_require__.d(__webpack_exports__,"__importStar",(function(){return __importStar})),__webpack_require__.d(__webpack_exports__,"__importDefault",(function(){return __importDefault})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldGet",(function(){return __classPrivateFieldGet})),__webpack_require__.d(__webpack_exports__,"__classPrivateFieldSet",(function(){return __classPrivateFieldSet}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},function(module,exports,__webpack_require__){var castPath=__webpack_require__(499),toKey=__webpack_require__(530);module.exports=function(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(105),isKey=__webpack_require__(500),stringToPath=__webpack_require__(503),toString=__webpack_require__(527);module.exports=function(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(105),isSymbol=__webpack_require__(208),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(160),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function(value){return nativeObjectToString.call(value)}},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(504),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(505);module.exports=function(func){var result=memoize(func,(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(209);function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){var Hash=__webpack_require__(507),ListCache=__webpack_require__(162),Map=__webpack_require__(210);module.exports=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(508),hashDelete=__webpack_require__(513),hashGet=__webpack_require__(514),hashHas=__webpack_require__(515),hashSet=__webpack_require__(516);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(161);module.exports=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(289),isMasked=__webpack_require__(510),isObject=__webpack_require__(290),toSource=__webpack_require__(291),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(511),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(93)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){module.exports=function(object,key){return null==object?void 0:object[key]}},function(module,exports){module.exports=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(161),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(161),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(161);module.exports=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},function(module,exports){module.exports=function(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(163),splice=Array.prototype.splice;module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(163);module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(163);module.exports=function(key){return assocIndexOf(this.__data__,key)>-1}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(163);module.exports=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(164);module.exports=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(164);module.exports=function(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(164);module.exports=function(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(164);module.exports=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(528);module.exports=function(value){return null==value?"":baseToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(160),arrayMap=__webpack_require__(529),isArray=__webpack_require__(105),isSymbol=__webpack_require__(208),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}},function(module,exports){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(208);module.exports=function(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}},function(module,exports,__webpack_require__){var nativeKeys=__webpack_require__(532)(Object.keys,Object);module.exports=nativeKeys},function(module,exports){module.exports=function(func,transform){return function(arg){return func(transform(arg))}}},function(module,exports,__webpack_require__){var DataView=__webpack_require__(112)(__webpack_require__(93),"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var Promise=__webpack_require__(112)(__webpack_require__(93),"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var Set=__webpack_require__(112)(__webpack_require__(93),"Set");module.exports=Set},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(112)(__webpack_require__(93),"WeakMap");module.exports=WeakMap},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(143),isObjectLike=__webpack_require__(144);module.exports=function(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}},function(module,exports){module.exports=function(){return!1}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(143),isLength=__webpack_require__(298),isObjectLike=__webpack_require__(144),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},function(module,exports){module.exports=function(func){return function(value){return func(value)}}},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(288),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(this,__webpack_require__(139)(module))},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(543),isObjectLike=__webpack_require__(144);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(544),equalArrays=__webpack_require__(299),equalByTag=__webpack_require__(555),equalObjects=__webpack_require__(559),getTag=__webpack_require__(295),isArray=__webpack_require__(105),isBuffer=__webpack_require__(211),isTypedArray=__webpack_require__(212),objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag="[object Arguments]"==objTag?objectTag:objTag)==objectTag,othIsObj=(othTag="[object Arguments]"==othTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(162),stackClear=__webpack_require__(545),stackDelete=__webpack_require__(546),stackGet=__webpack_require__(547),stackHas=__webpack_require__(548),stackSet=__webpack_require__(549);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(162);module.exports=function(){this.__data__=new ListCache,this.size=0}},function(module,exports){module.exports=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},function(module,exports){module.exports=function(key){return this.__data__.get(key)}},function(module,exports){module.exports=function(key){return this.__data__.has(key)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(162),Map=__webpack_require__(210),MapCache=__webpack_require__(209);module.exports=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(209),setCacheAdd=__webpack_require__(551),setCacheHas=__webpack_require__(552);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports){module.exports=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},function(module,exports){module.exports=function(value){return this.__data__.has(value)}},function(module,exports){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},function(module,exports){module.exports=function(cache,key){return cache.has(key)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(160),Uint8Array=__webpack_require__(556),eq=__webpack_require__(292),equalArrays=__webpack_require__(299),mapToArray=__webpack_require__(557),setToArray=__webpack_require__(558),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(93).Uint8Array;module.exports=Uint8Array},function(module,exports){module.exports=function(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}},function(module,exports){module.exports=function(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(560),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(561),getSymbols=__webpack_require__(563),keys=__webpack_require__(566);module.exports=function(object){return baseGetAllKeys(object,keys,getSymbols)}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(562),isArray=__webpack_require__(105);module.exports=function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},function(module,exports){module.exports=function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(564),stubArray=__webpack_require__(565),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;module.exports=getSymbols},function(module,exports){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},function(module,exports){module.exports=function(){return[]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(567),baseKeys=__webpack_require__(293),isArrayLike=__webpack_require__(297);module.exports=function(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(568),isArguments=__webpack_require__(296),isArray=__webpack_require__(105),isBuffer=__webpack_require__(211),isIndex=__webpack_require__(569),isTypedArray=__webpack_require__(212),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},function(module,exports){module.exports=function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},function(module,exports){var reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},function(module,exports,__webpack_require__){"use strict";const util=__webpack_require__(94),convertToJson=function(node,options,parentTagName){const jObj={};if((!node.child||util.isEmptyObject(node.child))&&(!node.attrsMap||util.isEmptyObject(node.attrsMap)))return util.isExist(node.val)?node.val:"";if(util.isExist(node.val)&&("string"!=typeof node.val||""!==node.val&&node.val!==options.cdataPositionChar)){const asArray=util.isTagNameInArrayMode(node.tagname,options.arrayMode,parentTagName);jObj[options.textNodeName]=asArray?[node.val]:node.val}util.merge(jObj,node.attrsMap,options.arrayMode);const keys=Object.keys(node.child);for(let index=0;index<keys.length;index++){const tagName=keys[index];if(node.child[tagName]&&node.child[tagName].length>1){jObj[tagName]=[];for(let tag in node.child[tagName])node.child[tagName].hasOwnProperty(tag)&&jObj[tagName].push(convertToJson(node.child[tagName][tag],options,tagName))}else{const result=convertToJson(node.child[tagName][0],options,tagName),asArray=!0===options.arrayMode&&"object"==typeof result||util.isTagNameInArrayMode(tagName,options.arrayMode,parentTagName);jObj[tagName]=asArray?[result]:result}}return jObj};exports.convertToJson=convertToJson},function(module,exports,__webpack_require__){"use strict";module.exports=function(tagname,parent,val){this.tagname=tagname,this.parent=parent,this.child={},this.attrsMap={},this.val=val,this.addChild=function(child){Array.isArray(this.child[child.tagname])?this.child[child.tagname].push(child):this.child[child.tagname]=[child]}}},function(module,exports,__webpack_require__){"use strict";const util=__webpack_require__(94),defaultOptions={allowBooleanAttributes:!1},props=["allowBooleanAttributes"];function readPI(xmlData,i){for(var start=i;i<xmlData.length;i++)if("?"!=xmlData[i]&&" "!=xmlData[i]);else{var tagname=xmlData.substr(start,i-start);if(i>5&&"xml"===tagname)return getErrorObject("InvalidXml","XML declaration allowed only at the start of the document.",getLineNumberForPosition(xmlData,i));if("?"==xmlData[i]&&">"==xmlData[i+1]){i++;break}}return i}function readCommentAndCDATA(xmlData,i){if(xmlData.length>i+5&&"-"===xmlData[i+1]&&"-"===xmlData[i+2]){for(i+=3;i<xmlData.length;i++)if("-"===xmlData[i]&&"-"===xmlData[i+1]&&">"===xmlData[i+2]){i+=2;break}}else if(xmlData.length>i+8&&"D"===xmlData[i+1]&&"O"===xmlData[i+2]&&"C"===xmlData[i+3]&&"T"===xmlData[i+4]&&"Y"===xmlData[i+5]&&"P"===xmlData[i+6]&&"E"===xmlData[i+7]){let angleBracketsCount=1;for(i+=8;i<xmlData.length;i++)if("<"===xmlData[i])angleBracketsCount++;else if(">"===xmlData[i]&&(angleBracketsCount--,0===angleBracketsCount))break}else if(xmlData.length>i+9&&"["===xmlData[i+1]&&"C"===xmlData[i+2]&&"D"===xmlData[i+3]&&"A"===xmlData[i+4]&&"T"===xmlData[i+5]&&"A"===xmlData[i+6]&&"["===xmlData[i+7])for(i+=8;i<xmlData.length;i++)if("]"===xmlData[i]&&"]"===xmlData[i+1]&&">"===xmlData[i+2]){i+=2;break}return i}exports.validate=function(xmlData,options){options=util.buildOptions(options,defaultOptions,props);const tags=[];let tagFound=!1,reachedRoot=!1;"\ufeff"===xmlData[0]&&(xmlData=xmlData.substr(1));for(let i=0;i<xmlData.length;i++)if("<"===xmlData[i]&&"?"===xmlData[i+1]){if(i+=2,i=readPI(xmlData,i),i.err)return i}else{if("<"!==xmlData[i]){if(" "===xmlData[i]||"\t"===xmlData[i]||"\n"===xmlData[i]||"\r"===xmlData[i])continue;return getErrorObject("InvalidChar","char '"+xmlData[i]+"' is not expected.",getLineNumberForPosition(xmlData,i))}if(i++,"!"===xmlData[i]){i=readCommentAndCDATA(xmlData,i);continue}{let closingTag=!1;"/"===xmlData[i]&&(closingTag=!0,i++);let tagName="";for(;i<xmlData.length&&">"!==xmlData[i]&&" "!==xmlData[i]&&"\t"!==xmlData[i]&&"\n"!==xmlData[i]&&"\r"!==xmlData[i];i++)tagName+=xmlData[i];if(tagName=tagName.trim(),"/"===tagName[tagName.length-1]&&(tagName=tagName.substring(0,tagName.length-1),i--),tagname=tagName,!util.isName(tagname)){let msg;return msg=0===tagName.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+tagName+"' is an invalid name.",getErrorObject("InvalidTag",msg,getLineNumberForPosition(xmlData,i))}const result=readAttributeStr(xmlData,i);if(!1===result)return getErrorObject("InvalidAttr","Attributes for '"+tagName+"' have open quote.",getLineNumberForPosition(xmlData,i));let attrStr=result.value;if(i=result.index,"/"===attrStr[attrStr.length-1]){attrStr=attrStr.substring(0,attrStr.length-1);const isValid=validateAttributeString(attrStr,options);if(!0!==isValid)return getErrorObject(isValid.err.code,isValid.err.msg,getLineNumberForPosition(xmlData,i-attrStr.length+isValid.err.line));tagFound=!0}else if(closingTag){if(!result.tagClosed)return getErrorObject("InvalidTag","Closing tag '"+tagName+"' doesn't have proper closing.",getLineNumberForPosition(xmlData,i));if(attrStr.trim().length>0)return getErrorObject("InvalidTag","Closing tag '"+tagName+"' can't have attributes or invalid starting.",getLineNumberForPosition(xmlData,i));{const otg=tags.pop();if(tagName!==otg)return getErrorObject("InvalidTag","Closing tag '"+otg+"' is expected inplace of '"+tagName+"'.",getLineNumberForPosition(xmlData,i));0==tags.length&&(reachedRoot=!0)}}else{const isValid=validateAttributeString(attrStr,options);if(!0!==isValid)return getErrorObject(isValid.err.code,isValid.err.msg,getLineNumberForPosition(xmlData,i-attrStr.length+isValid.err.line));if(!0===reachedRoot)return getErrorObject("InvalidXml","Multiple possible root nodes found.",getLineNumberForPosition(xmlData,i));tags.push(tagName),tagFound=!0}for(i++;i<xmlData.length;i++)if("<"===xmlData[i]){if("!"===xmlData[i+1]){i++,i=readCommentAndCDATA(xmlData,i);continue}if("?"!==xmlData[i+1])break;if(i=readPI(xmlData,++i),i.err)return i}else if("&"===xmlData[i]){const afterAmp=validateAmpersand(xmlData,i);if(-1==afterAmp)return getErrorObject("InvalidChar","char '&' is not expected.",getLineNumberForPosition(xmlData,i));i=afterAmp}"<"===xmlData[i]&&i--}}var tagname;return tagFound?!(tags.length>0)||getErrorObject("InvalidXml","Invalid '"+JSON.stringify(tags,null,4).replace(/\r?\n/g,"")+"' found.",1):getErrorObject("InvalidXml","Start tag expected.",1)};function readAttributeStr(xmlData,i){let attrStr="",startChar="",tagClosed=!1;for(;i<xmlData.length;i++){if('"'===xmlData[i]||"'"===xmlData[i])if(""===startChar)startChar=xmlData[i];else{if(startChar!==xmlData[i])continue;startChar=""}else if(">"===xmlData[i]&&""===startChar){tagClosed=!0;break}attrStr+=xmlData[i]}return""===startChar&&{value:attrStr,index:i,tagClosed:tagClosed}}const validAttrStrRegxp=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function validateAttributeString(attrStr,options){const matches=util.getAllMatches(attrStr,validAttrStrRegxp),attrNames={};for(let i=0;i<matches.length;i++){if(0===matches[i][1].length)return getErrorObject("InvalidAttr","Attribute '"+matches[i][2]+"' has no space in starting.",getPositionFromMatch(attrStr,matches[i][0]));if(void 0===matches[i][3]&&!options.allowBooleanAttributes)return getErrorObject("InvalidAttr","boolean attribute '"+matches[i][2]+"' is not allowed.",getPositionFromMatch(attrStr,matches[i][0]));const attrName=matches[i][2];if(!validateAttrName(attrName))return getErrorObject("InvalidAttr","Attribute '"+attrName+"' is an invalid name.",getPositionFromMatch(attrStr,matches[i][0]));if(attrNames.hasOwnProperty(attrName))return getErrorObject("InvalidAttr","Attribute '"+attrName+"' is repeated.",getPositionFromMatch(attrStr,matches[i][0]));attrNames[attrName]=1}return!0}function validateAmpersand(xmlData,i){if(";"===xmlData[++i])return-1;if("#"===xmlData[i])return function(xmlData,i){let re=/\d/;for("x"===xmlData[i]&&(i++,re=/[\da-fA-F]/);i<xmlData.length;i++){if(";"===xmlData[i])return i;if(!xmlData[i].match(re))break}return-1}(xmlData,++i);let count=0;for(;i<xmlData.length;i++,count++)if(!(xmlData[i].match(/\w/)&&count<20)){if(";"===xmlData[i])break;return-1}return i}function getErrorObject(code,message,lineNumber){return{err:{code:code,msg:message,line:lineNumber}}}function validateAttrName(attrName){return util.isName(attrName)}function getLineNumberForPosition(xmlData,index){return xmlData.substring(0,index).split(/\r?\n/).length}function getPositionFromMatch(attrStr,match){return attrStr.indexOf(match)+match.length}},function(module,exports,__webpack_require__){"use strict";const char=function(a){return String.fromCharCode(a)},chars={nilChar:char(176),missingChar:char(201),nilPremitive:char(175),missingPremitive:char(200),emptyChar:char(178),emptyValue:char(177),boundryChar:char(179),objStart:char(198),arrStart:char(204),arrayEnd:char(185)},charsArr=[chars.nilChar,chars.nilPremitive,chars.missingChar,chars.missingPremitive,chars.boundryChar,chars.emptyChar,chars.emptyValue,chars.arrayEnd,chars.objStart,chars.arrStart],_e=function(node,e_schema,options){if("string"==typeof e_schema)return node&&node[0]&&void 0!==node[0].val?getValue(node[0].val,e_schema):getValue(node,e_schema);{const hasValidData=void 0===(jObj=node)?chars.missingChar:null===jObj?chars.nilChar:!(jObj.child&&0===Object.keys(jObj.child).length&&(!jObj.attrsMap||0===Object.keys(jObj.attrsMap).length))||chars.emptyChar;if(!0===hasValidData){let str="";if(Array.isArray(e_schema)){str+=chars.arrStart;const itemSchema=e_schema[0],arr_len=node.length;if("string"==typeof itemSchema)for(let arr_i=0;arr_i<arr_len;arr_i++){const r=getValue(node[arr_i].val,itemSchema);str=processValue(str,r)}else for(let arr_i=0;arr_i<arr_len;arr_i++){const r=_e(node[arr_i],itemSchema,options);str=processValue(str,r)}str+=chars.arrayEnd}else{str+=chars.objStart;const keys=Object.keys(e_schema);Array.isArray(node)&&(node=node[0]);for(let i in keys){const key=keys[i];let r;r=!options.ignoreAttributes&&node.attrsMap&&node.attrsMap[key]?_e(node.attrsMap[key],e_schema[key],options):key===options.textNodeName?_e(node.val,e_schema[key],options):_e(node.child[key],e_schema[key],options),str=processValue(str,r)}}return str}return hasValidData}var jObj},getValue=function(a){switch(a){case void 0:return chars.missingPremitive;case null:return chars.nilPremitive;case"":return chars.emptyValue;default:return a}},processValue=function(str,r){return isAppChar(r[0])||isAppChar(str[str.length-1])||(str+=chars.boundryChar),str+r},isAppChar=function(ch){return-1!==charsArr.indexOf(ch)};const x2j=__webpack_require__(165),buildOptions=__webpack_require__(94).buildOptions;exports.convert2nimn=function(node,e_schema,options){return options=buildOptions(options,x2j.defaultOptions,x2j.props),_e(node,e_schema,options)}},function(module,exports,__webpack_require__){"use strict";const util=__webpack_require__(94),buildOptions=__webpack_require__(94).buildOptions,x2j=__webpack_require__(165),_cToJsonStr=function(node,options,level){let jObj="{";const keys=Object.keys(node.child);for(let index=0;index<keys.length;index++){var tagname=keys[index];if(node.child[tagname]&&node.child[tagname].length>1){for(var tag in jObj+='"'+tagname+'" : [ ',node.child[tagname])jObj+=_cToJsonStr(node.child[tagname][tag],options)+" , ";jObj=jObj.substr(0,jObj.length-1)+" ] "}else jObj+='"'+tagname+'" : '+_cToJsonStr(node.child[tagname][0],options)+" ,"}return util.merge(jObj,node.attrsMap),util.isEmptyObject(jObj)?util.isExist(node.val)?node.val:"":(util.isExist(node.val)&&("string"!=typeof node.val||""!==node.val&&node.val!==options.cdataPositionChar)&&(jObj+='"'+options.textNodeName+'" : '+(!0!==(v=node.val)&&!1!==v&&isNaN(v)?'"'+v+'"':v)),","===jObj[jObj.length-1]&&(jObj=jObj.substr(0,jObj.length-2)),jObj+"}");var v};exports.convertToJsonString=function(node,options){return(options=buildOptions(options,x2j.defaultOptions,x2j.props)).indentBy=options.indentBy||"",_cToJsonStr(node,options,0)}},function(module,exports,__webpack_require__){"use strict";const buildOptions=__webpack_require__(94).buildOptions,defaultOptions={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(a){return a},attrValueProcessor:function(a){return a}},props=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function Parser(options){this.options=buildOptions(options,defaultOptions,props),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=isAttribute),this.options.cdataTagName?this.isCDATA=isCDATA:this.isCDATA=function(){return!1},this.replaceCDATAstr=replaceCDATAstr,this.replaceCDATAarr=replaceCDATAarr,this.options.format?(this.indentate=indentate,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=buildEmptyTextNode,this.buildObjNode=buildEmptyObjNode):(this.buildTextNode=buildTextValNode,this.buildObjNode=buildObjectNode),this.buildTextValNode=buildTextValNode,this.buildObjectNode=buildObjectNode}function replaceCDATAstr(str,cdata){return str=this.options.tagValueProcessor(""+str),""===this.options.cdataPositionChar||""===str?str+"<![CDATA["+cdata+"]]"+this.tagEndChar:str.replace(this.options.cdataPositionChar,"<![CDATA["+cdata+"]]"+this.tagEndChar)}function replaceCDATAarr(str,cdata){if(str=this.options.tagValueProcessor(""+str),""===this.options.cdataPositionChar||""===str)return str+"<![CDATA["+cdata.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let v in cdata)str=str.replace(this.options.cdataPositionChar,"<![CDATA["+cdata[v]+"]]>");return str+this.newLine}function buildObjectNode(val,key,attrStr,level){return attrStr&&!val.includes("<")?this.indentate(level)+"<"+key+attrStr+">"+val+"</"+key+this.tagEndChar:this.indentate(level)+"<"+key+attrStr+this.tagEndChar+val+this.indentate(level)+"</"+key+this.tagEndChar}function buildEmptyObjNode(val,key,attrStr,level){return""!==val?this.buildObjectNode(val,key,attrStr,level):this.indentate(level)+"<"+key+attrStr+"/"+this.tagEndChar}function buildTextValNode(val,key,attrStr,level){return this.indentate(level)+"<"+key+attrStr+">"+this.options.tagValueProcessor(val)+"</"+key+this.tagEndChar}function buildEmptyTextNode(val,key,attrStr,level){return""!==val?this.buildTextValNode(val,key,attrStr,level):this.indentate(level)+"<"+key+attrStr+"/"+this.tagEndChar}function indentate(level){return this.options.indentBy.repeat(level)}function isAttribute(name){return!!name.startsWith(this.options.attributeNamePrefix)&&name.substr(this.attrPrefixLen)}function isCDATA(name){return name===this.options.cdataTagName}Parser.prototype.parse=function(jObj){return this.j2x(jObj,0).val},Parser.prototype.j2x=function(jObj,level){let attrStr="",val="";const keys=Object.keys(jObj),len=keys.length;for(let i=0;i<len;i++){const key=keys[i];if(void 0===jObj[key]);else if(null===jObj[key])val+=this.indentate(level)+"<"+key+"/"+this.tagEndChar;else if(jObj[key]instanceof Date)val+=this.buildTextNode(jObj[key],key,"",level);else if("object"!=typeof jObj[key]){const attr=this.isAttribute(key);attr?attrStr+=" "+attr+'="'+this.options.attrValueProcessor(""+jObj[key])+'"':this.isCDATA(key)?jObj[this.options.textNodeName]?val+=this.replaceCDATAstr(jObj[this.options.textNodeName],jObj[key]):val+=this.replaceCDATAstr("",jObj[key]):key===this.options.textNodeName?jObj[this.options.cdataTagName]||(val+=this.options.tagValueProcessor(""+jObj[key])):val+=this.buildTextNode(jObj[key],key,"",level)}else if(Array.isArray(jObj[key]))if(this.isCDATA(key))val+=this.indentate(level),jObj[this.options.textNodeName]?val+=this.replaceCDATAarr(jObj[this.options.textNodeName],jObj[key]):val+=this.replaceCDATAarr("",jObj[key]);else{const arrLen=jObj[key].length;for(let j=0;j<arrLen;j++){const item=jObj[key][j];if(void 0===item);else if(null===item)val+=this.indentate(level)+"<"+key+"/"+this.tagEndChar;else if("object"==typeof item){const result=this.j2x(item,level+1);val+=this.buildObjNode(result.val,key,result.attrStr,level)}else val+=this.buildTextNode(item,key,"",level)}}else if(this.options.attrNodeName&&key===this.options.attrNodeName){const Ks=Object.keys(jObj[key]),L=Ks.length;for(let j=0;j<L;j++)attrStr+=" "+Ks[j]+'="'+this.options.attrValueProcessor(""+jObj[key][Ks[j]])+'"'}else{const result=this.j2x(jObj[key],level+1);val+=this.buildObjNode(result.val,key,result.attrStr,level)}}return{attrStr:attrStr,val:val}},module.exports=Parser},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Observable=void 0;var hasSymbols=function(){return"function"==typeof Symbol},hasSymbol=function(name){return hasSymbols()&&Boolean(Symbol[name])},getSymbol=function(name){return hasSymbol(name)?Symbol[name]:"@@"+name};hasSymbols()&&!hasSymbol("observable")&&(Symbol.observable=Symbol("observable"));var SymbolIterator=getSymbol("iterator"),SymbolObservable=getSymbol("observable"),SymbolSpecies=getSymbol("species");function getMethod(obj,key){var value=obj[key];if(null!=value){if("function"!=typeof value)throw new TypeError(value+" is not a function");return value}}function getSpecies(obj){var ctor=obj.constructor;return void 0!==ctor&&null===(ctor=ctor[SymbolSpecies])&&(ctor=void 0),void 0!==ctor?ctor:Observable}function isObservable(x){return x instanceof Observable}function hostReportError(e){hostReportError.log?hostReportError.log(e):setTimeout((function(){throw e}))}function enqueue(fn){Promise.resolve().then((function(){try{fn()}catch(e){hostReportError(e)}}))}function cleanupSubscription(subscription){var cleanup=subscription._cleanup;if(void 0!==cleanup&&(subscription._cleanup=void 0,cleanup))try{if("function"==typeof cleanup)cleanup();else{var unsubscribe=getMethod(cleanup,"unsubscribe");unsubscribe&&unsubscribe.call(cleanup)}}catch(e){hostReportError(e)}}function closeSubscription(subscription){subscription._observer=void 0,subscription._queue=void 0,subscription._state="closed"}function notifySubscription(subscription,type,value){subscription._state="running";var observer=subscription._observer;try{var m=getMethod(observer,type);switch(type){case"next":m&&m.call(observer,value);break;case"error":if(closeSubscription(subscription),!m)throw value;m.call(observer,value);break;case"complete":closeSubscription(subscription),m&&m.call(observer)}}catch(e){hostReportError(e)}"closed"===subscription._state?cleanupSubscription(subscription):"running"===subscription._state&&(subscription._state="ready")}function onNotify(subscription,type,value){if("closed"!==subscription._state){if("buffering"!==subscription._state)return"ready"!==subscription._state?(subscription._state="buffering",subscription._queue=[{type:type,value:value}],void enqueue((function(){return function(subscription){var queue=subscription._queue;if(queue){subscription._queue=void 0,subscription._state="ready";for(var i=0;i<queue.length&&(notifySubscription(subscription,queue[i].type,queue[i].value),"closed"!==subscription._state);++i);}}(subscription)}))):void notifySubscription(subscription,type,value);subscription._queue.push({type:type,value:value})}}var Subscription=function(){function Subscription(observer,subscriber){_classCallCheck(this,Subscription),this._cleanup=void 0,this._observer=observer,this._queue=void 0,this._state="initializing";var subscriptionObserver=new SubscriptionObserver(this);try{this._cleanup=subscriber.call(void 0,subscriptionObserver)}catch(e){subscriptionObserver.error(e)}"initializing"===this._state&&(this._state="ready")}return _createClass(Subscription,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(closeSubscription(this),cleanupSubscription(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),Subscription}(),SubscriptionObserver=function(){function SubscriptionObserver(subscription){_classCallCheck(this,SubscriptionObserver),this._subscription=subscription}return _createClass(SubscriptionObserver,[{key:"next",value:function(value){onNotify(this._subscription,"next",value)}},{key:"error",value:function(value){onNotify(this._subscription,"error",value)}},{key:"complete",value:function(){onNotify(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),SubscriptionObserver}(),Observable=function(){function Observable(subscriber){if(_classCallCheck(this,Observable),!(this instanceof Observable))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof subscriber)throw new TypeError("Observable initializer must be a function");this._subscriber=subscriber}return _createClass(Observable,[{key:"subscribe",value:function(observer){return"object"==typeof observer&&null!==observer||(observer={next:observer,error:arguments[1],complete:arguments[2]}),new Subscription(observer,this._subscriber)}},{key:"forEach",value:function(fn){var _this=this;return new Promise((function(resolve,reject){if("function"==typeof fn)var subscription=_this.subscribe({next:function(value){try{fn(value,done)}catch(e){reject(e),subscription.unsubscribe()}},error:reject,complete:resolve});else reject(new TypeError(fn+" is not a function"));function done(){subscription.unsubscribe(),resolve()}}))}},{key:"map",value:function(fn){var _this2=this;if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return new(getSpecies(this))((function(observer){return _this2.subscribe({next:function(value){try{value=fn(value)}catch(e){return observer.error(e)}observer.next(value)},error:function(e){observer.error(e)},complete:function(){observer.complete()}})}))}},{key:"filter",value:function(fn){var _this3=this;if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return new(getSpecies(this))((function(observer){return _this3.subscribe({next:function(value){try{if(!fn(value))return}catch(e){return observer.error(e)}observer.next(value)},error:function(e){observer.error(e)},complete:function(){observer.complete()}})}))}},{key:"reduce",value:function(fn){var _this4=this;if("function"!=typeof fn)throw new TypeError(fn+" is not a function");var C=getSpecies(this),hasSeed=arguments.length>1,hasValue=!1,seed=arguments[1],acc=seed;return new C((function(observer){return _this4.subscribe({next:function(value){var first=!hasValue;if(hasValue=!0,!first||hasSeed)try{acc=fn(acc,value)}catch(e){return observer.error(e)}else acc=value},error:function(e){observer.error(e)},complete:function(){if(!hasValue&&!hasSeed)return observer.error(new TypeError("Cannot reduce an empty sequence"));observer.next(acc),observer.complete()}})}))}},{key:"concat",value:function(){for(var _this5=this,_len=arguments.length,sources=new Array(_len),_key=0;_key<_len;_key++)sources[_key]=arguments[_key];var C=getSpecies(this);return new C((function(observer){var subscription,index=0;return function startNext(next){subscription=next.subscribe({next:function(v){observer.next(v)},error:function(e){observer.error(e)},complete:function(){index===sources.length?(subscription=void 0,observer.complete()):startNext(C.from(sources[index++]))}})}(_this5),function(){subscription&&(subscription.unsubscribe(),subscription=void 0)}}))}},{key:"flatMap",value:function(fn){var _this6=this;if("function"!=typeof fn)throw new TypeError(fn+" is not a function");var C=getSpecies(this);return new C((function(observer){var subscriptions=[],outer=_this6.subscribe({next:function(value){if(fn)try{value=fn(value)}catch(e){return observer.error(e)}var inner=C.from(value).subscribe({next:function(value){observer.next(value)},error:function(e){observer.error(e)},complete:function(){var i=subscriptions.indexOf(inner);i>=0&&subscriptions.splice(i,1),completeIfDone()}});subscriptions.push(inner)},error:function(e){observer.error(e)},complete:function(){completeIfDone()}});function completeIfDone(){outer.closed&&0===subscriptions.length&&observer.complete()}return function(){subscriptions.forEach((function(s){return s.unsubscribe()})),outer.unsubscribe()}}))}},{key:SymbolObservable,value:function(){return this}}],[{key:"from",value:function(x){var C="function"==typeof this?this:Observable;if(null==x)throw new TypeError(x+" is not an object");var method=getMethod(x,SymbolObservable);if(method){var observable=method.call(x);if(Object(observable)!==observable)throw new TypeError(observable+" is not an object");return isObservable(observable)&&observable.constructor===C?observable:new C((function(observer){return observable.subscribe(observer)}))}if(hasSymbol("iterator")&&(method=getMethod(x,SymbolIterator)))return new C((function(observer){enqueue((function(){if(!observer.closed){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=method.call(x)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _item=_step.value;if(observer.next(_item),observer.closed)return}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}observer.complete()}}))}));if(Array.isArray(x))return new C((function(observer){enqueue((function(){if(!observer.closed){for(var i=0;i<x.length;++i)if(observer.next(x[i]),observer.closed)return;observer.complete()}}))}));throw new TypeError(x+" is not observable")}},{key:"of",value:function(){for(var _len2=arguments.length,items=new Array(_len2),_key2=0;_key2<_len2;_key2++)items[_key2]=arguments[_key2];var C="function"==typeof this?this:Observable;return new C((function(observer){enqueue((function(){if(!observer.closed){for(var i=0;i<items.length;++i)if(observer.next(items[i]),observer.closed)return;observer.complete()}}))}))}},{key:SymbolSpecies,get:function(){return this}}]),Observable}();exports.Observable=Observable,hasSymbols()&&Object.defineProperty(Observable,Symbol("extensions"),{value:{symbol:SymbolObservable,hostReportError:hostReportError},configurable:!0})},function(module,exports){},function(module,exports,__webpack_require__){module.exports=__webpack_require__(579).Observable},function(module,exports,__webpack_require__){"use strict";(function(module){!function(exports,module){function hasSymbol(name){return"function"==typeof Symbol&&Boolean(Symbol[name])}function getSymbol(name){return hasSymbol(name)?Symbol[name]:"@@"+name}function hostReportError(e){setTimeout((function(){throw e}))}function getMethod(obj,key){var value=obj[key];if(null!=value){if("function"!=typeof value)throw new TypeError(value+" is not a function");return value}}function getSpecies(obj){var ctor=obj.constructor;return void 0!==ctor&&null===(ctor=ctor[getSymbol("species")])&&(ctor=void 0),void 0!==ctor?ctor:Observable}function addMethods(target,methods){Object.keys(methods).forEach((function(k){var desc=Object.getOwnPropertyDescriptor(methods,k);desc.enumerable=!1,Object.defineProperty(target,k,desc)}))}function cleanupSubscription(subscription){var cleanup=subscription._cleanup;if(cleanup){subscription._cleanup=void 0;try{cleanup()}catch(e){hostReportError(e)}}}function subscriptionClosed(subscription){return void 0===subscription._observer}function closeSubscription(subscription){subscriptionClosed(subscription)||(subscription._observer=void 0,cleanupSubscription(subscription))}function cleanupFromSubscription(subscription){return function(){subscription.unsubscribe()}}function Subscription(observer,subscriber){if(Object(observer)!==observer)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=observer;try{var start$0=getMethod(observer,"start");start$0&&start$0.call(observer,this)}catch(e){hostReportError(e)}if(!subscriptionClosed(this)){observer=new SubscriptionObserver(this);try{var cleanup$0=subscriber.call(void 0,observer);if(null!=cleanup$0){if("function"==typeof cleanup$0.unsubscribe)cleanup$0=cleanupFromSubscription(cleanup$0);else if("function"!=typeof cleanup$0)throw new TypeError(cleanup$0+" is not a function");this._cleanup=cleanup$0}}catch(e){return void observer.error(e)}subscriptionClosed(this)&&cleanupSubscription(this)}}function SubscriptionObserver(subscription){this._subscription=subscription}function Observable(subscriber){if(!(this instanceof Observable))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof subscriber)throw new TypeError("Observable initializer must be a function");this._subscriber=subscriber}"function"!=typeof Symbol||Symbol.observable||(Symbol.observable=Symbol("observable")),addMethods(Subscription.prototype={},{get closed(){return subscriptionClosed(this)},unsubscribe:function(){closeSubscription(this)}}),addMethods(SubscriptionObserver.prototype={},{get closed(){return subscriptionClosed(this._subscription)},next:function(value){var subscription=this._subscription;if(!subscriptionClosed(subscription)){var observer=subscription._observer;try{var m$0=getMethod(observer,"next");m$0&&m$0.call(observer,value)}catch(e){hostReportError(e)}}},error:function(value){var subscription=this._subscription;if(subscriptionClosed(subscription))hostReportError(value);else{var observer=subscription._observer;subscription._observer=void 0;try{var m$1=getMethod(observer,"error");if(!m$1)throw value;m$1.call(observer,value)}catch(e){hostReportError(e)}cleanupSubscription(subscription)}},complete:function(){var subscription=this._subscription;if(!subscriptionClosed(subscription)){var observer=subscription._observer;subscription._observer=void 0;try{var m$2=getMethod(observer,"complete");m$2&&m$2.call(observer)}catch(e){hostReportError(e)}cleanupSubscription(subscription)}}}),addMethods(Observable.prototype,{subscribe:function(observer){for(var args=[],__$0=1;__$0<arguments.length;++__$0)args.push(arguments[__$0]);return"function"==typeof observer?observer={next:observer,error:args[0],complete:args[1]}:"object"==typeof observer&&null!==observer||(observer={}),new Subscription(observer,this._subscriber)},forEach:function(fn){var __this=this;return new Promise((function(resolve,reject){if("function"!=typeof fn)return Promise.reject(new TypeError(fn+" is not a function"));__this.subscribe({_subscription:null,start:function(subscription){if(Object(subscription)!==subscription)throw new TypeError(subscription+" is not an object");this._subscription=subscription},next:function(value){var subscription=this._subscription;if(!subscription.closed)try{fn(value)}catch(err){reject(err),subscription.unsubscribe()}},error:reject,complete:resolve})}))},map:function(fn){var __this=this;if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return new(getSpecies(this))((function(observer){return __this.subscribe({next:function(value){if(!observer.closed){try{value=fn(value)}catch(e){return observer.error(e)}observer.next(value)}},error:function(e){observer.error(e)},complete:function(){observer.complete()}})}))},filter:function(fn){var __this=this;if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return new(getSpecies(this))((function(observer){return __this.subscribe({next:function(value){if(!observer.closed){try{if(!fn(value))return}catch(e){return observer.error(e)}observer.next(value)}},error:function(e){observer.error(e)},complete:function(){observer.complete()}})}))},reduce:function(fn){var __this=this;if("function"!=typeof fn)throw new TypeError(fn+" is not a function");var C=getSpecies(this),hasSeed=arguments.length>1,hasValue=!1,acc=arguments[1];return new C((function(observer){return __this.subscribe({next:function(value){if(!observer.closed){var first=!hasValue;if(hasValue=!0,!first||hasSeed)try{acc=fn(acc,value)}catch(e){return observer.error(e)}else acc=value}},error:function(e){observer.error(e)},complete:function(){if(!hasValue&&!hasSeed)return observer.error(new TypeError("Cannot reduce an empty sequence"));observer.next(acc),observer.complete()}})}))}}),Object.defineProperty(Observable.prototype,getSymbol("observable"),{value:function(){return this},writable:!0,configurable:!0}),addMethods(Observable,{from:function(x){var C="function"==typeof this?this:Observable;if(null==x)throw new TypeError(x+" is not an object");var method=getMethod(x,getSymbol("observable"));if(method){var observable$0=method.call(x);if(Object(observable$0)!==observable$0)throw new TypeError(observable$0+" is not an object");return observable$0.constructor===C?observable$0:new C((function(observer){return observable$0.subscribe(observer)}))}if(hasSymbol("iterator")&&(method=getMethod(x,getSymbol("iterator"))))return new C((function(observer){for(var __$1,__$0=method.call(x)[Symbol.iterator]();!(__$1=__$0.next()).done;){var item$0=__$1.value;if(observer.next(item$0),observer.closed)return}observer.complete()}));if(Array.isArray(x))return new C((function(observer){for(var i$0=0;i$0<x.length;++i$0)if(observer.next(x[i$0]),observer.closed)return;observer.complete()}));throw new TypeError(x+" is not observable")},of:function(){for(var items=[],__$0=0;__$0<arguments.length;++__$0)items.push(arguments[__$0]);return new("function"==typeof this?this:Observable)((function(observer){for(var i$1=0;i$1<items.length;++i$1)if(observer.next(items[i$1]),observer.closed)return;observer.complete()}))}}),Object.defineProperty(Observable,getSymbol("species"),{get:function(){return this},configurable:!0}),Object.defineProperty(Observable,"extensions",{value:{observableSymbol:getSymbol("observable"),setHostReportError:function(fn){hostReportError=fn}}}),exports.Observable=Observable}(exports)}).call(this,__webpack_require__(139)(module))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.CognitoErrorEnum=void 0,function(CognitoErrorEnum){CognitoErrorEnum.UsernameExistsException="UsernameExistsException"}(exports.CognitoErrorEnum||(exports.CognitoErrorEnum={}))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.StatusCodeEnum=void 0,function(StatusCodeEnum){StatusCodeEnum[StatusCodeEnum.OK=200]="OK",StatusCodeEnum[StatusCodeEnum.Created=201]="Created",StatusCodeEnum[StatusCodeEnum.NoContent=204]="NoContent",StatusCodeEnum[StatusCodeEnum.BadRequest=400]="BadRequest",StatusCodeEnum[StatusCodeEnum.InternalServerError=500]="InternalServerError",StatusCodeEnum[StatusCodeEnum.Found=302]="Found"}(exports.StatusCodeEnum||(exports.StatusCodeEnum={}))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.KPayUserPoolEnum=void 0,function(KPayUserPoolEnum){KPayUserPoolEnum.uat="https://kushki-static-dev.s3.amazonaws.com/kpay/kpay_user_pool_dev.json",KPayUserPoolEnum.prod="https://kushki-static.s3.amazonaws.com/kpay/kpay_user_pool_prod.json"}(exports.KPayUserPoolEnum||(exports.KPayUserPoolEnum={}))},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.CardAsyncService=void 0;var Identifiers_1=__webpack_require__(44),inversify_1=__webpack_require__(42);__webpack_require__(71);var IKushkiGateway_1=__webpack_require__(78),rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),CardAsyncService=function(){function CardAsyncService(gateway){this._gateway=gateway}var _a;return CardAsyncService.prototype.requestCardAsyncToken=function(request,mid,isTest,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return _this._gateway.requestCardAsyncToken(request,mid,isTest,regional)})))},CardAsyncService.prototype.requestCardSubscriptionAsyncToken=function(request,mid,isTest,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return _this._gateway.requestSubscriptionCardAsyncToken(request,mid,isTest,regional)})))},CardAsyncService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object])],CardAsyncService)}();exports.CardAsyncService=CardAsyncService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.CardDynamicService=void 0;var Identifiers_1=__webpack_require__(44),BinCardTypeEnum_1=__webpack_require__(303),inversify_1=__webpack_require__(42),ICardAsyncService_1=__webpack_require__(304),ICardService_1=__webpack_require__(305),rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),CardDynamicService=function(){function CardDynamicService(cardService,cardAsyncService){this._cardService=cardService,this._cardAsyncService=cardAsyncService}var _a,_b;return CardDynamicService.prototype.requestCardDynamicToken=function(bin,body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this._cardService.requestBinInfo(bin,mid,testEnv,regional)})),operators_1.concatMap((function(binInfo){return rxjs_1.iif((function(){return binInfo.cardType===BinCardTypeEnum_1.BinCardTypeEnum.debit}),_this._requestCardAsyncToken(body,mid,testEnv,regional),_this._requestToken(body,mid,testEnv,regional))})))},CardDynamicService.prototype._requestCardAsyncToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return _this._cardAsyncService.requestCardAsyncToken(body,mid,testEnv,regional)})))},CardDynamicService.prototype._requestToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return _this._cardService.requestToken(body,mid,testEnv,regional)})))},CardDynamicService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.CardService)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.CardAsyncService)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==ICardService_1.ICardService&&ICardService_1.ICardService)?_a:Object,"function"==typeof(_b=void 0!==ICardAsyncService_1.ICardAsyncService&&ICardAsyncService_1.ICardAsyncService)?_b:Object])],CardDynamicService)}();exports.CardDynamicService=CardDynamicService},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};exports.__esModule=!0,exports.CardService=void 0;var cardinal_sandbox_js_1=__webpack_require__(586),Identifiers_1=__webpack_require__(44),dot=__webpack_require__(592),KushkiError_1=__webpack_require__(152),ErrorEnum_1=__webpack_require__(213),ThreeDSEnum_1=__webpack_require__(593),inversify_1=__webpack_require__(42);__webpack_require__(71);var IAntiFraud_1=__webpack_require__(114),IAuthService_1=__webpack_require__(306),IKushkiGateway_1=__webpack_require__(78),rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),UtilsService_1=__webpack_require__(135),Kushki_1=__webpack_require__(224),CardService=function(){function CardService(gateway,authService,antiFraud){var _a;this._3Dsecure="active_3dsecure",this._cardNumber="card.number",this._sandboxEnable=!1,this._gateway=gateway,this._antiFraud=antiFraud,this._authService=authService,this._receipt=((_a={amount:"totalAmount","card.cvc":"card.cvv","card.expiryMonth":"card.expiryMonth","card.expiryYear":"card.expiryYear","card.name":"card.name"})[this._cardNumber]=this._cardNumber,_a.currency="currency",_a.isDeferred="isDeferred",_a.jwt="jwt",_a.months="months",_a.savePaymentData="savePaymentData",_a.sessionId="sessionId",_a.userId="userId",_a.walletId="walletId",_a)}var CardService_1,_a,_b,_c;return CardService_1=CardService,CardService.prototype.requestToken=function(request,mid,isTest,regional){var _this=this;return this._gateway.requestMerchantSettings(mid,isTest,regional).pipe(operators_1.switchMap((function(merchant){return _this._setSandboxEnable(!!merchant.sandboxEnable),rxjs_1.forkJoin([_this._getScienceSession(request,mid,isTest,merchant),_this._getCybersourceJwt(merchant,mid,isTest,regional,Object.prototype.hasOwnProperty.call(request,"card")?request.card.number:void 0)])})),operators_1.mergeMap((function(_a){var sift_object=_a[0],jwt=_a[1];request.isDeferred=void 0!==request.isDeferred&&request.isDeferred,Boolean(request.cvv)&&(request.card={cvc:request.cvv}),_this._checkRequestBody(request);var data_to_transform=__assign(__assign({},request),sift_object);return void 0!==jwt&&(data_to_transform.jwt=jwt),rxjs_1.forkJoin([rxjs_1.of(dot.transform(_this._receipt,data_to_transform)),request.walletId?_this._authService.getAuthorizationToken():rxjs_1.of(void 0)])})),operators_1.concatMap((function(_a){var final_request=_a[0],jwt=_a[1];return _this._gateway.requestToken(final_request,mid,isTest,regional,jwt)})))},CardService.prototype.requestDeviceToken=function(request,mid,isTest,regional){var _this=this;return this._gateway.requestMerchantSettings(mid,isTest,regional).pipe(operators_1.switchMap((function(merchant){return _this._setSandboxEnable(!!merchant.sandboxEnable),rxjs_1.forkJoin([_this._getDeviceTokenSiftScienceObject(request,mid,isTest,merchant),_this._getCybersourceJwt(merchant,mid,isTest,regional,Object.prototype.hasOwnProperty.call(request,"cardNumber")?request.cardNumber:void 0)])})),operators_1.switchMap((function(_a){var sift_science_obj=_a[0],jwt=_a[1];return null===sift_science_obj.userId&&delete sift_science_obj.userId,null===sift_science_obj.sessionId&&delete sift_science_obj.sessionId,jwt&&(sift_science_obj=__assign(__assign({},sift_science_obj),{jwt:jwt,amount:request.amount,cardHolderName:request.cardHolderName,currency:request.currency})),_this._gateway.requestDeviceToken(__assign({subscriptionId:request.subscriptionId},sift_science_obj),mid,isTest,regional)})))},CardService.prototype.requestSubscriptionToken=function(subscriptionTokenRequest,mid,isTest,regional){var _this=this;return this._gateway.requestMerchantSettings(mid,isTest,regional).pipe(operators_1.switchMap((function(merchant){return _this._setSandboxEnable(!!merchant.sandboxEnable),rxjs_1.forkJoin([_this._getScienceSession(subscriptionTokenRequest,mid,isTest,merchant),_this._getCybersourceJwt(merchant,mid,isTest,regional,UtilsService_1.UtilsService.sGet(subscriptionTokenRequest,_this._cardNumber))])})),operators_1.concatMap((function(_a){var sift_object=_a[0],jwt=_a[1];_this._checkRequestBody(subscriptionTokenRequest);var data_to_transform=__assign({},subscriptionTokenRequest);return null!==sift_object.userId&&null!==sift_object.sessionId||(data_to_transform.siftObject=__assign({},sift_object)),void 0!==jwt&&(data_to_transform.jwt=jwt),rxjs_1.forkJoin([rxjs_1.of(dot.transform(_this._receipt,data_to_transform)),subscriptionTokenRequest.walletId?_this._authService.getAuthorizationToken():rxjs_1.of(void 0)])})),operators_1.switchMap((function(_a){var body=_a[0],jwt=_a[1];return _this._gateway.requestSubscriptionToken(body,mid,isTest,regional,jwt)})))},CardService.prototype.requestDeferred=function(binBody,mid,isTest,regional){return this._gateway.requestDeferredConditions(mid,binBody.bin,isTest,regional)},CardService.prototype.requestBinInfo=function(binBody,mid,isTest,regional){return this._gateway.requestBinInfo(mid,String(binBody.bin).substring(0,6),isTest,regional)},CardService.prototype.validate3DS=function(body,mid,isTest,regional,callback){var _this=this;return void 0===body.security?Kushki_1.Kushki.callbackError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E012),callback):UtilsService_1.UtilsService.sGet(body,"security.authRequired",!1)?UtilsService_1.UtilsService.sGet(body,"security.authRequired")&&this._validateParameters(body)?Kushki_1.Kushki.callbackError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E012),callback):this._sandboxEnable||UtilsService_1.UtilsService.sGet(body,"security.paReq",ThreeDSEnum_1.ThreeDSEnum.SANDBOX)===ThreeDSEnum_1.ThreeDSEnum.SANDBOX?this._ccaSandbox(body,mid,isTest,regional,callback):void(isTest?(Promise.resolve().then((function(){return __webpack_require__(214)})).then((function(){CardService_1._ccaCardinal(body)})),Promise.resolve().then((function(){return __webpack_require__(214)})).then((function(){_this._completeCardinal(body.secureId,mid,isTest,regional,callback)}))):(Promise.resolve().then((function(){return __webpack_require__(215)})).then((function(){CardService_1._ccaCardinal(body)})),Promise.resolve().then((function(){return __webpack_require__(215)})).then((function(){_this._completeCardinal(body.secureId,mid,isTest,regional,callback)})))):void callback({isValid:!0})},CardService.prototype._validateParameters=function(body){return void 0===body.security.acsURL||void 0===body.security.paReq||void 0===body.security.authenticationTransactionId},CardService.prototype._getDeviceTokenSiftScienceObject=function(request,mid,isTest,merchant){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return rxjs_1.iif((function(){return void 0!==request.sessionId&&null!==request.sessionId&&void 0!==request.userId&&null!==request.userId}),_this._getRequestSiftObject(request.userId,request.sessionId),_this._antiFraud.createSiftScienceSession(request.subscriptionId,"",mid,isTest,merchant))})))},CardService.prototype._checkCardLength=function(request){if(request.card.number.length<14||request.card.number.length>19)throw new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E005)},CardService.prototype._getScienceSession=function(request,mid,isTest,merchant){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return request.card&&void 0!==request.card.number?_this._antiFraud.createSiftScienceSession(request.card.number.substring(0,6),request.card.number.slice(-4),mid,isTest,merchant):rxjs_1.of({sessionId:null,userId:null})})))},CardService.prototype._checkCurrency=function(request){request.currency=void 0===request.currency?"USD":request.currency},CardService.prototype._getRequestSiftObject=function(userId,sessionId){return rxjs_1.of(1).pipe(operators_1.map((function(){return{sessionId:sessionId,userId:userId}})))},CardService.prototype._checkAmount=function(request){void 0!==request.amount&&"string"==typeof request.amount&&(request.amount=parseFloat(request.amount))},CardService.prototype._checkRequestBody=function(request){this._checkCurrency(request),Boolean(request.card)&&Boolean(request.card.number)&&this._checkCardLength(request),this._checkAmount(request)},CardService.prototype._getCybersourceJwt=function(merchantSettings,mid,isTest,regional,cardNumber){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return!0===merchantSettings[_this._3Dsecure]&&void 0!==cardNumber?rxjs_1.iif((function(){return!!merchantSettings.sandboxEnable}),_this._initCybersourceSandbox(mid,isTest,regional),_this._initCybersource(cardNumber,mid,isTest,regional)):rxjs_1.of(void 0)})))},CardService.prototype._initCybersource=function(cardNumber,mid,isTest,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return _this._gateway.cybersourceJwt(mid,isTest,regional)})),operators_1.map((function(jwt){return isTest?Promise.resolve().then((function(){return __webpack_require__(214)})).then((function(){CardService_1._initCardinal(jwt,cardNumber)})):Promise.resolve().then((function(){return __webpack_require__(215)})).then((function(){CardService_1._initCardinal(jwt,cardNumber)})),jwt})))},CardService.prototype._completeCardinal=function(secureServiceId,mid,isTest,regional,callback){var _this=this;return window.Cardinal.on("payments.validated",(function(){return __awaiter(_this,void 0,void 0,(function(){var otp_request;return __generator(this,(function(_a){return otp_request={secureServiceId:secureServiceId,otpValue:""},[2,this._gateway.requestSecureServiceValidation(mid,otp_request,isTest,regional).subscribe({error:function(err){return Kushki_1.Kushki.callbackError(err,callback)},next:function(response){callback({isValid:CardService_1._is3dsValid(response)})}})]}))}))}))},CardService._initCardinal=function(jwt,cardNumber){window.Cardinal.setup("init",{jwt:jwt,order:{Consumer:{Account:{AccountNumber:cardNumber}}}})},CardService._ccaCardinal=function(tokenResponse){window.Cardinal.continue("cca",{AcsUrl:tokenResponse.security.acsURL,Payload:tokenResponse.security.paReq},{OrderDetails:{TransactionId:tokenResponse.security.authenticationTransactionId}})},CardService._is3dsValid=function(secureOtpResponse){return"message"in secureOtpResponse&&("3DS000"===secureOtpResponse.message&&"ok"===secureOtpResponse.code||"3DS000"===secureOtpResponse.code&&"ok"===secureOtpResponse.message)},CardService.prototype._setSandboxEnable=function(payload){this._sandboxEnable=payload},CardService.prototype._initCybersourceSandbox=function(mid,isTest,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.switchMap((function(){return _this._gateway.cybersourceJwt(mid,isTest,regional)})),operators_1.map((function(jwt){return cardinal_sandbox_js_1.KushkiCardinalSandbox.init(),jwt})))},CardService.prototype._ccaSandbox=function(body,mid,isTest,regional,callback){var _this=this;cardinal_sandbox_js_1.KushkiCardinalSandbox.continue("cca",{AcsUrl:body.security.acsURL,Payload:body.security.paReq},{OrderDetails:{TransactionId:body.security.authenticationTransactionId}}),cardinal_sandbox_js_1.KushkiCardinalSandbox.on("payments.validated",(function(isErrorFlow){return __awaiter(_this,void 0,void 0,(function(){var otp_request;return __generator(this,(function(_a){return!0===isErrorFlow?[2,Kushki_1.Kushki.callbackError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E008),callback)]:(otp_request={otpValue:"",secureServiceId:body.secureId},[2,this._gateway.requestSecureServiceValidation(mid,otp_request,isTest,regional).subscribe({error:function(err){return Kushki_1.Kushki.callbackError(err,callback)},next:function(response){return callback({isValid:CardService_1._is3dsValid(response)})}})])}))}))}))},CardService=CardService_1=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.AuthService)),__param(2,inversify_1.inject(Identifiers_1.IDENTIFIERS.AntiFraud)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object,"function"==typeof(_b=void 0!==IAuthService_1.IAuthService&&IAuthService_1.IAuthService)?_b:Object,"function"==typeof(_c=void 0!==IAntiFraud_1.IAntiFraud&&IAntiFraud_1.IAntiFraud)?_c:Object])],CardService)}();exports.CardService=CardService},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};exports.__esModule=!0,__exportStar(__webpack_require__(587),exports)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.KushkiCardinalSandbox=void 0;var EnumEvent_1=__webpack_require__(588),Modal3DS_1=__webpack_require__(589),Styles_1=__webpack_require__(591),KushkiCardinalSandbox=function(){function KushkiCardinalSandbox(){}return KushkiCardinalSandbox.toogleClassErrorMessage=function(element,addAction){addAction?element.classList.add("show-error"):element.classList.remove("show-error")},KushkiCardinalSandbox.closeModal=function(){var modal_element=document.querySelector(".modal");document.getElementById("txtOtp").value="",modal_element.style.display="none"},KushkiCardinalSandbox.init=function(){var modal=document.createElement("div");modal.setAttribute("id","sandbox3DSModal"),modal.insertAdjacentHTML("beforeend",Styles_1.default.concat(Modal3DS_1.modal3DS())),document.body.appendChild(modal);var button=document.getElementById("btnClose"),text_error=document.getElementById("messageError");button.addEventListener("click",(function(){KushkiCardinalSandbox.toogleClassErrorMessage(text_error,!1),KushkiCardinalSandbox.closeModal()}))},KushkiCardinalSandbox.continue=function(_key,_parameters,_orderDetails){document.querySelector(".modal").style.display="block"},KushkiCardinalSandbox.on=function(key,callbackEvent){key===EnumEvent_1.EnumEvent.VALIDATED&&KushkiCardinalSandbox._submitModal(callbackEvent)},KushkiCardinalSandbox._submitModal=function(callbackEvent){var btn_submit=document.getElementById("btnSubmit"),txt_otp=document.getElementById("txtOtp"),text_error=document.getElementById("messageError");btn_submit.addEventListener("click",(function(){if("9999"===txt_otp.value)return KushkiCardinalSandbox.toogleClassErrorMessage(text_error,!1),KushkiCardinalSandbox.closeModal(),callbackEvent(true);if("1234"===txt_otp.value){var modal=document.getElementById("sandbox3DSModal");document.body.removeChild(modal),KushkiCardinalSandbox.toogleClassErrorMessage(text_error,!1),callbackEvent()}else KushkiCardinalSandbox.toogleClassErrorMessage(text_error,!0)}))},KushkiCardinalSandbox}();exports.KushkiCardinalSandbox=KushkiCardinalSandbox},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.EnumEvent=void 0,function(EnumEvent){EnumEvent.VALIDATED="payments.validated"}(exports.EnumEvent||(exports.EnumEvent={}))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.modal3DS=void 0;var LogosUrlEnum_1=__webpack_require__(590);exports.modal3DS=function(){return'\n    <div class="ksh">\n        <div class="modal" style="display: none">\n          <div class="overlay"></div>\n          <div class="modal_content" >\n          <button id="btnClose" title="Close" class="close_modal">\n            <i class="fas fa-times"></i>\n          </button>\n            <table style="width: 100%; padding-top: 25px">\n              <tr>\n                <td style="width: 80%; height: 80px"><img src="'+LogosUrlEnum_1.LogosUrlEnum.ANY_BANK_LOGO+'" /></td>\n                <td style="width: 20%; height: 80px"><img src="'+LogosUrlEnum_1.LogosUrlEnum.CARD_NETWORK_LOGO+'" /></td>\n              </tr>\n            </table>\n            <p class="text-medium">Purchase Authentication</p>\n            <p class="text-normal">We have send you a text message with a code to your registered mobile number ending in 5329</p>\n            <table class="text-normal" style="width: 100%">\n              <tr>\n                <td style="width: 30%" class="text-normal-gray">Merchant:</td>\n                <td style="width: 50%">Merchant Kushki Pruebas</td>\n              </tr>\n              <tr>\n                <td style="width: 30%" class="text-normal-gray">Amount:</td>\n                <td style="width: 50%">USD 200.00</td>\n              </tr>\n              <tr>\n                <td style="width: 30%" class="text-normal-gray">Card number:</td>\n                <td style="width: 50%">**** **** **** 1091</td>\n              </tr>\n            </table>\n            <p class="text-normal">OTP: 1234(OK) 9999(FAIL) </p>\n            <div class="center text-normal-bold">\n                <p>Enter your code bellow</p>\n            </div>\n            <div class="center text-normal">\n                <input id="txtOtp" class="input center text-normal" type="text" id="otp" name="otp" value="" placeholder="Enter code here"> \n            </div>\n            <br>\n            <div class="center">\n                <input class="button text-submit" id="btnSubmit" type="button" value="SUBMIT">\n            </div>\n            <p id = "messageError" class="hide-error text-normal">Invalid OTP code</p>\n            <div class="center text-powered">\n                <p class="center">POWERED BY <img src="'+LogosUrlEnum_1.LogosUrlEnum.KUSHKI_LOGO+'" /></p>\n            </div>\n          </div>\n        </div>\n    </div>\n'}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.LogosUrlEnum=void 0,function(LogosUrlEnum){LogosUrlEnum.KUSHKI_LOGO="https://kushki-static-dev.s3.amazonaws.com/3DS/kushki_logo.svg",LogosUrlEnum.ANY_BANK_LOGO="https://kushki-static-dev.s3.amazonaws.com/3DS/any_bank_logo.svg",LogosUrlEnum.CARD_NETWORK_LOGO="https://kushki-static-dev.s3.amazonaws.com/3DS/card_network_logo.svg"}(exports.LogosUrlEnum||(exports.LogosUrlEnum={}))},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;exports.default='\n<style>\n    @import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@100&family=Roboto&display=swap");\n    @import url("https://use.fontawesome.com/releases/v5.5.0/css/all.css");\n    .ksh .center{\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n    }\n    .ksh {\n        border-radius: 4px;\n    }\n    .ksh .modal {\n        position: fixed;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 990;\n    }\n    \n    .ksh .modal .overlay {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 995;\n        background: rgba(0,0,0,0.85);\n    }\n    .ksh .modal .modal_content {\n        z-index: 999;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        max-height: 90%;\n        overflow: auto;\n        background: #fff;\n        box-sizing: border-box;\n        padding: 45px 40px 40px 40px;\n        box-shadow: 0 1px 5px rgba(0,0,0,0.7);\n        border-radius: 4px;\n        width: 440px;\n    }\n    .ksh .text-normal {\n        font-family: Roboto;\n        font-size: 16px;\n        font-weight: 400;\n        color: #393939\n    }\n    .ksh .text-normal-gray {\n        font-family: Roboto;\n        font-size: 16px;\n        font-weight: 400;\n        color: #565656\n    }\n    .ksh .text-normal-bold {\n        font-family: Roboto;\n        font-size: 16px;\n        font-weight: 700;\n        color: #555555;\n    }\n    .ksh .text-medium {\n        font-family: Roboto;\n        font-size: 23px;\n        font-weight: 500;\n    }\n    .ksh .text-submit {\n        font-family: Roboto;\n        font-style: normal;\n        font-weight: bold;\n        font-size: 16px;\n        line-height: 20px;\n        color: #FFFFFF;\n        cursor: pointer;\n    }\n    .ksh .text-powered {\n        font-family: IBM Plex Sans;\n        font-size: 7.1051px;\n        font-weight: 600;\n        color: #023365;\n        padding: 0px;\n    }\n    .ksh .input{\n        padding: 11px 10px 11px 16px;\n        height: 42px;\n        left: 0px;\n        right: 0px;\n        top: 0px;\n        width: 360px;\n        /* Neutrals/Components / Disabled Color */\n        border: 1px solid #B4B9BE;\n        box-sizing: border-box;\n        border-radius: 4px;\n    }\n    .ksh .button{\n        padding: 12px 30px;\n        position: static;\n        width: 360px;\n        height: 44px;\n        border-radius: 4px;\n        background-color: #093EA9;\n        border: 0px;\n        box-sizing: border-box;\n        transition: all 0.2s;\n    }\n    .ksh .button:active{\n       padding: 15px 30px;\n       background-color: #4d7cdb;\n    }\n    \n    .ksh .modal .close_modal {\n        position: absolute;\n        right: 45px;\n        top: 45px;\n        cursor: pointer;\n        font-size: 18px;\n        color: #293036;\n        background: none;\n        border: none;\n        padding: 0px;\n    }\n    .ksh .modal .close_modal:hover {\n        opacity: 0.9;\n    }\n    .ksh .hide-error {\n        color: red;\n        text-align: center;\n        display: none;\n    }\n    .ksh .show-error {\n        display: block;\n    }\n    @media only screen and (max-device-width: 600px) {\n      .ksh .modal .modal_content {\n        z-index: 999;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%) scale(2,2);\n        max-height: 90%;\n        overflow: auto;\n        background: #fff;\n        box-sizing: border-box;\n        padding: 45px 40px 40px 40px;\n        box-shadow: 0 1px 5px rgba(0,0,0,0.7);\n        border-radius: 4px;\n        width: 440px;\n      }\n    }\n    \n</style>\n'},function(module,exports,__webpack_require__){"use strict";function _process(v,mod){var i,r;if("function"==typeof mod)void 0!==(r=mod(v))&&(v=r);else if(Array.isArray(mod))for(i=0;i<mod.length;i++)void 0!==(r=mod[i](v))&&(v=r);return v}function parseKey(key,val){return"-"===key[0]&&Array.isArray(val)&&/^-\d+$/.test(key)?val.length+parseInt(key,10):key}function isObject(val){return"[object Object]"===Object.prototype.toString.call(val)}function isArrayOrObject(val){return Object(val)===val}function isEmptyObject(val){return 0===Object.keys(val).length}var blacklist=["__proto__","prototype","constructor"],blacklistFilter=function(part){return-1===blacklist.indexOf(part)};function parsePath(path,sep){path.indexOf("[")>=0&&(path=path.replace(/\[/g,sep).replace(/]/g,""));var parts=path.split(sep);if(parts.filter(blacklistFilter).length!==parts.length)throw Error("Refusing to update blacklisted property "+path);return parts}var hasOwnProperty=Object.prototype.hasOwnProperty;function DotObject(separator,override,useArray,useBrackets){if(!(this instanceof DotObject))return new DotObject(separator,override,useArray,useBrackets);void 0===override&&(override=!1),void 0===useArray&&(useArray=!0),void 0===useBrackets&&(useBrackets=!0),this.separator=separator||".",this.override=override,this.useArray=useArray,this.useBrackets=useBrackets,this.keepArray=!1,this.cleanup=[]}var dotDefault=new DotObject(".",!1,!0,!0);function wrap(method){return function(){return dotDefault[method].apply(dotDefault,arguments)}}DotObject.prototype._fill=function(a,obj,v,mod){var k=a.shift();if(a.length>0){if(obj[k]=obj[k]||(this.useArray&&function(k){return/^\d+$/.test(k)}(a[0])?[]:{}),!isArrayOrObject(obj[k])){if(!this.override){if(!isArrayOrObject(v)||!isEmptyObject(v))throw new Error("Trying to redefine `"+k+"` which is a "+typeof obj[k]);return}obj[k]={}}this._fill(a,obj[k],v,mod)}else{if(!this.override&&isArrayOrObject(obj[k])&&!isEmptyObject(obj[k])){if(!isArrayOrObject(v)||!isEmptyObject(v))throw new Error("Trying to redefine non-empty obj['"+k+"']");return}obj[k]=_process(v,mod)}},DotObject.prototype.object=function(obj,mods){var self=this;return Object.keys(obj).forEach((function(k){var mod=void 0===mods?null:mods[k],ok=parsePath(k,self.separator).join(self.separator);-1!==ok.indexOf(self.separator)?(self._fill(ok.split(self.separator),obj,obj[k],mod),delete obj[k]):obj[k]=_process(obj[k],mod)})),obj},DotObject.prototype.str=function(path,v,obj,mod){var ok=parsePath(path,this.separator).join(this.separator);return-1!==path.indexOf(this.separator)?this._fill(ok.split(this.separator),obj,v,mod):obj[path]=_process(v,mod),obj},DotObject.prototype.pick=function(path,obj,remove,reindexArray){var i,keys,val,key,cp;for(keys=parsePath(path,this.separator),i=0;i<keys.length;i++){if(key=parseKey(keys[i],obj),!obj||"object"!=typeof obj||!(key in obj))return;if(i===keys.length-1)return remove?(val=obj[key],reindexArray&&Array.isArray(obj)?obj.splice(key,1):delete obj[key],Array.isArray(obj)&&(cp=keys.slice(0,-1).join("."),-1===this.cleanup.indexOf(cp)&&this.cleanup.push(cp)),val):obj[key];obj=obj[key]}return remove&&Array.isArray(obj)&&(obj=obj.filter((function(n){return void 0!==n}))),obj},DotObject.prototype.delete=function(path,obj){return this.remove(path,obj,!0)},DotObject.prototype.remove=function(path,obj,reindexArray){var i;if(this.cleanup=[],Array.isArray(path)){for(i=0;i<path.length;i++)this.pick(path[i],obj,!0,reindexArray);return reindexArray||this._cleanup(obj),obj}return this.pick(path,obj,!0,reindexArray)},DotObject.prototype._cleanup=function(obj){var ret,i,keys,root;if(this.cleanup.length){for(i=0;i<this.cleanup.length;i++)ret=(ret=(root=(keys=this.cleanup[i].split(".")).splice(0,-1).join("."))?this.pick(root,obj):obj)[keys[0]].filter((function(v){return void 0!==v})),this.set(this.cleanup[i],ret,obj);this.cleanup=[]}},DotObject.prototype.del=DotObject.prototype.remove,DotObject.prototype.move=function(source,target,obj,mods,merge){return"function"==typeof mods||Array.isArray(mods)?this.set(target,_process(this.pick(source,obj,!0),mods),obj,merge):(merge=mods,this.set(target,this.pick(source,obj,!0),obj,merge)),obj},DotObject.prototype.transfer=function(source,target,obj1,obj2,mods,merge){return"function"==typeof mods||Array.isArray(mods)?this.set(target,_process(this.pick(source,obj1,!0),mods),obj2,merge):(merge=mods,this.set(target,this.pick(source,obj1,!0),obj2,merge)),obj2},DotObject.prototype.copy=function(source,target,obj1,obj2,mods,merge){return"function"==typeof mods||Array.isArray(mods)?this.set(target,_process(JSON.parse(JSON.stringify(this.pick(source,obj1,!1))),mods),obj2,merge):(merge=mods,this.set(target,this.pick(source,obj1,!1),obj2,merge)),obj2},DotObject.prototype.set=function(path,val,obj,merge){var i,k,keys,key;if(void 0===val)return obj;for(keys=parsePath(path,this.separator),i=0;i<keys.length;i++){if(key=keys[i],i===keys.length-1)if(merge&&isObject(val)&&isObject(obj[key]))for(k in val)hasOwnProperty.call(val,k)&&(obj[key][k]=val[k]);else if(merge&&Array.isArray(obj[key])&&Array.isArray(val))for(var j=0;j<val.length;j++)obj[keys[i]].push(val[j]);else obj[key]=val;else hasOwnProperty.call(obj,key)&&(isObject(obj[key])||Array.isArray(obj[key]))||(/^\d+$/.test(keys[i+1])?obj[key]=[]:obj[key]={});obj=obj[key]}return obj},DotObject.prototype.transform=function(recipe,obj,tgt){return obj=obj||{},tgt=tgt||{},Object.keys(recipe).forEach(function(key){this.set(recipe[key],this.pick(key,obj),tgt)}.bind(this)),tgt},DotObject.prototype.dot=function(obj,tgt,path){tgt=tgt||{},path=path||[];var isArray=Array.isArray(obj);return Object.keys(obj).forEach(function(key){var index=isArray&&this.useBrackets?"["+key+"]":key;if(isArrayOrObject(obj[key])&&(isObject(obj[key])&&!isEmptyObject(obj[key])||Array.isArray(obj[key])&&!this.keepArray&&0!==obj[key].length)){if(isArray&&this.useBrackets){var previousKey=path[path.length-1]||"";return this.dot(obj[key],tgt,path.slice(0,-1).concat(previousKey+index))}return this.dot(obj[key],tgt,path.concat(index))}isArray&&this.useBrackets?tgt[path.join(this.separator).concat("["+key+"]")]=obj[key]:tgt[path.concat(index).join(this.separator)]=obj[key]}.bind(this)),tgt},DotObject.pick=wrap("pick"),DotObject.move=wrap("move"),DotObject.transfer=wrap("transfer"),DotObject.transform=wrap("transform"),DotObject.copy=wrap("copy"),DotObject.object=wrap("object"),DotObject.str=wrap("str"),DotObject.set=wrap("set"),DotObject.delete=wrap("delete"),DotObject.del=DotObject.remove=wrap("remove"),DotObject.dot=wrap("dot"),["override","overwrite"].forEach((function(prop){Object.defineProperty(DotObject,prop,{get:function(){return dotDefault.override},set:function(val){dotDefault.override=!!val}})})),["useArray","keepArray","useBrackets"].forEach((function(prop){Object.defineProperty(DotObject,prop,{get:function(){return dotDefault[prop]},set:function(val){dotDefault[prop]=val}})})),DotObject._process=_process,module.exports=DotObject},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.ThreeDSEnum=void 0,function(ThreeDSEnum){ThreeDSEnum.SANDBOX="sandbox"}(exports.ThreeDSEnum||(exports.ThreeDSEnum={}))},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.CardSubscriptionDynamicService=void 0;var Identifiers_1=__webpack_require__(44),BinCardTypeEnum_1=__webpack_require__(303),inversify_1=__webpack_require__(42),ICardAsyncService_1=__webpack_require__(304),ICardService_1=__webpack_require__(305),rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),CardSubscriptionDynamicService=function(){function CardSubscriptionDynamicService(cardService,cardAsyncService){this._cardServiceSubscription=cardService,this._cardAsyncServiceSubscription=cardAsyncService}var _a,_b;return CardSubscriptionDynamicService.prototype.requestCardSubscriptionDynamicToken=function(bin,body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this._cardServiceSubscription.requestBinInfo(bin,mid,testEnv,regional)})),operators_1.concatMap((function(binInfo){return rxjs_1.iif((function(){return binInfo.cardType===BinCardTypeEnum_1.BinCardTypeEnum.debit}),_this._requestCardSubscriptionAsyncToken(body,mid,testEnv,regional),_this._requestCardSubscriptionToken(body,mid,testEnv,regional))})))},CardSubscriptionDynamicService.prototype._requestCardSubscriptionAsyncToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return _this._cardAsyncServiceSubscription.requestCardSubscriptionAsyncToken(body,mid,testEnv,regional)})))},CardSubscriptionDynamicService.prototype._requestCardSubscriptionToken=function(body,mid,testEnv,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return _this._cardServiceSubscription.requestSubscriptionToken(body,mid,testEnv,regional)})))},CardSubscriptionDynamicService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.CardService)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.CardAsyncService)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==ICardService_1.ICardService&&ICardService_1.ICardService)?_a:Object,"function"==typeof(_b=void 0!==ICardAsyncService_1.ICardAsyncService&&ICardAsyncService_1.ICardAsyncService)?_b:Object])],CardSubscriptionDynamicService)}();exports.CardSubscriptionDynamicService=CardSubscriptionDynamicService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.CashService=void 0;var Identifiers_1=__webpack_require__(44),KushkiGateway_1=__webpack_require__(153),inversify_1=__webpack_require__(42);__webpack_require__(71);var IAntiFraud_1=__webpack_require__(114),CashService=function(){function CashService(gateway,antiFraud){this._gateway=gateway,this._antiFraud=antiFraud}var _a,_b;return CashService.prototype.requestCashToken=function(body,mid,isTest,regional){return this._gateway.requestCashToken(body,mid,isTest,regional)},CashService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.AntiFraud)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==KushkiGateway_1.KushkiGateway&&KushkiGateway_1.KushkiGateway)?_a:Object,"function"==typeof(_b=void 0!==IAntiFraud_1.IAntiFraud&&IAntiFraud_1.IAntiFraud)?_b:Object])],CashService)}();exports.CashService=CashService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.CommissionService=void 0;var Identifiers_1=__webpack_require__(44),inversify_1=__webpack_require__(42),IKushkiGateway_1=__webpack_require__(78),CommissionService=function(){function CommissionService(gateway){this._gateway=gateway}var _a;return CommissionService.prototype.getCommissionConfiguration=function(request,mid,isTest,regional){return this._gateway.getCommissionConfiguration(request,mid,isTest,regional)},CommissionService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object])],CommissionService)}();exports.CommissionService=CommissionService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.KPayService=void 0;var Identifiers_1=__webpack_require__(44),inversify_1=__webpack_require__(42);__webpack_require__(71);var IAuthService_1=__webpack_require__(306),IKushkiGateway_1=__webpack_require__(78),rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),KPayService=function(){function KPayService(gateway,authService){this._gateway=gateway,this._authService=authService}var _a,_b;return KPayService.prototype.deletePaymentMethod=function(body,mid,isTest,regional){var _this=this;return rxjs_1.of(1).pipe(operators_1.concatMap((function(){return _this._authService.getAuthorizationToken()})),operators_1.concatMap((function(jwt){return _this._gateway.deletePaymentMethod(body,isTest,regional,mid,jwt)})))},KPayService.prototype.requestSavedPaymentMethods=function(body,mid,isTest,regional){return this._gateway.requestSavedPaymentMethods(body,isTest,regional,mid)},KPayService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.AuthService)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object,"function"==typeof(_b=void 0!==IAuthService_1.IAuthService&&IAuthService_1.IAuthService)?_b:Object])],KPayService)}();exports.KPayService=KPayService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.KushkiService=void 0;var Identifiers_1=__webpack_require__(44),inversify_1=__webpack_require__(42);__webpack_require__(71);var IKushkiGateway_1=__webpack_require__(78),KushkiService=function(){function KushkiService(gateway){this._gateway=gateway}var _a;return KushkiService.prototype.checkStatus=function(mid,isTest,regional){return this._gateway.checkStatus(mid,isTest,regional)},KushkiService.prototype.requestBrandsByMerchant=function(mid,isTest,regional){return this._gateway.requestBrandsByMerchant(mid,isTest,regional)},KushkiService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object])],KushkiService)}();exports.KushkiService=KushkiService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.MobileProcessorService=void 0;var Identifiers_1=__webpack_require__(44),KushkiError_1=__webpack_require__(152),ErrorEnum_1=__webpack_require__(213),inversify_1=__webpack_require__(42),IKushkiGateway_1=__webpack_require__(78),rxjs_1=__webpack_require__(95),operators_1=__webpack_require__(86),MobileProcessorService=function(){function MobileProcessorService(gateway){this._gateway=gateway}var _a;return MobileProcessorService.prototype.requestToken=function(request,publicCredential,isTest,regional){var token,_this=this,apple_request=this.createAppleRequest(request);return rxjs_1.of(1).pipe(operators_1.mergeMap((function(){return new rxjs_1.Observable((function(observer){var apple_session=new window.ApplePaySession(2,apple_request);apple_session.onvalidatemerchant=function(event){return _this.onvalidatemerchant(event,observer,apple_session)},apple_session.begin()}))})),operators_1.mergeMap((function(session){return _this.requestGatewayToken(request,session,publicCredential,isTest,regional)})),operators_1.mergeMap((function(_a){var session=_a[0],response=_a[1];return token=response.token,delete response.token,session.session.completeMerchantValidation(response),rxjs_1.of(session)})),operators_1.mergeMap((function(session){return new rxjs_1.Observable((function(observer){session.session.onpaymentauthorized=function(event){observer.next({payment_token:event.payment,session:session.session})}}))})),operators_1.mergeMap((function(session){return session.session.completePayment(window.ApplePaySession.STATUS_SUCCESS),rxjs_1.of({token:token,paymentToken:session.payment_token})})),operators_1.catchError((function(error){return"The object does not support the operation or argument."===error.message?rxjs_1.throwError(new KushkiError_1.KushkiError(ErrorEnum_1.ERRORS.E006)):rxjs_1.throwError(error)})))},MobileProcessorService.prototype.requestGatewayToken=function(request,session,publicCredential,isTest,regional){return request.validationUrl=session.validation_url,request.domainName=session.current_url,delete request.description,rxjs_1.forkJoin([rxjs_1.of(session),this._gateway.requestMobileProcessorToken(request,publicCredential,isTest,regional)]).pipe(operators_1.catchError((function(err){return session.session.abort(),rxjs_1.throwError(err)})))},MobileProcessorService.prototype.requestGatewayCharge=function(token,publicCredential,isTest,regional,request,session){var charge_request={token:token,amount:request.totalAmount,currency:request.currency,encodedPaymentToken:session.payment_token,softDescriptor:"KushkiPagos"};return rxjs_1.forkJoin([rxjs_1.of(session),this._gateway.chargeMobileProcessor(charge_request,publicCredential,isTest,regional)])},MobileProcessorService.prototype.createAppleRequest=function(request){return{countryCode:"US",currencyCode:"USD",merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress","name"],requiredShippingContactFields:["postalAddress","email","phone"],supportedNetworks:["amex","discover","jcb","masterCard","visa"],total:{amount:request.totalAmount,label:request.description,type:"final"}}},MobileProcessorService.prototype.completePayment=function(session,response){return session.session.completePayment(window.ApplePaySession.STATUS_SUCCESS),rxjs_1.of(response)},MobileProcessorService.prototype.onvalidatemerchant=function(event,observer,session){var validation_url=event.validationURL,current_url=window.location.host;observer.next({current_url:current_url,validation_url:validation_url,session:session})},MobileProcessorService.prototype.paymentAuthorized=function(event,observer,session){var payment_token=event.payment;observer.next({payment_token:payment_token,session:session.session})},MobileProcessorService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object])],MobileProcessorService)}();exports.MobileProcessorService=MobileProcessorService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.MultiMerchantService=void 0;var Identifiers_1=__webpack_require__(44),inversify_1=__webpack_require__(42),IKushkiGateway_1=__webpack_require__(78),MultiMerchantService=function(){function MultiMerchantService(gateway){this._gateway=gateway}var _a;return MultiMerchantService.prototype.multiMerchantInfo=function(request,mid,isTest,regional){return this._gateway.multiMerchantInfo(request,mid,isTest,regional)},MultiMerchantService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object])],MultiMerchantService)}();exports.MultiMerchantService=MultiMerchantService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.PayoutsCashService=void 0;var Identifiers_1=__webpack_require__(44),KushkiGateway_1=__webpack_require__(153),inversify_1=__webpack_require__(42);__webpack_require__(71);var IAntiFraud_1=__webpack_require__(114),PayoutsCashService=function(){function PayoutsCashService(gateway,antiFraud){this._kushkiGateway=gateway,this._antiFraud=antiFraud}var _a,_b;return PayoutsCashService.prototype.requestPayoutsCashToken=function(body,mid,isTest,regional){return this._kushkiGateway.requestPayoutsCashToken(body,mid,isTest,regional)},PayoutsCashService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.AntiFraud)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==KushkiGateway_1.KushkiGateway&&KushkiGateway_1.KushkiGateway)?_a:Object,"function"==typeof(_b=void 0!==IAntiFraud_1.IAntiFraud&&IAntiFraud_1.IAntiFraud)?_b:Object])],PayoutsCashService)}();exports.PayoutsCashService=PayoutsCashService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.PayoutsTransferService=void 0;var Identifiers_1=__webpack_require__(44),KushkiGateway_1=__webpack_require__(153),inversify_1=__webpack_require__(42);__webpack_require__(71);var IAntiFraud_1=__webpack_require__(114),PayoutsTransferService=function(){function PayoutsTransferService(antiFraud,gateway){this._kushkiGateway=gateway,this._antiFraud=antiFraud}var _a,_b;return PayoutsTransferService.prototype.requestPayoutsTransferToken=function(body,mid,isTest,regional){return this._kushkiGateway.requestPayoutsTransferToken(body,mid,isTest,regional)},PayoutsTransferService.prototype.requestPayoutsTransferBankList=function(mid,isTest,regional){return this._kushkiGateway.requestPayoutsTransferBankList(mid,isTest,regional)},PayoutsTransferService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.AntiFraud)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IAntiFraud_1.IAntiFraud&&IAntiFraud_1.IAntiFraud)?_a:Object,"function"==typeof(_b=void 0!==KushkiGateway_1.KushkiGateway&&KushkiGateway_1.KushkiGateway)?_b:Object])],PayoutsTransferService)}();exports.PayoutsTransferService=PayoutsTransferService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.SecureService=void 0;var Identifiers_1=__webpack_require__(44),inversify_1=__webpack_require__(42),IKushkiGateway_1=__webpack_require__(78),SecureService=function(){function SecureService(gateway){this._gateway=gateway}var _a;return SecureService.prototype.requestSecureServiceValidation=function(mid,request,isTest,regional){return this._gateway.requestSecureServiceValidation(mid,request,isTest,regional)},SecureService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object])],SecureService)}();exports.SecureService=SecureService},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.TransferService=void 0;var Identifiers_1=__webpack_require__(44),inversify_1=__webpack_require__(42);__webpack_require__(71);var IAntiFraud_1=__webpack_require__(114),IKushkiGateway_1=__webpack_require__(78),operators_1=__webpack_require__(86),TransferService=function(){function TransferService(gateway,antiFraud){this._gateway=gateway,this._antiFraud=antiFraud}var _a,_b;return TransferService.prototype.requestTransferToken=function(request,mid,isTest,regional){var _this=this;return this._gateway.requestMerchantSettings(mid,isTest,regional).pipe(operators_1.switchMap((function(merchant){var client=void 0!==request.documentNumber?request.documentNumber:(new Date).getTime().toString();return _this._antiFraud.createSiftScienceSession(request.bankId,client,mid,isTest,merchant)})),operators_1.switchMap((function(siftObject){return _this._gateway.requestTransferToken(__assign(__assign({},request),siftObject),mid,isTest,regional)})))},TransferService.prototype.requestBankList=function(mid,isTest,regional){return this._gateway.requestPseBankList(mid,isTest,regional)},TransferService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.AntiFraud)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_a:Object,"function"==typeof(_b=void 0!==IAntiFraud_1.IAntiFraud&&IAntiFraud_1.IAntiFraud)?_b:Object])],TransferService)}();exports.TransferService=TransferService},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=this&&this.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};exports.__esModule=!0,exports.TransferSubscriptionsService=void 0;var Identifiers_1=__webpack_require__(44),inversify_1=__webpack_require__(42),IAntiFraud_1=__webpack_require__(114),IKushkiGateway_1=__webpack_require__(78),TransferSubscriptionsService=function(){function TransferSubscriptionsService(antiFraud,gateway){this._antiFraud=antiFraud,this._gateway=gateway}var _a,_b;return TransferSubscriptionsService.prototype.requestToken=function(tokenRequest,mid,isTest,regional){return this._gateway.requestTokenTransferSubscription(tokenRequest,mid,isTest,regional)},TransferSubscriptionsService.prototype.requestBankList=function(mid,isTest,regional){return this._gateway.requestBankList(mid,isTest,regional)},TransferSubscriptionsService=__decorate([inversify_1.injectable(),__param(0,inversify_1.inject(Identifiers_1.IDENTIFIERS.AntiFraud)),__param(1,inversify_1.inject(Identifiers_1.IDENTIFIERS.KushkiGateway)),__metadata("design:paramtypes",["function"==typeof(_a=void 0!==IAntiFraud_1.IAntiFraud&&IAntiFraud_1.IAntiFraud)?_a:Object,"function"==typeof(_b=void 0!==IKushkiGateway_1.IKushkiGateway&&IKushkiGateway_1.IKushkiGateway)?_b:Object])],TransferSubscriptionsService)}();exports.TransferSubscriptionsService=TransferSubscriptionsService},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var ConsoleLogger=__webpack_require__(84),types=__webpack_require__(8),util=__webpack_require__(5),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},InMemoryStore=function(){var _this=this;this.db=new Map,this.getAllKeys=function(){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,Array.from(this.db.keys())]}))}))},this.multiGet=function(keys){return __awaiter(_this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){return[2,keys.reduce((function(res,k){return res.push([k,_this.db.get(k)]),res}),[])]}))}))},this.multiRemove=function(keys,callback){return __awaiter(_this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){return keys.forEach((function(k){return _this.db.delete(k)})),callback(),[2]}))}))},this.multiSet=function(entries,callback){return __awaiter(_this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){return entries.forEach((function(_a){var _b=__read(_a,2),key=_b[0],value=_b[1];_this.setItem(key,value)})),callback(),[2]}))}))},this.setItem=function(key,value){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.db.set(key,value)]}))}))},this.removeItem=function(key){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.db.delete(key)]}))}))},this.getItem=function(key){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.db.get(key)]}))}))}};var AsyncStorageDatabase_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AsyncStorageDatabase_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},AsyncStorageDatabase_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},DB_NAME="@AmplifyDatastore",monotonicFactoriesMap=new Map,adapter_AsyncStorageDatabase=function(){function AsyncStorageDatabase(){this._collectionInMemoryIndex=new Map,this.storage=new InMemoryStore}return AsyncStorageDatabase.prototype.getCollectionIndex=function(storeName){return this._collectionInMemoryIndex.has(storeName)||this._collectionInMemoryIndex.set(storeName,new Map),this._collectionInMemoryIndex.get(storeName)},AsyncStorageDatabase.prototype.getMonotonicFactory=function(storeName){return monotonicFactoriesMap.has(storeName)||monotonicFactoriesMap.set(storeName,Object(util.v)()),monotonicFactoriesMap.get(storeName)},AsyncStorageDatabase.prototype.init=function(){return AsyncStorageDatabase_awaiter(this,void 0,void 0,(function(){var allKeys,keysForCollectionEntries,allKeys_1,allKeys_1_1,key,_a,dbName,storeName,recordType,ulidOrId,id,ulid,id_1,newUlid,oldKey,newKey,item,e_1_1,e_1,_b;return AsyncStorageDatabase_generator(this,(function(_c){switch(_c.label){case 0:return this._collectionInMemoryIndex.clear(),[4,this.storage.getAllKeys()];case 1:allKeys=_c.sent(),keysForCollectionEntries=[],_c.label=2;case 2:_c.trys.push([2,12,13,14]),allKeys_1=__values(allKeys),allKeys_1_1=allKeys_1.next(),_c.label=3;case 3:return allKeys_1_1.done?[3,11]:(key=allKeys_1_1.value,_a=AsyncStorageDatabase_read(key.split("::"),5),dbName=_a[0],storeName=_a[1],recordType=_a[2],ulidOrId=_a[3],id=_a[4],dbName!==DB_NAME?[3,10]:"Data"!==recordType?[3,9]:(ulid=void 0,void 0!==id?[3,7]:(id_1=ulidOrId,newUlid=this.getMonotonicFactory(storeName)(),oldKey=this.getLegacyKeyForItem(storeName,id_1),newKey=this.getKeyForItem(storeName,id_1,newUlid),[4,this.storage.getItem(oldKey)])));case 4:return item=_c.sent(),[4,this.storage.setItem(newKey,item)];case 5:return _c.sent(),[4,this.storage.removeItem(oldKey)];case 6:return _c.sent(),ulid=newUlid,[3,8];case 7:ulid=ulidOrId,_c.label=8;case 8:return this.getCollectionIndex(storeName).set(id,ulid),[3,10];case 9:"Collection"===recordType&&keysForCollectionEntries.push(key),_c.label=10;case 10:return allKeys_1_1=allKeys_1.next(),[3,3];case 11:return[3,14];case 12:return e_1_1=_c.sent(),e_1={error:e_1_1},[3,14];case 13:try{allKeys_1_1&&!allKeys_1_1.done&&(_b=allKeys_1.return)&&_b.call(allKeys_1)}finally{if(e_1)throw e_1.error}return[7];case 14:return keysForCollectionEntries.length>0?[4,this.storage.multiRemove(keysForCollectionEntries)]:[3,16];case 15:_c.sent(),_c.label=16;case 16:return[2]}}))}))},AsyncStorageDatabase.prototype.save=function(item,storeName){return AsyncStorageDatabase_awaiter(this,void 0,void 0,(function(){var ulid,itemKey;return AsyncStorageDatabase_generator(this,(function(_a){switch(_a.label){case 0:return ulid=this.getCollectionIndex(storeName).get(item.id)||this.getMonotonicFactory(storeName)(),itemKey=this.getKeyForItem(storeName,item.id,ulid),this.getCollectionIndex(storeName).set(item.id,ulid),[4,this.storage.setItem(itemKey,JSON.stringify(item))];case 1:return _a.sent(),[2]}}))}))},AsyncStorageDatabase.prototype.batchSave=function(storeName,items){return AsyncStorageDatabase_awaiter(this,void 0,void 0,(function(){var result,collection,keysToDelete,keysToSave,allItemsKeys,itemsMap,items_1,items_1_1,item,id,_deleted,ulid,existingRecordsMap,existingRecordsKeys,allItemsKeys_1,allItemsKeys_1_1,key,e_2,_a,e_3,_b,_this=this;return AsyncStorageDatabase_generator(this,(function(_c){switch(_c.label){case 0:if(0===items.length)return[2,[]];result=[],collection=this.getCollectionIndex(storeName),keysToDelete=new Set,keysToSave=new Set,allItemsKeys=[],itemsMap={};try{for(items_1=__values(items),items_1_1=items_1.next();!items_1_1.done;items_1_1=items_1.next())item=items_1_1.value,id=item.id,_deleted=item._deleted,ulid=collection.get(id)||this.getMonotonicFactory(storeName)(),key=this.getKeyForItem(storeName,id,ulid),allItemsKeys.push(key),itemsMap[key]={ulid:ulid,model:item},_deleted?keysToDelete.add(key):keysToSave.add(key)}catch(e_2_1){e_2={error:e_2_1}}finally{try{items_1_1&&!items_1_1.done&&(_a=items_1.return)&&_a.call(items_1)}finally{if(e_2)throw e_2.error}}return[4,this.storage.multiGet(allItemsKeys)];case 1:return existingRecordsMap=_c.sent(),existingRecordsKeys=existingRecordsMap.filter((function(_a){return!!AsyncStorageDatabase_read(_a,2)[1]})).reduce((function(set,_a){var k=AsyncStorageDatabase_read(_a,1)[0];return set.add(k)}),new Set),[4,new Promise((function(resolve,reject){if(0!==keysToDelete.size){var keysToDeleteArray=Array.from(keysToDelete);keysToDeleteArray.forEach((function(key){return collection.delete(itemsMap[key].model.id)})),_this.storage.multiRemove(keysToDeleteArray,(function(errors){errors&&errors.length>0?reject(errors):resolve()}))}else resolve()}))];case 2:return _c.sent(),[4,new Promise((function(resolve,reject){if(0!==keysToSave.size){var entriesToSet=Array.from(keysToSave).map((function(key){return[key,JSON.stringify(itemsMap[key].model)]}));keysToSave.forEach((function(key){var _a=itemsMap[key],id=_a.model.id,ulid=_a.ulid;collection.set(id,ulid)})),_this.storage.multiSet(entriesToSet,(function(errors){errors&&errors.length>0?reject(errors):resolve()}))}else resolve()}))];case 3:_c.sent();try{for(allItemsKeys_1=__values(allItemsKeys),allItemsKeys_1_1=allItemsKeys_1.next();!allItemsKeys_1_1.done;allItemsKeys_1_1=allItemsKeys_1.next())key=allItemsKeys_1_1.value,keysToDelete.has(key)&&existingRecordsKeys.has(key)?result.push([itemsMap[key].model,types.c.DELETE]):keysToSave.has(key)&&result.push([itemsMap[key].model,existingRecordsKeys.has(key)?types.c.UPDATE:types.c.INSERT])}catch(e_3_1){e_3={error:e_3_1}}finally{try{allItemsKeys_1_1&&!allItemsKeys_1_1.done&&(_b=allItemsKeys_1.return)&&_b.call(allItemsKeys_1)}finally{if(e_3)throw e_3.error}}return[2,result]}}))}))},AsyncStorageDatabase.prototype.get=function(id,storeName){return AsyncStorageDatabase_awaiter(this,void 0,void 0,(function(){var ulid,itemKey,recordAsString;return AsyncStorageDatabase_generator(this,(function(_a){switch(_a.label){case 0:return ulid=this.getCollectionIndex(storeName).get(id),itemKey=this.getKeyForItem(storeName,id,ulid),[4,this.storage.getItem(itemKey)];case 1:return recordAsString=_a.sent(),[2,recordAsString&&JSON.parse(recordAsString)]}}))}))},AsyncStorageDatabase.prototype.getOne=function(firstOrLast,storeName){return AsyncStorageDatabase_awaiter(this,void 0,void 0,(function(){var collection,_a,itemId,ulid,itemKey,itemString,_b;return AsyncStorageDatabase_generator(this,(function(_c){switch(_c.label){case 0:return collection=this.getCollectionIndex(storeName),_a=AsyncStorageDatabase_read(firstOrLast===types.d.FIRST?function(){var e_4,_a,_b,id,ulid;try{for(var collection_1=__values(collection),collection_1_1=collection_1.next();!collection_1_1.done;collection_1_1=collection_1.next()){id=(_b=AsyncStorageDatabase_read(collection_1_1.value,2))[0],ulid=_b[1];break}}catch(e_4_1){e_4={error:e_4_1}}finally{try{collection_1_1&&!collection_1_1.done&&(_a=collection_1.return)&&_a.call(collection_1)}finally{if(e_4)throw e_4.error}}return[id,ulid]}():function(){var e_5,_a,_b,id,ulid;try{for(var collection_2=__values(collection),collection_2_1=collection_2.next();!collection_2_1.done;collection_2_1=collection_2.next())id=(_b=AsyncStorageDatabase_read(collection_2_1.value,2))[0],ulid=_b[1]}catch(e_5_1){e_5={error:e_5_1}}finally{try{collection_2_1&&!collection_2_1.done&&(_a=collection_2.return)&&_a.call(collection_2)}finally{if(e_5)throw e_5.error}}return[id,ulid]}(),2),itemId=_a[0],ulid=_a[1],itemKey=this.getKeyForItem(storeName,itemId,ulid),(_b=itemKey)?[4,this.storage.getItem(itemKey)]:[3,2];case 1:_b=_c.sent(),_c.label=2;case 2:return[2,(itemString=_b)&&JSON.parse(itemString)||void 0]}}))}))},AsyncStorageDatabase.prototype.getAll=function(storeName,pagination){return AsyncStorageDatabase_awaiter(this,void 0,void 0,(function(){var collection,_a,_b,page,_c,limit,start,end,keysForStore,count,collection_3,collection_3_1,_d,id,ulid,storeRecordStrings,e_6,_e;return AsyncStorageDatabase_generator(this,(function(_f){switch(_f.label){case 0:collection=this.getCollectionIndex(storeName),_b=(_a=pagination||{}).page,page=void 0===_b?0:_b,_c=_a.limit,limit=void 0===_c?0:_c,start=Math.max(0,page*limit)||0,end=limit>0?start+limit:void 0,keysForStore=[],count=0;try{for(collection_3=__values(collection),collection_3_1=collection_3.next();!collection_3_1.done&&(_d=AsyncStorageDatabase_read(collection_3_1.value,2),id=_d[0],ulid=_d[1],++count<=start||(keysForStore.push(this.getKeyForItem(storeName,id,ulid)),count!==end));collection_3_1=collection_3.next());}catch(e_6_1){e_6={error:e_6_1}}finally{try{collection_3_1&&!collection_3_1.done&&(_e=collection_3.return)&&_e.call(collection_3)}finally{if(e_6)throw e_6.error}}return[4,this.storage.multiGet(keysForStore)];case 1:return storeRecordStrings=_f.sent(),[2,storeRecordStrings.filter((function(_a){return AsyncStorageDatabase_read(_a,2)[1]})).map((function(_a){var value=AsyncStorageDatabase_read(_a,2)[1];return JSON.parse(value)}))]}}))}))},AsyncStorageDatabase.prototype.delete=function(id,storeName){return AsyncStorageDatabase_awaiter(this,void 0,void 0,(function(){var ulid,itemKey;return AsyncStorageDatabase_generator(this,(function(_a){switch(_a.label){case 0:return ulid=this.getCollectionIndex(storeName).get(id),itemKey=this.getKeyForItem(storeName,id,ulid),this.getCollectionIndex(storeName).delete(id),[4,this.storage.removeItem(itemKey)];case 1:return _a.sent(),[2]}}))}))},AsyncStorageDatabase.prototype.clear=function(){return AsyncStorageDatabase_awaiter(this,void 0,void 0,(function(){var allKeys,allDataStoreKeys;return AsyncStorageDatabase_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.storage.getAllKeys()];case 1:return allKeys=_a.sent(),allDataStoreKeys=allKeys.filter((function(key){return key.startsWith(DB_NAME)})),[4,this.storage.multiRemove(allDataStoreKeys)];case 2:return _a.sent(),this._collectionInMemoryIndex.clear(),[2]}}))}))},AsyncStorageDatabase.prototype.getKeyForItem=function(storeName,id,ulid){return this.getKeyPrefixForStoreItems(storeName)+"::"+ulid+"::"+id},AsyncStorageDatabase.prototype.getLegacyKeyForItem=function(storeName,id){return this.getKeyPrefixForStoreItems(storeName)+"::"+id},AsyncStorageDatabase.prototype.getKeyPrefixForStoreItems=function(storeName){return DB_NAME+"::"+storeName+"::Data"},AsyncStorageDatabase}(),lib_esm_predicates=__webpack_require__(14),sort=__webpack_require__(300);__webpack_require__.d(__webpack_exports__,"AsyncStorageAdapter",(function(){return AsyncStorageAdapter_AsyncStorageAdapter}));var AsyncStorageAdapter_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},AsyncStorageAdapter_generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__asyncValues=function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o="function"==typeof AsyncStorageAdapter_values?AsyncStorageAdapter_values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}},AsyncStorageAdapter_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},AsyncStorageAdapter_values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},logger=new ConsoleLogger.a("DataStore"),AsyncStorageAdapter_AsyncStorageAdapter=function(){function AsyncStorageAdapter(){}return AsyncStorageAdapter.prototype.getStorenameForModel=function(modelConstructor){var namespace=this.namespaceResolver(modelConstructor),modelName=modelConstructor.name;return this.getStorename(namespace,modelName)},AsyncStorageAdapter.prototype.getStorename=function(namespace,modelName){return namespace+"_"+modelName},AsyncStorageAdapter.prototype.setUp=function(theSchema,namespaceResolver,modelInstanceCreator,getModelConstructorByModelName){return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var error_1,_this=this;return AsyncStorageAdapter_generator(this,(function(_a){switch(_a.label){case 0:return this.initPromise?[3,1]:(this.initPromise=new Promise((function(res,rej){_this.resolve=res,_this.reject=rej})),[3,3]);case 1:return[4,this.initPromise];case 2:return _a.sent(),[2];case 3:this.schema=theSchema,this.namespaceResolver=namespaceResolver,this.modelInstanceCreator=modelInstanceCreator,this.getModelConstructorByModelName=getModelConstructorByModelName,_a.label=4;case 4:return _a.trys.push([4,7,,8]),this.db?[3,6]:(this.db=new adapter_AsyncStorageDatabase,[4,this.db.init()]);case 5:_a.sent(),this.resolve(),_a.label=6;case 6:return[3,8];case 7:return error_1=_a.sent(),this.reject(error_1),[3,8];case 8:return[2]}}))}))},AsyncStorageAdapter.prototype.save=function(model,condition){var e_1,_a;return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var modelConstructor,storeName,connectedModels,namespaceName,set,connectionStoreNames,fromDB,predicates,predicateObjs,type,msg,result,connectionStoreNames_1,connectionStoreNames_1_1,resItem,storeName_1,item,instance,id,opType,e_1_1,_this=this;return AsyncStorageAdapter_generator(this,(function(_b){switch(_b.label){case 0:return modelConstructor=Object.getPrototypeOf(model).constructor,storeName=this.getStorenameForModel(modelConstructor),connectedModels=Object(util.x)(modelConstructor.name,model,this.schema.namespaces[this.namespaceResolver(modelConstructor)],this.modelInstanceCreator,this.getModelConstructorByModelName),namespaceName=this.namespaceResolver(modelConstructor),set=new Set,connectionStoreNames=Object.values(connectedModels).map((function(_a){var modelName=_a.modelName,item=_a.item,instance=_a.instance,storeName=_this.getStorename(namespaceName,modelName);return set.add(storeName),{storeName:storeName,item:item,instance:instance}})),[4,this.db.get(model.id,storeName)];case 1:if(fromDB=_b.sent(),condition&&fromDB&&(predicates=lib_esm_predicates.a.getPredicates(condition),predicateObjs=predicates.predicates,type=predicates.type,!Object(util.y)(fromDB,type,predicateObjs)))throw msg="Conditional update failed",logger.error(msg,{model:fromDB,condition:predicateObjs}),new Error(msg);result=[],_b.label=2;case 2:_b.trys.push([2,11,12,17]),connectionStoreNames_1=__asyncValues(connectionStoreNames),_b.label=3;case 3:return[4,connectionStoreNames_1.next()];case 4:return(connectionStoreNames_1_1=_b.sent()).done?[3,10]:(resItem=connectionStoreNames_1_1.value,storeName_1=resItem.storeName,item=resItem.item,instance=resItem.instance,id=item.id,[4,this.db.get(id,storeName_1)]);case 5:return opType=_b.sent()?types.c.UPDATE:types.c.INSERT,id!==model.id?[3,7]:[4,this.db.save(item,storeName_1)];case 6:return _b.sent(),result.push([instance,opType]),[3,9];case 7:return opType!==types.c.INSERT?[3,9]:[4,this.db.save(item,storeName_1)];case 8:_b.sent(),result.push([instance,opType]),_b.label=9;case 9:return[3,3];case 10:return[3,17];case 11:return e_1_1=_b.sent(),e_1={error:e_1_1},[3,17];case 12:return _b.trys.push([12,,15,16]),connectionStoreNames_1_1&&!connectionStoreNames_1_1.done&&(_a=connectionStoreNames_1.return)?[4,_a.call(connectionStoreNames_1)]:[3,14];case 13:_b.sent(),_b.label=14;case 14:return[3,16];case 15:if(e_1)throw e_1.error;return[7];case 16:return[7];case 17:return[2,result]}}))}))},AsyncStorageAdapter.prototype.load=function(namespaceName,srcModelName,records){var records_1,records_1_1,records_2,records_2_1,e_2,_a,e_3,_b,e_4,_c;return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var namespace,relations,connectionStoreNames,modelConstructor,relations_1,relations_1_1,relation,fieldName,modelName,targetName,relationType,storeName,modelConstructor_1,e_3_1,recordItem,connectionRecord,e_4_1,e_2_1,_this=this;return AsyncStorageAdapter_generator(this,(function(_e){switch(_e.label){case 0:if(namespace=this.schema.namespaces[namespaceName],relations=namespace.relationships[srcModelName].relationTypes,connectionStoreNames=relations.map((function(_a){var modelName=_a.modelName;return _this.getStorename(namespaceName,modelName)})),modelConstructor=this.getModelConstructorByModelName(namespaceName,srcModelName),0===connectionStoreNames.length)return[2,records.map((function(record){return _this.modelInstanceCreator(modelConstructor,record)}))];_e.label=1;case 1:_e.trys.push([1,34,35,40]),relations_1=__asyncValues(relations),_e.label=2;case 2:return[4,relations_1.next()];case 3:if((relations_1_1=_e.sent()).done)return[3,33];switch(relation=relations_1_1.value,fieldName=relation.fieldName,modelName=relation.modelName,targetName=relation.targetName,relationType=relation.relationType,storeName=this.getStorename(namespaceName,modelName),modelConstructor_1=this.getModelConstructorByModelName(namespaceName,modelName),relationType){case"HAS_ONE":return[3,4];case"BELONGS_TO":return[3,17];case"HAS_MANY":return[3,30]}return[3,31];case 4:_e.trys.push([4,10,11,16]),records_1=__asyncValues(records),_e.label=5;case 5:return[4,records_1.next()];case 6:return(records_1_1=_e.sent()).done?[3,9]:(recordItem=records_1_1.value)[fieldName]?[4,this.db.get(recordItem[fieldName],storeName)]:[3,8];case 7:connectionRecord=_e.sent(),recordItem[fieldName]=connectionRecord&&this.modelInstanceCreator(modelConstructor_1,connectionRecord),_e.label=8;case 8:return[3,5];case 9:return[3,16];case 10:return e_3_1=_e.sent(),e_3={error:e_3_1},[3,16];case 11:return _e.trys.push([11,,14,15]),records_1_1&&!records_1_1.done&&(_b=records_1.return)?[4,_b.call(records_1)]:[3,13];case 12:_e.sent(),_e.label=13;case 13:return[3,15];case 14:if(e_3)throw e_3.error;return[7];case 15:return[7];case 16:return[3,32];case 17:_e.trys.push([17,23,24,29]),records_2=__asyncValues(records),_e.label=18;case 18:return[4,records_2.next()];case 19:return(records_2_1=_e.sent()).done?[3,22]:(recordItem=records_2_1.value)[targetName]?[4,this.db.get(recordItem[targetName],storeName)]:[3,21];case 20:connectionRecord=_e.sent(),recordItem[fieldName]=connectionRecord&&this.modelInstanceCreator(modelConstructor_1,connectionRecord),delete recordItem[targetName],_e.label=21;case 21:return[3,18];case 22:return[3,29];case 23:return e_4_1=_e.sent(),e_4={error:e_4_1},[3,29];case 24:return _e.trys.push([24,,27,28]),records_2_1&&!records_2_1.done&&(_c=records_2.return)?[4,_c.call(records_2)]:[3,26];case 25:_e.sent(),_e.label=26;case 26:return[3,28];case 27:if(e_4)throw e_4.error;return[7];case 28:return[7];case 29:case 30:return[3,32];case 31:return Object(util.f)(relationType),[3,32];case 32:return[3,2];case 33:return[3,40];case 34:return e_2_1=_e.sent(),e_2={error:e_2_1},[3,40];case 35:return _e.trys.push([35,,38,39]),relations_1_1&&!relations_1_1.done&&(_a=relations_1.return)?[4,_a.call(relations_1)]:[3,37];case 36:_e.sent(),_e.label=37;case 37:return[3,39];case 38:if(e_2)throw e_2.error;return[7];case 39:return[7];case 40:return[2,records.map((function(record){return _this.modelInstanceCreator(modelConstructor,record)}))]}}))}))},AsyncStorageAdapter.prototype.query=function(modelConstructor,predicate,pagination){return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var storeName,namespaceName,sortSpecified,predicates,predicateObjs_1,type_1,idPredicate,id,record,_a,all_1,filtered,all_2,all;return AsyncStorageAdapter_generator(this,(function(_b){switch(_b.label){case 0:return storeName=this.getStorenameForModel(modelConstructor),namespaceName=this.namespaceResolver(modelConstructor),sortSpecified=pagination&&pagination.sort,predicate?(predicates=lib_esm_predicates.a.getPredicates(predicate))?(predicateObjs_1=predicates.predicates,type_1=predicates.type,(idPredicate=1===predicateObjs_1.length&&predicateObjs_1.find((function(p){return Object(types.k)(p)&&"id"===p.field&&"eq"===p.operator})))?(id=idPredicate.operand,[4,this.db.get(id,storeName)]):[3,4]):[3,7]:[3,7];case 1:return(record=_b.sent())?[4,this.load(namespaceName,modelConstructor.name,[record])]:[3,3];case 2:return _a=AsyncStorageAdapter_read.apply(void 0,[_b.sent(),1]),[2,[_a[0]]];case 3:return[2,[]];case 4:return[4,this.db.getAll(storeName)];case 5:return all_1=_b.sent(),filtered=predicateObjs_1?all_1.filter((function(m){return Object(util.y)(m,type_1,predicateObjs_1)})):all_1,[4,this.load(namespaceName,modelConstructor.name,this.inMemoryPagination(filtered,pagination))];case 6:return[2,_b.sent()];case 7:return sortSpecified?[4,this.db.getAll(storeName)]:[3,10];case 8:return all_2=_b.sent(),[4,this.load(namespaceName,modelConstructor.name,this.inMemoryPagination(all_2,pagination))];case 9:return[2,_b.sent()];case 10:return[4,this.db.getAll(storeName,pagination)];case 11:return all=_b.sent(),[4,this.load(namespaceName,modelConstructor.name,all)];case 12:return[2,_b.sent()]}}))}))},AsyncStorageAdapter.prototype.inMemoryPagination=function(records,pagination){if(pagination){if(pagination.sort){var sortPredicates=sort.a.getPredicates(pagination.sort);if(sortPredicates.length){var compareFn=Object(util.w)(sortPredicates);records.sort(compareFn)}}var _a=pagination.page,page=void 0===_a?0:_a,_b=pagination.limit,limit=void 0===_b?0:_b,start=Math.max(0,page*limit)||0,end=limit>0?start+limit:records.length;return records.slice(start,end)}return records},AsyncStorageAdapter.prototype.queryOne=function(modelConstructor,firstOrLast){return void 0===firstOrLast&&(firstOrLast=types.d.FIRST),AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var storeName,result;return AsyncStorageAdapter_generator(this,(function(_a){switch(_a.label){case 0:return storeName=this.getStorenameForModel(modelConstructor),[4,this.db.getOne(firstOrLast,storeName)];case 1:return[2,(result=_a.sent())&&this.modelInstanceCreator(modelConstructor,result)]}}))}))},AsyncStorageAdapter.prototype.delete=function(modelOrModelConstructor,condition){return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var deleteQueue,models,model,modelConstructor,nameSpace,storeName,fromDB,predicates,predicateObjs,type,msg,relations,deletedModels;return AsyncStorageAdapter_generator(this,(function(_a){switch(_a.label){case 0:return deleteQueue=[],Object(util.s)(modelOrModelConstructor)?(modelConstructor=modelOrModelConstructor,nameSpace=this.namespaceResolver(modelConstructor),[4,this.query(modelConstructor,condition)]):[3,8];case 1:return models=_a.sent(),relations=this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes,void 0===condition?[3,4]:[4,this.deleteTraverse(relations,models,modelConstructor.name,nameSpace,deleteQueue)];case 2:return _a.sent(),[4,this.deleteItem(deleteQueue)];case 3:return _a.sent(),deletedModels=deleteQueue.reduce((function(acc,_a){var items=_a.items;return acc.concat(items)}),[]),[2,[models,deletedModels]];case 4:return[4,this.deleteTraverse(relations,models,modelConstructor.name,nameSpace,deleteQueue)];case 5:return _a.sent(),[4,this.deleteItem(deleteQueue)];case 6:return _a.sent(),deletedModels=deleteQueue.reduce((function(acc,_a){var items=_a.items;return acc.concat(items)}),[]),[2,[models,deletedModels]];case 7:return[3,15];case 8:return model=modelOrModelConstructor,modelConstructor=Object.getPrototypeOf(model).constructor,nameSpace=this.namespaceResolver(modelConstructor),storeName=this.getStorenameForModel(modelConstructor),condition?[4,this.db.get(model.id,storeName)]:[3,11];case 9:if(void 0===(fromDB=_a.sent()))return msg="Model instance not found in storage",logger.warn(msg,{model:model}),[2,[[model],[]]];if(predicates=lib_esm_predicates.a.getPredicates(condition),predicateObjs=predicates.predicates,type=predicates.type,!Object(util.y)(fromDB,type,predicateObjs))throw msg="Conditional update failed",logger.error(msg,{model:fromDB,condition:predicateObjs}),new Error(msg);return relations=this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes,[4,this.deleteTraverse(relations,[model],modelConstructor.name,nameSpace,deleteQueue)];case 10:return _a.sent(),[3,13];case 11:return relations=this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes,[4,this.deleteTraverse(relations,[model],modelConstructor.name,nameSpace,deleteQueue)];case 12:_a.sent(),_a.label=13;case 13:return[4,this.deleteItem(deleteQueue)];case 14:return _a.sent(),deletedModels=deleteQueue.reduce((function(acc,_a){var items=_a.items;return acc.concat(items)}),[]),[2,[[model],deletedModels]];case 15:return[2]}}))}))},AsyncStorageAdapter.prototype.deleteItem=function(deleteQueue){var deleteQueue_1,deleteQueue_1_1,e_5,_a,e_6,_b;return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var deleteItem,storeName,items,items_1,items_1_1,item,id,e_6_1,e_5_1;return AsyncStorageAdapter_generator(this,(function(_c){switch(_c.label){case 0:_c.trys.push([0,17,18,23]),deleteQueue_1=__asyncValues(deleteQueue),_c.label=1;case 1:return[4,deleteQueue_1.next()];case 2:if((deleteQueue_1_1=_c.sent()).done)return[3,16];deleteItem=deleteQueue_1_1.value,storeName=deleteItem.storeName,items=deleteItem.items,_c.label=3;case 3:_c.trys.push([3,9,10,15]),items_1=__asyncValues(items),_c.label=4;case 4:return[4,items_1.next()];case 5:return(items_1_1=_c.sent()).done?[3,8]:(item=items_1_1.value)?"object"!=typeof item?[3,7]:(id=item.id,[4,this.db.delete(id,storeName)]):[3,7];case 6:_c.sent(),_c.label=7;case 7:return[3,4];case 8:return[3,15];case 9:return e_6_1=_c.sent(),e_6={error:e_6_1},[3,15];case 10:return _c.trys.push([10,,13,14]),items_1_1&&!items_1_1.done&&(_b=items_1.return)?[4,_b.call(items_1)]:[3,12];case 11:_c.sent(),_c.label=12;case 12:return[3,14];case 13:if(e_6)throw e_6.error;return[7];case 14:return[7];case 15:return[3,1];case 16:return[3,23];case 17:return e_5_1=_c.sent(),e_5={error:e_5_1},[3,23];case 18:return _c.trys.push([18,,21,22]),deleteQueue_1_1&&!deleteQueue_1_1.done&&(_a=deleteQueue_1.return)?[4,_a.call(deleteQueue_1)]:[3,20];case 19:_c.sent(),_c.label=20;case 20:return[3,22];case 21:if(e_5)throw e_5.error;return[7];case 22:return[7];case 23:return[2]}}))}))},AsyncStorageAdapter.prototype.deleteTraverse=function(relations,models,srcModel,nameSpace,deleteQueue){var relations_2,relations_2_1,models_1,models_1_1,models_2,models_2_1,e_7,_a,e_8,_b,e_9,_c;return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var rel,relationType,modelName,storeName,index,recordToDelete,e_8_1,model,allRecords,childrenArray,e_9_1,e_7_1,_this=this;return AsyncStorageAdapter_generator(this,(function(_e){switch(_e.label){case 0:_e.trys.push([0,35,36,41]),relations_2=__asyncValues(relations),_e.label=1;case 1:return[4,relations_2.next()];case 2:if((relations_2_1=_e.sent()).done)return[3,34];switch(rel=relations_2_1.value,relationType=rel.relationType,modelName=rel.modelName,storeName=this.getStorename(nameSpace,modelName),index=Object(util.g)(this.schema.namespaces[nameSpace].relationships[modelName].relationTypes,srcModel)||Object(util.h)(this.schema.namespaces[nameSpace].relationships[modelName].indexes,rel.associatedWith),relationType){case"HAS_ONE":return[3,3];case"HAS_MANY":return[3,17];case"BELONGS_TO":return[3,31]}return[3,32];case 3:_e.trys.push([3,10,11,16]),models_1=__asyncValues(models),_e.label=4;case 4:return[4,models_1.next()];case 5:return(models_1_1=_e.sent()).done?[3,9]:(model=models_1_1.value,[4,this.db.getAll(storeName)]);case 6:return allRecords=_e.sent(),recordToDelete=allRecords.filter((function(childItem){return childItem[index]===model.id})),[4,this.deleteTraverse(this.schema.namespaces[nameSpace].relationships[modelName].relationTypes,recordToDelete,modelName,nameSpace,deleteQueue)];case 7:_e.sent(),_e.label=8;case 8:return[3,4];case 9:return[3,16];case 10:return e_8_1=_e.sent(),e_8={error:e_8_1},[3,16];case 11:return _e.trys.push([11,,14,15]),models_1_1&&!models_1_1.done&&(_b=models_1.return)?[4,_b.call(models_1)]:[3,13];case 12:_e.sent(),_e.label=13;case 13:return[3,15];case 14:if(e_8)throw e_8.error;return[7];case 15:return[7];case 16:return[3,33];case 17:_e.trys.push([17,24,25,30]),models_2=__asyncValues(models),_e.label=18;case 18:return[4,models_2.next()];case 19:return(models_2_1=_e.sent()).done?[3,23]:(model=models_2_1.value,[4,this.db.getAll(storeName)]);case 20:return allRecords=_e.sent(),childrenArray=allRecords.filter((function(childItem){return childItem[index]===model.id})),[4,this.deleteTraverse(this.schema.namespaces[nameSpace].relationships[modelName].relationTypes,childrenArray,modelName,nameSpace,deleteQueue)];case 21:_e.sent(),_e.label=22;case 22:return[3,18];case 23:return[3,30];case 24:return e_9_1=_e.sent(),e_9={error:e_9_1},[3,30];case 25:return _e.trys.push([25,,28,29]),models_2_1&&!models_2_1.done&&(_c=models_2.return)?[4,_c.call(models_2)]:[3,27];case 26:_e.sent(),_e.label=27;case 27:return[3,29];case 28:if(e_9)throw e_9.error;return[7];case 29:return[7];case 30:case 31:return[3,33];case 32:return Object(util.f)(relationType),[3,33];case 33:return[3,1];case 34:return[3,41];case 35:return e_7_1=_e.sent(),e_7={error:e_7_1},[3,41];case 36:return _e.trys.push([36,,39,40]),relations_2_1&&!relations_2_1.done&&(_a=relations_2.return)?[4,_a.call(relations_2)]:[3,38];case 37:_e.sent(),_e.label=38;case 38:return[3,40];case 39:if(e_7)throw e_7.error;return[7];case 40:return[7];case 41:return deleteQueue.push({storeName:this.getStorename(nameSpace,srcModel),items:models.map((function(record){return _this.modelInstanceCreator(_this.getModelConstructorByModelName(nameSpace,srcModel),record)}))}),[2]}}))}))},AsyncStorageAdapter.prototype.clear=function(){return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){return AsyncStorageAdapter_generator(this,(function(_a){switch(_a.label){case 0:return[4,this.db.clear()];case 1:return _a.sent(),this.db=void 0,this.initPromise=void 0,[2]}}))}))},AsyncStorageAdapter.prototype.batchSave=function(modelConstructor,items){return AsyncStorageAdapter_awaiter(this,void 0,void 0,(function(){var modelName,namespaceName,storeName,batch,_loop_1,this_1,items_2,items_2_1,item,e_10,_a;return AsyncStorageAdapter_generator(this,(function(_b){switch(_b.label){case 0:modelName=modelConstructor.name,namespaceName=this.namespaceResolver(modelConstructor),storeName=this.getStorename(namespaceName,modelName),batch=[],_loop_1=function(item){var id=item.id,instance=Object(util.x)(modelConstructor.name,this_1.modelInstanceCreator(modelConstructor,item),this_1.schema.namespaces[this_1.namespaceResolver(modelConstructor)],this_1.modelInstanceCreator,this_1.getModelConstructorByModelName).find((function(_a){return _a.instance.id===id})).instance;batch.push(instance)},this_1=this;try{for(items_2=AsyncStorageAdapter_values(items),items_2_1=items_2.next();!items_2_1.done;items_2_1=items_2.next())item=items_2_1.value,_loop_1(item)}catch(e_10_1){e_10={error:e_10_1}}finally{try{items_2_1&&!items_2_1.done&&(_a=items_2.return)&&_a.call(items_2)}finally{if(e_10)throw e_10.error}}return[4,this.db.batchSave(storeName,batch)];case 1:return[2,_b.sent()]}}))}))},AsyncStorageAdapter}();__webpack_exports__.default=new AsyncStorageAdapter_AsyncStorageAdapter},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var ConsoleLogger=__webpack_require__(84);let idbProxyableTypes,cursorAdvanceMethods;const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;let idbProxyTraps={get(target,prop,receiver){if(target instanceof IDBTransaction){if("done"===prop)return transactionDoneMap.get(target);if("objectStoreNames"===prop)return target.objectStoreNames||transactionStoreNamesMap.get(target);if("store"===prop)return receiver.objectStoreNames[1]?void 0:receiver.objectStore(receiver.objectStoreNames[0])}return wrap(target[prop])},set:(target,prop,value)=>(target[prop]=value,!0),has:(target,prop)=>target instanceof IDBTransaction&&("done"===prop||"store"===prop)||prop in target};function wrapFunction(func){return func!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(func)?function(...args){return func.apply(unwrap(this),args),wrap(cursorRequestMap.get(this))}:function(...args){return wrap(func.apply(unwrap(this),args))}:function(storeNames,...args){const tx=func.call(unwrap(this),storeNames,...args);return transactionStoreNamesMap.set(tx,storeNames.sort?storeNames.sort():[storeNames]),wrap(tx)}}function transformCachableValue(value){return"function"==typeof value?wrapFunction(value):(value instanceof IDBTransaction&&function(tx){if(transactionDoneMap.has(tx))return;const done=new Promise(((resolve,reject)=>{const unlisten=()=>{tx.removeEventListener("complete",complete),tx.removeEventListener("error",error),tx.removeEventListener("abort",error)},complete=()=>{resolve(),unlisten()},error=()=>{reject(tx.error||new DOMException("AbortError","AbortError")),unlisten()};tx.addEventListener("complete",complete),tx.addEventListener("error",error),tx.addEventListener("abort",error)}));transactionDoneMap.set(tx,done)}(value),object=value,(idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((c=>object instanceof c))?new Proxy(value,idbProxyTraps):value);var object}function wrap(value){if(value instanceof IDBRequest)return function(request){const promise=new Promise(((resolve,reject)=>{const unlisten=()=>{request.removeEventListener("success",success),request.removeEventListener("error",error)},success=()=>{resolve(wrap(request.result)),unlisten()},error=()=>{reject(request.error),unlisten()};request.addEventListener("success",success),request.addEventListener("error",error)}));return promise.then((value=>{value instanceof IDBCursor&&cursorRequestMap.set(value,request)})).catch((()=>{})),reverseTransformCache.set(promise,request),promise}(value);if(transformCache.has(value))return transformCache.get(value);const newValue=transformCachableValue(value);return newValue!==value&&(transformCache.set(value,newValue),reverseTransformCache.set(newValue,value)),newValue}const unwrap=value=>reverseTransformCache.get(value);function openDB(name,version,{blocked:blocked,upgrade:upgrade,blocking:blocking,terminated:terminated}={}){const request=indexedDB.open(name,version),openPromise=wrap(request);return upgrade&&request.addEventListener("upgradeneeded",(event=>{upgrade(wrap(request.result),event.oldVersion,event.newVersion,wrap(request.transaction))})),blocked&&request.addEventListener("blocked",(()=>blocked())),openPromise.then((db=>{terminated&&db.addEventListener("close",(()=>terminated())),blocking&&db.addEventListener("versionchange",(()=>blocking()))})).catch((()=>{})),openPromise}function deleteDB(name,{blocked:blocked}={}){const request=indexedDB.deleteDatabase(name);return blocked&&request.addEventListener("blocked",(()=>blocked())),wrap(request).then((()=>{}))}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(target,prop){if(!(target instanceof IDBDatabase)||prop in target||"string"!=typeof prop)return;if(cachedMethods.get(prop))return cachedMethods.get(prop);const targetFuncName=prop.replace(/FromIndex$/,""),useIndex=prop!==targetFuncName,isWrite=writeMethods.includes(targetFuncName);if(!(targetFuncName in(useIndex?IDBIndex:IDBObjectStore).prototype)||!isWrite&&!readMethods.includes(targetFuncName))return;const method=async function(storeName,...args){const tx=this.transaction(storeName,isWrite?"readwrite":"readonly");let target=tx.store;useIndex&&(target=target.index(args.shift()));const returnVal=await target[targetFuncName](...args);return isWrite&&await tx.done,returnVal};return cachedMethods.set(prop,method),method}idbProxyTraps=(oldTraps=>({...oldTraps,get:(target,prop,receiver)=>getMethod(target,prop)||oldTraps.get(target,prop,receiver),has:(target,prop)=>!!getMethod(target,prop)||oldTraps.has(target,prop)}))(idbProxyTraps);var lib_esm_predicates=__webpack_require__(14),sort=__webpack_require__(300),types=__webpack_require__(8),util=__webpack_require__(5),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__asyncValues=function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o="function"==typeof __values?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}},__values=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},logger=new ConsoleLogger.a("DataStore"),IndexedDBAdapter_IndexedDBAdapter=function(){function IndexedDBAdapter(){this.dbName="amplify-datastore"}return IndexedDBAdapter.prototype.checkPrivate=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,Object(util.u)().then((function(isPrivate){return isPrivate}))];case 1:return _a.sent()?(logger.error("IndexedDB not supported in this browser's private mode"),[2,Promise.reject("IndexedDB not supported in this browser's private mode")]):[2,Promise.resolve()]}}))}))},IndexedDBAdapter.prototype.getStorenameForModel=function(modelConstructor){var namespace=this.namespaceResolver(modelConstructor),modelName=modelConstructor.name;return this.getStorename(namespace,modelName)},IndexedDBAdapter.prototype.getStorename=function(namespace,modelName){return namespace+"_"+modelName},IndexedDBAdapter.prototype.setUp=function(theSchema,namespaceResolver,modelInstanceCreator,getModelConstructorByModelName,sessionId){return __awaiter(this,void 0,void 0,(function(){var _a,error_1,_this=this;return __generator(this,(function(_b){switch(_b.label){case 0:return[4,this.checkPrivate()];case 1:return _b.sent(),this.initPromise?[3,2]:(this.initPromise=new Promise((function(res,rej){_this.resolve=res,_this.reject=rej})),[3,4]);case 2:return[4,this.initPromise];case 3:_b.sent(),_b.label=4;case 4:sessionId&&(this.dbName="amplify-datastore-"+sessionId),this.schema=theSchema,this.namespaceResolver=namespaceResolver,this.modelInstanceCreator=modelInstanceCreator,this.getModelConstructorByModelName=getModelConstructorByModelName,_b.label=5;case 5:return _b.trys.push([5,8,,9]),this.db?[3,7]:(2,_a=this,[4,openDB(this.dbName,2,{upgrade:function(db,oldVersion,newVersion,txn){return __awaiter(_this,void 0,void 0,(function(){var _a,_b,storeName,origStore,tmpName,newStore,cursor,count,e_1_1,error_2,e_1,_c,_this=this;return __generator(this,(function(_d){switch(_d.label){case 0:if(0===oldVersion)return Object.keys(theSchema.namespaces).forEach((function(namespaceName){var namespace=theSchema.namespaces[namespaceName];Object.keys(namespace.models).forEach((function(modelName){var storeName=_this.getStorename(namespaceName,modelName),store=db.createObjectStore(storeName,{autoIncrement:!0});_this.schema.namespaces[namespaceName].relationships[modelName].indexes.forEach((function(index){return store.createIndex(index,index)})),store.createIndex("byId","id",{unique:!0})}))})),[2];if(1!==oldVersion||2!==newVersion)return[3,16];_d.label=1;case 1:_d.trys.push([1,14,,15]),_d.label=2;case 2:_d.trys.push([2,11,12,13]),_a=__values(txn.objectStoreNames),_b=_a.next(),_d.label=3;case 3:return _b.done?[3,10]:(storeName=_b.value,origStore=txn.objectStore(storeName),tmpName="tmp_"+storeName,origStore.name=tmpName,(newStore=db.createObjectStore(storeName,{keyPath:void 0,autoIncrement:!0})).createIndex("byId","id",{unique:!0}),[4,origStore.openCursor()]);case 4:cursor=_d.sent(),count=0,_d.label=5;case 5:return cursor&&cursor.value?[4,newStore.put(cursor.value)]:[3,8];case 6:return _d.sent(),[4,cursor.continue()];case 7:return cursor=_d.sent(),count++,[3,5];case 8:db.deleteObjectStore(tmpName),logger.debug(count+" "+storeName+" records migrated"),_d.label=9;case 9:return _b=_a.next(),[3,3];case 10:return[3,13];case 11:return e_1_1=_d.sent(),e_1={error:e_1_1},[3,13];case 12:try{_b&&!_b.done&&(_c=_a.return)&&_c.call(_a)}finally{if(e_1)throw e_1.error}return[7];case 13:return[3,15];case 14:throw error_2=_d.sent(),logger.error("Error migrating IndexedDB data",error_2),txn.abort(),error_2;case 15:case 16:return[2]}}))}))}})]);case 6:_a.db=_b.sent(),this.resolve(),_b.label=7;case 7:return[3,9];case 8:return error_1=_b.sent(),this.reject(error_1),[3,9];case 9:return[2]}}))}))},IndexedDBAdapter.prototype._get=function(storeOrStoreName,id){return __awaiter(this,void 0,void 0,(function(){var index,storeName;return __generator(this,(function(_a){switch(_a.label){case 0:return"string"==typeof storeOrStoreName?(storeName=storeOrStoreName,index=this.db.transaction(storeName,"readonly").store.index("byId")):index=storeOrStoreName.index("byId"),[4,index.get(id)];case 1:return[2,_a.sent()]}}))}))},IndexedDBAdapter.prototype.save=function(model,condition){var e_2,_a;return __awaiter(this,void 0,void 0,(function(){var modelConstructor,storeName,connectedModels,namespaceName,set,connectionStoreNames,tx,store,fromDB,predicates,predicateObjs,type,msg,result,connectionStoreNames_1,connectionStoreNames_1_1,resItem,storeName_1,item,instance,store_1,id,opType,key,e_2_1,_this=this;return __generator(this,(function(_b){switch(_b.label){case 0:return[4,this.checkPrivate()];case 1:return _b.sent(),modelConstructor=Object.getPrototypeOf(model).constructor,storeName=this.getStorenameForModel(modelConstructor),connectedModels=Object(util.x)(modelConstructor.name,model,this.schema.namespaces[this.namespaceResolver(modelConstructor)],this.modelInstanceCreator,this.getModelConstructorByModelName),namespaceName=this.namespaceResolver(modelConstructor),set=new Set,connectionStoreNames=Object.values(connectedModels).map((function(_a){var modelName=_a.modelName,item=_a.item,instance=_a.instance,storeName=_this.getStorename(namespaceName,modelName);return set.add(storeName),{storeName:storeName,item:item,instance:instance}})),tx=this.db.transaction(__spread([storeName],Array.from(set.values())),"readwrite"),store=tx.objectStore(storeName),[4,this._get(store,model.id)];case 2:if(fromDB=_b.sent(),condition&&fromDB&&(predicates=lib_esm_predicates.a.getPredicates(condition),predicateObjs=predicates.predicates,type=predicates.type,!Object(util.y)(fromDB,type,predicateObjs)))throw msg="Conditional update failed",logger.error(msg,{model:fromDB,condition:predicateObjs}),new Error(msg);result=[],_b.label=3;case 3:_b.trys.push([3,14,15,20]),connectionStoreNames_1=__asyncValues(connectionStoreNames),_b.label=4;case 4:return[4,connectionStoreNames_1.next()];case 5:return(connectionStoreNames_1_1=_b.sent()).done?[3,13]:(resItem=connectionStoreNames_1_1.value,storeName_1=resItem.storeName,item=resItem.item,instance=resItem.instance,store_1=tx.objectStore(storeName_1),id=item.id,[4,this._get(store_1,id)]);case 6:return opType=void 0===_b.sent()?types.c.INSERT:types.c.UPDATE,id!==model.id?[3,9]:[4,store_1.index("byId").getKey(item.id)];case 7:return key=_b.sent(),[4,store_1.put(item,key)];case 8:return _b.sent(),result.push([instance,opType]),[3,12];case 9:return opType!==types.c.INSERT?[3,12]:[4,store_1.index("byId").getKey(item.id)];case 10:return key=_b.sent(),[4,store_1.put(item,key)];case 11:_b.sent(),result.push([instance,opType]),_b.label=12;case 12:return[3,4];case 13:return[3,20];case 14:return e_2_1=_b.sent(),e_2={error:e_2_1},[3,20];case 15:return _b.trys.push([15,,18,19]),connectionStoreNames_1_1&&!connectionStoreNames_1_1.done&&(_a=connectionStoreNames_1.return)?[4,_a.call(connectionStoreNames_1)]:[3,17];case 16:_b.sent(),_b.label=17;case 17:return[3,19];case 18:if(e_2)throw e_2.error;return[7];case 19:return[7];case 20:return[4,tx.done];case 21:return _b.sent(),[2,result]}}))}))},IndexedDBAdapter.prototype.load=function(namespaceName,srcModelName,records){var records_1,records_1_1,records_2,records_2_1,e_3,_a,e_4,_b,e_5,_c;return __awaiter(this,void 0,void 0,(function(){var namespace,relations,connectionStoreNames,modelConstructor,tx,relations_1,relations_1_1,relation,fieldName,modelName,targetName,storeName,store,modelConstructor_1,e_4_1,recordItem,connectionRecord,e_5_1,e_3_1,_this=this;return __generator(this,(function(_e){switch(_e.label){case 0:if(namespace=this.schema.namespaces[namespaceName],relations=namespace.relationships[srcModelName].relationTypes,connectionStoreNames=relations.map((function(_a){var modelName=_a.modelName;return _this.getStorename(namespaceName,modelName)})),modelConstructor=this.getModelConstructorByModelName(namespaceName,srcModelName),0===connectionStoreNames.length)return[2,records.map((function(record){return _this.modelInstanceCreator(modelConstructor,record)}))];tx=this.db.transaction(__spread(connectionStoreNames),"readonly"),_e.label=1;case 1:_e.trys.push([1,34,35,40]),relations_1=__asyncValues(relations),_e.label=2;case 2:return[4,relations_1.next()];case 3:if((relations_1_1=_e.sent()).done)return[3,33];switch(relation=relations_1_1.value,fieldName=relation.fieldName,modelName=relation.modelName,targetName=relation.targetName,storeName=this.getStorename(namespaceName,modelName),store=tx.objectStore(storeName),modelConstructor_1=this.getModelConstructorByModelName(namespaceName,modelName),relation.relationType){case"HAS_ONE":return[3,4];case"BELONGS_TO":return[3,17];case"HAS_MANY":return[3,30]}return[3,31];case 4:_e.trys.push([4,10,11,16]),records_1=__asyncValues(records),_e.label=5;case 5:return[4,records_1.next()];case 6:return(records_1_1=_e.sent()).done?[3,9]:(recordItem=records_1_1.value)[fieldName]?[4,this._get(store,recordItem[fieldName])]:[3,8];case 7:connectionRecord=_e.sent(),recordItem[fieldName]=connectionRecord&&this.modelInstanceCreator(modelConstructor_1,connectionRecord),_e.label=8;case 8:return[3,5];case 9:return[3,16];case 10:return e_4_1=_e.sent(),e_4={error:e_4_1},[3,16];case 11:return _e.trys.push([11,,14,15]),records_1_1&&!records_1_1.done&&(_b=records_1.return)?[4,_b.call(records_1)]:[3,13];case 12:_e.sent(),_e.label=13;case 13:return[3,15];case 14:if(e_4)throw e_4.error;return[7];case 15:return[7];case 16:return[3,32];case 17:_e.trys.push([17,23,24,29]),records_2=__asyncValues(records),_e.label=18;case 18:return[4,records_2.next()];case 19:return(records_2_1=_e.sent()).done?[3,22]:(recordItem=records_2_1.value)[targetName]?[4,this._get(store,recordItem[targetName])]:[3,21];case 20:connectionRecord=_e.sent(),recordItem[fieldName]=connectionRecord&&this.modelInstanceCreator(modelConstructor_1,connectionRecord),delete recordItem[targetName],_e.label=21;case 21:return[3,18];case 22:return[3,29];case 23:return e_5_1=_e.sent(),e_5={error:e_5_1},[3,29];case 24:return _e.trys.push([24,,27,28]),records_2_1&&!records_2_1.done&&(_c=records_2.return)?[4,_c.call(records_2)]:[3,26];case 25:_e.sent(),_e.label=26;case 26:return[3,28];case 27:if(e_5)throw e_5.error;return[7];case 28:return[7];case 29:case 30:return[3,32];case 31:return Object(util.f)(relation.relationType),[3,32];case 32:return[3,2];case 33:return[3,40];case 34:return e_3_1=_e.sent(),e_3={error:e_3_1},[3,40];case 35:return _e.trys.push([35,,38,39]),relations_1_1&&!relations_1_1.done&&(_a=relations_1.return)?[4,_a.call(relations_1)]:[3,37];case 36:_e.sent(),_e.label=37;case 37:return[3,39];case 38:if(e_3)throw e_3.error;return[7];case 39:return[7];case 40:return[2,records.map((function(record){return _this.modelInstanceCreator(modelConstructor,record)}))]}}))}))},IndexedDBAdapter.prototype.query=function(modelConstructor,predicate,pagination){return __awaiter(this,void 0,void 0,(function(){var storeName,namespaceName,sortSpecified,predicates,predicateObjs_1,type_1,idPredicate,id,record,_a,filtered,all,_b,_c;return __generator(this,(function(_d){switch(_d.label){case 0:return[4,this.checkPrivate()];case 1:return _d.sent(),storeName=this.getStorenameForModel(modelConstructor),namespaceName=this.namespaceResolver(modelConstructor),sortSpecified=pagination&&pagination.sort,predicate?(predicates=lib_esm_predicates.a.getPredicates(predicate))?(predicateObjs_1=predicates.predicates,type_1=predicates.type,(idPredicate=1===predicateObjs_1.length&&predicateObjs_1.find((function(p){return Object(types.k)(p)&&"id"===p.field&&"eq"===p.operator})))?(id=idPredicate.operand,[4,this._get(storeName,id)]):[3,5]):[3,8]:[3,8];case 2:return(record=_d.sent())?[4,this.load(namespaceName,modelConstructor.name,[record])]:[3,4];case 3:return _a=__read.apply(void 0,[_d.sent(),1]),[2,[_a[0]]];case 4:return[2,[]];case 5:return[4,this.db.getAll(storeName)];case 6:return all=_d.sent(),filtered=predicateObjs_1?all.filter((function(m){return Object(util.y)(m,type_1,predicateObjs_1)})):all,[4,this.load(namespaceName,modelConstructor.name,this.inMemoryPagination(filtered,pagination))];case 7:return[2,_d.sent()];case 8:return sortSpecified?[4,this.db.getAll(storeName)]:[3,11];case 9:return all=_d.sent(),[4,this.load(namespaceName,modelConstructor.name,this.inMemoryPagination(all,pagination))];case 10:return[2,_d.sent()];case 11:return _b=this.load,_c=[namespaceName,modelConstructor.name],[4,this.enginePagination(storeName,pagination)];case 12:return[4,_b.apply(this,_c.concat([_d.sent()]))];case 13:return[2,_d.sent()]}}))}))},IndexedDBAdapter.prototype.inMemoryPagination=function(records,pagination){if(pagination){if(pagination.sort){var sortPredicates=sort.a.getPredicates(pagination.sort);if(sortPredicates.length){var compareFn=Object(util.w)(sortPredicates);records.sort(compareFn)}}var _a=pagination.page,page=void 0===_a?0:_a,_b=pagination.limit,limit=void 0===_b?0:_b,start=Math.max(0,page*limit)||0,end=limit>0?start+limit:records.length;return records.slice(start,end)}return records},IndexedDBAdapter.prototype.enginePagination=function(storeName,pagination){return __awaiter(this,void 0,void 0,(function(){var result,_a,page,_b,limit,initialRecord,cursor,pageResults,hasLimit,moreRecords,itemsLeft;return __generator(this,(function(_c){switch(_c.label){case 0:return pagination?(_a=pagination.page,page=void 0===_a?0:_a,_b=pagination.limit,limit=void 0===_b?0:_b,initialRecord=Math.max(0,page*limit)||0,[4,this.db.transaction(storeName).objectStore(storeName).openCursor()]):[3,7];case 1:return(cursor=_c.sent())&&initialRecord>0?[4,cursor.advance(initialRecord)]:[3,3];case 2:_c.sent(),_c.label=3;case 3:pageResults=[],hasLimit="number"==typeof limit&&limit>0,moreRecords=!0,itemsLeft=limit,_c.label=4;case 4:return moreRecords&&cursor&&cursor.value?(pageResults.push(cursor.value),[4,cursor.continue()]):[3,6];case 5:return cursor=_c.sent(),hasLimit?(itemsLeft--,moreRecords=itemsLeft>0&&null!==cursor):moreRecords=null!==cursor,[3,4];case 6:return result=pageResults,[3,9];case 7:return[4,this.db.getAll(storeName)];case 8:result=_c.sent(),_c.label=9;case 9:return[2,result]}}))}))},IndexedDBAdapter.prototype.queryOne=function(modelConstructor,firstOrLast){return void 0===firstOrLast&&(firstOrLast=types.d.FIRST),__awaiter(this,void 0,void 0,(function(){var storeName,cursor,result;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.checkPrivate()];case 1:return _a.sent(),storeName=this.getStorenameForModel(modelConstructor),[4,this.db.transaction([storeName],"readonly").objectStore(storeName).openCursor(void 0,firstOrLast===types.d.FIRST?"next":"prev")];case 2:return cursor=_a.sent(),[2,(result=cursor?cursor.value:void 0)&&this.modelInstanceCreator(modelConstructor,result)]}}))}))},IndexedDBAdapter.prototype.delete=function(modelOrModelConstructor,condition){return __awaiter(this,void 0,void 0,(function(){var deleteQueue,models,model,modelConstructor,nameSpace,storeName,tx,store,fromDB,predicates,predicateObjs,type,msg,relations,deletedModels;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.checkPrivate()];case 1:return _a.sent(),deleteQueue=[],Object(util.s)(modelOrModelConstructor)?(modelConstructor=modelOrModelConstructor,nameSpace=this.namespaceResolver(modelConstructor),storeName=this.getStorenameForModel(modelConstructor),[4,this.query(modelConstructor,condition)]):[3,9];case 2:return models=_a.sent(),relations=this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes,void 0===condition?[3,5]:[4,this.deleteTraverse(relations,models,modelConstructor.name,nameSpace,deleteQueue)];case 3:return _a.sent(),[4,this.deleteItem(deleteQueue)];case 4:return _a.sent(),deletedModels=deleteQueue.reduce((function(acc,_a){var items=_a.items;return acc.concat(items)}),[]),[2,[models,deletedModels]];case 5:return[4,this.deleteTraverse(relations,models,modelConstructor.name,nameSpace,deleteQueue)];case 6:return _a.sent(),[4,this.db.transaction([storeName],"readwrite").objectStore(storeName).clear()];case 7:return _a.sent(),deletedModels=deleteQueue.reduce((function(acc,_a){var items=_a.items;return acc.concat(items)}),[]),[2,[models,deletedModels]];case 8:return[3,17];case 9:return model=modelOrModelConstructor,modelConstructor=Object.getPrototypeOf(model).constructor,nameSpace=this.namespaceResolver(modelConstructor),storeName=this.getStorenameForModel(modelConstructor),condition?(tx=this.db.transaction([storeName],"readwrite"),store=tx.objectStore(storeName),[4,this._get(store,model.id)]):[3,13];case 10:if(void 0===(fromDB=_a.sent()))return msg="Model instance not found in storage",logger.warn(msg,{model:model}),[2,[[model],[]]];if(predicates=lib_esm_predicates.a.getPredicates(condition),predicateObjs=predicates.predicates,type=predicates.type,!Object(util.y)(fromDB,type,predicateObjs))throw msg="Conditional update failed",logger.error(msg,{model:fromDB,condition:predicateObjs}),new Error(msg);return[4,tx.done];case 11:return _a.sent(),relations=this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes,[4,this.deleteTraverse(relations,[model],modelConstructor.name,nameSpace,deleteQueue)];case 12:return _a.sent(),[3,15];case 13:return relations=this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes,[4,this.deleteTraverse(relations,[model],modelConstructor.name,nameSpace,deleteQueue)];case 14:_a.sent(),_a.label=15;case 15:return[4,this.deleteItem(deleteQueue)];case 16:return _a.sent(),deletedModels=deleteQueue.reduce((function(acc,_a){var items=_a.items;return acc.concat(items)}),[]),[2,[[model],deletedModels]];case 17:return[2]}}))}))},IndexedDBAdapter.prototype.deleteItem=function(deleteQueue){var deleteQueue_1,deleteQueue_1_1,e_6,_a,e_7,_b;return __awaiter(this,void 0,void 0,(function(){var connectionStoreNames,tx,deleteItem,storeName,items,store,items_1,items_1_1,item,key,e_7_1,e_6_1;return __generator(this,(function(_c){switch(_c.label){case 0:connectionStoreNames=deleteQueue.map((function(_a){return _a.storeName})),tx=this.db.transaction(__spread(connectionStoreNames),"readwrite"),_c.label=1;case 1:_c.trys.push([1,22,23,28]),deleteQueue_1=__asyncValues(deleteQueue),_c.label=2;case 2:return[4,deleteQueue_1.next()];case 3:if((deleteQueue_1_1=_c.sent()).done)return[3,21];deleteItem=deleteQueue_1_1.value,storeName=deleteItem.storeName,items=deleteItem.items,store=tx.objectStore(storeName),_c.label=4;case 4:_c.trys.push([4,14,15,20]),items_1=__asyncValues(items),_c.label=5;case 5:return[4,items_1.next()];case 6:return(items_1_1=_c.sent()).done?[3,13]:(item=items_1_1.value)?(key=void 0,"object"!=typeof item?[3,8]:[4,store.index("byId").getKey(item.id)]):[3,12];case 7:return key=_c.sent(),[3,10];case 8:return[4,store.index("byId").getKey(item.toString())];case 9:key=_c.sent(),_c.label=10;case 10:return void 0===key?[3,12]:[4,store.delete(key)];case 11:_c.sent(),_c.label=12;case 12:return[3,5];case 13:return[3,20];case 14:return e_7_1=_c.sent(),e_7={error:e_7_1},[3,20];case 15:return _c.trys.push([15,,18,19]),items_1_1&&!items_1_1.done&&(_b=items_1.return)?[4,_b.call(items_1)]:[3,17];case 16:_c.sent(),_c.label=17;case 17:return[3,19];case 18:if(e_7)throw e_7.error;return[7];case 19:return[7];case 20:return[3,2];case 21:return[3,28];case 22:return e_6_1=_c.sent(),e_6={error:e_6_1},[3,28];case 23:return _c.trys.push([23,,26,27]),deleteQueue_1_1&&!deleteQueue_1_1.done&&(_a=deleteQueue_1.return)?[4,_a.call(deleteQueue_1)]:[3,25];case 24:_c.sent(),_c.label=25;case 25:return[3,27];case 26:if(e_6)throw e_6.error;return[7];case 27:return[7];case 28:return[2]}}))}))},IndexedDBAdapter.prototype.deleteTraverse=function(relations,models,srcModel,nameSpace,deleteQueue){var relations_2,relations_2_1,models_1,models_1_1,models_2,models_2_1,e_8,_a,e_9,_b,e_10,_c;return __awaiter(this,void 0,void 0,(function(){var rel,relationType,modelName,storeName,index,recordToDelete,e_9_1,model,childrenArray,e_10_1,e_8_1,_this=this;return __generator(this,(function(_e){switch(_e.label){case 0:_e.trys.push([0,35,36,41]),relations_2=__asyncValues(relations),_e.label=1;case 1:return[4,relations_2.next()];case 2:if((relations_2_1=_e.sent()).done)return[3,34];switch(rel=relations_2_1.value,relationType=rel.relationType,rel.fieldName,modelName=rel.modelName,storeName=this.getStorename(nameSpace,modelName),index=Object(util.g)(this.schema.namespaces[nameSpace].relationships[modelName].relationTypes,srcModel)||Object(util.h)(this.schema.namespaces[nameSpace].relationships[modelName].indexes,rel.associatedWith),relationType){case"HAS_ONE":return[3,3];case"HAS_MANY":return[3,17];case"BELONGS_TO":return[3,31]}return[3,32];case 3:_e.trys.push([3,10,11,16]),models_1=__asyncValues(models),_e.label=4;case 4:return[4,models_1.next()];case 5:return(models_1_1=_e.sent()).done?[3,9]:(model=models_1_1.value,[4,this.db.transaction(storeName,"readwrite").objectStore(storeName).index(index).get(model.id)]);case 6:return recordToDelete=_e.sent(),[4,this.deleteTraverse(this.schema.namespaces[nameSpace].relationships[modelName].relationTypes,recordToDelete?[recordToDelete]:[],modelName,nameSpace,deleteQueue)];case 7:_e.sent(),_e.label=8;case 8:return[3,4];case 9:return[3,16];case 10:return e_9_1=_e.sent(),e_9={error:e_9_1},[3,16];case 11:return _e.trys.push([11,,14,15]),models_1_1&&!models_1_1.done&&(_b=models_1.return)?[4,_b.call(models_1)]:[3,13];case 12:_e.sent(),_e.label=13;case 13:return[3,15];case 14:if(e_9)throw e_9.error;return[7];case 15:return[7];case 16:return[3,33];case 17:_e.trys.push([17,24,25,30]),models_2=__asyncValues(models),_e.label=18;case 18:return[4,models_2.next()];case 19:return(models_2_1=_e.sent()).done?[3,23]:(model=models_2_1.value,[4,this.db.transaction(storeName,"readwrite").objectStore(storeName).index(index).getAll(model.id)]);case 20:return childrenArray=_e.sent(),[4,this.deleteTraverse(this.schema.namespaces[nameSpace].relationships[modelName].relationTypes,childrenArray,modelName,nameSpace,deleteQueue)];case 21:_e.sent(),_e.label=22;case 22:return[3,18];case 23:return[3,30];case 24:return e_10_1=_e.sent(),e_10={error:e_10_1},[3,30];case 25:return _e.trys.push([25,,28,29]),models_2_1&&!models_2_1.done&&(_c=models_2.return)?[4,_c.call(models_2)]:[3,27];case 26:_e.sent(),_e.label=27;case 27:return[3,29];case 28:if(e_10)throw e_10.error;return[7];case 29:return[7];case 30:case 31:return[3,33];case 32:return Object(util.f)(relationType),[3,33];case 33:return[3,1];case 34:return[3,41];case 35:return e_8_1=_e.sent(),e_8={error:e_8_1},[3,41];case 36:return _e.trys.push([36,,39,40]),relations_2_1&&!relations_2_1.done&&(_a=relations_2.return)?[4,_a.call(relations_2)]:[3,38];case 37:_e.sent(),_e.label=38;case 38:return[3,40];case 39:if(e_8)throw e_8.error;return[7];case 40:return[7];case 41:return deleteQueue.push({storeName:this.getStorename(nameSpace,srcModel),items:models.map((function(record){return _this.modelInstanceCreator(_this.getModelConstructorByModelName(nameSpace,srcModel),record)}))}),[2]}}))}))},IndexedDBAdapter.prototype.clear=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.checkPrivate()];case 1:return _a.sent(),this.db.close(),[4,deleteDB(this.dbName)];case 2:return _a.sent(),this.db=void 0,this.initPromise=void 0,[2]}}))}))},IndexedDBAdapter.prototype.batchSave=function(modelConstructor,items){return __awaiter(this,void 0,void 0,(function(){var result,storeName,txn,store,_loop_1,this_1,items_2,items_2_1,item,e_11_1,e_11,_a;return __generator(this,(function(_b){switch(_b.label){case 0:return 0===items.length?[2,[]]:[4,this.checkPrivate()];case 1:_b.sent(),result=[],storeName=this.getStorenameForModel(modelConstructor),txn=this.db.transaction(storeName,"readwrite"),store=txn.store,_loop_1=function(item){var connectedModels,id,_deleted,key,instance;return __generator(this,(function(_a){switch(_a.label){case 0:return connectedModels=Object(util.x)(modelConstructor.name,this_1.modelInstanceCreator(modelConstructor,item),this_1.schema.namespaces[this_1.namespaceResolver(modelConstructor)],this_1.modelInstanceCreator,this_1.getModelConstructorByModelName),id=item.id,_deleted=item._deleted,[4,store.index("byId").getKey(id)];case 1:return key=_a.sent(),_deleted?[3,3]:(instance=connectedModels.find((function(_a){return _a.instance.id===id})).instance,result.push([instance,key?types.c.UPDATE:types.c.INSERT]),[4,store.put(instance,key)]);case 2:return _a.sent(),[3,5];case 3:return result.push([item,types.c.DELETE]),key?[4,store.delete(key)]:[3,5];case 4:_a.sent(),_a.label=5;case 5:return[2]}}))},this_1=this,_b.label=2;case 2:_b.trys.push([2,7,8,9]),items_2=__values(items),items_2_1=items_2.next(),_b.label=3;case 3:return items_2_1.done?[3,6]:(item=items_2_1.value,[5,_loop_1(item)]);case 4:_b.sent(),_b.label=5;case 5:return items_2_1=items_2.next(),[3,3];case 6:return[3,9];case 7:return e_11_1=_b.sent(),e_11={error:e_11_1},[3,9];case 8:try{items_2_1&&!items_2_1.done&&(_a=items_2.return)&&_a.call(items_2)}finally{if(e_11)throw e_11.error}return[7];case 9:return[4,txn.done];case 10:return _b.sent(),[2,result]}}))}))},IndexedDBAdapter}();__webpack_exports__.default=new IndexedDBAdapter_IndexedDBAdapter},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"fromUtf8",(function(){return es_fromUtf8})),__webpack_require__.d(__webpack_exports__,"toUtf8",(function(){return es_toUtf8}));var es_fromUtf8=function(input){return"function"==typeof TextEncoder?function(input){return(new TextEncoder).encode(input)}(input):function(input){for(var bytes=[],i=0,len=input.length;i<len;i++){var value=input.charCodeAt(i);if(value<128)bytes.push(value);else if(value<2048)bytes.push(value>>6|192,63&value|128);else if(i+1<input.length&&55296==(64512&value)&&56320==(64512&input.charCodeAt(i+1))){var surrogatePair=65536+((1023&value)<<10)+(1023&input.charCodeAt(++i));bytes.push(surrogatePair>>18|240,surrogatePair>>12&63|128,surrogatePair>>6&63|128,63&surrogatePair|128)}else bytes.push(value>>12|224,value>>6&63|128,63&value|128)}return Uint8Array.from(bytes)}(input)},es_toUtf8=function(input){return"function"==typeof TextDecoder?function(input){return new TextDecoder("utf-8").decode(input)}(input):function(input){for(var decoded="",i=0,len=input.length;i<len;i++){var byte=input[i];if(byte<128)decoded+=String.fromCharCode(byte);else if(192<=byte&&byte<224){var nextByte=input[++i];decoded+=String.fromCharCode((31&byte)<<6|63&nextByte)}else if(240<=byte&&byte<365){var encoded="%"+[byte,input[++i],input[++i],input[++i]].map((function(byteValue){return byteValue.toString(16)})).join("%");decoded+=decodeURIComponent(encoded)}else decoded+=String.fromCharCode((15&byte)<<12|(63&input[++i])<<6|63&input[++i])}return decoded}(input)}},,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return NonRetryableError})),__webpack_require__.d(__webpack_exports__,"b",(function(){return jitteredExponentialRetry}));var extendStatics,_Logger_ConsoleLogger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(84),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},logger=new _Logger_ConsoleLogger__WEBPACK_IMPORTED_MODULE_0__.a("Util"),NonRetryableError=function(_super){function NonRetryableError(message){var _this=_super.call(this,message)||this;return _this.nonRetryable=!0,_this}return __extends(NonRetryableError,_super),NonRetryableError}(Error);function retry(functionToRetry,args,delayFn,attempt){return void 0===attempt&&(attempt=1),__awaiter(this,void 0,void 0,(function(){var err_1,retryIn_1;return __generator(this,(function(_a){switch(_a.label){case 0:if("function"!=typeof functionToRetry)throw Error("functionToRetry must be a function");logger.debug(functionToRetry.name+" attempt #"+attempt+" with this vars: "+JSON.stringify(args)),_a.label=1;case 1:return _a.trys.push([1,3,,8]),[4,functionToRetry.apply(void 0,__spread(args))];case 2:return[2,_a.sent()];case 3:if(err_1=_a.sent(),logger.debug("error on "+functionToRetry.name,err_1),(obj=err_1)&&obj.nonRetryable)throw logger.debug(functionToRetry.name+" non retryable error",err_1),err_1;return retryIn_1=delayFn(attempt,args,err_1),logger.debug(functionToRetry.name+" retrying in "+retryIn_1+" ms"),!1===retryIn_1?[3,6]:[4,new Promise((function(res){return setTimeout(res,retryIn_1)}))];case 4:return _a.sent(),[4,retry(functionToRetry,args,delayFn,attempt+1)];case 5:return[2,_a.sent()];case 6:throw err_1;case 7:return[3,8];case 8:return[2]}var obj}))}))}var jitteredExponentialRetry=function(functionToRetry,args,maxDelayMs){return void 0===maxDelayMs&&(maxDelayMs=3e5),retry(functionToRetry,args,function(maxDelayMs){return function(attempt){var delay=100*Math.pow(2,attempt)+100*Math.random();return!(delay>maxDelayMs)&&delay}}(maxDelayMs))}}]);
//# sourceMappingURL=kushki.min.js.map